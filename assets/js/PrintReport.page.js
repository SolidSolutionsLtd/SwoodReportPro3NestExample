import{u as x,g as w,j as t,f as L,L as E,B as c,h as R,i as S,r,k as B,l as C,m as N,n as T,o as $}from"../main.C1tpC0x_.js";const A={display:"none","@media print":{display:"block",pageBreakAfter:"always"}},M=({page:e})=>{const n=x(),s=w(e.resource,n);if(s)return s.map((i,u)=>t.jsxs(L.Fragment,{children:[t.jsx(E,{keyValue:i.key,page:e}),u<s.length-1&&t.jsx(c,{className:"page-break",sx:A})]},u))},V={display:"none","@media print":{display:"block",pageBreakAfter:"always"}},D=({page:e,mainManager:n,onLoad:s})=>{if(r.useEffect(()=>{setTimeout(()=>{s()},50)},[s]),e.type==="layout")return e.url.includes("/:")?t.jsx(M,{page:e}):C({page:e,asRoute:!1});if(e.type==="table")return N({page:e,mainManager:n,asRoute:!1});if(e.type==="loop")return T({page:e,asRoute:!1});if(e.type==="summary")return $({page:e,asRoute:!1})},F=({onLoad:e})=>(r.useEffect(()=>{e()},[e]),null),z=()=>{var m,g,y,h;const{settings:e}=R(),n=x(),[s]=S(),i=Number((m=s.get("profile"))!=null?m:0),f=((g=s.get("auto-print"))!=null?g:"true")!=="false",j=e.print.options[i].group.id,o=(h=(y=e.print.groups.find(a=>a.id===j))==null?void 0:y.pages)!=null?h:[],[p,P]=r.useState(0),d=r.useCallback(()=>{P(a=>a+1)},[]);return r.useEffect(()=>{f&&p===o.length&&setTimeout(()=>{window.print()},50)},[p,o.length,f]),r.useEffect(()=>{const a=()=>{window.history.back()};return window.onafterprint=a,()=>{window.onafterprint=null}},[]),t.jsx(t.Fragment,{children:o.map((a,l)=>{const k=e.pages.find(b=>b.id===a.id);return k?t.jsxs(c,{children:[t.jsx(r.Suspense,{fallback:t.jsx(B,{size:24}),children:t.jsx(D,{page:k,mainManager:n,onLoad:d})}),l<o.length-1&&t.jsx(c,{className:"page-break",sx:V})]},"".concat(a,"-").concat(l)):t.jsx(F,{onLoad:d},"missing-".concat(l))})})};export{z as default};
