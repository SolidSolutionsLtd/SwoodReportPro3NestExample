import{u as j,g as B,j as t,h as C,L as E,B as c,i as R,k as N,r,l as z,m as h,n as I,o as T,p as $,q as A}from"./main.DNR_O0SE.js";const M={display:"none","@media print":{display:"block",pageBreakAfter:"always"}},V=({page:e})=>{const n=j(),a=B(e.resource,n);if(a)return a.map((i,l)=>t.jsxs(C.Fragment,{children:[t.jsx(E,{keyValue:i.key,page:e}),l<a.length-1&&t.jsx(c,{className:"page-break",sx:M})]},l))},D={display:"none","@media print":{display:"block",pageBreakAfter:"always"}},F=({page:e,mainManager:n,onLoad:a})=>{if(r.useEffect(()=>{setTimeout(()=>{a()},50)},[a]),e.type==="layout")return e.url.includes("/:")?t.jsx(V,{page:e}):I({page:e,asRoute:!1});if(e.type==="table")return T({page:e,mainManager:n,asRoute:!1});if(e.type==="loop")return $({page:e,asRoute:!1});if(e.type==="summary")return A({page:e,asRoute:!1})},q=({onLoad:e})=>(r.useEffect(()=>{e()},[e]),null),v=()=>{var m,g,y,x;const{settings:e}=R(),n=j(),[a]=N(),i=Number((m=a.get("profile"))!=null?m:0),d=((g=a.get("auto-print"))!=null?g:"true")!=="false",b=e.print.options[i].group.id,o=(x=(y=e.print.groups.find(s=>s.id===b))==null?void 0:y.pages)!=null?x:[],[p,P]=r.useState(0),[w,L]=r.useState(!0),f=r.useCallback(()=>{P(s=>s+1)},[]);return r.useEffect(()=>{d&&p===o.length&&setTimeout(()=>{L(!1),window.print()},50)},[p,o.length,d]),r.useEffect(()=>{const s=()=>window.history.back();return window.onafterprint=s,()=>{window.onafterprint=null}},[]),t.jsxs(t.Fragment,{children:[t.jsx(z,{className:"no-print",open:w,sx:{zIndex:s=>s.zIndex.modal+1,color:"#fff",backgroundColor:s=>s.palette.background.default},children:t.jsx(h,{size:60})}),o.map((s,u)=>{const k=e.pages.find(S=>S.id===s.id);return k?t.jsxs(c,{children:[t.jsx(r.Suspense,{fallback:t.jsx(h,{size:24}),children:t.jsx(F,{page:k,mainManager:n,onLoad:f})}),u<o.length-1&&t.jsx(c,{className:"page-break",sx:D})]},"".concat(s,"-").concat(u)):t.jsx(q,{onLoad:f},"missing-".concat(u))})]})};export{v as default};
