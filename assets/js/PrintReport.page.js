import{P as j,Z as B,j as t,_ as C,$ as E,B as c,a0 as R,a1 as N,r,a2 as $,a3 as h,a4 as z,a5 as I,a6 as T,a7 as A}from"./main.BbgSNyns.js";const M={display:"none","@media print":{display:"block",pageBreakAfter:"always"}},V=({page:e})=>{const n=j(),a=B(e.resource,n);if(a)return a.map((i,l)=>t.jsxs(C.Fragment,{children:[t.jsx(E,{keyValue:i.key,page:e}),l<a.length-1&&t.jsx(c,{className:"page-break",sx:M})]},l))},D={display:"none","@media print":{display:"block",pageBreakAfter:"always"}},F=({page:e,mainManager:n,onLoad:a})=>{if(r.useEffect(()=>{setTimeout(()=>{a()},50)},[a]),e.type==="layout")return e.url.includes("/:")?t.jsx(V,{page:e}):z({page:e,asRoute:!1});if(e.type==="table")return I({page:e,mainManager:n,asRoute:!1});if(e.type==="loop")return T({page:e,asRoute:!1});if(e.type==="summary")return A({page:e,asRoute:!1})},W=({onLoad:e})=>(r.useEffect(()=>{e()},[e]),null),_=()=>{var m,g,y,x;const{settings:e}=R(),n=j(),[a]=N(),i=Number((m=a.get("profile"))!=null?m:0),d=((g=a.get("auto-print"))!=null?g:"true")!=="false",b=e.print.options[i].group.id,o=(x=(y=e.print.groups.find(s=>s.id===b))==null?void 0:y.pages)!=null?x:[],[f,P]=r.useState(0),[w,L]=r.useState(!0),p=r.useCallback(()=>{P(s=>s+1)},[]);return r.useEffect(()=>{d&&f===o.length&&setTimeout(()=>{L(!1),window.print()},50)},[f,o.length,d]),r.useEffect(()=>{const s=()=>window.history.back();return window.onafterprint=s,()=>{window.onafterprint=null}},[]),t.jsxs(t.Fragment,{children:[t.jsx($,{className:"no-print",open:w,sx:{zIndex:s=>s.zIndex.modal+1,color:"#fff",backgroundColor:s=>s.palette.background.default},children:t.jsx(h,{size:60})}),o.map((s,u)=>{const k=e.pages.find(S=>S.id===s.id);return k?t.jsxs(c,{children:[t.jsx(r.Suspense,{fallback:t.jsx(h,{size:24}),children:t.jsx(F,{page:k,mainManager:n,onLoad:p})}),u<o.length-1&&t.jsx(c,{className:"page-break",sx:D})]},"".concat(s,"-").concat(u)):t.jsx(W,{onLoad:p},"missing-".concat(u))})]})};export{_ as default};
