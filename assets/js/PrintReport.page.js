import{u as k,g as w,j as t,c as C,L as E,B as c,d as L,e as S,r,C as B,f as R,h as N,i as T}from"../main.Nnz1qe81.js";const $={display:"none","@media print":{display:"block",pageBreakAfter:"always"}},A=({page:e})=>{const n=k(),s=w(e.resource,n);if(s)return s.map((o,u)=>t.jsxs(C.Fragment,{children:[t.jsx(E,{keyValue:o.key,page:e}),u<s.length-1&&t.jsx(c,{className:"page-break",sx:$})]},u))},M={display:"none","@media print":{display:"block",pageBreakAfter:"always"}},V=({page:e,mainManager:n,onLoad:s})=>{if(r.useEffect(()=>{setTimeout(()=>{s()},50)},[s]),e.type==="layout")return e.url.includes("/:")?t.jsx(A,{page:e}):R({page:e,asRoute:!1});if(e.type==="table")return N({page:e,mainManager:n,asRoute:!1});if(e.type==="summary")return T({page:e,asRoute:!1})},D=({onLoad:e})=>(r.useEffect(()=>{e()},[e]),null),I=()=>{var m,g,y,h;const{settings:e}=L(),n=k(),[s]=S(),o=Number((m=s.get("profile"))!=null?m:0),f=((g=s.get("auto-print"))!=null?g:"true")!=="false",j=e.print.profiles[o].group.id,i=(h=(y=e.print.groups.find(a=>a.id===j))==null?void 0:y.pages)!=null?h:[],[p,P]=r.useState(0),d=r.useCallback(()=>{P(a=>a+1)},[]);return r.useEffect(()=>{f&&p===i.length&&setTimeout(()=>{window.print()},50)},[p,i.length,f]),r.useEffect(()=>{const a=()=>{window.history.back()};return window.onafterprint=a,()=>{window.onafterprint=null}},[]),t.jsx(t.Fragment,{children:i.map((a,l)=>{const x=e.pages.find(b=>b.id===a.id);return x?t.jsxs(c,{children:[t.jsx(r.Suspense,{fallback:t.jsx(B,{size:24}),children:t.jsx(V,{page:x,mainManager:n,onLoad:d})}),l<i.length-1&&t.jsx(c,{className:"page-break",sx:M})]},"".concat(a,"-").concat(l)):t.jsx(D,{onLoad:d},"missing-".concat(l))})})};export{I as default};
