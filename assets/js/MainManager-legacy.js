!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var s=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=s){var a,n,i,r,o=[],u=!0,l=!1;try{if(i=(s=s.call(t)).next,0===e){if(Object(s)!==s)return;u=!1}else for(;!(u=(a=i.call(s)).done)&&(o.push(a.value),o.length!==e);u=!0);}catch(t){l=!0,n=t}finally{try{if(!u&&null!=s.return&&(r=s.return(),Object(r)!==r))return}finally{if(l)throw n}}return o}}(t,e)||n(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){var s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!s){if(Array.isArray(t)||(s=n(t))||e&&t&&"number"==typeof t.length){s&&(t=s);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,u=!1;return{s:function(){s=s.call(t)},n:function(){var t=s.next();return o=t.done,t},e:function(t){u=!0,r=t},f:function(){try{o||null==s.return||s.return()}finally{if(u)throw r}}}}function n(t,e){if(t){if("string"==typeof t)return i(t,e);var s={}.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,a=Array(e);s<e;s++)a[s]=t[s];return a}function r(e,s,a){return s=u(s),function(e,s){if(s&&("object"==t(s)||"function"==typeof s))return s;if(void 0!==s)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(e,o()?Reflect.construct(s,a||[],u(e).constructor):s.apply(e,a))}function o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(o=function(){return!!t})()}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function c(t,e){for(var s=0;s<e.length;s++){var a=e[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,g(a.key),a)}}function f(t,e,s){return e&&c(t.prototype,e),s&&c(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function g(e){var s=function(e,s){if("object"!=t(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,s||"default");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===s?String:Number)(e)}(e,"string");return"symbol"==t(s)?s:s+""}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}System.register(["../main-legacy.CNvodt3q.js"],(function(n,i){"use strict";var o,u,h;return{setters:[function(t){o=t.v,u=t.V,h=t.w}],execute:function(){var i,c,g,v,m,y,p,b,k,P,w,M,D,T,A,I,B,S,C,O,R,N,E,V,L,j,W,_,Q,F,U,G,H=function(t){return t.replace(/\\/g,"/")},x=f((function t(e,s,a,n,i,r,o,u,l,h){d(this,t),this.name=e,this.type=s,this.docType=a,this.processingStatus=n,this.absoluteURI=i,this.relativeURI=r,this.hidden=o,this.storageType=u,this.exists=l,this.objType=h}));(i=x).fromDocumentRaw=function(t){var e,s="",a=o.getInstance(),n="file:///"+H(a.reportPath)+"/",r=t.absoluteURI;return r.startsWith(n)&&(s=r.slice(n.length)),new i(null!==(e=t.documentName)&&void 0!==e?e:"",t.type,t.docType,t.processingStatus,t.absoluteURI,s,t.hidden,t.storageType,t.exists,t.objType)},i.fromDocumentsRaw=function(t){var e,s=[],n=a(null!=t?t:[]);try{for(n.s();!(e=n.n()).done;){var r=e.value;s.push(i.fromDocumentRaw(r))}}catch(o){n.e(o)}finally{n.f()}return s};var q=function(){function t(e,s,a,n,i,r,o,u,l,h,c,f,g){d(this,t),this.key=e,this.messages=s,this.variables=a,this.serialNumbers=n,this.heritedVariables=i,this.typedObjectVariables=r,this.refPrograms=o,this.refParts=u,this.refPartsQuantities=l,this.refAssemblies=h,this.refAssembliesQuantities=c,this.documents=f,this.swcps=g,this.programs=[],this.parts=[],this.assemblies=[]}return f(t,null,[{key:"fromAssemblyRaw",value:function(e,s){var a=u.parseVariables(e.variables,s),n=u.parseVariablesArrayToObject(e.serialNumbers.variables),i=u.parseTypedVariablesArray(e.heritedVariables),r=u.parseVariableGroupToRecord(e.typedObjectVariables),o=h.parseVariablesArrayToObject(e.swcps),l=e.partsRefs.map((function(t){return{key:t.ID,quantity:t.count}})),c=e.assembliesRefs.map((function(t){return{key:t.ID,quantity:t.count}}));return new t(e.ID,e.messages,a,n,i,r,e.programs,e.parts,l,e.assemblies,c,x.fromDocumentsRaw(e.documents),o)}}])}(),Z=function(){return f((function t(){d(this,t),this.instances=new Map}),[{key:"addInstance",value:function(t,e){this.instances.set(t,e)}},{key:"get",value:function(t){return this.instances.get(t)}},{key:"getAll",value:function(){return Array.from(this.instances.values())}},{key:"getTotalInstances",value:function(){return this.instances.size}}])}(),Y=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t.assemblies);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.ID,q.fromAssemblyRaw(n,t.variableDefinitions.assemblies))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Z),z=f((function t(e,s){d(this,t),this.articles=e,this.cost=s}));(c=z).fromToolRaw=function(t){return new c(t.articles,t.cost)};var X=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){return this.addInstance("0",z.fromToolRaw(t.costing)),this}}])}(Z),K=function(){function t(e,s,a,n,i,r,o){d(this,t),this.key=e,this.panel=s,this.refMaterial=a,this.variables=n,this.serialNumbers=i,this.documents=r,this.messages=o}return f(t,null,[{key:"fromEdgebandRaw",value:function(e,s){var a=u.parseVariables(e.variables,s),n=u.parseVariablesArrayToObject(e.serialNumbers.variables);return new t(e.ID,e.panel,e.edgebandMaterial,a,n,x.fromDocumentsRaw(e.documents),e.messages)}}])}(),$=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t.edgebands);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.ID,K.fromEdgebandRaw(n,t.variableDefinitions.edgebands))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Z),J=function(){function t(e,s){d(this,t),this.key=e,this.variables=s}return f(t,null,[{key:"fromEdgebandMaterialRaw",value:function(e,s){var a=u.parseVariables(e.variables,s);return new t(e.ID,a)}}])}(),tt=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s,n=a(null!==(e=t.edgebandMaterials)&&void 0!==e?e:[]);try{for(n.s();!(s=n.n()).done;){var i=s.value;this.addInstance(i.ID,J.fromEdgebandMaterialRaw(i,t.variableDefinitions.edgebandMaterials))}}catch(r){n.e(r)}finally{n.f()}return this}}])}(Z),et=f((function t(e,s,a,n,i){d(this,t),this.key=e,this.messages=s,this.documents=a,this.variables=n,this.serialNumbers=i}));(g=et).fromMaterialRaw=function(t,e){var s=u.parseVariables(t.variables,e),a=u.parseVariablesArrayToObject(t.serialNumbers.variables);return new g(t.ID,t.messages,x.fromDocumentsRaw(t.documents),s,a)};var st=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s,n=a(null!==(e=t.materials)&&void 0!==e?e:[]);try{for(n.s();!(s=n.n()).done;){var i=s.value;this.addInstance(i.ID,et.fromMaterialRaw(i,t.variableDefinitions.materials))}}catch(r){n.e(r)}finally{n.f()}return this}}])}(Z),at=function(){function t(e,s,a,n,i,r,o,u,l,h,c){d(this,t),this.key=e,this.name=s,this.refPart=a,this.refPrograms=n,this.refStocks=i,this.refProcessZones=r,this.refEdgebands=o,this.messages=u,this.documents=l,this.variables=h,this.serialNumbers=c,this.programs=[],this.stocks=[],this.edgebands=[]}return f(t,null,[{key:"fromPanelRaw",value:function(e,s){var a=u.parseVariables(e.variables,s),n=u.parseVariablesArrayToObject(e.serialNumbers.variables);return new t(e.ID,e.name,e.ID,e.programs,e.stocks,e.processZones,e.edgebands,e.messages,x.fromDocumentsRaw(e.documents),a,n)}}])}(),nt=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s,n=a(null!==(e=t.panels)&&void 0!==e?e:[]);try{for(n.s();!(s=n.n()).done;){var i=s.value;this.addInstance(i.ID,at.fromPanelRaw(i,t.variableDefinitions.panels))}}catch(r){n.e(r)}finally{n.f()}return this}}])}(Z),it=function(){function t(e,s,a,n){d(this,t),this.key=e,this.messages=s,this.documents=a,this.variables=n}return f(t,null,[{key:"fromPanelProcessRaw",value:function(e,s){var a=u.parseVariables(e.variables,s);return new t(e.ID,e.messages,x.fromDocumentsRaw(e.documents),a)}}])}(),rt=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){if(!t.panelProcesses)return this;var e,s=a(t.panelProcesses);try{for(s.s();!(e=s.n()).done;){var n,i=e.value;this.addInstance(i.ID,it.fromPanelProcessRaw(i,null!==(n=t.variableDefinitions.panelProcesses)&&void 0!==n?n:[]))}}catch(r){s.e(r)}finally{s.f()}return this}}])}(Z),ot=function(){function t(e,s,a,n,i,r){d(this,t),this.key=e,this.refPanel=s,this.refPanelProcess=a,this.messages=n,this.documents=i,this.variables=r}return f(t,null,[{key:"fromProcessZoneRaw",value:function(e,s){var a=u.parseVariables(e.variables,s);return new t(e.ID,e.panel,e.panelProcess,e.messages,x.fromDocumentsRaw(e.documents),a)}}])}(),ut=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){if(!t.processZones)return this;var e,s=a(t.processZones);try{for(s.s();!(e=s.n()).done;){var n,i=e.value;this.addInstance(i.ID,ot.fromProcessZoneRaw(i,null!==(n=t.variableDefinitions.processZones)&&void 0!==n?n:[]))}}catch(r){s.e(r)}finally{s.f()}return this}}])}(Z),lt=function(){function t(e,s,a,n,i,r,o,u,l,h,c,f){d(this,t),this.key=e,this.refPrograms=s,this.refStocks=a,this.refPanel=n,this.bodyCount=i,this.messages=r,this.variables=o,this.serialNumbers=u,this.heritedVariables=l,this.typedObjectVariables=h,this.documents=c,this.swcps=f,this.programs=[],this.stocks=[]}return f(t,null,[{key:"fromPartRaw",value:function(e,s){var a=u.parseVariables(e.variables,s),n=u.parseVariablesArrayToObject(e.serialNumbers.variables),i=u.parseTypedVariablesArray(e.heritedVariables),r=u.parseVariableGroupToRecord(e.typedObjectVariables),o=h.parseVariablesArrayToObject(e.swcps);return new t(e.ID,e.programs,e.stocks,e.panel,e.bodyCount,e.messages,a,n,i,r,x.fromDocumentsRaw(e.documents),o)}}])}(),ht=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t.parts);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.ID,lt.fromPartRaw(n,t.variableDefinitions.parts))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Z),ct=function(){function t(e,s,a,n,i,r,o,u){d(this,t),this.key=e,this.refTools=s,this.refProgramParts=a,this.refBoard=n,this.messages=i,this.documents=r,this.variables=o,this.serialNumbers=u,this.tools=[]}return f(t,null,[{key:"fromProgramRaw",value:function(e,s){var a=u.parseVariables(e.variables,s),n=u.parseVariablesArrayToObject(e.serialNumbers.variables);return new t(e.ID,e.tools,e.programParts,e.nestingBoard,e.messages,x.fromDocumentsRaw(e.documents),a,n)}}])}(),ft=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t.programs);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.ID,ct.fromProgramRaw(n,t.variableDefinitions.programs))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Z),gt=function(){function t(e,s,a,n,i,r,o){d(this,t),this.key=e,this.part=s,this.program=a,this.documents=n,this.messages=i,this.variables=r,this.serialNumbers=o}return f(t,null,[{key:"fromProgramPartRaw",value:function(e,s){var a=u.parseVariables(e.variables,s),n=u.parseVariablesArrayToObject(e.serialNumbers.variables);return new t(e.ID,e.part,e.program,x.fromDocumentsRaw(e.documents),e.messages,a,n)}}])}(),dt=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t.programParts);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.ID,gt.fromProgramPartRaw(n,t.variableDefinitions.programParts))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Z),vt=function(){function t(e,s,a,n,i,r,o,u,l,h,c,f,g){d(this,t),this.key=e,this.swoodVersion=s,this.schemaVersion=a,this.name=n,this.projectPath=i,this.reportPath=r,this.timestamp=o,this.createdBy=u,this.documents=l,this.messages=h,this.variables=c,this.serialNumbers=f,this.swcps=g}return f(t,null,[{key:"fromProjectRaw",value:function(e,s){var a=u.parseVariables(e.variables,s),n=u.parseVariablesArrayToObject(e.serialNumbers.variables),i=h.parseVariablesArrayToObject(e.swcps);return new t(e.reportGUID,e.reportVersion,e.schemaVersion,e.projectName,e.projectPath,e.reportPath,e.createdDate,e.createdBy,x.fromDocumentsRaw(e.documents),e.messages,a,n,i)}}])}(),mt=function(){function t(e,s,a,n){d(this,t),this.key=e,this.messages=s,this.documents=a,this.variables=n}return f(t,null,[{key:"fromSpindleRaw",value:function(e,s){var a=u.parseVariables(e.variables,s);return new t(e.ID,e.messages,x.fromDocumentsRaw(e.documents),a)}}])}(),yt=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){if(!t.spindles)return this;var e,s=a(t.spindles);try{for(s.s();!(e=s.n()).done;){var n,i=e.value;this.addInstance(i.ID,mt.fromSpindleRaw(i,null!==(n=t.variableDefinitions.spindles)&&void 0!==n?n:[]))}}catch(r){s.e(r)}finally{s.f()}return this}}])}(Z),pt=f((function t(e,s,a,n,i,r){d(this,t),this.key=e,this.refPart=s,this.refMaterial=a,this.messages=n,this.documents=i,this.variables=r}));(v=pt).fromStockRaw=function(t,e){var s=u.parseVariables(t.variables,e);return new v(t.ID,t.part,t.material,t.messages,x.fromDocumentsRaw(t.documents),s)};var bt=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t.stocks);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.ID,pt.fromStockRaw(n,t.variableDefinitions.stocks))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Z),kt=function(){function t(e,s,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];d(this,t),this.key=e,this.variables=s,this.messages=a,this.documents=n,this.refSpindles=i}return f(t,null,[{key:"fromToolRaw",value:function(e,s){var a,n=u.parseVariables(e.variables,s);return new t(e.ID,n,e.messages,x.fromDocumentsRaw(e.documents),null!==(a=e.spindles)&&void 0!==a?a:[])}}])}(),Pt=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s,n=a(null!==(e=t.tools)&&void 0!==e?e:[]);try{for(n.s();!(s=n.n()).done;){var i=s.value;this.addInstance(i.ID,kt.fromToolRaw(i,t.variableDefinitions.tools))}}catch(r){n.e(r)}finally{n.f()}return this}}])}(Z),wt=function(){return f((function t(){d(this,t),this.instances=new Map}),[{key:"addInstance",value:function(t,e){var s=this.instances.get(t);s?s.push(e):this.instances.set(t,[e])}},{key:"addInstances",value:function(t,e,s){var n,i=a(t.typedObjects);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=e.get(r);if(o){var u,l=a(o.variables.TOTYPES.split(";"));try{for(l.s();!(u=l.n()).done;){var h=u.value;this.addInstance(h,o)}}catch(v){l.e(v)}finally{l.f()}}var c=s.get(r);if(c){var f,g=a(c.variables.TOTYPES.split(";"));try{for(g.s();!(f=g.n()).done;){var d=f.value;this.addInstance(d,c)}}catch(v){g.e(v)}finally{g.f()}}}}catch(v){i.e(v)}finally{i.f()}return this}},{key:"getInstancesById",value:function(t){return this.instances.get(t)||null}},{key:"getAll",value:function(){return this.instances}}])}(),Mt=function(){function t(e,s,a,n,i){d(this,t),this.key=e,this.name=s,this.material=a,this.thickness=n,this.stock=i}return f(t,null,[{key:"fromPatternRaw",value:function(e,s,a){return new t(e,e,s.material,s.thickness,a)}}])}(),Dt=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=1,n=a(null!=t?t:[]);try{for(n.s();!(e=n.n()).done;){var i,r,o=e.value,u=a(null!==(i=o.stocks)&&void 0!==i?i:[]);try{for(u.s();!(r=u.n()).done;){var l=r.value,h="Pattern ".concat(s.toString());this.addInstance(h,Mt.fromPatternRaw(h,o,l)),s++}}catch(c){u.e(c)}finally{u.f()}}}catch(c){n.e(c)}finally{n.f()}return this}}])}(Z),Tt=function(){function t(e,s){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};d(this,t),this.type=e,this.key=s,this.variables=a,this.articleVariables=n}return f(t,null,[{key:"fromArticlesRaw",value:function(e){return new t("article",e.name,{},{name:e.name,count:e.count,quantity:e.quantity,quantityUnit:e.quantityUnit,cost:e.cost,costUnit:e.unitCost})}},{key:"fromBoardMaterialRaw",value:function(e,s){var a=u.parseVariables(e.variables,s);return new t("material",e.ID,a)}}])}(),At=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s,n,i=a(null!==(e=t.costing.articles)&&void 0!==e?e:[]);try{for(i.s();!(n=i.n()).done;){var r=n.value;"CUTTINGPATTERN_BOARD"===r.type&&this.addInstance(r.name,Tt.fromArticlesRaw(r))}}catch(h){i.e(h)}finally{i.f()}var o,u=a(null!==(s=t.boards)&&void 0!==s?s:[]);try{for(u.s();!(o=u.n()).done;){var l=o.value;this.addInstance(l.ID,Tt.fromBoardMaterialRaw(l,t.variableDefinitions.boards))}}catch(h){u.e(h)}finally{u.f()}return this}}])}(Z);function It(t,e){return e.split(".").reduce((function(t,e){return null==t?void 0:t[e]}),t)}var Bt=function(t,e){t.sort((function(t,s){var n,i=a(e);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=r.field,u=r.order,l=void 0===u?"asc":u,h=It(t,o),c=It(s,o);if(null==h&&null!=c)return"asc"===l?1:-1;if(null!=h&&null==c)return"asc"===l?-1:1;if(null!=h||null!=c){if(h<c)return"asc"===l?-1:1;if(h>c)return"asc"===l?1:-1}}}catch(f){i.e(f)}finally{i.f()}return 0}));var s,n=a(t);try{for(n.s();!(s=n.n()).done;){var i=s.value;Array.isArray(i.children)&&Bt(i.children,e)}}catch(r){n.e(r)}finally{n.f()}},St=function(){function t(e,s,a,n,i,r,o,u,l,h,c,f,g,v,m,y,p,b,k,P,w,M,D,T,A,I,B,S,C,O,R,N,E,V,L){d(this,t),this.database=e,this.projectData=s,this.panelsData=a,this.stocksData=n,this.partsData=i,this.assembliesData=r,this.edgebandsData=o,this.edgebandMaterialsData=u,this.materialsData=l,this.boardMaterialsData=h,this.programsData=c,this.programPartsData=f,this.toolsData=g,this.spindlesData=v,this.costsData=m,this.typedObjectsData=y,this.panelProcessesData=p,this.processZonesData=b,this.patternsData=k,this.panelDataManager=P,this.stockDataManager=w,this.partDataManager=M,this.assemblyDataManager=D,this.edgebandDataManager=T,this.edgebandMaterialDataManager=A,this.materialDataManager=I,this.boardMaterialDataManager=B,this.programDataManager=S,this.programPartDataManager=C,this.toolDataManager=O,this.spindleDataManager=R,this.costDataManager=N,this.panelProcessDataManager=E,this.processZoneDataManager=V,this.patternDataManager=L}return f(t,[{key:"relateData",value:function(){return this.assignDataToEdgebands(),this.assignDataToStocks(),this.assignDataToPanels(),this.assignDataToAssemblies(),this.assignSubAssemblies(),this.assignDataToParts(),this.sortData(),this}},{key:"sortData",value:function(){Bt(this.panelsData,[{field:"variables.PAN_T",order:"desc"},{field:"material.name",order:"asc"},{field:"variables.PAN_L",order:"desc"},{field:"variables.PAN_W",order:"desc"},{field:"name",order:"asc"},{field:"quantity",order:"asc"}]);Bt(this.stocksData,[{field:"variables.ST_T",order:"desc"},{field:"refMaterial",order:"asc"},{field:"variables.ST_L",order:"desc"},{field:"variables.ST_W",order:"desc"},{field:"name",order:"asc"},{field:"quantity",order:"asc"}])}},{key:"assignDataToEdgebands",value:function(){var t,e=a(this.edgebandDataManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.edgebandMaterialDataManager.get(s.refMaterial)}}catch(n){e.e(n)}finally{e.f()}}},{key:"assignDataToStocks",value:function(){var t,e=a(this.stockDataManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value,n=this.materialDataManager.get(s.refMaterial);s.material=n}}catch(i){e.e(i)}finally{e.f()}}},{key:"assignDataToPanels",value:function(){var t,e=a(this.panelDataManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value,i=a(n.refStocks);try{for(i.s();!(s=i.n()).done;){var r=s.value,o=this.stockDataManager.get(r);o&&(n.stocks.push(o),"CORE"===o.variables.ST_N&&(n.material=o.material))}}catch(y){i.e(y)}finally{i.f()}var u,l=a(n.refEdgebands);try{for(l.s();!(u=l.n()).done;){var h=u.value,c=this.edgebandDataManager.get(h);c&&n.edgebands.push(c)}}catch(y){l.e(y)}finally{l.f()}var f,g=a(n.refPrograms);try{for(g.s();!(f=g.n()).done;){var d=f.value,v=this.programDataManager.get(d);v&&n.programs.push(v)}}catch(y){g.e(y)}finally{g.f()}var m=this.partDataManager.get(n.key);m&&(n.part=m)}}catch(y){e.e(y)}finally{e.f()}}},{key:"assignDataToAssemblies",value:function(){var t,e=a(this.assemblyDataManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value,i=a(n.refParts);try{for(i.s();!(s=i.n()).done;){var r,o=s.value,u=this.partDataManager.get(o);u&&(null===(r=n.parts)||void 0===r||r.push(u))}}catch(d){i.e(d)}finally{i.f()}var l,h=a(n.refPrograms);try{for(h.s();!(l=h.n()).done;){var c,f=l.value,g=this.programDataManager.get(f);g&&(null===(c=n.programs)||void 0===c||c.push(g))}}catch(d){h.e(d)}finally{h.f()}}}catch(d){e.e(d)}finally{e.f()}}},{key:"assignSubAssemblies",value:function(){var t,e=a(this.assemblyDataManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value,i=a(n.refAssemblies);try{for(i.s();!(s=i.n()).done;){var r,o=s.value,u=this.assemblyDataManager.get(o);u&&(null===(r=n.assemblies)||void 0===r||r.push(u))}}catch(l){i.e(l)}finally{i.f()}}}catch(l){e.e(l)}finally{e.f()}}},{key:"assignDataToParts",value:function(){var t,e=a(this.partDataManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value;n.panel=n.refPanel?this.panelDataManager.get(n.refPanel):void 0;var i,r=a(null!==(s=n.refStocks)&&void 0!==s?s:[]);try{for(r.s();!(i=r.n()).done;){var o=i.value,u=this.stockDataManager.get(o);u&&n.stocks.push(u)}}catch(g){r.e(g)}finally{r.f()}var l,h=a(n.refPrograms);try{for(h.s();!(l=h.n()).done;){var c=l.value,f=this.programDataManager.get(c);f&&(n.programs.push(f),f.part=n)}}catch(g){h.e(g)}finally{h.f()}}}catch(g){e.e(g)}finally{e.f()}}}],[{key:"createFromRawData",value:function(e){var s=vt.fromProjectRaw(e,e.variableDefinitions.report),a=(new nt).addInstances(e),n=(new bt).addInstances(e),i=(new ht).addInstances(e),r=(new Y).addInstances(e),o=(new $).addInstances(e),u=(new tt).addInstances(e),l=(new st).addInstances(e),h=(new At).addInstances(e),c=(new ft).addInstances(e),f=(new dt).addInstances(e),g=(new Pt).addInstances(e),d=(new yt).addInstances(e),v=(new X).addInstances(e),m=(new wt).addInstances(e,i,r),y=(new rt).addInstances(e),p=(new ut).addInstances(e),b=(new Dt).addInstances(e.cuttingPattern);return new t(e,s,a.getAll(),n.getAll(),i.getAll(),r.getAll(),o.getAll(),u.getAll(),l.getAll(),h.getAll(),c.getAll(),f.getAll(),g.getAll(),d.getAll(),v.getAll(),m.getAll(),y.getAll(),p.getAll(),b.getAll(),a,n,i,r,o,u,l,h,c,f,g,d,v,y,p,b).relateData()}}])}(),Ct=function(){return f((function t(){d(this,t),this.instances=new Map}),[{key:"add",value:function(t,e){this.instances.set(t,e)}},{key:"get",value:function(t){return this.instances.get(t)}},{key:"getAll",value:function(){return Array.from(this.instances.values())}},{key:"getTotalInstances",value:function(){return this.instances.size}}])}(),Ot=function(){return f((function t(e,s,a,n,i,r,o,u,l,h,c,f,g,v,m,y,p,b,k){d(this,t),this.key=e,this.messages=s,this.variables=a,this.heritedVariables=n,this.typedObjectVariables=i,this.refPrograms=r,this.refParts=o,this.refPartsQuantities=u,this.refAssemblies=l,this.refAssembliesQuantities=h,this.documents=c,this.swcps=f,this.name=g,this.description=v,this.configuration=m,this.quantity=y,this.height=p,this.width=b,this.depth=k,this.resource="assemblies",this.programs=[],this.parts=[],this.assemblies=[]}),null,[{key:"fromAssemblyBusiness",value:function(t){return t.createViewModel()}}])}(),Rt=f((function t(e,s,a,n,i,r,o,u){d(this,t),this.type=e,this.typeDescription=s,this.description=a,this.message=n,this.messageType=i,this.item=r,this.category=o,this.url=u,this.resource="messages"}));(m=Rt).fromMessageRaw=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return new m(t.type,t.typeDesc,t.desc,t.message,t.messageType,e,s,a)},m.fromMessagesRaw=function(t){var e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=[],o=a(null!=t?t:[]);try{for(o.s();!(e=o.n()).done;){var u=e.value;r.push(m.fromMessageRaw(u,s,n,i))}}catch(l){o.e(l)}finally{o.f()}return r};var Nt=function(){return f((function t(e){d(this,t),this.documents=e}),[{key:"getImages",value:function(){var t,e,s,n,i={},r=a(null!==(t=this.documents)&&void 0!==t?t:[]);try{for(r.s();!(e=r.n()).done;){var u=e.value;if("IMAGE"===u.docType){var l=u.absoluteURI,h=o.getInstance(),c="file:///"+H(h.reportPath),f=(n=c,(s=l).startsWith(n)?s.slice(n.length):s);null!==u.name&&(i[u.name]=f)}}}catch(g){r.e(g)}finally{r.f()}return i}}])}(),Et=function(){return f((function t(e,s,a,n,i,r,u,l,h,c,f,g){var v=this;d(this,t),this.key=e,this.messages=s,this.variables=a,this.heritedVariables=n,this.typedObjectVariables=i,this.refPrograms=r,this.refParts=u,this.refPartsQuantities=l,this.refAssemblies=h,this.refAssembliesQuantities=c,this.documents=f,this.swcps=g,this.programs=[],this.parts=[],this.assemblies=[],this.getName=function(){return v.variables.NAME},this.getDescription=function(){return v.variables.DESC},this.getConfiguration=function(){return v.variables.CONF},this.getQuantity=function(){var t;return(null!==(t=v.variables.NB)&&void 0!==t?t:0)*o.getInstance().projectQuantity},this.getHeight=function(){var t;return null!==(t=v.variables.Height)&&void 0!==t?t:0},this.getWidth=function(){var t;return null!==(t=v.variables.Width)&&void 0!==t?t:0},this.getDepth=function(){var t;return null!==(t=v.variables.Depth)&&void 0!==t?t:0},this.getImages=function(){return new Nt(v.documents).getImages()}}),[{key:"createViewModel",value:function(){return new Ot(this.key,Rt.fromMessagesRaw(this.messages,this.getName(),"Assembly"),this.variables,this.heritedVariables,this.typedObjectVariables,this.refPrograms,this.refParts,this.refPartsQuantities,this.refAssemblies,this.refAssembliesQuantities,this.documents,this.swcps,this.getName(),this.getDescription(),this.getConfiguration(),this.getQuantity(),this.getHeight(),this.getWidth(),this.getDepth())}}])}();(y=Et).fromAssemblyData=function(t){return new y(t.key,t.messages,t.variables,t.heritedVariables,t.typedObjectVariables,t.refPrograms,t.refParts,t.refPartsQuantities,t.refAssemblies,t.refAssembliesQuantities,t.documents,t.swcps)};var Vt=function(t){function e(){var t;return d(this,e),(t=r(this,e,arguments)).addPrograms=function(e){var s,n=a(t.getAll());try{for(n.s();!(s=n.n()).done;){var i,r=s.value,o=a(r.refPrograms);try{for(o.s();!(i=o.n()).done;){var u=i.value,l=e.get(u);l&&r.programs.push(l)}}catch(h){o.e(h)}finally{o.f()}}}catch(h){n.e(h)}finally{n.f()}},t.addParts=function(e){var s,n=a(t.getAll());try{for(n.s();!(s=n.n()).done;){var i,r=s.value,o=a(r.refParts);try{for(o.s();!(i=o.n()).done;){var u=i.value,l=e.get(u);l&&r.parts.push(l)}}catch(h){o.e(h)}finally{o.f()}}}catch(h){n.e(h)}finally{n.f()}},t.addAssemblies=function(e){var s,n=a(t.getAll());try{for(n.s();!(s=n.n()).done;){var i,r=s.value,o=a(r.refAssemblies);try{for(o.s();!(i=o.n()).done;){var u=i.value,l=e.get(u);l&&r.assemblies.push(l)}}catch(h){o.e(h)}finally{o.f()}}}catch(h){n.e(h)}finally{n.f()}},t}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,Et.fromAssemblyData(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ct),Lt=function(){return f((function t(e,s,a,n,i,r,o,u,l,h,c,f,g,v,m,y,p,b,k,P,w){d(this,t),this.key=e,this.swoodVersion=s,this.schemaVersion=a,this.name=n,this.projectPath=i,this.reportPath=r,this.timestamp=o,this.date=u,this.time=l,this.createdBy=h,this.documents=c,this.swcps=f,this.messages=g,this.variables=v,this.isDesign=m,this.isCam=y,this.isNesting=p,this.isUsingOffcuts=b,this.configuration=k,this.reportVersion=P,this.swoodDataDirectory=w,this.resource="project"}),null,[{key:"fromProjectBusiness",value:function(t){return t.createViewModel()}}])}(),jt=function(){return f((function t(e){d(this,t),this.documents=e}),[{key:"getDocuments",value:function(){var t,e,s={},n=a(null!==(t=this.documents)&&void 0!==t?t:[]);try{for(n.s();!(e=n.n()).done;){var i=e.value;null!==i.name&&""!==i.name&&(s[i.name]=i)}}catch(r){n.e(r)}finally{n.f()}return s}}])}(),Wt=function(){return f((function t(e){d(this,t),this.documents=e}),[{key:"getPDFs",value:function(){var t,e,s={},n=a(null!==(t=this.documents)&&void 0!==t?t:[]);try{for(n.s();!(e=n.n()).done;){var i=e.value;"DRAWING2PDF"===i.docType&&i.exists&&null!==i.name&&(s[i.name]=i.relativeURI)}}catch(r){n.e(r)}finally{n.f()}return s}}])}(),_t=function(){return f((function t(e,s,a,n,i,r,o,u,l,h,c,f){var g=this;d(this,t),this.key=e,this.swoodVersion=s,this.schemaVersion=a,this.name=n,this.projectPath=i,this.reportPath=r,this.timestamp=o,this.createdBy=u,this.documents=l,this.messages=h,this.variables=c,this.swcps=f,this.getTime=function(){var t=new Date(g.timestamp),e=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),a=String(t.getSeconds()).padStart(2,"0");return"".concat(e,":").concat(s,":").concat(a)},this.getDate=function(){var t=new Date(g.timestamp),e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");return"".concat(a,"/").concat(s,"/").concat(e)},this.getIsDesign=function(){var t;return null!==(t=g.variables.REPORT_ISUSINGDESIGN)&&void 0!==t&&t},this.getIsCam=function(){var t;return null!==(t=g.variables.REPORT_ISUSINGCAM)&&void 0!==t&&t},this.getIsNesting=function(){var t;return null!==(t=g.variables.REPORT_ISNESTINGPROJECT)&&void 0!==t&&t},this.getIsUsingOffcuts=function(){var t;return null!==(t=g.variables.MODULE_PROGRAMOFFCUTS_ISACTIVE)&&void 0!==t&&t},this.getImages=function(){return new Nt(g.documents).getImages()},this.getPDFs=function(){return new Wt(g.documents).getPDFs()},this.getDocuments=function(){return new jt(g.documents).getDocuments()},this.getConfiguration=function(){var t,e;return null!==(t=null===(e=g.component)||void 0===e?void 0:e.getConfiguration())&&void 0!==t?t:""},this.getReportVersion=function(){var t;return null!==(t=g.variables.ReportVersion)&&void 0!==t?t:"0.0.0"},this.getSwoodDataDirectory=function(){var t;return null!==(t=g.variables.SwoodDataDirectory)&&void 0!==t?t:""}}),[{key:"createViewModel",value:function(){return new Lt(this.key,this.swoodVersion,this.schemaVersion,this.name,this.projectPath,this.reportPath,this.timestamp,this.getDate(),this.getTime(),this.createdBy,this.getDocuments(),this.swcps,Rt.fromMessagesRaw(this.messages,this.name,"Project"),this.variables,this.getIsDesign(),this.getIsCam(),this.getIsNesting(),this.getIsUsingOffcuts(),this.getConfiguration(),this.getReportVersion(),this.getSwoodDataDirectory())}}])}();(p=_t).fromProjectData=function(t){return new p(t.key,t.swoodVersion,t.schemaVersion,t.name,t.projectPath,t.reportPath,t.timestamp,t.createdBy,t.documents,t.messages,t.variables,t.swcps)};var Qt=f((function t(e,s){d(this,t),this.articles=e,this.cost=s}));(b=Qt).fromCostData=function(t){return new b(t.articles,t.cost)};var Ft=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){return this.add("0",Qt.fromCostData(t[0])),this}}])}(Ct),Ut=function(){return f((function t(e,s,a,n,i,r,o,u,l,h,c,f,g,v,m,y,p,b){d(this,t),this.key=e,this.refPanel=s,this.refMaterial=a,this.variables=n,this.documents=i,this.messages=r,this.name=o,this.quantity=u,this.length=l,this.lengthStock=h,this.width=c,this.thickness=f,this.order=g,this.overLength=v,this.position=m,this.isCurved=y,this.isPaint=p,this.cost=b,this.resource="edgebands"}),null,[{key:"fromEdgebandBusiness",value:function(t){return t.createViewModel()}}])}();(k=Ut).createCombinedEdgeband=function(t,e,s){return new k(t.key,t.refPanel,t.refMaterial,t.variables,t.documents,t.messages,e,s,t.length,t.lengthStock,t.width,t.thickness,t.order,t.overLength,t.position,t.isCurved,t.isPaint,t.cost)};var Gt=function(){return f((function t(e,s,a,n,i,r){var o=this;d(this,t),this.key=e,this.refPanel=s,this.refMaterial=a,this.variables=n,this.documents=i,this.messages=r,this.getDocuments=function(){return new jt(o.documents).getDocuments()},this.getName=function(){var t;return null!==(t=o.variables.EB_N)&&void 0!==t?t:""},this.getQuantity=function(){var t,e;return null!==(t=null===(e=o.panel)||void 0===e?void 0:e.getQuantity())&&void 0!==t?t:0},this.getLength=function(){var t;return null!==(t=o.variables.EB_L)&&void 0!==t?t:0},this.getLengthStock=function(){var t;return null!==(t=o.variables.EB_LSTOCK)&&void 0!==t?t:0},this.getWidth=function(){var t,e;return null!==(t=null===(e=o.panel)||void 0===e?void 0:e.getThickness())&&void 0!==t?t:0},this.getThickness=function(){var t,e;return null!==(t=null===(e=o.material)||void 0===e?void 0:e.getThickness())&&void 0!==t?t:0},this.getOrder=function(){var t;return null!==(t=o.variables.EB_BO)&&void 0!==t?t:0},this.getOverLength=function(){var t;return null!==(t=o.variables.EB_OVERLENGTH)&&void 0!==t?t:0},this.getPosition=function(){return o.variables.EB_STOCKPOSITION},this.getIsCurved=function(){var t;return null!==(t=o.variables.EB_ISCURVED)&&void 0!==t&&t},this.getIsPaint=function(){var t,e;return null!==(t=null===(e=o.material)||void 0===e?void 0:e.getIsPaint())&&void 0!==t&&t},this.getMaterialQuantity=function(){return(o.getLength()+o.getOverLength())/1e3*o.getQuantity()},this.getCost=function(){var t,e;return o.getMaterialQuantity()*(null!==(t=null===(e=o.material)||void 0===e?void 0:e.getCostUnit())&&void 0!==t?t:0)},this.updateMaterialQuantity=function(){o.material?o.material.quantity+=(o.getLength()+o.getOverLength())/1e3*o.getQuantity():console.warn("unable to update quantity – material or panel missing for ".concat(o.getName()))}}),[{key:"createViewModel",value:function(){return this.updateMaterialQuantity(),new Ut(this.key,this.refPanel,this.refMaterial,this.variables,this.getDocuments(),Rt.fromMessagesRaw(this.messages,this.getName(),"Edgeband"),this.getName(),this.getQuantity(),this.getLength(),this.getLengthStock(),this.getWidth(),this.getThickness(),this.getOrder(),this.getOverLength(),this.getPosition(),this.getIsCurved(),this.getIsPaint(),this.getCost())}}])}();(P=Gt).fromEdgebandData=function(t){return new P(t.key,t.panel,t.refMaterial,t.variables,t.documents,t.messages)};var Ht=function(t){function e(){var t;return d(this,e),(t=r(this,e,arguments)).addMaterials=function(e){var s,n=a(t.getAll());try{for(n.s();!(s=n.n()).done;){var i=s.value,r=e.get(i.refMaterial);r&&(i.material=r)}}catch(o){n.e(o)}finally{n.f()}},t}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,Gt.fromEdgebandData(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ct),xt=function(){return f((function t(e,s,a,n,i,r,o,u,l,h,c,f,g,v){d(this,t),this.key=e,this.variables=s,this.name=a,this.description=n,this.reference=i,this.thickness=r,this.extension=o,this.color=u,this.isPaint=l,this.cost=h,this.costUnit=c,this.costType=f,this.quantity=g,this.unitOfMeasure=v,this.resource="edgebandMaterials"}),null,[{key:"fromEdgebandMaterialBusiness",value:function(t){return t.createViewModel()}}])}(),qt=f((function t(e,s,a){var n=this;d(this,t),this.key=e,this.variables=s,this.quantity=a,this.createViewModel=function(){return new xt(n.key,n.variables,n.getName(),n.getDescription(),n.getReference(),n.getThickness(),n.getExtension(),n.getColor(),n.getIsPaint(),n.getCost(),n.getCostUnit(),2,n.quantity,"m")},this.getName=function(){var t;return null!==(t=n.variables.EBMAT_C)&&void 0!==t?t:""},this.getDescription=function(){var t;return null!==(t=n.variables.EBMAT_D)&&void 0!==t?t:""},this.getReference=function(){var t;return null!==(t=n.variables.EBMAT_REF)&&void 0!==t?t:""},this.getCostUnit=function(){return n.variables.EBMAT_UCOST},this.getThickness=function(){var t;return null!==(t=n.variables.EBMAT_T)&&void 0!==t?t:0},this.getIsPaint=function(){var t;return null!==(t=n.variables.PAINT)&&void 0!==t&&t},this.getExtension=function(){var t;return null!==(t=n.variables.EXTENSION)&&void 0!==t?t:0},this.getCost=function(){return n.quantity*n.getCostUnit()},this.getColor=function(){if(void 0!==n.variables.EBMAT_CO&&"0"!==n.variables.EBMAT_CO)return n.argbToRgba(n.variables.EBMAT_CO)},this.argbToRgba=function(t){if(8!==(t=t.replace(/^#/,"")).length)return console.warn("invalid ARGB hex format: ".concat(t)),"#000000ff";var e=parseInt(t.slice(0,2),16)/255,s=parseInt(t.slice(2,4),16),a=parseInt(t.slice(4,6),16),n=parseInt(t.slice(6,8),16);return"rgba(".concat(s,", ").concat(a,", ").concat(n,", ").concat(e.toFixed(2),")")}}));(w=qt).fromEdgebandMaterialData=function(t){return new w(t.key,t.variables,0)};var Zt=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,qt.fromEdgebandMaterialData(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ct),Yt=function(){return f((function t(){d(this,t),this.instances=new Map}),[{key:"addInstance",value:function(t,e){this.instances.set(t,e)}},{key:"get",value:function(t){return this.instances.get(t)}},{key:"getAll",value:function(){return Array.from(this.instances.values())}},{key:"getTotalInstances",value:function(){return this.instances.size}},{key:"groupBy",value:function(t){var e,s=new Map,n=a(this.getAll());try{for(n.s();!(e=n.n()).done;){var i=e.value,r=this.getNestedValue(t.toString(),i);s.has(r)||s.set(r,[]),s.get(r).push(i)}}catch(o){n.e(o)}finally{n.f()}return s}},{key:"mergeDescription",value:function(t,e){return t?e?t.includes(e)?t:"".concat(t," | ").concat(e):t:e}},{key:"getNestedValue",value:function(t,e){return t.split(".").reduce((function(t,e){return null==t?void 0:t[e]}),e)}}])}(),zt=f((function t(e,s,a,n,i,r,o,u,l,h,c,f,g,v,m,y,p,b,k,P,w){d(this,t),this.key=e,this.messages=s,this.refParts=a,this.refPartsQuantities=n,this.refAssemblies=i,this.refAssembliesQuantities=r,this.documents=o,this.swcps=u,this.variables=l,this.heritedVariables=h,this.typedObjectVariables=c,this.name=f,this.configuration=g,this.quantity=v,this.height=m,this.width=y,this.depth=p,this.url=b,this.cost=k,this.costPanels=P,this.costHardware=w,this.resource="frames",this.parts=[],this.assemblies=[],this.panels=[],this.programs=[],this.hardware=[],this.weldments=[]}));zt.fromFrameBusiness=function(t){return t.createViewModel()};var Xt=function(){return f((function t(e,s,n,i,r,u,l,h,c,f,g){var v=this;d(this,t),this.key=e,this.messages=s,this.heritedVariables=n,this.typedObjectVariables=i,this.refParts=r,this.refPartsQuantities=u,this.refAssemblies=l,this.refAssembliesQuantities=h,this.documents=c,this.swcps=f,this.variables=g,this.parts=[],this.assemblies=[],this.panels=[],this.programs=[],this.hardware=[],this.weldments=[],this.getName=function(){return v.variables.NAME},this.getConfiguration=function(){return v.variables.CONF},this.getQuantity=function(){var t;return(null!==(t=v.variables.NB)&&void 0!==t?t:0)*o.getInstance().projectQuantity},this.getHeight=function(){var t;return null!==(t=v.swcps.Height)&&void 0!==t?t:0},this.getWidth=function(){var t;return null!==(t=v.swcps.Width)&&void 0!==t?t:0},this.getDepth=function(){var t;return null!==(t=v.swcps.Depth)&&void 0!==t?t:0},this.getImages=function(){return new Nt(v.documents).getImages()},this.getPDFs=function(){return new Wt(v.documents).getPDFs()},this.getDocuments=function(){return new jt(v.documents).getDocuments()},this.getUrl=function(){return"frames/".concat(v.key)},this.getCostPanels=function(){var t,e=0,s=a(v.panels);try{for(s.s();!(t=s.n()).done;){e+=t.value.getCost()}}catch(n){s.e(n)}finally{s.f()}return e},this.getCostHardware=function(){var t,e=0,s=a(v.hardware);try{for(s.s();!(t=s.n()).done;){e+=t.value.getCost()}}catch(n){s.e(n)}finally{s.f()}return e},this.getCost=function(){return v.getCostPanels()+v.getCostHardware()},this.getIsExcluded=function(){return null!=v.typedObjectVariables&&"EXCLUDED"in v.typedObjectVariables}}),[{key:"createViewModel",value:function(){return new zt(this.key,Rt.fromMessagesRaw(this.messages,this.getName(),"Frame",this.getUrl()),this.refParts,this.refPartsQuantities,this.refAssemblies,this.refAssembliesQuantities,this.getDocuments(),this.swcps,this.variables,this.heritedVariables,this.typedObjectVariables,this.getName(),this.getConfiguration(),this.getQuantity(),this.getHeight(),this.getWidth(),this.getDepth(),this.getUrl(),this.getCost(),this.getCostPanels(),this.getCostHardware())}}])}();(M=Xt).fromAssemblyPartBusiness=function(t){return new M(t.key,t.messages,t.heritedVariables,t.typedObjectVariables,"refParts"in t?t.refParts:[],"refPartsQuantities"in t?t.refPartsQuantities:[],"refAssemblies"in t?t.refAssemblies:[],"refAssembliesQuantities"in t?t.refAssembliesQuantities:[],t.documents,t.swcps,t.variables)};var Kt=function(t){function e(){var t;return d(this,e),(t=r(this,e,arguments)).FrameTypedObjectName="FRAME",t}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s,n=a(null!==(e=t.getInstancesByName(this.FrameTypedObjectName))&&void 0!==e?e:[]);try{for(n.s();!(s=n.n()).done;){var i=s.value;this.addInstance(i.key,Xt.fromAssemblyPartBusiness(i))}}catch(r){n.e(r)}finally{n.f()}return this}}])}(Yt),$t=f((function t(e,s,a,n,i,r,o,u,l,h,c,f,g,v,m,y){d(this,t),this.key=e,this.messages=s,this.heritedVariables=a,this.typedObjectVariables=n,this.refPrograms=i,this.refParts=r,this.refAssemblies=o,this.documents=u,this.swcps=l,this.variables=h,this.name=c,this.configuration=f,this.quantity=g,this.length=v,this.cost=m,this.costUnit=y,this.resource="hardware",this.parts=[],this.assemblies=[],this.refQuantities=[],this.frames=[]}));$t.fromHardwareBusiness=function(t){return t.createViewModel()};var Jt=f((function t(e,s,a,n,i,r,o,u,l,h){var c=this;d(this,t),this.key=e,this.messages=s,this.heritedVariables=a,this.typedObjectVariables=n,this.refPrograms=i,this.refParts=r,this.refAssemblies=o,this.documents=u,this.swcps=l,this.variables=h,this.parts=[],this.assemblies=[],this.createViewModel=function(){return new $t(c.key,Rt.fromMessagesRaw(c.messages,c.getName(),"Hardware"),c.heritedVariables,c.typedObjectVariables,c.refPrograms,c.refParts,c.refAssemblies,c.getDocuments(),c.swcps,c.variables,c.getName(),c.getConfiguration(),c.getQuantity(),c.getLength(),c.getCost(),c.getCostUnit())},this.getName=function(){return c.variables.NAME},this.getConfiguration=function(){return c.variables.CONF},this.getQuantity=function(){return c.variables.NB},this.getLength=function(){return c.variables.Length},this.getImages=function(){return new Nt(c.documents).getImages()},this.getCost=function(){return c.getCostUnit()*c.getQuantity()},this.getCostUnit=function(){var t;return null!==(t=c.swcps.Cost)&&void 0!==t?t:0},this.getDocuments=function(){return new jt(c.documents).getDocuments()},this.getIsExcluded=function(){return null!=c.typedObjectVariables&&"EXCLUDED"in c.typedObjectVariables}}));(D=Jt).fromAssemblyPartBusiness=function(t){return new D(t.key,t.messages,t.heritedVariables,t.typedObjectVariables,t.refPrograms,"refParts"in t?t.refParts:[],"refAssemblies"in t?t.refAssemblies:[],t.documents,t.swcps,t.variables)};var te=function(t){function e(){var t;return d(this,e),(t=r(this,e,arguments)).HardwareTypedObjectName="HARDWARE",t}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s,n=a(null!==(e=t.getInstancesByName(this.HardwareTypedObjectName))&&void 0!==e?e:[]);try{for(n.s();!(s=n.n()).done;){var i=s.value;this.addInstance(i.key,Jt.fromAssemblyPartBusiness(i))}}catch(r){n.e(r)}finally{n.f()}return this}}])}(Yt),ee=f((function t(e,s,a,n,i,r,o,u,l,h,c,f,g){d(this,t),this.key=e,this.refPanel=s,this.refMaterial=a,this.messages=n,this.documents=i,this.variables=r,this.name=o,this.description=u,this.quantity=l,this.length=h,this.width=c,this.thickness=f,this.cost=g,this.resource="laminates"}));(T=ee).fromLaminateBusiness=function(t){return t.createViewModel()},T.createCombinedLaminate=function(t,e,s){return new T(t.key,t.refPanel,t.refMaterial,t.messages,t.documents,t.variables,e,t.description,s,t.length,t.width,t.thickness,t.cost)};var se=function(){return f((function t(e,s,a,n,i,r,o){var u=this;d(this,t),this.key=e,this.refPanel=s,this.refMaterial=a,this.messages=n,this.documents=i,this.variables=r,this.settings=o,this.createViewModel=function(){return u.updateMaterialQuantity(),new ee(u.key,u.refPanel,u.refMaterial,Rt.fromMessagesRaw(u.messages,u.getName(),"Laminate"),u.getDocuments(),u.variables,u.getName(),u.getDescription(),u.getQuantity(),u.getLength(),u.getWidth(),u.getThickness(),u.getCost())},this.getDocuments=function(){return new jt(u.documents).getDocuments()},this.getName=function(){return u.variables.ST_N},this.getDescription=function(){return u.variables.ST_DESC},this.getQuantity=function(){var t,e;return null!==(t=null===(e=u.part)||void 0===e?void 0:e.getQuantity())&&void 0!==t?t:0},this.getSwoodLength=function(){return u.variables.ST_L},this.getSwoodWidth=function(){return u.variables.ST_W},this.getThickness=function(){return u.variables.ST_T},this.getHasGrain=function(){var t,e;return null!==(t=null===(e=u.material)||void 0===e?void 0:e.getHasGrain())&&void 0!==t&&t},this.getLength=function(){return u.getLongest(u.getSwoodLength(),u.getSwoodWidth(),u.getHasGrain()).length},this.getWidth=function(){return u.getLongest(u.getSwoodLength(),u.getSwoodWidth(),u.getHasGrain()).width},this.getVolume=function(){return u.getLength()*u.getWidth()*u.getThickness()/1e9},this.getSurface=function(){return u.getLength()*u.getWidth()/1e6},this.getMaterialQuantity=function(){if(!u.material)return console.warn("material not defined for ".concat(u.getName())),0;switch(u.material.getCostType()){case 0:return u.getVolume();case 1:return u.getSurface();case 2:return u.getLength()/1e3;case 3:return u.getQuantity();default:return 0}},this.getCost=function(){var t,e;return u.getMaterialQuantity()*(null!==(t=null===(e=u.material)||void 0===e?void 0:e.getCostUnit())&&void 0!==t?t:0)},this.updateMaterialQuantity=function(){var t=u.getName();if(u.panel)if(u.material){if(!u.panel.isNested&&!u.panel.isPatterned){var e=u.getMaterialQuantity()*u.getQuantity();u.material.quantity+=e}}else console.warn("unable to update quantity – material missing for ".concat(t));else console.warn("Panel not defined for ".concat(t))}}),[{key:"getLongest",value:function(t,e,s){return this.settings.LengthLongestEdge?s?{length:t,width:e}:e>t?{width:e,length:t}:{length:t,width:e}:{length:t,width:e}}}])}();(A=se).fromStockData=function(t,e){return new A(t.key,t.refPart,t.refMaterial,t.messages,t.documents,t.variables,e)};var ae=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t,e){var s,n=a(t);try{for(n.s();!(s=n.n()).done;){var i,r=s.value;1===(null===(i=r.material)||void 0===i?void 0:i.variables.MAT_TYPE)&&this.add(r.key,se.fromStockData(r,e))}}catch(o){n.e(o)}finally{n.f()}return this}}])}(Ct),ne=function(){return f((function t(e,s,a,n,i,r,o,u,l,h,c,f,g,v,m){d(this,t),this.key=e,this.messages=s,this.documents=a,this.variables=n,this.name=i,this.description=r,this.category=o,this.thickness=u,this.hasGrain=l,this.cost=h,this.costUnit=c,this.costType=f,this.quantity=g,this.type=v,this.unitOfMeasure=m,this.resource="materials"}),null,[{key:"fromMaterialBusiness",value:function(t){return t.createViewModel()}}])}(),ie=f((function t(e,s,a,n,i){var r=this;d(this,t),this.key=e,this.messages=s,this.documents=a,this.variables=n,this.quantity=i,this.createViewModel=function(){return new ne(r.key,Rt.fromMessagesRaw(r.messages,r.getName(),"Material"),r.getDocuments(),r.variables,r.getName(),r.getDescription(),r.getCategory(),r.getThickness(),r.getHasGrain(),r.getCost(),r.getCostUnit(),r.getCostType(),r.quantity,r.getType(),r.getUnitOfMeasure())},this.getDocuments=function(){return new jt(r.documents).getDocuments()},this.getName=function(){var t;return null!==(t=r.variables.MAT_NAME)&&void 0!==t?t:""},this.getDescription=function(){var t;return null!==(t=r.variables.MAT_DESC)&&void 0!==t?t:""},this.getCategory=function(){var t;return null!==(t=r.variables.CATEGORY)&&void 0!==t?t:""},this.getCostUnit=function(){var t;return null!==(t=r.variables.MAT_UCOST)&&void 0!==t?t:0},this.getCostType=function(){var t;return null!==(t=r.variables.MAT_COSTTYPE)&&void 0!==t?t:0},this.getHasGrain=function(){var t;return null!==(t=r.variables.MAT_WITHGRAIN)&&void 0!==t&&t},this.getThickness=function(){var t;return null!==(t=r.variables.MAT_T)&&void 0!==t?t:0},this.getBoardLength=function(){var t;return null!==(t=r.variables.BOARD_LENGTH)&&void 0!==t?t:0},this.getBoardWidth=function(){var t;return null!==(t=r.variables.BOARD_WIDTH)&&void 0!==t?t:0},this.getUnitOfMeasure=function(){switch(r.getCostType()){case 0:return"m³";case 1:return"m²";case 2:return"m";case 3:return"unit";default:return"unknown"}},this.getCost=function(){return r.quantity*r.getCostUnit()},this.getType=function(){var t;return null!==(t=r.variables.MAT_TYPE)&&void 0!==t?t:0},this.getIsWeldment=function(){var t;return null!==(t=r.variables.WELDMENT)&&void 0!==t&&t}}));(I=ie).fromMaterialData=function(t){return new I(t.key,t.messages,t.documents,t.variables,0)};var re=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,ie.fromMaterialData(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ct),oe=function(){return f((function t(e,s,a,n,i,r,o,u,l,h,c,f,g,v,m,y,p,b,k,P,w,M,D,T,A,I,B,S,C,O,R,N,E,V,L,j,W,_,Q,F,U,G,H,x,q,Z,Y,z,X,K,$){d(this,t),this.key=e,this.name=s,this.refPart=a,this.refPrograms=n,this.refStocks=i,this.refProcessZones=r,this.refEdgebands=o,this.messages=u,this.variables=l,this.heritedVariables=h,this.typedObjectVariables=c,this.serialNumbers=f,this.documents=g,this.swcps=v,this.configuration=m,this.quantity=y,this.length=p,this.width=b,this.thickness=k,this.lengthWithEdgeband=P,this.widthWithEdgeband=w,this.thicknessWithLaminate=M,this.lengthWithoutEdgeband=D,this.widthWithoutEdgeband=T,this.thicknessWithoutLaminate=A,this.lengthStock=I,this.widthStock=B,this.thicknessStock=S,this.hasGrain=C,this.hasEdgebands=O,this.hasLaminates=R,this.hasPrograms=N,this.hasProcessZones=E,this.isPatterned=V,this.isNested=L,this.angle=j,this.volume=W,this.boardLength=_,this.boardWidth=Q,this.cost=F,this.costUnit=U,this.costCore=G,this.costEdgebands=H,this.costLaminates=x,this.costPrograms=q,this.costProcessZones=Z,this.hasTopPrograms=Y,this.hasBottomPrograms=z,this.quantityTopPrograms=X,this.quantityBottomPrograms=K,this.settings=$,this.resource="panels",this.frames=[],this.stocks=[],this.layers=[],this.edgebands=[],this.laminates=[],this.programs=[],this.processZones=[],this.refQuantities=[]}),null,[{key:"fromPanelBusiness",value:function(t){return t.createViewModel()}}])}(),ue=function(){return f((function t(e,s,n,i,r,o,u,l,h,c,f,g){var v=this;d(this,t),this.key=e,this.name=s,this.refPart=n,this.refPrograms=i,this.refStocks=r,this.refProcessZones=o,this.refEdgebands=u,this.messages=l,this.documents=h,this.variables=c,this.serialNumbers=f,this.settings=g,this.programs=[],this.stocks=[],this.edgebands=[],this.laminates=[],this.processZones=[],this.isPatterned=!1,this.isNested=!1,this.getConfiguration=function(){var t,e;return null!==(t=null===(e=v.part)||void 0===e?void 0:e.getConfiguration())&&void 0!==t?t:""},this.getQuantity=function(){var t,e;return null!==(t=null===(e=v.part)||void 0===e?void 0:e.getQuantity())&&void 0!==t?t:0},this.getSwoodLength=function(){return v.variables.PAN_L},this.getSwoodWidth=function(){var t;return null!==(t=v.variables.PAN_W)&&void 0!==t?t:0},this.getSwoodThickness=function(){return v.variables.PAN_T},this.getSwoodLengthWithEdgeband=function(){return v.variables.PAN_LWEB},this.getSwoodWidthWithEdgeband=function(){return v.variables.PAN_WWEB},this.getSwoodThicknessWithLaminate=function(){return v.variables.PAN_TWL},this.getSwoodLengthWithoutEdgeband=function(){return v.variables.PAN_LWOEB},this.getSwoodWidthWithoutEdgeband=function(){return v.variables.PAN_WWOEB},this.getSwoodThicknessWithoutLaminate=function(){return v.variables.PAN_TWOL},this.getSwoodLengthStock=function(){return v.variables.PAN_STL},this.getSwoodWidthStock=function(){return v.variables.PAN_STW},this.getSwoodThicknessStock=function(){return v.variables.PAN_STT},this.getLength=function(){return v.getLongest(v.getSwoodLength(),v.getSwoodWidth(),v.getHasGrain()).length},this.getWidth=function(){return v.getLongest(v.getSwoodLength(),v.getSwoodWidth(),v.getHasGrain()).width},this.getThickness=function(){return v.getSwoodThickness()},this.getHasGrain=function(){return v.stocks.some((function(t){var e;return!0===(null===(e=t.material)||void 0===e?void 0:e.getHasGrain())}))},this.getHasEdgebands=function(){return v.edgebands.length>0},this.getHasLaminates=function(){return v.laminates.length>0},this.getHasPrograms=function(){return v.programs.length>0},this.getHasProcessZones=function(){return v.processZones.length>0},this.getAngleGrain=function(){var t;return null!==(t=v.getCoreStock())&&void 0!==t&&null!==(t=t.material)&&void 0!==t&&t.getHasGrain()?v.variables.PAN_ANGLEINPART+v.variables.PAN_GRAINANGLEINPART:null},this.getLengthWithEdgeband=function(){return v.getLongest(v.getSwoodLengthWithEdgeband(),v.getSwoodWidthWithEdgeband(),v.getHasGrain()).length},this.getWidthWithEdgeband=function(){return v.getLongest(v.getSwoodLengthWithEdgeband(),v.getSwoodLengthWithEdgeband(),v.getHasGrain()).width},this.getThicknessWithLaminate=function(){return v.getSwoodThicknessWithLaminate()},this.getLengthWithoutEdgeband=function(){return v.getLongest(v.getSwoodLengthWithoutEdgeband(),v.getSwoodWidthWithoutEdgeband(),v.getHasGrain()).length},this.getWidthWithoutEdgeband=function(){return v.getLongest(v.getSwoodLengthWithoutEdgeband(),v.getSwoodWidthWithoutEdgeband(),v.getHasGrain()).width},this.getThicknessWithoutLaminate=function(){return v.getSwoodThicknessWithoutLaminate()},this.getLengthStock=function(){return v.getLongest(v.getSwoodLengthStock(),v.getSwoodWidthStock(),v.getHasGrain()).length},this.getWidthStock=function(){return v.getLongest(v.getSwoodLengthStock(),v.getSwoodWidthStock(),v.getHasGrain()).width},this.getThicknessStock=function(){return v.getSwoodThicknessStock()},this.getVolume=function(){return v.getLength()*v.getWidth()*v.getThickness()/1e9},this.getSurface=function(){return v.getLength()*v.getWidth()/1e6},this.getImages=function(){return new Nt(v.documents).getImages()},this.getPDFs=function(){return new Wt(v.documents).getPDFs()},this.getDocuments=function(){return new jt(v.documents).getDocuments()},this.getSwcps=function(){var t,e;return null!==(t=null===(e=v.part)||void 0===e?void 0:e.swcps)&&void 0!==t?t:{}},this.getHeritedVariables=function(){var t,e;return null!==(t=null===(e=v.part)||void 0===e?void 0:e.heritedVariables)&&void 0!==t?t:{}},this.getTypedObjectVariables=function(){var t,e;return null!==(t=null===(e=v.part)||void 0===e?void 0:e.typedObjectVariables)&&void 0!==t?t:{}},this.getMaterialQuantity=function(){if(!v.material)return console.warn("material not defined for ".concat(v.name)),0;switch(v.material.getCostType()){case 0:return v.getVolume();case 1:return v.getSurface();case 2:return v.getLength()/1e3;case 3:return v.getQuantity();default:return 0}},this.getCost=function(){return v.getCostUnit()*v.getQuantity()},this.getCostUnit=function(){return v.getCostCore()+v.getCostEdgebands()+v.getCostLaminates()+v.getCostProcessZones()},this.getCostCore=function(){var t,e;return v.getMaterialQuantity()*(null!==(t=null===(e=v.material)||void 0===e?void 0:e.getCostUnit())&&void 0!==t?t:0)},this.getCostEdgebands=function(){var t,e=0,s=a(v.edgebands);try{for(s.s();!(t=s.n()).done;){e+=t.value.getCost()}}catch(n){s.e(n)}finally{s.f()}return e},this.getCostLaminates=function(){var t,e=0,s=a(v.laminates);try{for(s.s();!(t=s.n()).done;){e+=t.value.getCost()}}catch(n){s.e(n)}finally{s.f()}return e},this.getCostPrograms=function(){var t,e=0,s=a(v.programs);try{for(s.s();!(t=s.n()).done;){e+=t.value.getCost()}}catch(n){s.e(n)}finally{s.f()}return e},this.getCostProcessZone=function(t){if(!t.panelProcess)return console.warn("panelProcess not defined for ".concat(v.name)),0;var e=t.panelProcess.getCostUnit(),s=0,a=0;switch(t.getCostType()){case 0:a=e*(s=v.getVolume());break;case 1:a=e*(s=v.getSurface());break;case 2:a=e*(s=v.getLength()/1e3);break;case 3:a=e*(s=v.getQuantity());break;default:return 0}return t.panelProcess.quantity+=s,a},this.getCostProcessZones=function(){var t,e=0,s=a(v.processZones);try{for(s.s();!(t=s.n()).done;){var n=t.value;e+=v.getCostProcessZone(n)}}catch(i){s.e(i)}finally{s.f()}return e},this.getQuantityTopPrograms=function(){return v.programs.filter((function(t){return t.getIsTopProgram()})).length},this.getQuantityBottomPrograms=function(){return v.programs.filter((function(t){return t.getIsBottomProgram()})).length},this.getHasTopPrograms=function(){return v.programs.some((function(t){return t.getIsTopProgram()}))},this.getHasBottomPrograms=function(){return v.programs.some((function(t){return t.getIsBottomProgram()}))},this.getBoardLength=function(){var t,e;return null!==(t=null===(e=v.material)||void 0===e?void 0:e.getBoardLength())&&void 0!==t?t:0},this.getBoardWidth=function(){var t,e;return null!==(t=null===(e=v.material)||void 0===e?void 0:e.getBoardWidth())&&void 0!==t?t:0},this.getIsExcluded=function(){var t;return(null===(t=v.part)||void 0===t?void 0:t.variables.TOTYPES).split(";").includes("EXCLUDED")},this.updateMaterialQuantity=function(){if(v.material){if(!(v.isNested||v.isPatterned||v.getIsExcluded())){var t=v.getMaterialQuantity()*v.getQuantity();v.material.quantity+=t}}else console.warn("unable to update quantity – material missing for ".concat(v.name))}}),[{key:"createViewModel",value:function(){return this.updateMaterialQuantity(),new oe(this.key,this.name,this.refPart,this.refPrograms,this.refStocks,this.refProcessZones,this.refEdgebands,Rt.fromMessagesRaw(this.messages,this.name,"Panel"),this.variables,this.getHeritedVariables(),this.getTypedObjectVariables(),this.serialNumbers,this.getDocuments(),this.getSwcps(),this.getConfiguration(),this.getQuantity(),this.getLength(),this.getWidth(),this.getThickness(),this.getLengthWithEdgeband(),this.getWidthWithEdgeband(),this.getThicknessWithLaminate(),this.getLengthWithoutEdgeband(),this.getWidthWithoutEdgeband(),this.getThicknessWithoutLaminate(),this.getLengthStock(),this.getWidthStock(),this.getThicknessStock(),this.getHasGrain(),this.getHasEdgebands(),this.getHasLaminates(),this.getHasPrograms(),this.getHasProcessZones(),this.isPatterned,this.isNested,this.getAngleGrain(),this.getVolume(),this.getBoardLength(),this.getBoardWidth(),this.getCost(),this.getCostUnit(),this.getCostCore(),this.getCostEdgebands(),this.getCostLaminates(),this.getCostPrograms(),this.getCostProcessZones(),this.getHasTopPrograms(),this.getHasBottomPrograms(),this.getQuantityTopPrograms(),this.getQuantityBottomPrograms(),this.settings)}},{key:"getLongest",value:function(t,e,s){return this.settings.LengthLongestEdge?s?{length:t,width:e}:e>t?{width:e,length:t}:{length:t,width:e}:{length:t,width:e}}},{key:"getCoreStock",value:function(){var t,e=a(this.stocks);try{for(e.s();!(t=e.n()).done;){var s=t.value;if("CORE"===s.variables.ST_N)return s}}catch(n){e.e(n)}finally{e.f()}}}])}();(B=ue).fromPanelData=function(t,e){return new B(t.key,t.name,t.refPart,t.refPrograms,t.refStocks,t.refProcessZones,t.refEdgebands,t.messages,t.documents,t.variables,t.serialNumbers,e)};var le=function(t){function e(){var t;return d(this,e),(t=r(this,e,arguments)).addStocks=function(e){var s,n=a(t.getAll());try{for(n.s();!(s=n.n()).done;){var i,r=s.value,o=a(r.refStocks);try{for(o.s();!(i=o.n()).done;){var u=i.value,l=e.get(u);l&&(r.stocks.push(l),"CORE"===l.variables.ST_N&&(r.material=l.material))}}catch(h){o.e(h)}finally{o.f()}}}catch(h){n.e(h)}finally{n.f()}},t.addPrograms=function(e){var s,n=a(t.getAll());try{for(n.s();!(s=n.n()).done;){var i,r=s.value,o=a(r.refPrograms);try{for(o.s();!(i=o.n()).done;){var u=i.value,l=e.get(u);l&&(r.programs.push(l),l.panel=r)}}catch(h){o.e(h)}finally{o.f()}}}catch(h){n.e(h)}finally{n.f()}},t.addEdgebands=function(e){var s,n=a(t.getAll());try{for(n.s();!(s=n.n()).done;){var i,r=s.value,o=a(r.refEdgebands);try{for(o.s();!(i=o.n()).done;){var u=i.value,l=e.get(u);l&&(r.edgebands.push(l),l.panel=r)}}catch(h){o.e(h)}finally{o.f()}}}catch(h){n.e(h)}finally{n.f()}},t.addLaminates=function(e){var s,n=a(t.getAll());try{for(n.s();!(s=n.n()).done;){var i,r=s.value,o=a(r.refStocks);try{for(o.s();!(i=o.n()).done;){var u=i.value,l=e.get(u);l&&(r.laminates.push(l),l.panel=r)}}catch(h){o.e(h)}finally{o.f()}}}catch(h){n.e(h)}finally{n.f()}},t}return l(e,t),f(e,[{key:"addInstances",value:function(t,e){var s,n=a(t);try{for(n.s();!(s=n.n()).done;){var i=s.value;this.add(i.key,ue.fromPanelData(i,e))}}catch(r){n.e(r)}finally{n.f()}return this}}])}(Ct),he=function(){return f((function t(e,s,a,n,i,r,o,u,l,h,c,f,g,v,m,y,p){d(this,t),this.key=e,this.refPrograms=s,this.refStocks=a,this.refPanel=n,this.bodyCount=i,this.messages=r,this.variables=o,this.heritedVariables=u,this.typedObjectVariables=l,this.documents=h,this.swcps=c,this.name=f,this.configuration=g,this.quantity=v,this.height=m,this.width=y,this.depth=p,this.resource="parts",this.programs=[],this.stocks=[]}),null,[{key:"fromPartBusiness",value:function(t){return t.createViewModel()}}])}(),ce=function(){return f((function t(e,s,a,n,i,r,u,l,h,c,f){var g=this;d(this,t),this.key=e,this.refPrograms=s,this.refStocks=a,this.refPanel=n,this.bodyCount=i,this.messages=r,this.variables=u,this.heritedVariables=l,this.typedObjectVariables=h,this.documents=c,this.swcps=f,this.programs=[],this.stocks=[],this.getDocuments=function(){return new jt(g.documents).getDocuments()},this.getName=function(){var t;return null!==(t=g.variables.NAME)&&void 0!==t?t:""},this.getConfiguration=function(){var t;return null!==(t=g.variables.CONF)&&void 0!==t?t:""},this.getQuantity=function(){var t;return(null!==(t=g.variables.NB)&&void 0!==t?t:0)*o.getInstance().projectQuantity},this.getImages=function(){return new Nt(g.documents).getImages()}}),[{key:"createViewModel",value:function(){return new he(this.key,this.refPrograms,this.refStocks,this.refPanel,this.bodyCount,Rt.fromMessagesRaw(this.messages,this.getName(),"Part"),this.variables,this.heritedVariables,this.typedObjectVariables,this.getDocuments(),this.swcps,this.getName(),this.getConfiguration(),this.getQuantity(),0,0,0)}}])}();(S=ce).fromPartData=function(t){return new S(t.key,t.refPrograms,t.refStocks,t.refPanel,t.bodyCount,t.messages,t.variables,t.heritedVariables,t.typedObjectVariables,t.documents,t.swcps)};var fe=function(t){function e(){var t;return d(this,e),(t=r(this,e,arguments)).addStocks=function(e){var s,n=a(t.getAll());try{for(n.s();!(s=n.n()).done;){var i,r,o=s.value,u=a(null!==(i=o.refStocks)&&void 0!==i?i:[]);try{for(u.s();!(r=u.n()).done;){var l=r.value,h=e.get(l);h&&(o.stocks.push(h),h.part=o)}}catch(c){u.e(c)}finally{u.f()}}}catch(c){n.e(c)}finally{n.f()}},t.addPrograms=function(e){var s,n=a(t.getAll());try{for(n.s();!(s=n.n()).done;){var i,r=s.value,o=a(r.refPrograms);try{for(o.s();!(i=o.n()).done;){var u=i.value,l=e.get(u);l&&(r.programs.push(l),l.part=r)}}catch(h){o.e(h)}finally{o.f()}}}catch(h){n.e(h)}finally{n.f()}},t}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,ce.fromPartData(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ct),ge=f((function t(e,s,a,n,i,r,o,u,l,h,c,f,g,v,m,y,p,b,k,P,w,M,D,T,A){d(this,t),this.key=e,this.refTools=s,this.programParts=a,this.refBoard=n,this.variables=i,this.heritedVariables=r,this.typedObjectVariables=o,this.messages=u,this.documents=l,this.swcps=h,this.name=c,this.configuration=f,this.quantity=g,this.length=v,this.width=m,this.thickness=y,this.url=p,this.cost=b,this.costHour=k,this.time=P,this.isTopProgram=w,this.isBottomProgram=M,this.machine=D,this.programFilepath=T,this.programDocument=A,this.resource="programs",this.tools=[]}));ge.fromProgramBusiness=function(t){return t.createViewModel()};var de=function(){return f((function t(e,s,a,n,i,r,o){var u=this;d(this,t),this.key=e,this.refTools=s,this.programParts=a,this.refBoard=n,this.variables=i,this.messages=r,this.documents=o,this.tools=[],this.getDocuments=function(){return new jt(u.documents).getDocuments()},this.getSwcps=function(){var t,e;return null!==(t=null===(e=u.part)||void 0===e?void 0:e.swcps)&&void 0!==t?t:{}},this.getHeritedVariables=function(){var t,e;return null!==(t=null===(e=u.part)||void 0===e?void 0:e.heritedVariables)&&void 0!==t?t:{}},this.getTypedObjectVariables=function(){var t,e;return null!==(t=null===(e=u.part)||void 0===e?void 0:e.typedObjectVariables)&&void 0!==t?t:{}},this.getName=function(){return u.variables.PROG_PHASENAME},this.getConfiguration=function(){var t,e;return null!==(t=null===(e=u.part)||void 0===e?void 0:e.getConfiguration())&&void 0!==t?t:""},this.getQuantity=function(){var t,e;return null!==(t=null===(e=u.part)||void 0===e?void 0:e.getQuantity())&&void 0!==t?t:0},this.getLength=function(){var t;return null!==(t=u.variables.PROGBX)&&void 0!==t?t:0},this.getWidth=function(){var t;return null!==(t=u.variables.PROGBY)&&void 0!==t?t:0},this.getThickness=function(){var t;return null!==(t=u.variables.PROGBZ)&&void 0!==t?t:0},this.getUrl=function(){return"programs/".concat(u.key)},this.getImages=function(){return new Nt(u.documents).getImages()},this.getCostHour=function(){var t;return null!==(t=u.variables.PROGMAC_HOURCOST)&&void 0!==t?t:0},this.getTotalTime=function(){var t;return null!==(t=u.variables.PROGTPS)&&void 0!==t?t:0},this.getCost=function(){return u.getCostHour()*u.getTotalTime()/3600},this.getIsTopProgram=function(){return 1===u.variables.PROG_OP0ZXPANELZ},this.getIsBottomProgram=function(){return-1===u.variables.PROG_OP0ZXPANELZ},this.getMachine=function(){var t;return null!==(t=u.variables.PROGMAC)&&void 0!==t?t:""},this.getProgramFilepath=function(){var t;return null!==(t=u.variables.PROGPATH)&&void 0!==t?t:""},this.getProgramFile=function(){var t=u.documents.find((function(t){return"PROGRAM"===t.objType&&null===t.type&&null===t.docType}));return t||console.warn("unable to find program document for program: ".concat(u.getName())),t}}),[{key:"createViewModel",value:function(){return new ge(this.key,this.refTools,this.programParts,this.refBoard,this.variables,this.getHeritedVariables(),this.getTypedObjectVariables(),Rt.fromMessagesRaw(this.messages,this.getName(),"Program",this.getUrl()),this.getDocuments(),this.getSwcps(),this.getName(),this.getConfiguration(),this.getQuantity(),this.getLength(),this.getWidth(),this.getThickness(),this.getUrl(),this.getCost(),this.getCostHour(),this.getTotalTime(),this.getIsTopProgram(),this.getIsBottomProgram(),this.getMachine(),this.getProgramFilepath(),this.getProgramFile())}}])}();(C=de).fromProgramData=function(t){return new C(t.key,t.refTools,t.refProgramParts,t.refBoard,t.variables,t.messages,t.documents)};var ve=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;n.refBoard||this.add(n.key,de.fromProgramData(n))}}catch(i){s.e(i)}finally{s.f()}return this}},{key:"addTools",value:function(t){var e,s=a(this.getAll());try{for(s.s();!(e=s.n()).done;){var n,i=e.value,r=a(i.refTools);try{for(r.s();!(n=r.n()).done;){var o=n.value,u=t.get(o);u&&i.tools.push(u)}}catch(l){r.e(l)}finally{r.f()}}}catch(l){s.e(l)}finally{s.f()}}}])}(Ct),me=f((function t(e,s,a,n,i,r,o,u,l,h,c,f,g,v,m,y){d(this,t),this.key=e,this.refPart=s,this.refProgram=a,this.messages=n,this.variables=i,this.serialNumbers=r,this.documents=o,this.swcps=u,this.name=l,this.configuration=h,this.quantity=c,this.quantityInSheet=f,this.quantityInProject=g,this.programPartId=v,this.angle=m,this.parent=y,this.resource="programParts",this.programs=[]}));me.fromProgramPartBusiness=function(t){return t.createViewModel()};var ye=function(){return f((function t(e,s,n,i,r,u,l){var h=this;d(this,t),this.key=e,this.refPart=s,this.refProgram=n,this.documents=i,this.messages=r,this.variables=u,this.serialNumbers=l,this.sheets=[],this.getDocuments=function(){return new jt(h.documents).getDocuments()},this.getSwcps=function(){var t,e;return null!==(t=null===(e=h.part)||void 0===e?void 0:e.swcps)&&void 0!==t?t:{}},this.getImages=function(){return new Nt(h.documents).getImages()},this.getName=function(){var t;return null===(t=h.panel)||void 0===t?void 0:t.name},this.getConfiguration=function(){var t,e;return null!==(t=null===(e=h.part)||void 0===e?void 0:e.getConfiguration())&&void 0!==t?t:""},this.getQuantity=function(){var t,e;return(null!==(t=null===(e=h.sheet)||void 0===e?void 0:e.getQuantity())&&void 0!==t?t:0)*o.getInstance().projectQuantity},this.getQuantityInSheet=function(){var t,e;return(null!==(t=null===(e=h.sheet)||void 0===e?void 0:e.programParts)&&void 0!==t?t:[]).filter((function(t){return h.getName()===t.getName()})).length},this.getQuantityInProject=function(){var t,e=0,s=a(h.sheets);try{for(s.s();!(t=s.n()).done;){var n,i=t.value,r=a(i.programParts);try{for(r.s();!(n=r.n()).done;){var u;(null===(u=n.value.part)||void 0===u?void 0:u.getName())===h.getName()&&(e+=i.getQuantity()*o.getInstance().projectQuantity)}}catch(l){r.e(l)}finally{r.f()}}}catch(l){s.e(l)}finally{s.f()}return e},this.getProgramPartId=function(){return h.variables.PROGPART_ID},this.getAngle=function(){return h.variables.PROGPART_NANGLE},this.getParentIndex=function(){return h.variables.PROGPART_NPARENTINDEX},this.getParentName=function(){return h.variables.PROGPART_NPARENTNAME},this.getParentPath=function(){return h.variables.PROGPART_NPARENTPATH},this.getParentConfiguration=function(){return h.variables.PROGPART_NPARENTCONFIG}}),[{key:"createViewModel",value:function(){return new me(this.key,this.refPart,this.refProgram,Rt.fromMessagesRaw(this.messages,this.getName(),"Program Part"),this.variables,this.serialNumbers,this.getDocuments(),this.getSwcps(),this.getName(),this.getConfiguration(),this.getQuantity(),this.getQuantityInSheet(),this.getQuantityInProject(),this.getProgramPartId(),this.getAngle(),{index:this.getParentIndex(),name:this.getParentName(),configuration:this.getParentConfiguration(),filepath:this.getParentPath()})}}])}();(O=ye).fromProgramPartData=function(t){return new O(t.key,t.part,t.program,t.documents,t.messages,t.variables,t.serialNumbers)};var pe=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,ye.fromProgramPartData(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ct),be=f((function t(e,s,a,n){d(this,t),this.key=e,this.messages=s,this.documents=a,this.variables=n}));(R=be).fromSpindleData=function(t){return new R(t.key,t.messages,t.documents,t.variables)};var ke=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){if(!t)return this;var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,be.fromSpindleData(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ct),Pe=f((function t(e,s,a,n,i,r,o,u,l,h,c,f,g,v){d(this,t),this.key=e,this.refPart=s,this.refMaterial=a,this.messages=n,this.documents=i,this.swcps=r,this.variables=o,this.name=u,this.configuration=l,this.quantity=h,this.length=c,this.width=f,this.thickness=g,this.angle=v,this.resource="stocks"}));(N=Pe).fromStockBusiness=function(t){return t.createViewModel()},N.createCombinedStock=function(t,e,s){return new N(t.key,t.refPart,t.refMaterial,t.messages,t.documents,t.swcps,t.variables,e,t.configuration,s,t.length,t.width,t.thickness,t.angle)};var we=f((function t(e,s,a,n,i,r){var o=this;d(this,t),this.key=e,this.refPart=s,this.refMaterial=a,this.messages=n,this.documents=i,this.variables=r,this.createViewModel=function(){return new Pe(o.key,o.refPart,o.refMaterial,Rt.fromMessagesRaw(o.messages,o.getName(),"Stock"),o.documents,o.getSwcps(),o.variables,o.getName(),o.getConfiguration(),o.getQuantity(),o.getLength(),o.getWidth(),o.getThickness(),o.getAngle())},this.getSwcps=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.swcps)&&void 0!==t?t:{}},this.getName=function(){var t,e;return null!==(t=null===(e=o.panel)||void 0===e?void 0:e.name)&&void 0!==t?t:""},this.getConfiguration=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.getConfiguration())&&void 0!==t?t:""},this.getQuantity=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.getQuantity())&&void 0!==t?t:0},this.getLength=function(){return o.variables.ST_L},this.getWidth=function(){return o.variables.ST_W},this.getThickness=function(){return o.variables.ST_T},this.getAngle=function(){var t;return null!==(t=o.variables.ST_ANGLEINPANEL)&&void 0!==t?t:0}}));(E=we).fromStockData=function(t){return new E(t.key,t.refPart,t.refMaterial,t.messages,t.documents,t.variables)};var Me=function(t){function e(){var t;return d(this,e),(t=r(this,e,arguments)).addMaterials=function(e){var s,n=a(t.getAll());try{for(n.s();!(s=n.n()).done;){var i=s.value,r=e.get(i.refMaterial);r&&(i.material=r)}}catch(o){n.e(o)}finally{n.f()}},t}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,we.fromStockData(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ct),De=f((function t(e,s,a,n,i,r,o,u,l){d(this,t),this.key=e,this.messages=s,this.documents=a,this.variables=n,this.refSpindles=i,this.name=r,this.reference=o,this.number=u,this.diameter=l,this.spindles=[]}));De.fromToolBusiness=function(t){return t.createViewModel()};var Te=function(){function t(e,s,a,n){var i=this,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];d(this,t),this.key=e,this.variables=s,this.messages=a,this.documents=n,this.refSpindles=r,this.createViewModel=function(){return new De(i.key,Rt.fromMessagesRaw(i.messages,i.getName(),"Tool"),i.getDocuments(),i.variables,i.refSpindles,i.getName(),i.getReference(),i.getNumber(),i.getDiameter())},this.getDocuments=function(){return new jt(i.documents).getDocuments()},this.getName=function(){return i.variables.TOOL_NAME},this.getReference=function(){return i.variables.TOOL_REFERENCE},this.getNumber=function(){return i.variables.TOOL_DIAM},this.getDiameter=function(){return i.variables.TOOL_NUMBER}}return f(t,null,[{key:"fromToolData",value:function(e){return new t(e.key,e.variables,e.messages,e.documents,e.refSpindles)}}])}(),Ae=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,Te.fromToolData(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ct),Ie=function(){return f((function t(){d(this,t),this.instances=new Map}),[{key:"addInstance",value:function(t,e){var s=this.instances.get(t);s?s.push(e):this.instances.set(t,[e])}},{key:"addInstances",value:function(t,e,s){var n,i=a(t.typedObjects);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=e.get(r);if(o){var u,l=a(o.variables.TOTYPES.split(";"));try{for(l.s();!(u=l.n()).done;){var h=u.value;this.addInstance(h,o)}}catch(v){l.e(v)}finally{l.f()}}var c=s.get(r);if(c){var f,g=a(c.variables.TOTYPES.split(";"));try{for(g.s();!(f=g.n()).done;){var d=f.value;this.addInstance(d,c)}}catch(v){g.e(v)}finally{g.f()}}}}catch(v){i.e(v)}finally{i.f()}return this}},{key:"getInstancesByName",value:function(t){return this.instances.get(t)||void 0}},{key:"getAll",value:function(){return this.instances}}])}(),Be=f((function t(e,s,a,n,i,r,o,u,l,h,c,f,g,v,m,y,p,b,k){d(this,t),this.key=e,this.refTools=s,this.refProgramParts=a,this.refBoard=n,this.variables=i,this.messages=r,this.documents=o,this.name=u,this.quantity=l,this.programFilename=h,this.programFilepath=c,this.totalParts=f,this.totalOffcuts=g,this.machine=v,this.length=m,this.width=y,this.thickness=p,this.url=b,this.programDocument=k,this.resource="sheets",this.tools=[],this.programParts=[]}));Be.fromProgramBusiness=function(t){return t.createViewModel()};var Se=function(){return f((function t(e,s,a,n,i,r,u){var l=this;d(this,t),this.key=e,this.refTools=s,this.refProgramParts=a,this.refBoard=n,this.variables=i,this.messages=r,this.documents=u,this.programParts=[],this.getDocuments=function(){return new jt(l.documents).getDocuments()},this.getName=function(){return l.variables.PROG_PHASENAME},this.getQuantity=function(){var t;return(null!==(t=l.variables.PROG_NSHEETQTY)&&void 0!==t?t:0)*o.getInstance().projectQuantity},this.getProgramFilename=function(){return l.variables.PROGCFGFILE},this.getProgramFilepath=function(){return l.variables.PROGCFGPATH},this.getProgramComment=function(){return l.variables.PROGCOMMENT},this.getTotalParts=function(){return l.variables.PROG_PARTCOUNT},this.getTotalOffcuts=function(){return l.variables.PROG_OFFCUTCOUNT},this.getMachine=function(){return l.variables.PROGMAC},this.getLength=function(){return l.variables.PROGBX},this.getWidth=function(){return l.variables.PROGBY},this.getThickness=function(){return l.variables.PROGBZ},this.getUrl=function(){return"sheets/".concat(l.key)},this.getImages=function(){return new Nt(l.documents).getImages()},this.getProgramFile=function(){var t=l.documents.find((function(t){return"PROGRAM"===t.objType&&null===t.type&&null===t.docType}));return t||console.warn("unable to find program document for program: ".concat(l.getName())),t}}),[{key:"createViewModel",value:function(){return new Be(this.key,this.refTools,this.refProgramParts,this.refBoard,this.variables,Rt.fromMessagesRaw(this.messages,this.getName(),"Sheet",this.getUrl()),this.getDocuments(),this.getName(),this.getQuantity(),this.getProgramFilename(),this.getProgramFilepath(),this.getTotalParts(),this.getTotalOffcuts(),this.getMachine(),this.getLength(),this.getWidth(),this.getThickness(),this.getUrl(),this.getProgramFile())}}])}();(V=Se).fromProgramData=function(t){return new V(t.key,t.refTools,t.refProgramParts,t.refBoard,t.variables,t.messages,t.documents)};var Ce=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;n.refBoard&&this.add(n.key,Se.fromProgramData(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ct),Oe=f((function t(e,s,a,n,i,r,o,u,l,h,c,f){d(this,t),this.key=e,this.messages=s,this.documents=a,this.variables=n,this.name=i,this.description=r,this.quantity=o,this.thickness=u,this.category=l,this.cost=h,this.costUnit=c,this.costType=f,this.resource="panelProcesses"}));Oe.fromPanelProcessBusiness=function(t){return t.createViewModel()};var Re=function(){function t(e,s,a,n,i){var r=this;d(this,t),this.key=e,this.messages=s,this.documents=a,this.variables=n,this.quantity=i,this.createViewModel=function(){return new Oe(r.key,Rt.fromMessagesRaw(r.messages,r.getName(),"Panel Process"),r.documents,r.variables,r.getName(),r.getDescription(),r.quantity,r.getThickness(),r.getCategory(),r.getCost(),r.getCostUnit(),r.getCostType())},this.getName=function(){return r.variables.PROC_NAME},this.getDescription=function(){return r.variables.PROC_DESC},this.getThickness=function(){return r.variables.PROC_THICKNESS},this.getCategory=function(){return r.variables.PROC_CAT},this.getCostUnit=function(){return r.variables.PROC_UCOST},this.getCost=function(){return r.quantity*r.getCostUnit()},this.getCostType=function(){return r.variables.PROC_COSTTYPE}}return f(t,null,[{key:"fromPanelProcessData",value:function(e){return new t(e.key,e.messages,e.documents,e.variables,0)}}])}(),Ne=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){if(!t)return this;var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,Re.fromPanelProcessData(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ct),Ee=f((function t(e,s,a,n,i,r,o,u,l,h,c){d(this,t),this.key=e,this.refPanel=s,this.refPanelProcess=a,this.messages=n,this.documents=i,this.variables=r,this.name=o,this.quantity=u,this.unitOfMeasure=l,this.cost=h,this.mask=c,this.resource="processZones"}));Ee.fromProcessZoneBusiness=function(t){return t.createViewModel()};var Ve=function(){function t(e,s,a,n,i,r){var o=this;d(this,t),this.key=e,this.refPanel=s,this.refPanelProcess=a,this.messages=n,this.documents=i,this.variables=r,this.createViewModel=function(){return new Ee(o.key,o.refPanel,o.refPanelProcess,Rt.fromMessagesRaw(o.messages,o.getName(),"Process Zone"),o.documents,o.variables,o.getName(),o.getQuantity(),o.getUnitOfMeasure(),o.getCost(),o.getMask())},this.getName=function(){return o.variables.PROC_ZONENAME},this.getQuantity=function(){return o.variables.PROC_ZONE_QTT},this.getUnitOfMeasure=function(){return o.variables.PROC_ZONE_QTT_UNIT},this.getCost=function(){return o.variables.PROC_ZONE_COST},this.getMask=function(){return o.variables.PROC_ZONEMASK},this.getCostUnit=function(){return o.panelProcess?o.panelProcess.getCostUnit():0},this.getCostType=function(){return o.panelProcess?o.panelProcess.getCostType():0}}return f(t,null,[{key:"fromProcessZoneData",value:function(e){return new t(e.key,e.refPanel,e.refPanelProcess,e.messages,e.documents,e.variables)}}])}(),Le=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){if(!t)return this;var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,Ve.fromProcessZoneData(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ct),je=function(){return f((function t(e,s,a,n,i,r,o,u,l,h,c,f,g,v,m,y,p,b,k,P){var w=this;d(this,t),this.key=e,this.refPart=s,this.refMaterial=a,this.messages=n,this.documents=i,this.swcps=r,this.variables=o,this.heritedVariables=u,this.typedObjectVariables=l,this.name=h,this.description=c,this.configuration=f,this.quantity=g,this.length=v,this.lengthTotal=m,this.width=y,this.thickness=p,this.angle1=b,this.angle2=k,this.cutlist=P,this.resource="weldments",this.addChildren=function(t){w.children||(w.children=[]),w.children.push(t)}}),null,[{key:"fromWeldmentBusiness",value:function(t){return t.createViewModel()}}])}(),We=function(){return f((function t(e,s,a,n,i,r){var o=this;d(this,t),this.key=e,this.refPart=s,this.refMaterial=a,this.messages=n,this.documents=i,this.variables=r,this.getDocuments=function(){return new jt(o.documents).getDocuments()},this.getSwcps=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.swcps)&&void 0!==t?t:{}},this.getHeritedVariables=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.heritedVariables)&&void 0!==t?t:{}},this.getTypedObjectVariables=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.typedObjectVariables)&&void 0!==t?t:{}},this.getName=function(){var t;return null!==(t=o.variables.ST_N)&&void 0!==t?t:""},this.getDescription=function(){var t;return null!==(t=o.variables.MBS_Description)&&void 0!==t?t:""},this.getConfiguration=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.getConfiguration())&&void 0!==t?t:""},this.getPartQuantity=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.getQuantity())&&void 0!==t?t:0},this.getQuantity=function(){var t;return null!==(t=o.variables.MBS_Quantity)&&void 0!==t?t:0*o.getPartQuantity()},this.getLength=function(){return o.variables.MBS_Length},this.getLengthTotal=function(){return o.variables.MBS_TotalLength},this.getWidth=function(){return o.variables.ST_W},this.getThickness=function(){return o.variables.ST_T},this.getAngle1=function(){var t;return null!==(t=o.variables.MBS_Angle1)&&void 0!==t?t:""},this.getAngle2=function(){var t;return null!==(t=o.variables.MBS_Angle2)&&void 0!==t?t:""},this.getCutlist=function(){var t;return null!==(t=o.variables.MBS_Cutlist)&&void 0!==t?t:""},this.getIsExcluded=function(){var t;return(null===(t=o.part)||void 0===t?void 0:t.variables.TOTYPES).split(";").includes("EXCLUDED")}}),[{key:"createViewModel",value:function(){return new je(this.key,this.refPart,this.refMaterial,Rt.fromMessagesRaw(this.messages,this.getName(),"Weldment"),this.getDocuments(),this.getSwcps(),this.variables,this.getHeritedVariables(),this.getTypedObjectVariables(),this.getName(),this.getDescription(),this.getConfiguration(),this.getQuantity(),this.getLength(),this.getLengthTotal(),this.getWidth(),this.getThickness(),this.getAngle1(),this.getAngle2(),this.getCutlist())}}])}();(L=We).fromStockData=function(t){return new L(t.key,t.refPart,t.refMaterial,t.messages,t.documents,t.variables)};var _e=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n,i=e.value;null!==(n=i.material)&&void 0!==n&&n.variables.WELDMENT&&this.add(i.key,We.fromStockData(i))}}catch(r){s.e(r)}finally{s.f()}return this}}])}(Ct),Qe=function(){return f((function t(e,s,a,n,i,r,o,u,l,h,c,f){d(this,t),this.key=e,this.messages=s,this.documents=a,this.variables=n,this.name=i,this.description=r,this.cost=o,this.costUnit=u,this.costType=l,this.quantity=h,this.type=c,this.unitOfMeasure=f,this.resource="weldmentMaterials"}),null,[{key:"fromMaterialBusiness",value:function(t){return t.createViewModel()}}])}(),Fe=f((function t(e,s,a,n,i,r){var o=this;d(this,t),this.key=e,this.description=s,this.messages=a,this.documents=n,this.variables=i,this.quantity=r,this.createViewModel=function(){return new Qe(o.key,Rt.fromMessagesRaw(o.messages,o.getName(),"Weldment Material"),o.getDocuments(),o.variables,o.getName(),o.description,o.getCost(),o.getCostUnit(),o.getCostType(),o.quantity,o.getType(),o.getUnitOfMeasure())},this.getDocuments=function(){return new jt(o.documents).getDocuments()},this.getName=function(){var t;return null!==(t=o.variables.MAT_NAME)&&void 0!==t?t:""},this.getDescription=function(){var t;return null!==(t=o.variables.MAT_DESC)&&void 0!==t?t:""},this.getCostUnit=function(){var t;return null!==(t=o.variables.MAT_UCOST)&&void 0!==t?t:0},this.getCostType=function(){var t;return null!==(t=o.variables.MAT_COSTTYPE)&&void 0!==t?t:0},this.getBoardLength=function(){var t;return null!==(t=o.variables.BOARD_LENGTH)&&void 0!==t?t:0},this.getBoardWidth=function(){var t;return null!==(t=o.variables.BOARD_WIDTH)&&void 0!==t?t:0},this.getUnitOfMeasure=function(){switch(o.getCostType()){case 0:return"m³";case 1:return"m²";case 2:return"m";case 3:return"unit";default:return"unknown"}},this.getCost=function(){return o.quantity*o.getCostUnit()},this.getType=function(){var t;return null!==(t=o.variables.MAT_TYPE)&&void 0!==t?t:0},this.getIsWeldment=function(){var t;return null!==(t=o.variables.WELDMENT)&&void 0!==t&&t}}));(j=Fe).fromMaterialData=function(t,e){return new j("".concat(t.key,"-").concat(e.getDescription()," "),e.getDescription(),t.messages,t.documents,t.variables,e.getLengthTotal()/1e3)};var Ue=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t,e){var s,n=a(e);try{for(n.s();!(s=n.n()).done;){var i=s.value,r=t.get(i.refMaterial);if(r&&r.getIsWeldment()){var o=Fe.fromMaterialData(r,i);this.add(o.key,o)}}}catch(u){n.e(u)}finally{n.f()}return this}}])}(Ct),Ge=f((function t(e,s,a,n,i,r,o,u,l,h){d(this,t),this.key=e,this.messages=s,this.documents=a,this.swcps=n,this.variables=i,this.heritedVariables=r,this.typedObjectVariables=o,this.name=u,this.configuration=l,this.quantity=h,this.resource="excluded"}));Ge.fromExcludedBusiness=function(t){return t.createViewModel()};var He=function(){return f((function t(e,s,a,n,i,r,o,u,l){var h=this;d(this,t),this.key=e,this.messages=s,this.heritedVariables=a,this.typedObjectVariables=n,this.refParts=i,this.refAssemblies=r,this.documents=o,this.swcps=u,this.variables=l,this.parts=[],this.assemblies=[],this.getDocuments=function(){return new jt(h.documents).getDocuments()},this.getName=function(){return h.variables.NAME},this.getConfiguration=function(){return h.variables.CONF},this.getQuantity=function(){return h.variables.NB}}),[{key:"createViewModel",value:function(){return new Ge(this.key,Rt.fromMessagesRaw(this.messages,this.getName(),"Excluded"),this.getDocuments(),this.swcps,this.variables,this.heritedVariables,this.typedObjectVariables,this.getName(),this.getConfiguration(),this.getQuantity())}}])}();(W=He).fromAssemblyPartBusiness=function(t){return new W(t.key,t.messages,t.heritedVariables,t.typedObjectVariables,"refParts"in t?t.refParts:[],"refAssemblies"in t?t.refAssemblies:[],t.documents,t.swcps,t.variables)};var xe=function(t){function e(){var t;return d(this,e),(t=r(this,e,arguments)).FrameTypedObjectName="EXCLUDED",t}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s,n=a(null!==(e=t.getInstancesByName(this.FrameTypedObjectName))&&void 0!==e?e:[]);try{for(n.s();!(s=n.n()).done;){var i=s.value;this.addInstance(i.key,He.fromAssemblyPartBusiness(i))}}catch(r){n.e(r)}finally{n.f()}return this}}])}(Yt),qe=function(){return f((function t(e,s,a,n,i,r,o,u,l,h,c,f,g,v,m,y,p,b,k,P,w,M,D,T,A,I,B,S){d(this,t),this.key=e,this.name=s,this.url=a,this.refBoard=n,this.quantity=i,this.length=r,this.width=o,this.thickness=u,this.cutterThickness=l,this.areaTotal=h,this.areaPanels=c,this.areaWaste=f,this.areaTrims=g,this.areaCuts=v,this.percentagePanels=m,this.percentageWaste=y,this.percentageTrims=p,this.quantityPanels=b,this.quantityWaste=k,this.quantityTrims=P,this.quantityCuts=w,this.lengthCuts=M,this.stock=D,this.refPanels=T,this.items=A,this.cuts=I,this.trims=B,this.waste=S,this.resource="patterns",this.panels=[]}),null,[{key:"fromPatternBusiness",value:function(t){return t.createViewModel()}}])}(),Ze=f((function t(e){d(this,t),this.cuts=[],this.length=e.length,this.width=e.width,this.cutDirection=e.cutDirection,this.coordinate=e.cutCoordinate,this.stockLeft=e.stockLeft?e.stockLeft:null,this.stockRight=e.stockRight?e.stockRight:null})),Ye=f((function t(e){var s,a;d(this,t),this.indexParent=-1,this.children=[],this.cuts=[],this.parent=null,this.quantity=1,this.stock=e,this.type=e.type,this.length=e.length,this.width=e.width,this.grain=e.grain,this.cutDirection=e.cutDirection,this.cutterThickness=e.cutterThickness,this.name=null!==(s=null!==(a=e.name)&&void 0!==a?a:e.type)&&void 0!==s?s:"group",this.cutCoordinate=e.cutCoordinate,this.x=e.x,this.y=e.y,this.parent=e.parent?new t(e.parent):null})),ze=function(){return f((function t(e){var s,a;d(this,t),this.parent=null,this.index=0,this.indexPanel=0,this.indexParent=-1,this.children=[],this.cuts=[],this.stock=e,this.type=e.type,this.length=e.length,this.width=e.width,this.grain=e.grain,this.cutDirection=e.cutDirection,this.cutterThickness=e.cutterThickness,this.name=null!==(s=null!==(a=e.name)&&void 0!==a?a:e.type)&&void 0!==s?s:"group",this.cutCoordinate=e.cutCoordinate,this.x=e.x,this.y=e.y,this.parent=e.parent?new t(e.parent):null}),[{key:"getTrimSide",value:function(t){var e,s=a(this.children);try{for(s.s();!(e=s.n()).done;){var n=e.value;if("trimming"===n.type||"padding"===n.type){if("length"===t&&"V"===this.cutDirection)return this.cutCoordinate;if("width"===t&&"H"===this.cutDirection)return this.cutCoordinate}}}catch(i){s.e(i)}finally{s.f()}return 0}},{key:"getGroupedNodes",value:function(){var t,e=[],s=a(this.children);try{for(s.s();!(t=s.n()).done;){var n=t.value,i=new Ye(n.stock);this.isPreviousEqual(i,e[e.length-1])?e[e.length-1].quantity++:e.push(i)}}catch(r){s.e(r)}finally{s.f()}return e}},{key:"isPreviousEqual",value:function(t,e){return!!e&&(t.length===e.length&&t.width===e.width&&t.type===e.type)}}])}(),Xe=function(){return f((function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;d(this,t),this.type=e.type,this.length=1e3*e.length,this.width=1e3*e.width,this.cutDirection=e.cut,this.name=""!=e["panel-name"]?e["panel-name"]:null,this.cutCoordinate=1e3*e["cut-coordinate"],this.grain=e["grain-direction"],this.cutterThickness=2*e["cut-half-thickness"]*1e3,this.parent=s,this.x=a,this.y=n;var i=0,r=0,o=0,u=0;"V"===e.cut&&(o=this.x+this.cutCoordinate+this.cutterThickness,u=this.y,i=this.x,r=this.y),"H"===e.cut&&(o=this.x,u=this.y+this.cutCoordinate+this.cutterThickness,i=this.x,r=this.y),this.stockLeft=e["left-stock"]?new t(e["left-stock"],this,i,r):null,this.stockRight=e["right-stock"]?new t(e["right-stock"],this,o,u):null}),[{key:"getTreeStructure",value:function(){var t=new ze(this),e=this.findChildren(t,this.stockLeft),a=this.findChildren(t,this.stockRight);t.children=[].concat(s(e),s(a));var n=new Ze(this),i=this.findCuts(n,this.stockLeft),r=this.findCuts(n,this.stockRight);return t.cuts=[].concat(s(i),s(r)),t}},{key:"findChildren",value:function(t,e){if(!e)return[];var a=new ze(e);if(a.indexParent=t.index,null===e.type){if(t.cutDirection===e.cutDirection){var n=this.findChildren(t,e.stockLeft),i=this.findChildren(t,e.stockRight);return[].concat(s(n),s(i))}var r=this.findChildren(a,e.stockLeft),o=this.findChildren(a,e.stockRight);a.children=[].concat(s(r),s(o))}return[a]}},{key:"findCuts",value:function(t,e){if(!e)return[];var a=new Ze(e);if(null===e.type){if(t.cutDirection===e.cutDirection){var n=this.findCuts(t,e.stockLeft),i=this.findCuts(t,e.stockRight);return[].concat(s(n),s(i))}var r=this.findCuts(a,e.stockLeft),o=this.findCuts(a,e.stockRight);a.cuts=[].concat(s(r),s(o))}return[a]}}])}(),Ke=function(){return f((function t(e,s,a,n,i,r,u,l,h,c){d(this,t),this.key=e,this.name=s,this.material=a,this.stock=n,this.length=i,this.width=r,this.thickness=u,this.cutterThickness=l,this.panelsBusiness=h,this.url=c,this.getQuantity=function(){return o.getInstance().projectQuantity}}),[{key:"createViewModel",value:function(){return new qe(this.key,this.name,this.url,this.material,this.getQuantity(),this.length,this.width,1e3*this.thickness,this.cutterThickness,this.getTotalArea(),this.getPanelArea(),this.getWasteArea(),this.getTrimArea(),this.getCutArea(),this.getPanelAreaPercentage(),this.getWasteAreaPercentage(),this.getTrimAreaPercentage(),this.getRefPanels().length,this.getTrims().length,this.getWaste().length,this.getCuts().length,this.getLengthCuts(),this.stock,this.getRefPanels(),this.getItems(),this.getCuts(),this.getTrims(),this.getWaste())}},{key:"getCuts",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;return e||(e=this.stock),e.cutDirection&&t.push(new Ze(e)),e.stockLeft&&this.getCuts(t,e.stockLeft),e.stockRight&&this.getCuts(t,e.stockRight),t}},{key:"getItems",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=[],n=a(this.getFlattenedTreeStructure(e));try{for(n.s();!(t=n.n()).done;){var i=t.value;i.type&&s.push(i)}}catch(r){n.e(r)}finally{n.f()}return s}},{key:"getPanels",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=[],n=a(this.getFlattenedTreeStructure(e));try{for(n.s();!(t=n.n()).done;){var i=t.value;"item"===i.type&&s.push(i)}}catch(r){n.e(r)}finally{n.f()}return s}},{key:"getRefPanels",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=[],n=a(this.getFlattenedTreeStructure(e));try{for(n.s();!(t=n.n()).done;){var i,r=t.value;"item"===r.type&&s.push(null!==(i=r.name)&&void 0!==i?i:"")}}catch(o){n.e(o)}finally{n.f()}return s}},{key:"getLengthCuts",value:function(t){var e,s=0,n=a(this.getCuts());try{for(n.s();!(e=n.n()).done;){var i=e.value;"V"===i.cutDirection&&(s+=i.width),"H"===i.cutDirection&&(s+=i.length)}}catch(o){n.e(o)}finally{n.f()}var r=s/1e3;return t?parseFloat(r.toFixed(2)):r}},{key:"getTrims",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=[],n=a(this.getFlattenedTreeStructure(e));try{for(n.s();!(t=n.n()).done;){var i=t.value;"trimming"!==i.type&&"padding"!==i.type||s.push(i)}}catch(r){n.e(r)}finally{n.f()}return s}},{key:"getWaste",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=[],n=a(this.getFlattenedTreeStructure(e));try{for(n.s();!(t=n.n()).done;){var i=t.value;"waste"===i.type&&s.push(i)}}catch(r){n.e(r)}finally{n.f()}return s}},{key:"getTreeStructure",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.stock.getTreeStructure();return t&&this.reverseChildren(e),this.assignIndexes(e)}},{key:"getFlattenedTreeStructure",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.getTreeStructure(t),s=[];return this.flattenTree(e,s),s}},{key:"getTotalArea",value:function(t){var e=this.length*this.width/1e6;return t?parseFloat(e.toFixed(2)):e}},{key:"getPanelArea",value:function(t){var e,s=0,n=a(this.getPanels());try{for(n.s();!(e=n.n()).done;){var i=e.value;s+=i.length*i.width}}catch(o){n.e(o)}finally{n.f()}var r=s/1e6;return t?parseFloat(r.toFixed(2)):r}},{key:"getPanelAreaPercentage",value:function(t){var e=this.getPanelArea()/this.getTotalArea()*100;return t?parseFloat(e.toFixed(2)):e}},{key:"getWasteArea",value:function(t){var e,s=0,n=a(this.getWaste());try{for(n.s();!(e=n.n()).done;){var i=e.value;s+=i.length*i.width}}catch(o){n.e(o)}finally{n.f()}var r=s/1e6;return t?parseFloat(r.toFixed(2)):r}},{key:"getWasteAreaPercentage",value:function(t){var e=this.getWasteArea()/this.getTotalArea()*100;return t?parseFloat(e.toFixed(2)):e}},{key:"getTrimArea",value:function(t){var e,s=0,n=a(this.getTrims());try{for(n.s();!(e=n.n()).done;){var i=e.value;s+=i.length*i.width}}catch(o){n.e(o)}finally{n.f()}var r=s/1e6;return t?parseFloat(r.toFixed(2)):r}},{key:"getCutArea",value:function(t){var e,s=0,n=a(this.getCuts());try{for(n.s();!(e=n.n()).done;){var i=e.value;"V"===i.cutDirection&&(s+=i.width*this.cutterThickness),"H"===i.cutDirection&&(s+=i.length*this.cutterThickness)}}catch(o){n.e(o)}finally{n.f()}var r=s/1e6;return t?parseFloat(r.toFixed(2)):r}},{key:"getTrimAreaPercentage",value:function(t){var e=this.getTrimArea()/this.getTotalArea()*100;return t?parseFloat(e.toFixed(2)):e}},{key:"getFirstTrimSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.stock;return"trimming"===t.type||"padding"===t.type?t.parent.cutCoordinate:t.stockLeft?this.getFirstTrimSize(t.stockLeft):t.stockRight?this.getFirstTrimSize(t.stockRight):void 0}},{key:"assignIndexes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{index:0,panelIndex:0};t.index=e.index++,"item"===t.type&&(t.indexPanel=e.panelIndex++);var s,n=a(t.children);try{for(n.s();!(s=n.n()).done;){var i=s.value;this.assignIndexes(i,e)}}catch(r){n.e(r)}finally{n.f()}return t}},{key:"flattenTree",value:function(t,e){if(e.push(t),t.children){var s,n=a(t.children);try{for(n.s();!(s=n.n()).done;){var i=s.value;this.flattenTree(i,e)}}catch(r){n.e(r)}finally{n.f()}}}},{key:"reverseChildren",value:function(t){if(t.children){t.children.reverse();var e,s=a(t.children);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.reverseChildren(n)}}catch(i){s.e(i)}finally{s.f()}}}}])}();(_=Ke).fromPatternData=function(t,e){var s=new Xe(t.stock);return new _(t.key,t.name,t.material,s,s.length,s.width,t.thickness,s.cutterThickness,e,"patterns/".concat(t.name))};var $e=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t,e){var s,n=a(t);try{for(n.s();!(s=n.n()).done;){var i=s.value;this.add(i.key,Ke.fromPatternData(i,e))}}catch(r){n.e(r)}finally{n.f()}return this}}])}(Ct),Je=function(){return f((function t(e,s,a,n,i,r,o,u,l,h,c,f,g){d(this,t),this.key=e,this.name=s,this.description=a,this.length=n,this.width=i,this.thickness=r,this.count=o,this.quantity=u,this.type=l,this.unitOfMeasure=h,this.cost=c,this.costUnit=f,this.refMaterial=g,this.resource="boardMaterials"}),null,[{key:"fromBoardMaterialBusiness",value:function(t){return t.createViewModel()}}])}(),ts=function(){return f((function t(e,s){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};d(this,t),this.type=e,this.key=s,this.variables=n,this.articleVariables=i,this.createViewModel=function(){return new Je(a.key,a.getName(),a.getDescription(),a.getLength(),a.getWidth(),a.getThickness(),a.getCount(),a.getQuantity(),a.getType(),a.getUnitOfMeasure(),a.getCost(),a.getCostUnit(),a.getRefMaterial())},this.getName=function(){var t;if("article"===a.type){var e=a.parseMaterialSize(a.articleVariables.name);return e?e.name:""}return null!==(t=a.variables.NBOARD_NAME)&&void 0!==t?t:""},this.getDescription=function(){var t;if("article"===a.type){var e=a.parseMaterialSize(a.articleVariables.name);return e?e.name:""}return null!==(t=a.variables.NBOARD_DESC)&&void 0!==t?t:""},this.getLength=function(){var t;if("article"===a.type){var e=a.parseMaterialSize(a.articleVariables.name);return e?e.length:0}return null!==(t=a.variables.NBOARD_L)&&void 0!==t?t:0},this.getWidth=function(){var t;if("article"===a.type){var e=a.parseMaterialSize(a.articleVariables.name);return e?e.width:0}return null!==(t=a.variables.NBOARD_W)&&void 0!==t?t:0},this.getThickness=function(){var t;return"article"===a.type?0:null!==(t=a.variables.NBOARD_T)&&void 0!==t?t:0},this.getCount=function(){return"article"===a.type?a.articleVariables.count:0},this.getQuantity=function(){var t,e;return"article"===a.type?(null!==(t=a.articleVariables.quantity)&&void 0!==t?t:0)*o.getInstance().projectQuantity:(null!==(e=a.variables.NBOARD_QTY)&&void 0!==e?e:0)*o.getInstance().projectQuantity},this.getType=function(){var t;return"article"===a.type?-1:null!==(t=a.variables.NBOARD_TYPE)&&void 0!==t?t:0},this.getUnitOfMeasure=function(){return"u"},this.getCost=function(){return"article"===a.type?a.articleVariables.cost*o.getInstance().projectQuantity:a.getQuantity()*a.getCostUnit()},this.getCostUnit=function(){var t;return"article"===a.type?a.articleVariables.costUnit:null!==(t=a.variables.NBOARD_COST)&&void 0!==t?t:0},this.getRefMaterial=function(){var t;return"article"===a.type?a.getName():null!==(t=a.variables.NBOARD_MATNAME)&&void 0!==t?t:""}}),[{key:"parseMaterialSize",value:function(t){var s=t.match(/^(.+?)\s*\((\d+)x(\d+)\)$/);if(!s)return null;var a=e(s,4),n=a[1],i=a[2],r=a[3];return{name:n.trim(),length:parseInt(i,10),width:parseInt(r,10)}}}])}();(Q=ts).fromBoardMaterialData=function(t){return new Q(t.type,t.key,t.variables,t.articleVariables)};var es=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,ts.fromBoardMaterialData(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ct),ss=f((function t(e,s,a,n,i,r,o,u,l,h,c,f,g,v,m,y,p,b,k,P,w){d(this,t),this.key=e,this.messages=s,this.refParts=a,this.refPartsQuantities=n,this.refAssemblies=i,this.refAssembliesQuantities=r,this.documents=o,this.swcps=u,this.variables=l,this.heritedVariables=h,this.typedObjectVariables=c,this.name=f,this.configuration=g,this.quantity=v,this.height=m,this.width=y,this.depth=p,this.url=b,this.cost=k,this.costPanels=P,this.costHardware=w,this.resource="subFrames",this.parts=[],this.assemblies=[],this.panels=[],this.programs=[],this.hardware=[],this.weldments=[],this.refQuantities=[]}));ss.fromFrameBusiness=function(t){return t.createViewModel()};var as=function(){return f((function t(e,s,n,i,r,u,l,h,c,f,g){var v=this;d(this,t),this.key=e,this.messages=s,this.heritedVariables=n,this.typedObjectVariables=i,this.refParts=r,this.refPartsQuantities=u,this.refAssemblies=l,this.refAssembliesQuantities=h,this.documents=c,this.swcps=f,this.variables=g,this.parts=[],this.assemblies=[],this.panels=[],this.programs=[],this.hardware=[],this.weldments=[],this.getName=function(){return v.variables.NAME},this.getConfiguration=function(){return v.variables.CONF},this.getQuantity=function(){var t;return(null!==(t=v.variables.NB)&&void 0!==t?t:0)*o.getInstance().projectQuantity},this.getHeight=function(){var t;return null!==(t=v.variables.Height)&&void 0!==t?t:0},this.getWidth=function(){var t;return null!==(t=v.variables.Width)&&void 0!==t?t:0},this.getDepth=function(){var t;return null!==(t=v.variables.Depth)&&void 0!==t?t:0},this.getImages=function(){return new Nt(v.documents).getImages()},this.getPDFs=function(){return new Wt(v.documents).getPDFs()},this.getDocuments=function(){return new jt(v.documents).getDocuments()},this.getUrl=function(){return"frames/".concat(v.key)},this.getCostPanels=function(){var t,e=0,s=a(v.panels);try{for(s.s();!(t=s.n()).done;){e+=t.value.getCost()}}catch(n){s.e(n)}finally{s.f()}return e},this.getCostHardware=function(){var t,e=0,s=a(v.hardware);try{for(s.s();!(t=s.n()).done;){e+=t.value.getCost()}}catch(n){s.e(n)}finally{s.f()}return e},this.getCost=function(){return v.getCostPanels()+v.getCostHardware()},this.getIsExcluded=function(){return null!=v.typedObjectVariables&&"EXCLUDED"in v.typedObjectVariables}}),[{key:"createViewModel",value:function(){return new ss(this.key,Rt.fromMessagesRaw(this.messages,this.getName(),"Frame",this.getUrl()),this.refParts,this.refPartsQuantities,this.refAssemblies,this.refAssembliesQuantities,this.getDocuments(),this.swcps,this.variables,this.heritedVariables,this.typedObjectVariables,this.getName(),this.getConfiguration(),this.getQuantity(),this.getHeight(),this.getWidth(),this.getDepth(),this.getUrl(),this.getCost(),this.getCostPanels(),this.getCostHardware())}}])}();(F=as).fromAssemblyPartBusiness=function(t){return new F(t.key,t.messages,t.heritedVariables,t.typedObjectVariables,"refParts"in t?t.refParts:[],"refPartsQuantities"in t?t.refPartsQuantities:[],"refAssemblies"in t?t.refAssemblies:[],"refAssembliesQuantities"in t?t.refAssembliesQuantities:[],t.documents,t.swcps,t.variables)};var ns=function(t){function e(){var t;return d(this,e),(t=r(this,e,arguments)).FrameTypedObjectName="SUBFRAME",t}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s,n=a(null!==(e=t.getInstancesByName(this.FrameTypedObjectName))&&void 0!==e?e:[]);try{for(n.s();!(s=n.n()).done;){var i=s.value;this.addInstance(i.key,as.fromAssemblyPartBusiness(i))}}catch(r){n.e(r)}finally{n.f()}return this}}])}(Yt),is=function(){function t(e,s,a,n,i,r,o,u,l,h,c,f,g,v,m,y,p,b,k,P,w,M,D,T,A,I,B,S,C,O,R,N,E,V,L,j,W,_,Q,F,U,G,H,x,q,Z,Y,z,X,K,$,J){d(this,t),this.database=e,this.settings=s,this.projectBusiness=a,this.panelsBusiness=n,this.stocksBusiness=i,this.laminatesBusiness=r,this.partsBusiness=o,this.assembliesBusiness=u,this.edgebandsBusiness=l,this.edgebandMaterialsBusiness=h,this.materialsBusiness=c,this.weldmentMaterialsBusiness=f,this.boardMaterialsBusiness=g,this.programsBusiness=v,this.sheetBusiness=m,this.programPartsBusiness=y,this.toolsBusiness=p,this.spindlesBusiness=b,this.costsBusiness=k,this.typedObjectsBusiness=P,this.framesBusiness=w,this.subFramesBusiness=M,this.hardwaresBusiness=D,this.excludedItemsBusiness=T,this.panelProcessesBusiness=A,this.processZonesBusiness=I,this.weldmentsBusiness=B,this.patternsBusiness=S,this.panelBusinessManager=C,this.stockBusinessManager=O,this.laminateBusinessManager=R,this.partBusinessManager=N,this.assemblyBusinessManager=E,this.edgebandBusinessManager=V,this.edgebandMaterialBusinessManager=L,this.materialBusinessManager=j,this.weldmentMaterialBusinessManager=W,this.boardMaterialBusinessManager=_,this.programBusinessManager=Q,this.sheetBusinessManager=F,this.programPartBusinessManager=U,this.toolBusinessManager=G,this.spindleBusinessManager=H,this.costBusinessManager=x,this.frameBusinessManager=q,this.subFrameBusinessManager=Z,this.hardwareBusinessManager=Y,this.excludedBusinessManager=z,this.panelProcessBusinessManager=X,this.processZoneBusinessManager=K,this.weldmentBusinessManager=$,this.patternsBusinessManager=J}return f(t,[{key:"relateData",value:function(){return this.assignDataToProject(),this.assignDataToEdgebands(),this.assignDataToStocks(),this.assignDataToWeldments(),this.assignDataToLaminates(),this.assignDataToPanels(),this.assignDataToAssemblies(),this.assignSubAssemblies(),this.assignDataToFrames(),this.assignDataToSubFrames(),this.assignDataToParts(),this.assignDataToSheets(),this.assignDataToProgramParts(),this.assignDataToProcessZones(),this}},{key:"assignDataToProject",value:function(){var t,e=a(this.assemblyBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;if(this.projectBusiness.name===s.getName())return void(this.projectBusiness.component=s)}}catch(o){e.e(o)}finally{e.f()}var n,i=a(this.partBusinessManager.getAll());try{for(i.s();!(n=i.n()).done;){var r=n.value;if(this.projectBusiness.name===r.getName())return void(this.projectBusiness.component=r)}}catch(o){i.e(o)}finally{i.f()}}},{key:"assignDataToEdgebands",value:function(){var t,e=a(this.edgebandBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.edgebandMaterialBusinessManager.get(s.refMaterial),s.part=this.partBusinessManager.get(s.refPanel),s.panel=this.panelBusinessManager.get(s.refPanel)}}catch(n){e.e(n)}finally{e.f()}}},{key:"assignDataToStocks",value:function(){var t,e=a(this.stockBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.materialBusinessManager.get(s.refMaterial),s.part=this.partBusinessManager.get(s.refPart),s.panel=this.panelBusinessManager.get(s.refPart)}}catch(n){e.e(n)}finally{e.f()}}},{key:"assignDataToWeldments",value:function(){var t,e=a(this.weldmentBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.weldmentMaterialBusinessManager.get(s.refMaterial),s.part=this.partBusinessManager.get(s.refPart)}}catch(n){e.e(n)}finally{e.f()}}},{key:"assignDataToLaminates",value:function(){var t,e=a(this.laminateBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.materialBusinessManager.get(s.refMaterial),s.part=this.partBusinessManager.get(s.refPanel),s.panel=this.panelBusinessManager.get(s.refPanel)}}catch(n){e.e(n)}finally{e.f()}}},{key:"assignDataToPanels",value:function(){var t,e=this,s=a(this.panelBusinessManager.getAll());try{var n=function(){var s=t.value;s.project=e.projectBusiness;var n=e.partBusinessManager.get(s.key);n&&(s.part=n);var i,r=a(s.refStocks);try{for(r.s();!(i=r.n()).done;){var o=i.value,u=e.stockBusinessManager.get(o);if(u)s.stocks.push(u),"CORE"===u.variables.ST_N&&(s.material=u.material);else{var l=e.laminateBusinessManager.get(o);l&&s.laminates.push(l)}}}catch(w){r.e(w)}finally{r.f()}var h,c=a(s.refEdgebands);try{for(c.s();!(h=c.n()).done;){var f=h.value,g=e.edgebandBusinessManager.get(f);g&&s.edgebands.push(g)}}catch(w){c.e(w)}finally{c.f()}var d,v=a(s.refPrograms);try{for(v.s();!(d=v.n()).done;){var m=d.value,y=e.programBusinessManager.get(m);y&&s.programs.push(y)}}catch(w){v.e(w)}finally{v.f()}var p,b=a(s.refProcessZones);try{for(b.s();!(p=b.n()).done;){var k=p.value,P=e.processZoneBusinessManager.get(k);P&&s.processZones.push(P)}}catch(w){b.e(w)}finally{b.f()}s.isNested=e.programPartBusinessManager.getAll().some((function(t){return t.refPart===s.key})),s.isPatterned=e.patternsBusinessManager.getAll().some((function(t){return t.getRefPanels().includes(s.name)}))};for(s.s();!(t=s.n()).done;)n()}catch(i){s.e(i)}finally{s.f()}}},{key:"assignDataToAssemblies",value:function(){var t,e=a(this.assemblyBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value,i=a(n.refParts);try{for(i.s();!(s=i.n()).done;){var r,o=s.value,u=this.partBusinessManager.get(o);u&&(null===(r=n.parts)||void 0===r||r.push(u))}}catch(d){i.e(d)}finally{i.f()}var l,h=a(n.refPrograms);try{for(h.s();!(l=h.n()).done;){var c,f=l.value,g=this.programBusinessManager.get(f);g&&(null===(c=n.programs)||void 0===c||c.push(g))}}catch(d){h.e(d)}finally{h.f()}}}catch(d){e.e(d)}finally{e.f()}}},{key:"assignSubAssemblies",value:function(){var t,e=a(this.assemblyBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value,i=a(n.refAssemblies);try{for(i.s();!(s=i.n()).done;){var r,o=s.value,u=this.assemblyBusinessManager.get(o);u&&(null===(r=n.assemblies)||void 0===r||r.push(u))}}catch(l){i.e(l)}finally{i.f()}}}catch(l){e.e(l)}finally{e.f()}}},{key:"assignDataToFrames",value:function(){var t,e=a(this.frameBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value,i=a(n.refParts);try{for(i.s();!(s=i.n()).done;){var r,o=s.value,u=this.partBusinessManager.get(o);u&&(null===(r=n.parts)||void 0===r||r.push(u));var l=this.panelBusinessManager.get(o);if(l){var h;null===(h=n.panels)||void 0===h||h.push(l);var c,f=a(l.programs);try{for(f.s();!(c=f.n()).done;){var g=c.value;n.programs.push(g)}}catch(k){f.e(k)}finally{f.f()}}var d=this.hardwareBusinessManager.get(o);d&&n.hardware.push(d)}}catch(k){i.e(k)}finally{i.f()}var v,m=a(n.refAssemblies);try{for(m.s();!(v=m.n()).done;){var y=v.value,p=this.assemblyBusinessManager.get(y);p&&n.assemblies.push(p);var b=this.hardwareBusinessManager.get(y);b&&n.hardware.push(b)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){e.e(k)}finally{e.f()}}},{key:"assignDataToSubFrames",value:function(){var t,e=a(this.subFrameBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value,i=a(n.refParts);try{for(i.s();!(s=i.n()).done;){var r,o=s.value,u=this.partBusinessManager.get(o);u&&(null===(r=n.parts)||void 0===r||r.push(u));var l=this.panelBusinessManager.get(o);if(l){var h;null===(h=n.panels)||void 0===h||h.push(l);var c,f=a(l.programs);try{for(f.s();!(c=f.n()).done;){var g=c.value;n.programs.push(g)}}catch(k){f.e(k)}finally{f.f()}}var d=this.hardwareBusinessManager.get(o);d&&n.hardware.push(d)}}catch(k){i.e(k)}finally{i.f()}var v,m=a(n.refAssemblies);try{for(m.s();!(v=m.n()).done;){var y=v.value,p=this.assemblyBusinessManager.get(y);p&&n.assemblies.push(p);var b=this.hardwareBusinessManager.get(y);b&&n.hardware.push(b)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){e.e(k)}finally{e.f()}}},{key:"assignDataToParts",value:function(){var t,e=a(this.partBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value;n.panel=n.refPanel?this.panelBusinessManager.get(n.refPanel):void 0;var i,r=a(null!==(s=n.refStocks)&&void 0!==s?s:[]);try{for(r.s();!(i=r.n()).done;){var o=i.value,u=this.stockBusinessManager.get(o);u&&n.stocks.push(u)}}catch(g){r.e(g)}finally{r.f()}var l,h=a(n.refPrograms);try{for(h.s();!(l=h.n()).done;){var c=l.value,f=this.programBusinessManager.get(c);f&&(n.programs.push(f),f.part=n)}}catch(g){h.e(g)}finally{h.f()}}}catch(g){e.e(g)}finally{e.f()}}},{key:"assignDataToSheets",value:function(){var t,e=a(this.sheetBusiness);try{for(e.s();!(t=e.n()).done;){var s,n,i=t.value,r=a(null!==(s=i.refProgramParts)&&void 0!==s?s:[]);try{for(r.s();!(n=r.n()).done;){var o=n.value,u=this.programPartBusinessManager.get(o);u&&i.programParts.push(u)}}catch(l){r.e(l)}finally{r.f()}}}catch(l){e.e(l)}finally{e.f()}}},{key:"assignDataToProgramParts",value:function(){var t,e=this,s=a(this.programPartsBusiness);try{var n=function(){var s=t.value,n=e.panelBusinessManager.get(s.refPart);s.panel=null!=n?n:void 0;var i=e.partBusinessManager.get(s.refPart);s.part=null!=i?i:void 0;var r=e.sheetBusinessManager.get(s.refProgram);s.sheet=null!=r?r:void 0;var o,u=a(e.sheetBusinessManager.getAll());try{for(u.s();!(o=u.n()).done;){var l=o.value;l.programParts.some((function(t){return t.refPart===s.refPart}))&&s.sheets.push(l)}}catch(h){u.e(h)}finally{u.f()}};for(s.s();!(t=s.n()).done;)n()}catch(i){s.e(i)}finally{s.f()}}},{key:"assignDataToProcessZones",value:function(){var t,e=a(this.processZonesBusiness);try{for(e.s();!(t=e.n()).done;){var s=t.value,n=this.panelProcessBusinessManager.get(s.refPanelProcess);s.panelProcess=n}}catch(i){e.e(i)}finally{e.f()}}}],[{key:"createFromRawDataNew",value:function(e,s){var a=St.createFromRawData(e),n=_t.fromProjectData(a.projectData),i=new re;i.addInstances(a.materialsData);var r=new Ae;r.addInstances(a.toolsData);var o=new ve;o.addInstances(a.programsData),o.addTools(r);var u=new Me;u.addInstances(a.stocksData),u.addMaterials(i);var l=new fe;l.addInstances(a.partsData),l.addStocks(u),l.addPrograms(o);var h=new Vt;h.addInstances(a.assembliesData),h.addPrograms(o),h.addParts(l),h.addAssemblies(h);var c=new ae;c.addInstances(a.stocksData,s);var f=new Zt;f.addInstances(a.edgebandMaterialsData);var g=new Ht;g.addInstances(a.edgebandsData),g.addMaterials(f);var d=(new Ce).addInstances(a.programsData),v=(new pe).addInstances(a.programPartsData),m=(new ke).addInstances(a.spindlesData),y=(new Ft).addInstances(a.costsData),p=(new Ie).addInstances(e,l,h),b=(new Kt).addInstances(p),k=(new ns).addInstances(p),P=(new te).addInstances(p),w=(new xe).addInstances(p),M=(new Ne).addInstances(a.panelProcessesData),D=(new Le).addInstances(a.processZonesData),T=(new _e).addInstances(a.stocksData),A=(new Ue).addInstances(i,T.getAll()),I=(new es).addInstances(a.boardMaterialsData),B=new le;B.addInstances(a.panelsData,s),B.addStocks(u),B.addEdgebands(g),B.addLaminates(c),B.addPrograms(o);var S=(new $e).addInstances(a.patternsData,B.getAll());return new t(e,s,n,B.getAll(),u.getAll(),c.getAll(),l.getAll(),h.getAll(),g.getAll(),f.getAll(),i.getAll(),A.getAll(),I.getAll(),o.getAll(),d.getAll(),v.getAll(),r.getAll(),m.getAll(),y.getAll(),p.getAll(),b.getAll(),k.getAll(),P.getAll(),w.getAll(),M.getAll(),D.getAll(),T.getAll(),S.getAll(),B,u,c,l,h,g,f,i,A,I,o,d,v,r,m,y,b,k,P,w,M,D,T,S)}},{key:"createFromRawData",value:function(e,s){var a=St.createFromRawData(e),n=_t.fromProjectData(a.projectData),i=(new re).addInstances(a.materialsData),r=(new ve).addInstances(a.programsData),o=(new fe).addInstances(a.partsData),u=(new Vt).addInstances(a.assembliesData),l=(new le).addInstances(a.panelsData,s),h=(new Me).addInstances(a.stocksData),c=(new ae).addInstances(a.stocksData,s),f=(new Ht).addInstances(a.edgebandsData),g=(new Zt).addInstances(a.edgebandMaterialsData),d=(new Ce).addInstances(a.programsData),v=(new pe).addInstances(a.programPartsData),m=(new Ae).addInstances(a.toolsData),y=(new ke).addInstances(a.spindlesData),p=(new Ft).addInstances(a.costsData),b=(new Ie).addInstances(e,o,u),k=(new Kt).addInstances(b),P=(new ns).addInstances(b),w=(new te).addInstances(b),M=(new xe).addInstances(b),D=(new Ne).addInstances(a.panelProcessesData),T=(new Le).addInstances(a.processZonesData),A=(new _e).addInstances(a.stocksData),I=(new Ue).addInstances(i,A.getAll()),B=(new es).addInstances(a.boardMaterialsData),S=(new $e).addInstances(a.patternsData,l.getAll());return new t(e,s,n,l.getAll(),h.getAll(),c.getAll(),o.getAll(),u.getAll(),f.getAll(),g.getAll(),i.getAll(),I.getAll(),B.getAll(),r.getAll(),d.getAll(),v.getAll(),m.getAll(),y.getAll(),p.getAll(),b.getAll(),k.getAll(),P.getAll(),w.getAll(),M.getAll(),D.getAll(),T.getAll(),A.getAll(),S.getAll(),l,h,c,o,u,f,g,i,I,B,r,d,v,m,y,p,k,P,w,M,D,T,A,S).relateData()}}])}(),rs=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,Ot.fromAssemblyBusiness(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt),os=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,Je.fromBoardMaterialBusiness(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt),us=function(t){function e(){var t;return d(this,e),(t=r(this,e,arguments)).findProjectComponent=function(t,e,s){var a=t.name,n=s.find((function(t){return t.name===a}));if(n)return n;var i=e.find((function(t){return t.name===a}));return i||null},t.getAll=function(){var e=Array.from(t.instances.values());return e.map((function(e){return t.clone(e)})),e},t}return l(e,t),f(e,[{key:"addInstances",value:function(t,e,s){var a=this.findProjectComponent(t,e,s);return a&&this.addInstance(a.key,a),this}},{key:"clone",value:function(t){return Object.assign(Object.create(Object.getPrototypeOf(t)),t)}}])}(Yt);us.createBOM=function(t){var e,s,n,i=a(null!==(e=t.refPartsQuantities)&&void 0!==e?e:[]);try{for(i.s();!(n=i.n()).done;){var r=n.value.key;if(t.children)for(var o=(null===(u=t.children)||void 0===u?void 0:u.length)-1;o>=0;o--){var u;r===t.children[o].key&&t.children.splice(o,1)}}}catch(m){i.e(m)}finally{i.f()}var l,h=a(null!==(s=t.refAssembliesQuantities)&&void 0!==s?s:[]);try{for(h.s();!(l=h.n()).done;){var c=l.value,f=c.key,g=c.quantity;if(t.children)for(var d=(null===(v=t.children)||void 0===v?void 0:v.length)-1;d>=0;d--){var v;f===t.children[d].key&&--g>1&&t.children.splice(d,1)}}}catch(m){h.e(m)}finally{h.f()}return t};var ls=function(){function t(e,s){d(this,t),this.articles=e,this.cost=s}return f(t,null,[{key:"fromCostBusiness",value:function(e){return new t(e.articles,e.cost)}}])}(),hs=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){return this.addInstance("0",ls.fromCostBusiness(t[0])),this}}])}(Yt),cs=function(t){function e(){var t;return d(this,e),(t=r(this,e,arguments)).getGroupKey=function(t){var e;return"".concat(t.length,"_").concat(t.width,"_").concat(t.thickness,"_").concat(null===(e=t.material)||void 0===e?void 0:e.name)},t}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,Ut.fromEdgebandBusiness(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt),fs=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,xt.fromEdgebandMaterialBusiness(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt),gs=function(t){function e(){var t;return d(this,e),(t=r(this,e,arguments)).FrameTypedObjectName="EXCLUDED",t}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,Ge.fromExcludedBusiness(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt),ds=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;n.getIsExcluded()||this.addInstance(n.key,zt.fromFrameBusiness(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt),vs=function(t){function e(){var t;return d(this,e),(t=r(this,e,arguments)).FrameTypedObjectName="HARDWARE",t}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;n.getIsExcluded()||this.addInstance(n.key,$t.fromHardwareBusiness(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt),ms=f((function t(){d(this,t)}));(U=ms).makeLabels=function(t){var e=[],s=1;return null==t||t.forEach((function(t){return function(t){for(var a=t.quantity>0?t.quantity:1,n=0;n<a;n++){var i=U.clone(t);i.instance=n+1,i.instanceLabel=s,s++,e.push(i)}}(t)})),e},U.clone=function(t){return Object.assign(Object.create(Object.getPrototypeOf(t)),t)},U.deepCopy=function(e){if(null==e)return e;if(e instanceof Date)return new Date(e.getTime());if(Array.isArray(e))return e.map((function(t){return U.deepCopy(t)}));if("object"===t(e)){var s={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=e[a];s[a]=U.deepCopy(n)}return s}return e};var ys=function(){return f((function t(e,s,a,n,i,r,o,u,l,h,c,f,g,v,m){d(this,t),this.key=e,this.messages=s,this.documents=a,this.variables=n,this.name=i,this.description=r,this.category=o,this.thickness=u,this.hasGrain=l,this.cost=h,this.costUnit=c,this.costType=f,this.quantity=g,this.type=v,this.unitOfMeasure=m,this.resource="laminateMaterials"}),null,[{key:"fromMaterialBusiness",value:function(t){return t.createViewModel()}}])}(),ps=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;n.getIsWeldment()||1!==n.getType()||this.addInstance(n.key,ys.fromMaterialBusiness(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt),bs=function(t){function s(){var t;return d(this,s),(t=r(this,s,arguments)).combinedInstances=new Map,t.getLongest=function(t,e,s){return s?{length:t,width:e}:e>t?{width:e,length:t}:{length:t,width:e}},t.getGroupKey=function(e){var s,a,n,i,r,o=t.getLongest(e.length,e.width,null!==(s=null===(a=e.material)||void 0===a?void 0:a.hasGrain)&&void 0!==s&&s),u=o.length,l=o.width;return"".concat(u,"_").concat(l,"_").concat(e.thickness,"_").concat(null!==(n=null===(i=e.material)||void 0===i?void 0:i.hasGrain)&&void 0!==n&&n,"_").concat(null===(r=e.material)||void 0===r?void 0:r.name)},t.getAllCombined=function(){var s,n=new Map,i=a(t.instances.values());try{for(i.s();!(s=i.n()).done;){var r=s.value,o=t.getGroupKey(r);n.has(o)||n.set(o,[]),n.get(o).push(r)}}catch(y){i.e(y)}finally{i.f()}var u,l=new Map,h=1,c=a(n);try{for(c.s();!(u=c.n()).done;){var f=e(u.value,2)[1];if(1===f.length){var g=f[0];l.set(g.name,g)}else{var d=f[0],v=f.reduce((function(t,e){return t+e.quantity}),0),m=ee.createCombinedLaminate(d,"Combined Laminate ".concat(h++),v);m.children=f,m.part=d.part,m.panel=d.panel,m.material=d.material,l.set(m.name,m)}}}catch(y){c.e(y)}finally{c.f()}return Array.from(l.values())},t}return l(s,t),f(s,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,ee.fromLaminateBusiness(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt),ks=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;n.getIsWeldment()||(0!==n.getType()&&2!==n.getType()||this.addInstance(n.key,ne.fromMaterialBusiness(n)))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt),Ps=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t,e){var s,n=a(e);try{for(n.s();!(s=n.n()).done;){var i=s.value;this.addInstance("".concat(t,"-").concat(i.messageType),i)}}catch(r){n.e(r)}finally{n.f()}return this}},{key:"processMessages",value:function(t,e,s,a,n,i,r,o,u,l,h,c,f){this.processProjectMessages(t),this.processSourceMessages(e),this.processSourceMessages(s),this.processSourceMessages(a),this.processSourceMessages(n),this.processSourceMessages(i),this.processSourceMessages(r),this.processSourceMessages(o),this.processSourceMessages(u),this.processSourceMessages(l),this.processSourceMessages(h),this.processSourceMessages(c),this.processSourceMessages(f),this.processPanelMessages(e),this.processProgramMessages(u)}},{key:"processSourceMessages",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstances(n.key,n.messages)}}catch(i){s.e(i)}finally{s.f()}}},{key:"processProjectMessages",value:function(t){this.addInstances(t.name,t.messages)}},{key:"processPanelMessages",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.processPanelSize(n),this.processPanelLength(n),this.processPanelWidth(n),this.processPanelInvalidDimensions(n)}}catch(i){s.e(i)}finally{s.f()}}},{key:"processProgramMessages",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.processProgramEncodeMessage(n)}}catch(i){s.e(i)}finally{s.f()}}},{key:"processPanelSize",value:function(t){if(!1===t.hasGrain&&t.boardLength>0&&t.boardWidth>0){var e=t.lengthStock<=t.boardLength&&t.widthStock<=t.boardWidth,s=t.lengthStock<=t.boardWidth&&t.widthStock<=t.boardLength;if(!e&&!s){var a=new Rt("ERROR","Error","size out of range. Panel Size: ".concat(t.lengthStock," x ").concat(t.widthStock," | Board: ").concat(t.boardLength," x ").concat(t.boardWidth),"size out of range. Panel Size: ".concat(t.lengthStock," x ").concat(t.widthStock," | Board: ").concat(t.boardLength," x ").concat(t.boardWidth),t.name,t.name,"Panel","");this.addInstance("".concat(t.key,"-").concat(a.message),a),t.messages.push(a)}}}},{key:"processPanelLength",value:function(t){if(t.boardLength<t.lengthStock&&t.boardLength>0&&t.hasGrain){var e=new Rt("ERROR","Error","length out of range. Length: ".concat(t.lengthStock," | Board: ").concat(t.boardLength," x ").concat(t.boardWidth),"length out of range. Length: ".concat(t.lengthStock," | Board: ").concat(t.boardLength," x ").concat(t.boardWidth),t.name,t.name,"Panel","");this.addInstance("".concat(t.key,"-").concat(e.message),e),t.messages.push(e)}}},{key:"processPanelWidth",value:function(t){if(t.boardWidth<t.widthStock&&t.boardWidth>0&&t.hasGrain){var e=new Rt("ERROR","Error","width out of range. Width: ".concat(t.widthStock," | Board: ").concat(t.boardLength," x ").concat(t.boardWidth),"width out of range. Width: ".concat(t.widthStock," | Board: ").concat(t.boardLength," x ").concat(t.boardWidth),t.name,t.name,"Panel","");this.addInstance("".concat(t.key,"-").concat(e.message),e),t.messages.push(e)}}},{key:"processPanelInvalidDimensions",value:function(t){if(0===t.length){var e=new Rt("ERROR","Error","invalid length dimension, value is 0","invalid length dimension, value is 0",t.name,t.name,"Panel","");this.addInstance("".concat(t.key,"-").concat(e.message),e),t.messages.push(e)}if(0===t.width){var s=new Rt("ERROR","Error","invalid width dimension, value is 0","invalid width dimension, value is 0",t.name,t.name,"Panel","");this.addInstance("".concat(t.key,"-").concat(s.message),s),t.messages.push(s)}if(0===t.thickness){var a=new Rt("ERROR","Error","invalid thickness dimension, value is 0","invalid thickness dimension, value is 0",t.name,t.name,"Panel","");this.addInstance("".concat(t.key,"-").concat(a.message),a),t.messages.push(a)}}},{key:"processProgramEncodeMessage",value:function(t){var e,s=null!==(e=t.variables.ENCODEMSG)&&void 0!==e?e:"";if(""!==s){var a=new Rt("ERROR","Error",s,s,t.name,t.name,"Program","");this.addInstance("".concat(t.key,"-").concat(s),a),t.messages.push(a)}}}])}(Yt),ws=function(t){function e(){var t;return d(this,e),(t=r(this,e,arguments)).combine=!1,t}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;n.getIsExcluded()||this.addInstance(n.key,n.createViewModel())}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt),Ms=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,n.createViewModel())}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt),Ds=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,he.fromPartBusiness(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt),Ts=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,qe.fromPatternBusiness(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt),As=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,n.createViewModel())}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt),Is=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;n.refBoard||this.addInstance(n.key,ge.fromProgramBusiness(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt),Bs=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,me.fromProgramPartBusiness(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt),Ss=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;n.refBoard&&this.addInstance(n.key,Be.fromProgramBusiness(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt),Cs=f((function t(e,s,a,n){d(this,t),this.key=e,this.messages=s,this.documents=a,this.variables=n,this.resource="spindles"}));(G=Cs).fromSpindleBusiness=function(t){return new G(t.key,Rt.fromMessagesRaw(t.messages,t.key,"Spindle",""),t.documents,t.variables)};var Os=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){if(!t)return this;var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,Cs.fromSpindleBusiness(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt),Rs=function(t){function e(){var t;return d(this,e),(t=r(this,e,arguments)).sourceInstances=new Map,t.combine=!1,t}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n,i,r,o=e.value;null!==(n=o.material)&&void 0!==n&&n.getIsWeldment()||(0!==(null===(i=o.material)||void 0===i?void 0:i.getType())&&2!==(null===(r=o.material)||void 0===r?void 0:r.getType())||this.addInstance(o.key,Pe.fromStockBusiness(o)))}}catch(u){s.e(u)}finally{s.f()}return this}}])}(Yt),Ns=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;n.getIsExcluded()||this.addInstance(n.key,ss.fromFrameBusiness(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt),Es=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,De.fromToolBusiness(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt),Vs=f((function t(){var e=this;d(this,t),this.instances=new Map,this.addInstance=function(t,s){var a=e.instances.get(t);a?a.push(s):e.instances.set(t,[s])},this.addInstances=function(t,s,n){var i,r=a(t.typedObjects);try{for(r.s();!(i=r.n()).done;){var o=i.value,u=s.get(o);if(u){var l,h=a(u.variables.TOTYPES.split(";"));try{for(h.s();!(l=h.n()).done;){var c=l.value;e.addInstance(c,u)}}catch(m){h.e(m)}finally{h.f()}}var f=n.get(o);if(f){var g,d=a(f.variables.TOTYPES.split(";"));try{for(d.s();!(g=d.n()).done;){var v=g.value;e.addInstance(v,f)}}catch(m){d.e(m)}finally{d.f()}}}}catch(m){r.e(m)}finally{r.f()}return e},this.getInstancesByName=function(t){return e.instances.get(t)||void 0},this.getAll=function(){return Object.fromEntries(e.instances)}})),Ls=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;n.getIsExcluded()||this.addInstance(n.key,je.fromWeldmentBusiness(n))}}catch(i){s.e(i)}finally{s.f()}return this}},{key:"get",value:function(t){var e=this.instances.get(t);if(e)return e;var s,n=a(this.instances.values());try{for(n.s();!(s=n.n()).done;){var i,r,o=a(null!==(i=s.value.children)&&void 0!==i?i:[]);try{for(o.s();!(r=o.n()).done;){var u=r.value;if(u.key===t)return u}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}}},{key:"getFromRefPart",value:function(t){for(var e=[],s=0,a=Array.from(this.instances.values());s<a.length;s++){var n=a[s];n.refPart===t&&e.push(n)}return e}}])}(Yt),js=function(t){function e(){return d(this,e),r(this,e,arguments)}return l(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=a(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,Qe.fromMaterialBusiness(n))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Yt);n("default",function(){function t(e,s,a,n,i,r,o,u,l,h,c,f,g,v,m,y,p,b,k,P,w,M,D,T,A,I,B,S,C,O,R,N,E,V,L,j,W,_,Q,F,U,G,H,x,q,Z,Y,z,X,K,$,J,tt,et,st,at,nt,it,rt){var ot=this;d(this,t),this.database=e,this.settings=s,this.project=a,this.panels=n,this.stocks=i,this.parts=r,this.assemblies=o,this.bom=u,this.edgebands=l,this.laminates=h,this.programs=c,this.sheets=f,this.programParts=g,this.tools=v,this.spindles=m,this.costs=y,this.messages=p,this.typedObjects=b,this.frames=k,this.subFrames=P,this.hardware=w,this.excluded=M,this.panelProcesses=D,this.processZones=T,this.weldments=A,this.patterns=I,this.panelMaterials=B,this.laminateMaterials=S,this.edgebandMaterials=C,this.weldmentMaterials=O,this.boardMaterials=R,this.panelManager=N,this.stockManager=E,this.partManager=V,this.assemblyManager=L,this.edgebandManager=j,this.edgebandMaterialManager=W,this.laminateManager=_,this.materialManager=Q,this.laminateMaterialManager=F,this.weldmentMaterialManager=U,this.boardMaterialManager=G,this.programManager=H,this.sheetManager=x,this.programPartManager=q,this.toolManager=Z,this.spindleManager=Y,this.costManager=z,this.messageManager=X,this.typedObjectManager=K,this.frameManager=$,this.subFrameManager=J,this.hardwareManager=tt,this.excludedManager=et,this.panelProcessManager=st,this.processZoneManager=at,this.weldmentManager=nt,this.patternManager=it,this.labelManager=rt,this.relateData=function(){return ot.assignDataToProject(),ot.assignDataToEdgebands(),ot.assignDataToStocks(),ot.assignDataToWeldments(),ot.assignDataToLaminates(),ot.assignDataToPanels(),ot.assignDataToAssemblies(),ot.assignSubAssemblies(),ot.assignDataToFrames(),ot.assignDataToSubFrames(),ot.assignDataToParts(),ot.assignDataToSheets(),ot.assignDataToPrograms(),ot.assignDataToProgramParts(),ot.assignDataToProcessZones(),ot.assignDataToPatterns(),ot.assignDataToBoards(),ot.assignDataToTools(),ot}}return f(t,[{key:"assignDataToProject",value:function(){}},{key:"assignDataToEdgebands",value:function(){var t,e=a(this.edgebandManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.edgebandMaterialManager.get(s.refMaterial),s.part=this.partManager.get(s.refPanel),s.panel=this.panelManager.get(s.refPanel)}}catch(n){e.e(n)}finally{e.f()}}},{key:"assignDataToStocks",value:function(){var t,e=a(this.stockManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value;this.assignDataToStock(n);var i,r=a(null!==(s=n.children)&&void 0!==s?s:[]);try{for(r.s();!(i=r.n()).done;){var o=i.value;this.assignDataToStock(o)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){e.e(u)}finally{e.f()}}},{key:"assignDataToStock",value:function(t){t.material=this.materialManager.get(t.refMaterial),t.material||console.warn("material not found for stock: ".concat(t.key)),t.part=this.partManager.get(t.refPart),t.panel=this.panelManager.get(t.refPart)}},{key:"assignDataToWeldments",value:function(){var t,e=a(this.weldments);try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.materialManager.get(s.refMaterial),s.part=this.partManager.get(s.refPart)}}catch(n){e.e(n)}finally{e.f()}}},{key:"assignDataToLaminates",value:function(){var t,e=a(this.laminateManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.laminateMaterialManager.get(s.refMaterial),s.material||console.warn("material not found for laminate: ".concat(s.key)),s.part=this.partManager.get(s.refPanel),s.panel=this.panelManager.get(s.refPanel)}}catch(n){e.e(n)}finally{e.f()}}},{key:"assignDataToPanels",value:function(){var t,e=a(this.panels);try{for(e.s();!(t=e.n()).done;){var s=t.value;this.assignDataToPanel(s)}}catch(n){e.e(n)}finally{e.f()}}},{key:"assignDataToPanel",value:function(t){t.project=this.project;var e=this.partManager.get(t.refPart);e&&(t.part=e);var s,n=a(t.refStocks);try{for(n.s();!(s=n.n()).done;){var i=s.value,r=this.stockManager.get(i);if(r){var o;t.stocks.push(r),r.material||console.warn("material not found for stock",r.key,"in panel",t.key),"CORE"===r.variables.ST_N&&(t.material=r.material),null!==(o=r.variables.ST_N)&&void 0!==o&&o.includes("LAYER")&&t.layers.push(r)}else{var u,l=this.laminateManager.get(i);if(l)t.laminates.push(l),"TOP"===l.name&&(t.laminateTop=l),"BOTTOM"===l.name&&(t.laminateBottom=l),null!==(u=l.variables.ST_N)&&void 0!==u&&u.includes("LAYER")&&t.layers.push(l)}}}catch(I){n.e(I)}finally{n.f()}var h,c=a(t.refEdgebands);try{for(c.s();!(h=c.n()).done;){var f=h.value,g=this.edgebandManager.get(f);g&&(t.edgebands.push(g),"F"===g.position&&(t.edgebandFront=g),"B"===g.position&&(t.edgebandBack=g),"L"===g.position&&(t.edgebandLeft=g),"R"===g.position&&(t.edgebandRight=g))}}catch(I){c.e(I)}finally{c.f()}var d,v=a(t.refPrograms);try{for(v.s();!(d=v.n()).done;){var m=d.value,y=this.programManager.get(m);y&&(t.programs.push(y),y.panel=t,y.material=t.material,e&&(y.part=e))}}catch(I){v.e(I)}finally{v.f()}var p,b=a(t.refProcessZones);try{for(b.s();!(p=b.n()).done;){var k=p.value,P=this.processZoneManager.get(k);P&&t.processZones.push(P)}}catch(I){b.e(I)}finally{b.f()}var w,M=a(this.patterns);try{for(M.s();!(w=M.n()).done;){var D,T=w.value,A=a(T.refPanels);try{for(A.s();!(D=A.n()).done;){D.value===t.name&&(t.pattern=T)}}catch(I){A.e(I)}finally{A.f()}}}catch(I){M.e(I)}finally{M.f()}}},{key:"assignDataToAssemblies",value:function(){var t,e=a(this.assemblyManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value,i=a(n.refParts);try{for(i.s();!(s=i.n()).done;){var r=s.value,o=this.partManager.get(r);o&&(n.parts.push(o),n.children||(n.children=[]),n.children.push(o))}}catch(f){i.e(f)}finally{i.f()}var u,l=a(n.refPrograms);try{for(l.s();!(u=l.n()).done;){var h=u.value,c=this.programManager.get(h);c&&n.programs.push(c)}}catch(f){l.e(f)}finally{l.f()}}}catch(f){e.e(f)}finally{e.f()}}},{key:"assignSubAssemblies",value:function(){var t,e=a(this.assemblyManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value,i=a(n.refAssemblies);try{for(i.s();!(s=i.n()).done;){var r=s.value,o=this.assemblyManager.get(r);o&&(n.assemblies.push(o),n.children||(n.children=[]),n.children.push(o))}}catch(u){i.e(u)}finally{i.f()}}}catch(u){e.e(u)}finally{e.f()}}},{key:"assignDataToFrames",value:function(){var t,e=this,n=a(this.frameManager.getAll());try{for(n.s();!(t=n.n()).done;){var i,r=t.value,o=a(r.refParts);try{var u=function(){var t=i.value,n=e.partManager.get(t);if(n){var o;null===(o=r.parts)||void 0===o||o.push(n);var u=e.weldmentManager.getFromRefPart(t);u&&(r.weldments=s(u))}var l=e.panelManager.get(t);if(l){var h;null===(h=l.frames)||void 0===h||h.push(r),r.panels.push(l);var c,f=a(l.programs);try{for(f.s();!(c=f.n()).done;){var g=c.value;r.programs.push(g)}}catch(p){f.e(p)}finally{f.f()}var d=r.refPartsQuantities.filter((function(t){return t.key===l.key})).reduce((function(t,e){return t+e.quantity}),0);l.refQuantities.push({key:r.key,quantity:d})}var v=e.hardwareManager.get(t);if(v){var m;r.hardware.push(v),null===(m=v.frames)||void 0===m||m.push(r);var y=[].concat(s(r.refPartsQuantities),s(r.refAssembliesQuantities)).filter((function(t){return t.key===v.key})).reduce((function(t,e){return t+e.quantity}),0);v.refQuantities.push({key:r.key,quantity:y})}};for(o.s();!(i=o.n()).done;)u()}catch(f){o.e(f)}finally{o.f()}var l,h=a(r.refAssemblies);try{var c=function(){var t=l.value,a=e.assemblyManager.get(t);a&&r.assemblies.push(a);var n=e.subFrameManager.get(t);if(n){r.subFrames||(r.subFrames=[]),r.subFrames.push(n);var i=r.refAssembliesQuantities.filter((function(t){return t.key===n.key})).reduce((function(t,e){return t+e.quantity}),0);n.refQuantities.push({key:r.key,quantity:i})}var o=e.hardwareManager.get(t);if(o){var u;r.hardware.push(o),null===(u=o.frames)||void 0===u||u.push(r);var h=[].concat(s(r.refPartsQuantities),s(r.refAssembliesQuantities)).filter((function(t){return t.key===o.key})).reduce((function(t,e){return t+e.quantity}),0);o.refQuantities.push({key:r.key,quantity:h})}};for(h.s();!(l=h.n()).done;)c()}catch(f){h.e(f)}finally{h.f()}}}catch(f){n.e(f)}finally{n.f()}}},{key:"assignDataToSubFrames",value:function(){var t,e=a(this.subFrameManager.getAll());try{for(e.s();!(t=e.n()).done;){var n,i=t.value,r=a(i.refParts);try{for(r.s();!(n=r.n()).done;){var o=n.value,u=this.partManager.get(o);if(u){var l;null===(l=i.parts)||void 0===l||l.push(u);var h=this.weldmentManager.getFromRefPart(o);h&&(i.weldments=s(h))}var c=this.panelManager.get(o);if(c){i.panels.push(c);var f,g=a(c.programs);try{for(g.s();!(f=g.n()).done;){var d=f.value;i.programs.push(d)}}catch(w){g.e(w)}finally{g.f()}}var v=this.hardwareManager.get(o);v&&i.hardware.push(v)}}catch(w){r.e(w)}finally{r.f()}var m,y=a(i.refAssemblies);try{for(y.s();!(m=y.n()).done;){var p=m.value,b=this.assemblyManager.get(p);b&&i.assemblies.push(b);var k=this.hardwareManager.get(p);k&&i.hardware.push(k);var P=this.subFrameManager.get(p);P&&(P.subFrames||(P.subFrames=[]),P.subFrames.push(P))}}catch(w){y.e(w)}finally{y.f()}}}catch(w){e.e(w)}finally{e.f()}}},{key:"assignDataToParts",value:function(){var t,e=a(this.partManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value;n.panel=n.refPanel?this.panelManager.get(n.refPanel):void 0;var i,r=a(null!==(s=n.refStocks)&&void 0!==s?s:[]);try{for(r.s();!(i=r.n()).done;){var o=i.value,u=this.stockManager.get(o);u&&n.stocks.push(u)}}catch(g){r.e(g)}finally{r.f()}var l,h=a(n.refPrograms);try{for(h.s();!(l=h.n()).done;){var c=l.value,f=this.programManager.get(c);f&&n.programs.push(f)}}catch(g){h.e(g)}finally{h.f()}}}catch(g){e.e(g)}finally{e.f()}}},{key:"assignDataToSheets",value:function(){var t,e=a(this.sheets);try{for(e.s();!(t=e.n()).done;){var s,n,i,r,o=t.value,u=a(null!==(n=o.refProgramParts)&&void 0!==n?n:[]);try{for(u.s();!(r=u.n()).done;){var l=r.value,h=this.programPartManager.get(l);h&&o.programParts.push(h)}}catch(m){u.e(m)}finally{u.f()}var c,f=a(null!==(i=o.refTools)&&void 0!==i?i:[]);try{for(f.s();!(c=f.n()).done;){var g=c.value,d=this.toolManager.get(g);d&&o.tools.push(d)}}catch(m){f.e(m)}finally{f.f()}var v=this.boardMaterialManager.get(null!==(s=o.refBoard)&&void 0!==s?s:"");o.board=null!=v?v:void 0}}catch(m){e.e(m)}finally{e.f()}}},{key:"assignDataToPrograms",value:function(){var t,e=a(this.programs);try{for(e.s();!(t=e.n()).done;){var s,n,i=t.value,r=a(null!==(s=i.refTools)&&void 0!==s?s:[]);try{for(r.s();!(n=r.n()).done;){var o=n.value,u=this.toolManager.get(o);u&&i.tools.push(u)}}catch(l){r.e(l)}finally{r.f()}}}catch(l){e.e(l)}finally{e.f()}}},{key:"assignDataToProgramParts",value:function(){var t,e=a(this.programParts);try{for(e.s();!(t=e.n()).done;){var s,n,i=t.value,r=this.panelManager.get(i.refPart);if(i.panel=r,r)r.programParts=null!==(n=r.programParts)&&void 0!==n?n:[],r.programParts.push(i);var o=this.partManager.get(i.refPart);i.part=null!=o?o:void 0,i.programs=null!==(s=null==o?void 0:o.programs)&&void 0!==s?s:[];var u=this.sheetManager.get(i.refProgram);i.sheet=null!=u?u:void 0}}catch(l){e.e(l)}finally{e.f()}}},{key:"assignDataToProcessZones",value:function(){var t,e=a(this.processZones);try{for(e.s();!(t=e.n()).done;){var s=t.value,n=this.panelProcessManager.get(s.refPanelProcess);s.panelProcess=n}}catch(i){e.e(i)}finally{e.f()}}},{key:"assignDataToPatterns",value:function(){var t,e=new Map(this.panelManager.getAll().map((function(t){return[t.name,t]}))),s=a(this.patterns);try{for(s.s();!(t=s.n()).done;){var n=t.value;n.panels=n.refPanels.map((function(t){return e.get(t)})).filter((function(t){return!!t}));var i,r=a(this.boardMaterialManager.getAll());try{for(r.s();!(i=r.n()).done;){var o=i.value;if(o.name===n.refBoard){n.board=o;break}}}catch(u){r.e(u)}finally{r.f()}}}catch(u){s.e(u)}finally{s.f()}}},{key:"assignDataToBoards",value:function(){var t,e=a(this.boardMaterialManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.materialManager.get(s.refMaterial)}}catch(n){e.e(n)}finally{e.f()}}},{key:"assignDataToTools",value:function(){var t,e=a(this.toolManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value,i=a(n.refSpindles);try{for(i.s();!(s=i.n()).done;){var r=s.value,o=this.spindleManager.get(r);o?n.spindles.push(o):console.warn("Spindle not found for refSpindle: ".concat(r," in tool: ").concat(n.key))}}catch(u){i.e(u)}finally{i.f()}}}catch(u){e.e(u)}finally{e.f()}}}],[{key:"createFromRawData",value:function(e,s,a){if(o.getInstance(e,s,a),!a.status)throw Error("");var n=is.createFromRawData(e,s),i=Lt.fromProjectBusiness(n.projectBusiness),r=(new ws).addInstances(n.panelsBusiness),u=(new ks).addInstances(n.materialsBusiness),l=(new Rs).addInstances(n.stocksBusiness),h=(new Ds).addInstances(n.partsBusiness),c=(new rs).addInstances(n.assembliesBusiness),f=(new cs).addInstances(n.edgebandsBusiness),g=(new fs).addInstances(n.edgebandMaterialsBusiness),d=(new bs).addInstances(n.laminatesBusiness),v=(new ps).addInstances(n.materialsBusiness),m=(new js).addInstances(n.weldmentMaterialsBusiness),y=(new os).addInstances(n.boardMaterialsBusiness),p=(new Is).addInstances(n.programsBusiness),b=(new Ss).addInstances(n.sheetBusiness),k=(new Bs).addInstances(n.programPartsBusiness),P=(new Es).addInstances(n.toolsBusiness),w=(new Os).addInstances(n.spindlesBusiness),M=(new hs).addInstances(n.costsBusiness),D=new Ps,T=(new Vs).addInstances(e,h,c),A=(new ds).addInstances(n.framesBusiness),I=(new Ns).addInstances(n.subFramesBusiness),B=(new vs).addInstances(n.hardwaresBusiness),S=(new gs).addInstances(n.excludedItemsBusiness),C=(new Ms).addInstances(n.panelProcessesBusiness),O=(new As).addInstances(n.processZonesBusiness),R=(new Ls).addInstances(n.weldmentsBusiness),N=(new Ts).addInstances(n.patternsBusiness),E=(new us).addInstances(i,c.getAll(),h.getAll());return D.processMessages(i,r.getAll(),l.getAll(),h.getAll(),c.getAll(),f.getAll(),d.getAll(),u.getAll(),p.getAll(),b.getAll(),k.getAll(),P.getAll(),w.getAll()),new t(e,s,i,r.getAll(),l.getAll(),h.getAll(),c.getAll(),E.getAll(),f.getAll(),d.getAll(),p.getAll(),b.getAll(),k.getAll(),P.getAll(),w.getAll(),M.getAll(),D.getAll(),T.getAll(),A.getAll(),I.getAll(),B.getAll(),S.getAll(),C.getAll(),O.getAll(),R.getAll(),N.getAll(),u.getAll(),v.getAll(),g.getAll(),m.getAll(),y.getAll(),r,l,h,c,f,g,d,u,v,m,y,p,b,k,P,w,M,D,T,A,I,B,S,C,O,R,N,ms).relateData()}}])}())}}}))}();
