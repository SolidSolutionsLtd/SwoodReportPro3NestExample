System.register(["./main-legacy.D_ztlvX4.js"],(function(s,t){"use strict";var e,a,i;return{setters:[s=>{e=s.R,a=s.V,i=s.x}],execute:function(){const t=s=>s.replace(/\\/g,"/");class r{constructor(s,t,e,a,i,r,n,h,o,c){this.name=s,this.type=t,this.docType=e,this.processingStatus=a,this.absoluteURI=i,this.relativeURI=r,this.hidden=n,this.storageType=h,this.exists=o,this.objType=c}static{this.fromDocumentRaw=s=>{let a="";const i=e.getInstance(),n="file:///"+t(i.reportPath)+"/",h=s.absoluteURI;return h.startsWith(n)&&(a=h.slice(n.length)),new r(s.documentName??"",s.type,s.docType,s.processingStatus,s.absoluteURI,a,s.hidden,s.storageType,s.exists,s.objType)}}static{this.fromDocumentsRaw=s=>{const t=[];for(const e of s??[])t.push(this.fromDocumentRaw(e));return t}}}class n{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d){this.key=s,this.messages=t,this.variables=e,this.serialNumbers=a,this.heritedVariables=i,this.typedObjectVariables=r,this.refPrograms=n,this.refParts=h,this.refPartsQuantities=o,this.refAssemblies=c,this.refAssembliesQuantities=g,this.documents=l,this.swcps=d,this.programs=[],this.parts=[],this.assemblies=[]}static fromAssemblyRaw(s,t){const e=a.parseVariables(s.variables,t),h=a.parseVariablesArrayToObject(s.serialNumbers.variables),o=a.parseTypedVariablesArray(s.heritedVariables),c=a.parseVariableGroupToRecord(s.typedObjectVariables),g=i.parseVariablesArrayToObject(s.swcps),l=s.partsRefs.map((s=>({key:s.ID,quantity:s.count}))),d=s.assembliesRefs.map((s=>({key:s.ID,quantity:s.count})));return new n(s.ID,s.messages,e,h,o,c,s.programs,s.parts,l,s.assemblies,d,r.fromDocumentsRaw(s.documents),g)}}class h{constructor(){this.instances=new Map}addInstance(s,t){this.instances.set(s,t)}get(s){return this.instances.get(s)}getAll(){return Array.from(this.instances.values())}getTotalInstances(){return this.instances.size}}class o extends h{addInstances(s){for(const t of s.assemblies)this.addInstance(t.ID,n.fromAssemblyRaw(t,s.variableDefinitions.assemblies));return this}}class c{constructor(s,t){this.articles=s,this.cost=t}static{this.fromToolRaw=s=>new c(s.articles,s.cost)}}class g extends h{addInstances(s){return this.addInstance("0",c.fromToolRaw(s.costing)),this}}class l{constructor(s,t,e,a,i,r,n){this.key=s,this.panel=t,this.refMaterial=e,this.variables=a,this.serialNumbers=i,this.documents=r,this.messages=n}static fromEdgebandRaw(s,t){const e=a.parseVariables(s.variables,t),i=a.parseVariablesArrayToObject(s.serialNumbers.variables);return new l(s.ID,s.panel,s.edgebandMaterial,e,i,r.fromDocumentsRaw(s.documents),s.messages)}}class d extends h{addInstances(s){for(const t of s.edgebands)this.addInstance(t.ID,l.fromEdgebandRaw(t,s.variableDefinitions.edgebands));return this}}class u{constructor(s,t){this.key=s,this.variables=t}static fromEdgebandMaterialRaw(s,t){const e=a.parseVariables(s.variables,t);return new u(s.ID,e)}}class m extends h{addInstances(s){for(const t of s.edgebandMaterials??[])this.addInstance(t.ID,u.fromEdgebandMaterialRaw(t,s.variableDefinitions.edgebandMaterials));return this}}class f{constructor(s,t,e,a,i){this.key=s,this.messages=t,this.documents=e,this.variables=a,this.serialNumbers=i}static{this.fromMaterialRaw=(s,t)=>{const e=a.parseVariables(s.variables,t),i=a.parseVariablesArrayToObject(s.serialNumbers.variables);return new f(s.ID,s.messages,r.fromDocumentsRaw(s.documents),e,i)}}}class p extends h{addInstances(s){for(const t of s.materials??[])this.addInstance(t.ID,f.fromMaterialRaw(t,s.variableDefinitions.materials));return this}}class b{constructor(s,t,e,a,i,r,n,h,o,c,g){this.key=s,this.name=t,this.refPart=e,this.refPrograms=a,this.refStocks=i,this.refProcessZones=r,this.refEdgebands=n,this.messages=h,this.documents=o,this.variables=c,this.serialNumbers=g,this.programs=[],this.stocks=[],this.edgebands=[]}static fromPanelRaw(s,t){const e=a.parseVariables(s.variables,t),i=a.parseVariablesArrayToObject(s.serialNumbers.variables);return new b(s.ID,s.name,s.ID,s.programs,s.stocks,s.processZones,s.edgebands,s.messages,r.fromDocumentsRaw(s.documents),e,i)}}class P extends h{addInstances(s){for(const t of s.panels??[])this.addInstance(t.ID,b.fromPanelRaw(t,s.variableDefinitions.panels));return this}}class w{constructor(s,t,e,a){this.key=s,this.messages=t,this.documents=e,this.variables=a}static fromPanelProcessRaw(s,t){const e=a.parseVariables(s.variables,t);return new w(s.ID,s.messages,r.fromDocumentsRaw(s.documents),e)}}class y extends h{addInstances(s){if(!s.panelProcesses)return this;for(const t of s.panelProcesses)this.addInstance(t.ID,w.fromPanelProcessRaw(t,s.variableDefinitions.panelProcesses??[]));return this}}class M{constructor(s,t,e,a,i,r){this.key=s,this.refPanel=t,this.refPanelProcess=e,this.messages=a,this.documents=i,this.variables=r}static fromProcessZoneRaw(s,t){const e=a.parseVariables(s.variables,t);return new M(s.ID,s.panel,s.panelProcess,s.messages,r.fromDocumentsRaw(s.documents),e)}}class D extends h{addInstances(s){if(!s.processZones)return this;for(const t of s.processZones)this.addInstance(t.ID,M.fromProcessZoneRaw(t,s.variableDefinitions.processZones??[]));return this}}class k{constructor(s,t,e,a,i,r,n,h,o,c,g,l){this.key=s,this.refPrograms=t,this.refStocks=e,this.refPanel=a,this.bodyCount=i,this.messages=r,this.variables=n,this.serialNumbers=h,this.heritedVariables=o,this.typedObjectVariables=c,this.documents=g,this.swcps=l,this.programs=[],this.stocks=[]}static fromPartRaw(s,t){const e=a.parseVariables(s.variables,t),n=a.parseVariablesArrayToObject(s.serialNumbers.variables),h=a.parseTypedVariablesArray(s.heritedVariables),o=a.parseVariableGroupToRecord(s.typedObjectVariables),c=i.parseVariablesArrayToObject(s.swcps);return new k(s.ID,s.programs,s.stocks,s.panel,s.bodyCount,s.messages,e,n,h,o,r.fromDocumentsRaw(s.documents),c)}}class T extends h{addInstances(s){for(const t of s.parts)this.addInstance(t.ID,k.fromPartRaw(t,s.variableDefinitions.parts));return this}}class A{constructor(s,t,e,a,i,r,n,h){this.key=s,this.refTools=t,this.refProgramParts=e,this.refBoard=a,this.messages=i,this.documents=r,this.variables=n,this.serialNumbers=h,this.tools=[]}static fromProgramRaw(s,t){const e=a.parseVariables(s.variables,t),i=a.parseVariablesArrayToObject(s.serialNumbers.variables);return new A(s.ID,s.tools,s.programParts,s.nestingBoard,s.messages,r.fromDocumentsRaw(s.documents),e,i)}}class I extends h{addInstances(s){for(const t of s.programs)this.addInstance(t.ID,A.fromProgramRaw(t,s.variableDefinitions.programs));return this}}class v{constructor(s,t,e,a,i,r,n){this.key=s,this.part=t,this.program=e,this.documents=a,this.messages=i,this.variables=r,this.serialNumbers=n}static fromProgramPartRaw(s,t){const e=a.parseVariables(s.variables,t),i=a.parseVariablesArrayToObject(s.serialNumbers.variables);return new v(s.ID,s.part,s.program,r.fromDocumentsRaw(s.documents),s.messages,e,i)}}class B extends h{addInstances(s){for(const t of s.programParts)this.addInstance(t.ID,v.fromProgramPartRaw(t,s.variableDefinitions.programParts));return this}}class S{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d){this.key=s,this.swoodVersion=t,this.schemaVersion=e,this.name=a,this.projectPath=i,this.reportPath=r,this.timestamp=n,this.createdBy=h,this.documents=o,this.messages=c,this.variables=g,this.serialNumbers=l,this.swcps=d}static fromProjectRaw(s,t){const e=a.parseVariables(s.variables,t),n=a.parseVariablesArrayToObject(s.serialNumbers.variables),h=i.parseVariablesArrayToObject(s.swcps);return new S(s.reportGUID,s.reportVersion,s.schemaVersion,s.projectName,s.projectPath,s.reportPath,s.createdDate,s.createdBy,r.fromDocumentsRaw(s.documents),s.messages,e,n,h)}}class C{constructor(s,t,e,a){this.key=s,this.messages=t,this.documents=e,this.variables=a}static fromSpindleRaw(s,t){const e=a.parseVariables(s.variables,t);return new C(s.ID,s.messages,r.fromDocumentsRaw(s.documents),e)}}class R extends h{addInstances(s){if(!s.spindles)return this;for(const t of s.spindles)this.addInstance(t.ID,C.fromSpindleRaw(t,s.variableDefinitions.spindles??[]));return this}}class N{constructor(s,t,e,a,i,r){this.key=s,this.refPart=t,this.refMaterial=e,this.messages=a,this.documents=i,this.variables=r}static{this.fromStockRaw=(s,t)=>{const e=a.parseVariables(s.variables,t);return new N(s.ID,s.part,s.material,s.messages,r.fromDocumentsRaw(s.documents),e)}}}class O extends h{addInstances(s){for(const t of s.stocks)this.addInstance(t.ID,N.fromStockRaw(t,s.variableDefinitions.stocks));return this}}class E{constructor(s,t,e,a,i=[]){this.key=s,this.variables=t,this.messages=e,this.documents=a,this.refSpindles=i}static fromToolRaw(s,t){const e=a.parseVariables(s.variables,t);return new E(s.ID,e,s.messages,r.fromDocumentsRaw(s.documents),s.spindles??[])}}class V extends h{addInstances(s){for(const t of s.tools??[])this.addInstance(t.ID,E.fromToolRaw(t,s.variableDefinitions.tools));return this}}class L{constructor(){this.instances=new Map}addInstance(s,t){const e=this.instances.get(s);e?e.push(t):this.instances.set(s,[t])}addInstances(s,t,e){for(const a of s.typedObjects){const s=t.get(a);if(s){const t=s.variables.TOTYPES.split(";");for(const e of t)this.addInstance(e,s)}const i=e.get(a);if(i){const s=i.variables.TOTYPES.split(";");for(const t of s)this.addInstance(t,i)}}return this}getInstancesById(s){return this.instances.get(s)||null}getAll(){return this.instances}}class W{constructor(s,t,e,a,i){this.key=s,this.name=t,this.material=e,this.thickness=a,this.stock=i}static fromPatternRaw(s,t,e){return new W(s,s,t.material,t.thickness,e)}}class x extends h{addInstances(s){let t=1;for(const e of s??[])for(const s of e.stocks??[]){const a=`Pattern ${t.toString()}`;this.addInstance(a,W.fromPatternRaw(a,e,s)),t++}return this}}class j{constructor(s,t,e={},a={}){this.type=s,this.key=t,this.variables=e,this.articleVariables=a}static fromArticlesRaw(s){return new j("article",s.name,{},{name:s.name,count:s.count,quantity:s.quantity,quantityUnit:s.quantityUnit,cost:s.cost,costUnit:s.unitCost})}static fromBoardMaterialRaw(s,t){const e=a.parseVariables(s.variables,t);return new j("material",s.ID,e)}}class Q extends h{addInstances(s){for(const t of s.costing.articles??[])"CUTTINGPATTERN_BOARD"===t.type&&this.addInstance(t.name,j.fromArticlesRaw(t));for(const t of s.boards??[])this.addInstance(t.ID,j.fromBoardMaterialRaw(t,s.variableDefinitions.boards));return this}}function _(s,t){return t.split(".").reduce(((s,t)=>s?.[t]),s)}const F=(s,t)=>{s.sort(((s,e)=>{for(const{field:a,order:i="asc"}of t){const t=_(s,a),r=_(e,a);if(null==t&&null!=r)return"asc"===i?1:-1;if(null!=t&&null==r)return"asc"===i?-1:1;if(null!=t||null!=r){if(t<r)return"asc"===i?-1:1;if(t>r)return"asc"===i?1:-1}}return 0}));for(const e of s)Array.isArray(e.children)&&F(e.children,t)};class U{constructor(s,t,e,a,i,r){this.key=s,this.refPart=t,this.variables=e,this.messages=a,this.documents=i,this.shape=r}static fromProfileRaw(s,t){const e=a.parseVariables(s.variables,t);return new U(s.ID,s.part,e,s.messages,r.fromDocumentsRaw(s.documents),s.shape)}}class G extends h{addInstances(s){for(const t of s.profilings??[])this.addInstance(t.ID,U.fromProfileRaw(t,s.variableDefinitions.profilings));return this}}class H{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d,u,m,f,p,b,P,w,y,M,D,k,T,A,I,v,B,S,C,R,N,O,E,V,L){this.database=s,this.projectData=t,this.panelsData=e,this.stocksData=a,this.partsData=i,this.assembliesData=r,this.edgebandsData=n,this.edgebandMaterialsData=h,this.profilesData=o,this.materialsData=c,this.boardMaterialsData=g,this.programsData=l,this.programPartsData=d,this.toolsData=u,this.spindlesData=m,this.costsData=f,this.typedObjectsData=p,this.panelProcessesData=b,this.processZonesData=P,this.patternsData=w,this.panelDataManager=y,this.stockDataManager=M,this.partDataManager=D,this.assemblyDataManager=k,this.edgebandDataManager=T,this.edgebandMaterialDataManager=A,this.profileDataManager=I,this.materialDataManager=v,this.boardMaterialDataManager=B,this.programDataManager=S,this.programPartDataManager=C,this.toolDataManager=R,this.spindleDataManager=N,this.costDataManager=O,this.panelProcessDataManager=E,this.processZoneDataManager=V,this.patternDataManager=L}static createFromRawData(s){const t=S.fromProjectRaw(s,s.variableDefinitions.report),e=(new P).addInstances(s),a=(new O).addInstances(s),i=(new T).addInstances(s),r=(new o).addInstances(s),n=(new d).addInstances(s),h=(new m).addInstances(s),c=(new G).addInstances(s),l=(new p).addInstances(s),u=(new Q).addInstances(s),f=(new I).addInstances(s),b=(new B).addInstances(s),w=(new V).addInstances(s),M=(new R).addInstances(s),k=(new g).addInstances(s),A=(new L).addInstances(s,i,r),v=(new y).addInstances(s),C=(new D).addInstances(s),N=(new x).addInstances(s.cuttingPattern);return new H(s,t,e.getAll(),a.getAll(),i.getAll(),r.getAll(),n.getAll(),h.getAll(),c.getAll(),l.getAll(),u.getAll(),f.getAll(),b.getAll(),w.getAll(),M.getAll(),k.getAll(),A.getAll(),v.getAll(),C.getAll(),N.getAll(),e,a,i,r,n,h,c,l,u,f,b,w,M,k,v,C,N).relateData()}relateData(){return this.assignDataToEdgebands(),this.assignDataToStocks(),this.assignDataToPanels(),this.assignDataToAssemblies(),this.assignSubAssemblies(),this.assignDataToParts(),this.sortData(),this}sortData(){F(this.panelsData,[{field:"variables.PAN_T",order:"desc"},{field:"material.name",order:"asc"},{field:"variables.PAN_L",order:"desc"},{field:"variables.PAN_W",order:"desc"},{field:"name",order:"asc"},{field:"quantity",order:"asc"}]),F(this.stocksData,[{field:"variables.ST_T",order:"desc"},{field:"refMaterial",order:"asc"},{field:"variables.ST_L",order:"desc"},{field:"variables.ST_W",order:"desc"},{field:"name",order:"asc"},{field:"quantity",order:"asc"}])}assignDataToEdgebands(){for(const s of this.edgebandDataManager.getAll())s.material=this.edgebandMaterialDataManager.get(s.refMaterial)}assignDataToStocks(){for(const s of this.stockDataManager.getAll()){const t=this.materialDataManager.get(s.refMaterial);s.material=t}}assignDataToPanels(){for(const s of this.panelDataManager.getAll()){for(const e of s.refStocks){const t=this.stockDataManager.get(e);t&&(s.stocks.push(t),"CORE"===t.variables.ST_N&&(s.material=t.material))}for(const e of s.refEdgebands){const t=this.edgebandDataManager.get(e);t&&s.edgebands.push(t)}for(const e of s.refPrograms){const t=this.programDataManager.get(e);t&&s.programs.push(t)}const t=this.partDataManager.get(s.key);t&&(s.part=t)}}assignDataToAssemblies(){for(const s of this.assemblyDataManager.getAll()){for(const t of s.refParts){const e=this.partDataManager.get(t);e&&s.parts?.push(e)}for(const t of s.refPrograms){const e=this.programDataManager.get(t);e&&s.programs?.push(e)}}}assignSubAssemblies(){for(const s of this.assemblyDataManager.getAll())for(const t of s.refAssemblies){const e=this.assemblyDataManager.get(t);e&&s.assemblies?.push(e)}}assignDataToParts(){for(const s of this.partDataManager.getAll()){s.panel=s.refPanel?this.panelDataManager.get(s.refPanel):void 0;for(const t of s.refStocks??[]){const e=this.stockDataManager.get(t);e&&s.stocks.push(e)}for(const t of s.refPrograms){const e=this.programDataManager.get(t);e&&(s.programs.push(e),e.part=s)}}}}class ${constructor(){this.instances=new Map}add(s,t){this.instances.set(s,t)}get(s){return this.instances.get(s)}getAll(){return Array.from(this.instances.values())}getTotalInstances(){return this.instances.size}}class q{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d,u,m,f,p,b,P){this.key=s,this.messages=t,this.variables=e,this.heritedVariables=a,this.typedObjectVariables=i,this.refPrograms=r,this.refParts=n,this.refPartsQuantities=h,this.refAssemblies=o,this.refAssembliesQuantities=c,this.documents=g,this.swcps=l,this.name=d,this.description=u,this.configuration=m,this.quantity=f,this.height=p,this.width=b,this.depth=P,this.resource="assemblies",this.programs=[],this.parts=[],this.assemblies=[]}static fromAssemblyBusiness(s){return s.createViewModel()}}class Z{constructor(s,t,e,a,i,r,n,h){this.type=s,this.typeDescription=t,this.description=e,this.message=a,this.messageType=i,this.item=r,this.category=n,this.url=h,this.resource="messages"}static{this.fromMessageRaw=(s,t="",e="",a="")=>new Z(s.type,s.typeDesc,s.desc,s.message,s.messageType,t,e,a)}static{this.fromMessagesRaw=(s,t="",e="",a="")=>{const i=[];for(const r of s??[])i.push(this.fromMessageRaw(r,t,e,a));return i}}}class Y{constructor(s){this.documents=s}getImages(){const s={};for(const r of this.documents??[])if("IMAGE"===r.docType){const n=r.absoluteURI,h=e.getInstance(),o="file:///"+t(h.reportPath),c=(i=o,(a=n).startsWith(i)?a.slice(i.length):a);null!==r.name&&(s[r.name]=c)}var a,i;return s}}class z{constructor(s,t,a,i,r,n,h,o,c,g,l,d){this.key=s,this.messages=t,this.variables=a,this.heritedVariables=i,this.typedObjectVariables=r,this.refPrograms=n,this.refParts=h,this.refPartsQuantities=o,this.refAssemblies=c,this.refAssembliesQuantities=g,this.documents=l,this.swcps=d,this.programs=[],this.parts=[],this.assemblies=[],this.getName=()=>this.variables.NAME,this.getDescription=()=>this.variables.DESC,this.getConfiguration=()=>this.variables.CONF,this.getQuantity=()=>(this.variables.NB??0)*e.getInstance().projectQuantity,this.getHeight=()=>this.variables.Height??0,this.getWidth=()=>this.variables.Width??0,this.getDepth=()=>this.variables.Depth??0,this.getImages=()=>new Y(this.documents).getImages()}static{this.fromAssemblyData=s=>new z(s.key,s.messages,s.variables,s.heritedVariables,s.typedObjectVariables,s.refPrograms,s.refParts,s.refPartsQuantities,s.refAssemblies,s.refAssembliesQuantities,s.documents,s.swcps)}createViewModel(){return new q(this.key,Z.fromMessagesRaw(this.messages,this.getName(),"Assembly"),this.variables,this.heritedVariables,this.typedObjectVariables,this.refPrograms,this.refParts,this.refPartsQuantities,this.refAssemblies,this.refAssembliesQuantities,this.documents,this.swcps,this.getName(),this.getDescription(),this.getConfiguration(),this.getQuantity(),this.getHeight(),this.getWidth(),this.getDepth())}}class X extends ${constructor(){super(...arguments),this.addPrograms=s=>{const t=this.getAll();for(const e of t)for(const t of e.refPrograms){const a=s.get(t);a&&e.programs.push(a)}},this.addParts=s=>{const t=this.getAll();for(const e of t)for(const t of e.refParts){const a=s.get(t);a&&e.parts.push(a)}},this.addAssemblies=s=>{const t=this.getAll();for(const e of t)for(const t of e.refAssemblies){const a=s.get(t);a&&e.assemblies.push(a)}}}addInstances(s){for(const t of s)this.add(t.key,z.fromAssemblyData(t));return this}}class K{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d,u,m,f,p,b,P,w,y){this.key=s,this.swoodVersion=t,this.schemaVersion=e,this.name=a,this.projectPath=i,this.reportPath=r,this.timestamp=n,this.date=h,this.time=o,this.createdBy=c,this.documents=g,this.swcps=l,this.messages=d,this.variables=u,this.isDesign=m,this.isCam=f,this.isNesting=p,this.isUsingOffcuts=b,this.configuration=P,this.reportVersion=w,this.swoodDataDirectory=y,this.resource="project"}static fromProjectBusiness(s){return s.createViewModel()}}class J{constructor(s){this.documents=s}getDocuments(){const s={};for(const t of this.documents??[])null!==t.name&&""!==t.name&&(s[t.name]=t);return s}}class ss{constructor(s){this.documents=s}getPDFs(){const s={};for(const t of this.documents??[])"DRAWING2PDF"===t.docType&&t.exists&&null!==t.name&&(s[t.name]=t.relativeURI);return s}}class ts{constructor(s,t,e,a,i,r,n,h,o,c,g,l){this.key=s,this.swoodVersion=t,this.schemaVersion=e,this.name=a,this.projectPath=i,this.reportPath=r,this.timestamp=n,this.createdBy=h,this.documents=o,this.messages=c,this.variables=g,this.swcps=l,this.getTime=()=>{const s=new Date(this.timestamp);return`${String(s.getHours()).padStart(2,"0")}:${String(s.getMinutes()).padStart(2,"0")}:${String(s.getSeconds()).padStart(2,"0")}`},this.getDate=()=>{const s=new Date(this.timestamp),t=s.getFullYear(),e=String(s.getMonth()+1).padStart(2,"0");return`${String(s.getDate()).padStart(2,"0")}/${e}/${t}`},this.getIsDesign=()=>this.variables.REPORT_ISUSINGDESIGN??!1,this.getIsCam=()=>this.variables.REPORT_ISUSINGCAM??!1,this.getIsNesting=()=>this.variables.REPORT_ISNESTINGPROJECT??!1,this.getIsUsingOffcuts=()=>this.variables.MODULE_PROGRAMOFFCUTS_ISACTIVE??!1,this.getImages=()=>new Y(this.documents).getImages(),this.getPDFs=()=>new ss(this.documents).getPDFs(),this.getDocuments=()=>new J(this.documents).getDocuments(),this.getConfiguration=()=>this.component?.getConfiguration()??"",this.getReportVersion=()=>this.variables.ReportVersion??"0.0.0",this.getSwoodDataDirectory=()=>this.variables.SwoodDataDirectory??""}static{this.fromProjectData=s=>new ts(s.key,s.swoodVersion,s.schemaVersion,s.name,s.projectPath,s.reportPath,s.timestamp,s.createdBy,s.documents,s.messages,s.variables,s.swcps)}createViewModel(){return new K(this.key,this.swoodVersion,this.schemaVersion,this.name,this.projectPath,this.reportPath,this.timestamp,this.getDate(),this.getTime(),this.createdBy,this.getDocuments(),this.swcps,Z.fromMessagesRaw(this.messages,this.name,"Project"),this.variables,this.getIsDesign(),this.getIsCam(),this.getIsNesting(),this.getIsUsingOffcuts(),this.getConfiguration(),this.getReportVersion(),this.getSwoodDataDirectory())}}class es{constructor(s,t){this.articles=s,this.cost=t}static{this.fromCostData=s=>new es(s.articles,s.cost)}}class as extends ${addInstances(s){return this.add("0",es.fromCostData(s[0])),this}}class is{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d,u,m,f,p,b){this.key=s,this.refPanel=t,this.refMaterial=e,this.variables=a,this.documents=i,this.messages=r,this.name=n,this.quantity=h,this.length=o,this.lengthStock=c,this.width=g,this.thickness=l,this.order=d,this.overLength=u,this.position=m,this.isCurved=f,this.isPaint=p,this.cost=b,this.resource="edgebands"}static fromEdgebandBusiness(s){return s.createViewModel()}static{this.createCombinedEdgeband=(s,t,e)=>new is(s.key,s.refPanel,s.refMaterial,s.variables,s.documents,s.messages,t,e,s.length,s.lengthStock,s.width,s.thickness,s.order,s.overLength,s.position,s.isCurved,s.isPaint,s.cost)}}class rs{constructor(s,t,e,a,i,r){this.key=s,this.refPanel=t,this.refMaterial=e,this.variables=a,this.documents=i,this.messages=r,this.getDocuments=()=>new J(this.documents).getDocuments(),this.getName=()=>this.variables.EB_N??"",this.getQuantity=()=>this.panel?.getQuantity()??0,this.getLength=()=>this.variables.EB_L??0,this.getLengthStock=()=>this.variables.EB_LSTOCK??0,this.getWidth=()=>this.panel?.getThickness()??0,this.getThickness=()=>this.material?.getThickness()??0,this.getOrder=()=>this.variables.EB_BO??0,this.getOverLength=()=>this.variables.EB_OVERLENGTH??0,this.getPosition=()=>this.variables.EB_STOCKPOSITION,this.getIsCurved=()=>this.variables.EB_ISCURVED??!1,this.getIsPaint=()=>this.material?.getIsPaint()??!1,this.getMaterialQuantity=()=>(this.getLength()+this.getOverLength())/1e3*this.getQuantity(),this.getCost=()=>this.getMaterialQuantity()*(this.material?.getCostUnit()??0),this.updateMaterialQuantity=()=>{this.material?this.material.quantity+=(this.getLength()+this.getOverLength())/1e3*this.getQuantity():console.warn(`unable to update quantity – material or panel missing for ${this.getName()}`)}}static{this.fromEdgebandData=s=>new rs(s.key,s.panel,s.refMaterial,s.variables,s.documents,s.messages)}createViewModel(){return this.updateMaterialQuantity(),new is(this.key,this.refPanel,this.refMaterial,this.variables,this.getDocuments(),Z.fromMessagesRaw(this.messages,this.getName(),"Edgeband"),this.getName(),this.getQuantity(),this.getLength(),this.getLengthStock(),this.getWidth(),this.getThickness(),this.getOrder(),this.getOverLength(),this.getPosition(),this.getIsCurved(),this.getIsPaint(),this.getCost())}}class ns extends ${constructor(){super(...arguments),this.addMaterials=s=>{const t=this.getAll();for(const e of t){const t=s.get(e.refMaterial);t&&(e.material=t)}}}addInstances(s){for(const t of s)this.add(t.key,rs.fromEdgebandData(t));return this}}class hs{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d,u){this.key=s,this.variables=t,this.name=e,this.description=a,this.reference=i,this.thickness=r,this.extension=n,this.color=h,this.isPaint=o,this.cost=c,this.costUnit=g,this.costType=l,this.quantity=d,this.unitOfMeasure=u,this.resource="edgebandMaterials"}static fromEdgebandMaterialBusiness(s){return s.createViewModel()}}class os{constructor(s,t,e){this.key=s,this.variables=t,this.quantity=e,this.createViewModel=()=>new hs(this.key,this.variables,this.getName(),this.getDescription(),this.getReference(),this.getThickness(),this.getExtension(),this.getColor(),this.getIsPaint(),this.getCost(),this.getCostUnit(),2,this.quantity,"m"),this.getName=()=>this.variables.EBMAT_C??"",this.getDescription=()=>this.variables.EBMAT_D??"",this.getReference=()=>this.variables.EBMAT_REF??"",this.getCostUnit=()=>this.variables.EBMAT_UCOST,this.getThickness=()=>this.variables.EBMAT_T??0,this.getIsPaint=()=>this.variables.PAINT??!1,this.getExtension=()=>this.variables.EXTENSION??0,this.getCost=()=>this.quantity*this.getCostUnit(),this.getColor=()=>{if(void 0!==this.variables.EBMAT_CO&&"0"!==this.variables.EBMAT_CO)return this.argbToRgba(this.variables.EBMAT_CO)},this.argbToRgba=s=>{if(8!==(s=s.replace(/^#/,"")).length)return console.warn(`invalid ARGB hex format: ${s}`),"#000000ff";const t=parseInt(s.slice(0,2),16)/255;return`rgba(${parseInt(s.slice(2,4),16)}, ${parseInt(s.slice(4,6),16)}, ${parseInt(s.slice(6,8),16)}, ${t.toFixed(2)})`}}static{this.fromEdgebandMaterialData=s=>new os(s.key,s.variables,0)}}class cs extends ${addInstances(s){for(const t of s)this.add(t.key,os.fromEdgebandMaterialData(t));return this}}class gs{constructor(){this.instances=new Map}addInstance(s,t){this.instances.set(s,t)}get(s){return this.instances.get(s)}getAll(){return Array.from(this.instances.values())}getTotalInstances(){return this.instances.size}groupBy(s){const t=new Map;for(const e of this.getAll()){const a=this.getNestedValue(s.toString(),e);t.has(a)||t.set(a,[]),t.get(a).push(e)}return t}mergeDescription(s,t){return s?t?s.includes(t)?s:`${s} | ${t}`:s:t}getNestedValue(s,t){return s.split(".").reduce(((s,t)=>s?.[t]),t)}}class ls{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d,u,m,f,p,b,P,w,y){this.key=s,this.messages=t,this.refParts=e,this.refPartsQuantities=a,this.refAssemblies=i,this.refAssembliesQuantities=r,this.documents=n,this.swcps=h,this.variables=o,this.heritedVariables=c,this.typedObjectVariables=g,this.name=l,this.configuration=d,this.quantity=u,this.height=m,this.width=f,this.depth=p,this.url=b,this.cost=P,this.costPanels=w,this.costHardware=y,this.resource="frames",this.parts=[],this.assemblies=[],this.panels=[],this.programs=[],this.hardware=[],this.weldments=[]}static{this.fromFrameBusiness=s=>s.createViewModel()}}class ds{constructor(s,t,a,i,r,n,h,o,c,g,l){this.key=s,this.messages=t,this.heritedVariables=a,this.typedObjectVariables=i,this.refParts=r,this.refPartsQuantities=n,this.refAssemblies=h,this.refAssembliesQuantities=o,this.documents=c,this.swcps=g,this.variables=l,this.parts=[],this.assemblies=[],this.panels=[],this.programs=[],this.hardware=[],this.weldments=[],this.getName=()=>this.variables.NAME,this.getConfiguration=()=>this.variables.CONF,this.getQuantity=()=>(this.variables.NB??0)*e.getInstance().projectQuantity,this.getHeight=()=>this.swcps.Height??0,this.getWidth=()=>this.swcps.Width??0,this.getDepth=()=>this.swcps.Depth??0,this.getImages=()=>new Y(this.documents).getImages(),this.getPDFs=()=>new ss(this.documents).getPDFs(),this.getDocuments=()=>new J(this.documents).getDocuments(),this.getUrl=()=>`frames/${this.key}`,this.getCostPanels=()=>{let s=0;for(const t of this.panels)s+=t.getCost();return s},this.getCostHardware=()=>{let s=0;for(const t of this.hardware)s+=t.getCost();return s},this.getCost=()=>this.getCostPanels()+this.getCostHardware(),this.getIsExcluded=()=>null!=this.typedObjectVariables&&"EXCLUDED"in this.typedObjectVariables}static{this.fromAssemblyPartBusiness=s=>new ds(s.key,s.messages,s.heritedVariables,s.typedObjectVariables,"refParts"in s?s.refParts:[],"refPartsQuantities"in s?s.refPartsQuantities:[],"refAssemblies"in s?s.refAssemblies:[],"refAssembliesQuantities"in s?s.refAssembliesQuantities:[],s.documents,s.swcps,s.variables)}createViewModel(){return new ls(this.key,Z.fromMessagesRaw(this.messages,this.getName(),"Frame",this.getUrl()),this.refParts,this.refPartsQuantities,this.refAssemblies,this.refAssembliesQuantities,this.getDocuments(),this.swcps,this.variables,this.heritedVariables,this.typedObjectVariables,this.getName(),this.getConfiguration(),this.getQuantity(),this.getHeight(),this.getWidth(),this.getDepth(),this.getUrl(),this.getCost(),this.getCostPanels(),this.getCostHardware())}}class us extends gs{constructor(){super(...arguments),this.FrameTypedObjectName="FRAME"}addInstances(s){const t=s.getInstancesByName(this.FrameTypedObjectName)??[];for(const e of t)this.addInstance(e.key,ds.fromAssemblyPartBusiness(e));return this}}class ms{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d,u,m,f){this.key=s,this.messages=t,this.heritedVariables=e,this.typedObjectVariables=a,this.refPrograms=i,this.refParts=r,this.refAssemblies=n,this.documents=h,this.swcps=o,this.variables=c,this.name=g,this.configuration=l,this.quantity=d,this.length=u,this.cost=m,this.costUnit=f,this.resource="hardware",this.parts=[],this.assemblies=[],this.refQuantities=[],this.frames=[]}static{this.fromHardwareBusiness=s=>s.createViewModel()}}class fs{constructor(s,t,e,a,i,r,n,h,o,c){this.key=s,this.messages=t,this.heritedVariables=e,this.typedObjectVariables=a,this.refPrograms=i,this.refParts=r,this.refAssemblies=n,this.documents=h,this.swcps=o,this.variables=c,this.parts=[],this.assemblies=[],this.createViewModel=()=>new ms(this.key,Z.fromMessagesRaw(this.messages,this.getName(),"Hardware"),this.heritedVariables,this.typedObjectVariables,this.refPrograms,this.refParts,this.refAssemblies,this.getDocuments(),this.swcps,this.variables,this.getName(),this.getConfiguration(),this.getQuantity(),this.getLength(),this.getCost(),this.getCostUnit()),this.getName=()=>this.variables.NAME,this.getConfiguration=()=>this.variables.CONF,this.getQuantity=()=>this.variables.NB,this.getLength=()=>this.variables.Length,this.getImages=()=>new Y(this.documents).getImages(),this.getCost=()=>this.getCostUnit()*this.getQuantity(),this.getCostUnit=()=>this.swcps.Cost??0,this.getDocuments=()=>new J(this.documents).getDocuments(),this.getIsExcluded=()=>null!=this.typedObjectVariables&&"EXCLUDED"in this.typedObjectVariables}static{this.fromAssemblyPartBusiness=s=>new fs(s.key,s.messages,s.heritedVariables,s.typedObjectVariables,s.refPrograms,"refParts"in s?s.refParts:[],"refAssemblies"in s?s.refAssemblies:[],s.documents,s.swcps,s.variables)}}class ps extends gs{constructor(){super(...arguments),this.HardwareTypedObjectName="HARDWARE"}addInstances(s){const t=s.getInstancesByName(this.HardwareTypedObjectName)??[];for(const e of t)this.addInstance(e.key,fs.fromAssemblyPartBusiness(e));return this}}class bs{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d){this.key=s,this.refPanel=t,this.refMaterial=e,this.messages=a,this.documents=i,this.variables=r,this.name=n,this.description=h,this.quantity=o,this.length=c,this.width=g,this.thickness=l,this.cost=d,this.resource="laminates"}static{this.fromLaminateBusiness=s=>s.createViewModel()}static{this.createCombinedLaminate=(s,t,e)=>new bs(s.key,s.refPanel,s.refMaterial,s.messages,s.documents,s.variables,t,s.description,e,s.length,s.width,s.thickness,s.cost)}}class Ps{constructor(s,t,e,a,i,r,n){this.key=s,this.refPanel=t,this.refMaterial=e,this.messages=a,this.documents=i,this.variables=r,this.settings=n,this.createViewModel=()=>(this.updateMaterialQuantity(),new bs(this.key,this.refPanel,this.refMaterial,Z.fromMessagesRaw(this.messages,this.getName(),"Laminate"),this.getDocuments(),this.variables,this.getName(),this.getDescription(),this.getQuantity(),this.getLength(),this.getWidth(),this.getThickness(),this.getCost())),this.getDocuments=()=>new J(this.documents).getDocuments(),this.getName=()=>this.variables.ST_N,this.getDescription=()=>this.variables.ST_DESC,this.getQuantity=()=>this.part?.getQuantity()??0,this.getSwoodLength=()=>this.variables.ST_L,this.getSwoodWidth=()=>this.variables.ST_W,this.getThickness=()=>this.variables.ST_T,this.getHasGrain=()=>this.material?.getHasGrain()??!1,this.getLength=()=>this.getLongest(this.getSwoodLength(),this.getSwoodWidth(),this.getHasGrain()).length,this.getWidth=()=>this.getLongest(this.getSwoodLength(),this.getSwoodWidth(),this.getHasGrain()).width,this.getVolume=()=>this.getLength()*this.getWidth()*this.getThickness()/1e9,this.getSurface=()=>this.getLength()*this.getWidth()/1e6,this.getMaterialQuantity=()=>{if(!this.material)return console.warn(`material not defined for ${this.getName()}`),0;switch(this.material.getCostType()){case 0:return this.getVolume();case 1:return this.getSurface();case 2:return this.getLength()/1e3;case 3:return this.getQuantity();default:return 0}},this.getCost=()=>this.getMaterialQuantity()*(this.material?.getCostUnit()??0),this.updateMaterialQuantity=()=>{const s=this.getName();if(!this.panel)return void console.warn(`Panel not defined for ${s}`);if(!this.material)return void console.warn(`unable to update quantity – material missing for ${s}`);if(this.panel.isNested||this.panel.isPatterned)return;const t=this.getMaterialQuantity()*this.getQuantity();this.material.quantity+=t}}static{this.fromStockData=(s,t)=>new Ps(s.key,s.refPart,s.refMaterial,s.messages,s.documents,s.variables,t)}getLongest(s,t,e){return this.settings.LengthLongestEdge?e?{length:s,width:t}:t>s?{width:t,length:s}:{length:s,width:t}:{length:s,width:t}}}class ws extends ${addInstances(s,t){for(const e of s)1===e.material?.variables.MAT_TYPE&&this.add(e.key,Ps.fromStockData(e,t));return this}}class ys{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d,u,m){this.key=s,this.messages=t,this.documents=e,this.variables=a,this.name=i,this.description=r,this.category=n,this.thickness=h,this.hasGrain=o,this.cost=c,this.costUnit=g,this.costType=l,this.quantity=d,this.type=u,this.unitOfMeasure=m,this.resource="materials"}static fromMaterialBusiness(s){return s.createViewModel()}}class Ms{constructor(s,t,e,a,i){this.key=s,this.messages=t,this.documents=e,this.variables=a,this.quantity=i,this.createViewModel=()=>new ys(this.key,Z.fromMessagesRaw(this.messages,this.getName(),"Material"),this.getDocuments(),this.variables,this.getName(),this.getDescription(),this.getCategory(),this.getThickness(),this.getHasGrain(),this.getCost(),this.getCostUnit(),this.getCostType(),this.quantity,this.getType(),this.getUnitOfMeasure()),this.getDocuments=()=>new J(this.documents).getDocuments(),this.getName=()=>this.variables.MAT_NAME??"",this.getDescription=()=>this.variables.MAT_DESC??"",this.getCategory=()=>this.variables.CATEGORY??"",this.getCostUnit=()=>this.variables.MAT_UCOST??0,this.getCostType=()=>this.variables.MAT_COSTTYPE??0,this.getHasGrain=()=>this.variables.MAT_WITHGRAIN??!1,this.getThickness=()=>this.variables.MAT_T??0,this.getBoardLength=()=>this.variables.BOARD_LENGTH??0,this.getBoardWidth=()=>this.variables.BOARD_WIDTH??0,this.getUnitOfMeasure=()=>{switch(this.getCostType()){case 0:return"m³";case 1:return"m²";case 2:return"m";case 3:return"unit";default:return"unknown"}},this.getCost=()=>this.quantity*this.getCostUnit(),this.getType=()=>this.variables.MAT_TYPE??0,this.getIsWeldment=()=>this.variables.WELDMENT??!1}static{this.fromMaterialData=s=>new Ms(s.key,s.messages,s.documents,s.variables,0)}}class Ds extends ${addInstances(s){for(const t of s)this.add(t.key,Ms.fromMaterialData(t));return this}}class ks{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d,u,m,f,p,b,P,w,y,M,D,k,T,A,I,v,B,S,C,R,N,O,E,V,L,W,x,j,Q,_,F,U,G,H,$,q,Z,Y,z){this.key=s,this.name=t,this.refPart=e,this.refPrograms=a,this.refStocks=i,this.refProcessZones=r,this.refEdgebands=n,this.messages=h,this.variables=o,this.heritedVariables=c,this.typedObjectVariables=g,this.serialNumbers=l,this.documents=d,this.swcps=u,this.configuration=m,this.quantity=f,this.length=p,this.width=b,this.thickness=P,this.lengthWithEdgeband=w,this.widthWithEdgeband=y,this.thicknessWithLaminate=M,this.lengthWithoutEdgeband=D,this.widthWithoutEdgeband=k,this.thicknessWithoutLaminate=T,this.lengthStock=A,this.widthStock=I,this.thicknessStock=v,this.hasGrain=B,this.hasEdgebands=S,this.hasLaminates=C,this.hasPrograms=R,this.hasProcessZones=N,this.isPatterned=O,this.isNested=E,this.angle=V,this.volume=L,this.boardLength=W,this.boardWidth=x,this.cost=j,this.costUnit=Q,this.costCore=_,this.costEdgebands=F,this.costLaminates=U,this.costPrograms=G,this.costProcessZones=H,this.hasTopPrograms=$,this.hasBottomPrograms=q,this.quantityTopPrograms=Z,this.quantityBottomPrograms=Y,this.settings=z,this.resource="panels",this.frames=[],this.stocks=[],this.layers=[],this.edgebands=[],this.laminates=[],this.programs=[],this.processZones=[],this.profiles=[],this.refQuantities=[]}static fromPanelBusiness(s){return s.createViewModel()}}class Ts{constructor(s,t,e,a,i,r,n,h,o,c,g,l){this.key=s,this.name=t,this.refPart=e,this.refPrograms=a,this.refStocks=i,this.refProcessZones=r,this.refEdgebands=n,this.messages=h,this.documents=o,this.variables=c,this.serialNumbers=g,this.settings=l,this.programs=[],this.stocks=[],this.edgebands=[],this.laminates=[],this.processZones=[],this.isPatterned=!1,this.isNested=!1,this.getConfiguration=()=>this.part?.getConfiguration()??"",this.getQuantity=()=>this.part?.getQuantity()??0,this.getSwoodLength=()=>this.variables.PAN_L,this.getSwoodWidth=()=>this.variables.PAN_W??0,this.getSwoodThickness=()=>this.variables.PAN_T,this.getSwoodLengthWithEdgeband=()=>this.variables.PAN_LWEB,this.getSwoodWidthWithEdgeband=()=>this.variables.PAN_WWEB,this.getSwoodThicknessWithLaminate=()=>this.variables.PAN_TWL,this.getSwoodLengthWithoutEdgeband=()=>this.variables.PAN_LWOEB,this.getSwoodWidthWithoutEdgeband=()=>this.variables.PAN_WWOEB,this.getSwoodThicknessWithoutLaminate=()=>this.variables.PAN_TWOL,this.getSwoodLengthStock=()=>this.variables.PAN_STL,this.getSwoodWidthStock=()=>this.variables.PAN_STW,this.getSwoodThicknessStock=()=>this.variables.PAN_STT,this.getLength=()=>this.getLongest(this.getSwoodLength(),this.getSwoodWidth(),this.getHasGrain()).length,this.getWidth=()=>this.getLongest(this.getSwoodLength(),this.getSwoodWidth(),this.getHasGrain()).width,this.getThickness=()=>this.getSwoodThickness(),this.getHasGrain=()=>this.stocks.some((s=>!0===s.material?.getHasGrain())),this.getHasEdgebands=()=>this.edgebands.length>0,this.getHasLaminates=()=>this.laminates.length>0,this.getHasPrograms=()=>this.programs.length>0,this.getHasProcessZones=()=>this.processZones.length>0,this.getAngleGrain=()=>this.getCoreStock()?.material?.getHasGrain()?this.variables.PAN_ANGLEINPART+this.variables.PAN_GRAINANGLEINPART:null,this.getLengthWithEdgeband=()=>this.getLongest(this.getSwoodLengthWithEdgeband(),this.getSwoodWidthWithEdgeband(),this.getHasGrain()).length,this.getWidthWithEdgeband=()=>this.getLongest(this.getSwoodLengthWithEdgeband(),this.getSwoodLengthWithEdgeband(),this.getHasGrain()).width,this.getThicknessWithLaminate=()=>this.getSwoodThicknessWithLaminate(),this.getLengthWithoutEdgeband=()=>this.getLongest(this.getSwoodLengthWithoutEdgeband(),this.getSwoodWidthWithoutEdgeband(),this.getHasGrain()).length,this.getWidthWithoutEdgeband=()=>this.getLongest(this.getSwoodLengthWithoutEdgeband(),this.getSwoodWidthWithoutEdgeband(),this.getHasGrain()).width,this.getThicknessWithoutLaminate=()=>this.getSwoodThicknessWithoutLaminate(),this.getLengthStock=()=>this.getLongest(this.getSwoodLengthStock(),this.getSwoodWidthStock(),this.getHasGrain()).length,this.getWidthStock=()=>this.getLongest(this.getSwoodLengthStock(),this.getSwoodWidthStock(),this.getHasGrain()).width,this.getThicknessStock=()=>this.getSwoodThicknessStock(),this.getVolume=()=>this.getLength()*this.getWidth()*this.getThickness()/1e9,this.getSurface=()=>this.getLength()*this.getWidth()/1e6,this.getImages=()=>new Y(this.documents).getImages(),this.getPDFs=()=>new ss(this.documents).getPDFs(),this.getDocuments=()=>new J(this.documents).getDocuments(),this.getSwcps=()=>this.part?.swcps??{},this.getHeritedVariables=()=>this.part?.heritedVariables??{},this.getTypedObjectVariables=()=>this.part?.typedObjectVariables??{},this.getMaterialQuantity=()=>{if(!this.material)return console.warn(`material not defined for ${this.name}`),0;switch(this.material.getCostType()){case 0:return this.getVolume();case 1:return this.getSurface();case 2:return this.getLength()/1e3;case 3:return this.getQuantity();default:return 0}},this.getCost=()=>this.getCostUnit()*this.getQuantity(),this.getCostUnit=()=>this.getCostCore()+this.getCostEdgebands()+this.getCostLaminates()+this.getCostProcessZones(),this.getCostCore=()=>this.getMaterialQuantity()*(this.material?.getCostUnit()??0),this.getCostEdgebands=()=>{let s=0;for(const t of this.edgebands)s+=t.getCost();return s},this.getCostLaminates=()=>{let s=0;for(const t of this.laminates)s+=t.getCost();return s},this.getCostPrograms=()=>{let s=0;for(const t of this.programs)s+=t.getCost();return s},this.getCostProcessZone=s=>{if(!s.panelProcess)return console.warn(`panelProcess not defined for ${this.name}`),0;const t=s.panelProcess.getCostUnit();let e=0,a=0;switch(s.getCostType()){case 0:e=this.getVolume(),a=t*e;break;case 1:e=this.getSurface(),a=t*e;break;case 2:e=this.getLength()/1e3,a=t*e;break;case 3:e=this.getQuantity(),a=t*e;break;default:return 0}return s.panelProcess.quantity+=e,a},this.getCostProcessZones=()=>{let s=0;for(const t of this.processZones)s+=this.getCostProcessZone(t);return s},this.getQuantityTopPrograms=()=>this.programs.filter((s=>s.getIsTopProgram())).length,this.getQuantityBottomPrograms=()=>this.programs.filter((s=>s.getIsBottomProgram())).length,this.getHasTopPrograms=()=>this.programs.some((s=>s.getIsTopProgram())),this.getHasBottomPrograms=()=>this.programs.some((s=>s.getIsBottomProgram())),this.getBoardLength=()=>this.material?.getBoardLength()??0,this.getBoardWidth=()=>this.material?.getBoardWidth()??0,this.getIsExcluded=()=>(this.part?.variables.TOTYPES).split(";").includes("EXCLUDED"),this.updateMaterialQuantity=()=>{if(!this.material)return void console.warn(`unable to update quantity – material missing for ${this.name}`);if(this.isNested||this.isPatterned||this.getIsExcluded())return;const s=this.getMaterialQuantity()*this.getQuantity();this.material.quantity+=s}}static{this.fromPanelData=(s,t)=>new Ts(s.key,s.name,s.refPart,s.refPrograms,s.refStocks,s.refProcessZones,s.refEdgebands,s.messages,s.documents,s.variables,s.serialNumbers,t)}createViewModel(){return this.updateMaterialQuantity(),new ks(this.key,this.name,this.refPart,this.refPrograms,this.refStocks,this.refProcessZones,this.refEdgebands,Z.fromMessagesRaw(this.messages,this.name,"Panel"),this.variables,this.getHeritedVariables(),this.getTypedObjectVariables(),this.serialNumbers,this.getDocuments(),this.getSwcps(),this.getConfiguration(),this.getQuantity(),this.getLength(),this.getWidth(),this.getThickness(),this.getLengthWithEdgeband(),this.getWidthWithEdgeband(),this.getThicknessWithLaminate(),this.getLengthWithoutEdgeband(),this.getWidthWithoutEdgeband(),this.getThicknessWithoutLaminate(),this.getLengthStock(),this.getWidthStock(),this.getThicknessStock(),this.getHasGrain(),this.getHasEdgebands(),this.getHasLaminates(),this.getHasPrograms(),this.getHasProcessZones(),this.isPatterned,this.isNested,this.getAngleGrain(),this.getVolume(),this.getBoardLength(),this.getBoardWidth(),this.getCost(),this.getCostUnit(),this.getCostCore(),this.getCostEdgebands(),this.getCostLaminates(),this.getCostPrograms(),this.getCostProcessZones(),this.getHasTopPrograms(),this.getHasBottomPrograms(),this.getQuantityTopPrograms(),this.getQuantityBottomPrograms(),this.settings)}getLongest(s,t,e){return this.settings.LengthLongestEdge?e?{length:s,width:t}:t>s?{width:t,length:s}:{length:s,width:t}:{length:s,width:t}}getCoreStock(){for(const s of this.stocks)if("CORE"===s.variables.ST_N)return s}}class As extends ${constructor(){super(...arguments),this.addStocks=s=>{const t=this.getAll();for(const e of t)for(const t of e.refStocks){const a=s.get(t);a&&(e.stocks.push(a),"CORE"===a.variables.ST_N&&(e.material=a.material))}},this.addPrograms=s=>{const t=this.getAll();for(const e of t)for(const t of e.refPrograms){const a=s.get(t);a&&(e.programs.push(a),a.panel=e)}},this.addEdgebands=s=>{const t=this.getAll();for(const e of t)for(const t of e.refEdgebands){const a=s.get(t);a&&(e.edgebands.push(a),a.panel=e)}},this.addLaminates=s=>{const t=this.getAll();for(const e of t)for(const t of e.refStocks){const a=s.get(t);a&&(e.laminates.push(a),a.panel=e)}}}addInstances(s,t){for(const e of s)this.add(e.key,Ts.fromPanelData(e,t));return this}}class Is{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d,u,m,f,p){this.key=s,this.refPrograms=t,this.refStocks=e,this.refPanel=a,this.bodyCount=i,this.messages=r,this.variables=n,this.heritedVariables=h,this.typedObjectVariables=o,this.documents=c,this.swcps=g,this.name=l,this.configuration=d,this.quantity=u,this.height=m,this.width=f,this.depth=p,this.resource="parts",this.programs=[],this.stocks=[]}static fromPartBusiness(s){return s.createViewModel()}}class vs{constructor(s,t,a,i,r,n,h,o,c,g,l){this.key=s,this.refPrograms=t,this.refStocks=a,this.refPanel=i,this.bodyCount=r,this.messages=n,this.variables=h,this.heritedVariables=o,this.typedObjectVariables=c,this.documents=g,this.swcps=l,this.programs=[],this.stocks=[],this.getDocuments=()=>new J(this.documents).getDocuments(),this.getName=()=>this.variables.NAME??"",this.getConfiguration=()=>this.variables.CONF??"",this.getQuantity=()=>(this.variables.NB??0)*e.getInstance().projectQuantity,this.getImages=()=>new Y(this.documents).getImages()}static{this.fromPartData=s=>new vs(s.key,s.refPrograms,s.refStocks,s.refPanel,s.bodyCount,s.messages,s.variables,s.heritedVariables,s.typedObjectVariables,s.documents,s.swcps)}createViewModel(){return new Is(this.key,this.refPrograms,this.refStocks,this.refPanel,this.bodyCount,Z.fromMessagesRaw(this.messages,this.getName(),"Part"),this.variables,this.heritedVariables,this.typedObjectVariables,this.getDocuments(),this.swcps,this.getName(),this.getConfiguration(),this.getQuantity(),0,0,0)}}class Bs extends ${constructor(){super(...arguments),this.addStocks=s=>{const t=this.getAll();for(const e of t)for(const t of e.refStocks??[]){const a=s.get(t);a&&(e.stocks.push(a),a.part=e)}},this.addPrograms=s=>{const t=this.getAll();for(const e of t)for(const t of e.refPrograms){const a=s.get(t);a&&(e.programs.push(a),a.part=e)}}}addInstances(s){for(const t of s)this.add(t.key,vs.fromPartData(t));return this}}class Ss{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d,u,m,f,p,b,P,w,y,M,D,k,T){this.key=s,this.refTools=t,this.programParts=e,this.refBoard=a,this.variables=i,this.heritedVariables=r,this.typedObjectVariables=n,this.messages=h,this.documents=o,this.swcps=c,this.name=g,this.configuration=l,this.quantity=d,this.length=u,this.width=m,this.thickness=f,this.url=p,this.cost=b,this.costHour=P,this.time=w,this.isTopProgram=y,this.isBottomProgram=M,this.machine=D,this.programFilepath=k,this.programDocument=T,this.resource="programs",this.tools=[]}static{this.fromProgramBusiness=s=>s.createViewModel()}}class Cs{constructor(s,t,e,a,i,r,n){this.key=s,this.refTools=t,this.programParts=e,this.refBoard=a,this.variables=i,this.messages=r,this.documents=n,this.tools=[],this.getDocuments=()=>new J(this.documents).getDocuments(),this.getSwcps=()=>this.part?.swcps??{},this.getHeritedVariables=()=>this.part?.heritedVariables??{},this.getTypedObjectVariables=()=>this.part?.typedObjectVariables??{},this.getName=()=>this.variables.PROG_PHASENAME,this.getConfiguration=()=>this.part?.getConfiguration()??"",this.getQuantity=()=>this.part?.getQuantity()??0,this.getLength=()=>this.variables.PROGBX??0,this.getWidth=()=>this.variables.PROGBY??0,this.getThickness=()=>this.variables.PROGBZ??0,this.getUrl=()=>`programs/${this.key}`,this.getImages=()=>new Y(this.documents).getImages(),this.getCostHour=()=>this.variables.PROGMAC_HOURCOST??0,this.getTotalTime=()=>this.variables.PROGTPS??0,this.getCost=()=>this.getCostHour()*this.getTotalTime()/3600,this.getIsTopProgram=()=>1===this.variables.PROG_OP0ZXPANELZ,this.getIsBottomProgram=()=>-1===this.variables.PROG_OP0ZXPANELZ,this.getMachine=()=>this.variables.PROGMAC??"",this.getProgramFilepath=()=>this.variables.PROGPATH??"",this.getProgramFile=()=>{const s=this.documents.find((s=>"PROGRAM"===s.objType&&null===s.type&&null===s.docType));return s||console.warn(`unable to find program document for program: ${this.getName()}`),s}}static{this.fromProgramData=s=>new Cs(s.key,s.refTools,s.refProgramParts,s.refBoard,s.variables,s.messages,s.documents)}createViewModel(){return new Ss(this.key,this.refTools,this.programParts,this.refBoard,this.variables,this.getHeritedVariables(),this.getTypedObjectVariables(),Z.fromMessagesRaw(this.messages,this.getName(),"Program",this.getUrl()),this.getDocuments(),this.getSwcps(),this.getName(),this.getConfiguration(),this.getQuantity(),this.getLength(),this.getWidth(),this.getThickness(),this.getUrl(),this.getCost(),this.getCostHour(),this.getTotalTime(),this.getIsTopProgram(),this.getIsBottomProgram(),this.getMachine(),this.getProgramFilepath(),this.getProgramFile())}}class Rs extends ${addInstances(s){for(const t of s)t.refBoard||this.add(t.key,Cs.fromProgramData(t));return this}addTools(s){const t=this.getAll();for(const e of t)for(const t of e.refTools){const a=s.get(t);a&&e.tools.push(a)}}}class Ns{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d,u,m,f){this.key=s,this.refPart=t,this.refProgram=e,this.messages=a,this.variables=i,this.serialNumbers=r,this.documents=n,this.swcps=h,this.name=o,this.configuration=c,this.quantity=g,this.quantityInSheet=l,this.quantityInProject=d,this.programPartId=u,this.angle=m,this.parent=f,this.resource="programParts",this.programs=[]}static{this.fromProgramPartBusiness=s=>s.createViewModel()}}class Os{constructor(s,t,a,i,r,n,h){this.key=s,this.refPart=t,this.refProgram=a,this.documents=i,this.messages=r,this.variables=n,this.serialNumbers=h,this.sheets=[],this.getDocuments=()=>new J(this.documents).getDocuments(),this.getSwcps=()=>this.part?.swcps??{},this.getImages=()=>new Y(this.documents).getImages(),this.getName=()=>this.panel?.name,this.getConfiguration=()=>this.part?.getConfiguration()??"",this.getQuantity=()=>(this.sheet?.getQuantity()??0)*e.getInstance().projectQuantity,this.getQuantityInSheet=()=>(this.sheet?.programParts??[]).filter((s=>this.getName()===s.getName())).length,this.getQuantityInProject=()=>{let s=0;for(const t of this.sheets)for(const a of t.programParts)a.part?.getName()===this.getName()&&(s+=t.getQuantity()*e.getInstance().projectQuantity);return s},this.getProgramPartId=()=>this.variables.PROGPART_ID,this.getAngle=()=>this.variables.PROGPART_NANGLE,this.getParentIndex=()=>this.variables.PROGPART_NPARENTINDEX,this.getParentName=()=>this.variables.PROGPART_NPARENTNAME,this.getParentPath=()=>this.variables.PROGPART_NPARENTPATH,this.getParentConfiguration=()=>this.variables.PROGPART_NPARENTCONFIG}static{this.fromProgramPartData=s=>new Os(s.key,s.part,s.program,s.documents,s.messages,s.variables,s.serialNumbers)}createViewModel(){return new Ns(this.key,this.refPart,this.refProgram,Z.fromMessagesRaw(this.messages,this.getName(),"Program Part"),this.variables,this.serialNumbers,this.getDocuments(),this.getSwcps(),this.getName(),this.getConfiguration(),this.getQuantity(),this.getQuantityInSheet(),this.getQuantityInProject(),this.getProgramPartId(),this.getAngle(),{index:this.getParentIndex(),name:this.getParentName(),configuration:this.getParentConfiguration(),filepath:this.getParentPath()})}}class Es extends ${addInstances(s){for(const t of s)this.add(t.key,Os.fromProgramPartData(t));return this}}class Vs{constructor(s,t,e,a){this.key=s,this.messages=t,this.documents=e,this.variables=a}static{this.fromSpindleData=s=>new Vs(s.key,s.messages,s.documents,s.variables)}}class Ls extends ${addInstances(s){if(!s)return this;for(const t of s)this.add(t.key,Vs.fromSpindleData(t));return this}}class Ws{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d,u){this.key=s,this.refPart=t,this.refMaterial=e,this.messages=a,this.documents=i,this.swcps=r,this.variables=n,this.name=h,this.configuration=o,this.quantity=c,this.length=g,this.width=l,this.thickness=d,this.angle=u,this.resource="stocks"}static{this.fromStockBusiness=s=>s.createViewModel()}static{this.createCombinedStock=(s,t,e)=>new Ws(s.key,s.refPart,s.refMaterial,s.messages,s.documents,s.swcps,s.variables,t,s.configuration,e,s.length,s.width,s.thickness,s.angle)}}class xs{constructor(s,t,e,a,i,r){this.key=s,this.refPart=t,this.refMaterial=e,this.messages=a,this.documents=i,this.variables=r,this.createViewModel=()=>new Ws(this.key,this.refPart,this.refMaterial,Z.fromMessagesRaw(this.messages,this.getName(),"Stock"),this.documents,this.getSwcps(),this.variables,this.getName(),this.getConfiguration(),this.getQuantity(),this.getLength(),this.getWidth(),this.getThickness(),this.getAngle()),this.getSwcps=()=>this.part?.swcps??{},this.getName=()=>this.panel?.name??"",this.getConfiguration=()=>this.part?.getConfiguration()??"",this.getQuantity=()=>this.part?.getQuantity()??0,this.getLength=()=>this.variables.ST_L,this.getWidth=()=>this.variables.ST_W,this.getThickness=()=>this.variables.ST_T,this.getAngle=()=>this.variables.ST_ANGLEINPANEL??0}static{this.fromStockData=s=>new xs(s.key,s.refPart,s.refMaterial,s.messages,s.documents,s.variables)}}class js extends ${constructor(){super(...arguments),this.addMaterials=s=>{const t=this.getAll();for(const e of t){const t=s.get(e.refMaterial);t&&(e.material=t)}}}addInstances(s){for(const t of s)this.add(t.key,xs.fromStockData(t));return this}}class Qs{constructor(s,t,e,a,i,r,n,h,o){this.key=s,this.messages=t,this.documents=e,this.variables=a,this.refSpindles=i,this.name=r,this.reference=n,this.number=h,this.diameter=o,this.spindles=[]}static{this.fromToolBusiness=s=>s.createViewModel()}}class _s{constructor(s,t,e,a,i=[]){this.key=s,this.variables=t,this.messages=e,this.documents=a,this.refSpindles=i,this.createViewModel=()=>new Qs(this.key,Z.fromMessagesRaw(this.messages,this.getName(),"Tool"),this.getDocuments(),this.variables,this.refSpindles,this.getName(),this.getReference(),this.getNumber(),this.getDiameter()),this.getDocuments=()=>new J(this.documents).getDocuments(),this.getName=()=>this.variables.TOOL_NAME,this.getReference=()=>this.variables.TOOL_REFERENCE,this.getNumber=()=>this.variables.TOOL_DIAM,this.getDiameter=()=>this.variables.TOOL_NUMBER}static fromToolData(s){return new _s(s.key,s.variables,s.messages,s.documents,s.refSpindles)}}class Fs extends ${addInstances(s){for(const t of s)this.add(t.key,_s.fromToolData(t));return this}}class Us{constructor(){this.instances=new Map}addInstance(s,t){const e=this.instances.get(s);e?e.push(t):this.instances.set(s,[t])}addInstances(s,t,e){for(const a of s.typedObjects){const s=t.get(a);if(s){const t=s.variables.TOTYPES.split(";");for(const e of t)this.addInstance(e,s)}const i=e.get(a);if(i){const s=i.variables.TOTYPES.split(";");for(const t of s)this.addInstance(t,i)}}return this}getInstancesByName(s){return this.instances.get(s)||void 0}getAll(){return this.instances}}class Gs{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d,u,m,f,p,b,P){this.key=s,this.refTools=t,this.refProgramParts=e,this.refBoard=a,this.variables=i,this.messages=r,this.documents=n,this.name=h,this.quantity=o,this.programFilename=c,this.programFilepath=g,this.totalParts=l,this.totalOffcuts=d,this.machine=u,this.length=m,this.width=f,this.thickness=p,this.url=b,this.programDocument=P,this.resource="sheets",this.tools=[],this.programParts=[]}static{this.fromProgramBusiness=s=>s.createViewModel()}}class Hs{constructor(s,t,a,i,r,n,h){this.key=s,this.refTools=t,this.refProgramParts=a,this.refBoard=i,this.variables=r,this.messages=n,this.documents=h,this.programParts=[],this.getDocuments=()=>new J(this.documents).getDocuments(),this.getName=()=>this.variables.PROG_PHASENAME,this.getQuantity=()=>(this.variables.PROG_NSHEETQTY??0)*e.getInstance().projectQuantity,this.getProgramFilename=()=>this.variables.PROGCFGFILE,this.getProgramFilepath=()=>this.variables.PROGCFGPATH,this.getProgramComment=()=>this.variables.PROGCOMMENT,this.getTotalParts=()=>this.variables.PROG_PARTCOUNT,this.getTotalOffcuts=()=>this.variables.PROG_OFFCUTCOUNT,this.getMachine=()=>this.variables.PROGMAC,this.getLength=()=>this.variables.PROGBX,this.getWidth=()=>this.variables.PROGBY,this.getThickness=()=>this.variables.PROGBZ,this.getUrl=()=>`sheets/${this.key}`,this.getImages=()=>new Y(this.documents).getImages(),this.getProgramFile=()=>{const s=this.documents.find((s=>"PROGRAM"===s.objType&&null===s.type&&null===s.docType));return s||console.warn(`unable to find program document for program: ${this.getName()}`),s}}static{this.fromProgramData=s=>new Hs(s.key,s.refTools,s.refProgramParts,s.refBoard,s.variables,s.messages,s.documents)}createViewModel(){return new Gs(this.key,this.refTools,this.refProgramParts,this.refBoard,this.variables,Z.fromMessagesRaw(this.messages,this.getName(),"Sheet",this.getUrl()),this.getDocuments(),this.getName(),this.getQuantity(),this.getProgramFilename(),this.getProgramFilepath(),this.getTotalParts(),this.getTotalOffcuts(),this.getMachine(),this.getLength(),this.getWidth(),this.getThickness(),this.getUrl(),this.getProgramFile())}}class $s extends ${addInstances(s){for(const t of s)t.refBoard&&this.add(t.key,Hs.fromProgramData(t));return this}}class qs{constructor(s,t,e,a,i,r,n,h,o,c,g,l){this.key=s,this.messages=t,this.documents=e,this.variables=a,this.name=i,this.description=r,this.quantity=n,this.thickness=h,this.category=o,this.cost=c,this.costUnit=g,this.costType=l,this.resource="panelProcesses"}static{this.fromPanelProcessBusiness=s=>s.createViewModel()}}class Zs{constructor(s,t,e,a,i){this.key=s,this.messages=t,this.documents=e,this.variables=a,this.quantity=i,this.createViewModel=()=>new qs(this.key,Z.fromMessagesRaw(this.messages,this.getName(),"Panel Process"),this.documents,this.variables,this.getName(),this.getDescription(),this.quantity,this.getThickness(),this.getCategory(),this.getCost(),this.getCostUnit(),this.getCostType()),this.getName=()=>this.variables.PROC_NAME,this.getDescription=()=>this.variables.PROC_DESC,this.getThickness=()=>this.variables.PROC_THICKNESS,this.getCategory=()=>this.variables.PROC_CAT,this.getCostUnit=()=>this.variables.PROC_UCOST,this.getCost=()=>this.quantity*this.getCostUnit(),this.getCostType=()=>this.variables.PROC_COSTTYPE}static fromPanelProcessData(s){return new Zs(s.key,s.messages,s.documents,s.variables,0)}}class Ys extends ${addInstances(s){if(!s)return this;for(const t of s)this.add(t.key,Zs.fromPanelProcessData(t));return this}}class zs{constructor(s,t,e,a,i,r,n,h,o,c,g){this.key=s,this.refPanel=t,this.refPanelProcess=e,this.messages=a,this.documents=i,this.variables=r,this.name=n,this.quantity=h,this.unitOfMeasure=o,this.cost=c,this.mask=g,this.resource="processZones"}static{this.fromProcessZoneBusiness=s=>s.createViewModel()}}class Xs{constructor(s,t,e,a,i,r){this.key=s,this.refPanel=t,this.refPanelProcess=e,this.messages=a,this.documents=i,this.variables=r,this.createViewModel=()=>new zs(this.key,this.refPanel,this.refPanelProcess,Z.fromMessagesRaw(this.messages,this.getName(),"Process Zone"),this.documents,this.variables,this.getName(),this.getQuantity(),this.getUnitOfMeasure(),this.getCost(),this.getMask()),this.getName=()=>this.variables.PROC_ZONENAME,this.getQuantity=()=>this.variables.PROC_ZONE_QTT,this.getUnitOfMeasure=()=>this.variables.PROC_ZONE_QTT_UNIT,this.getCost=()=>this.variables.PROC_ZONE_COST,this.getMask=()=>this.variables.PROC_ZONEMASK,this.getCostUnit=()=>this.panelProcess?this.panelProcess.getCostUnit():0,this.getCostType=()=>this.panelProcess?this.panelProcess.getCostType():0}static fromProcessZoneData(s){return new Xs(s.key,s.refPanel,s.refPanelProcess,s.messages,s.documents,s.variables)}}class Ks extends ${addInstances(s){if(!s)return this;for(const t of s)this.add(t.key,Xs.fromProcessZoneData(t));return this}}class Js{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d,u,m,f,p,b,P,w){this.key=s,this.refPart=t,this.refMaterial=e,this.messages=a,this.documents=i,this.swcps=r,this.variables=n,this.heritedVariables=h,this.typedObjectVariables=o,this.name=c,this.description=g,this.configuration=l,this.quantity=d,this.length=u,this.lengthTotal=m,this.width=f,this.thickness=p,this.angle1=b,this.angle2=P,this.cutlist=w,this.resource="weldments",this.addChildren=s=>{this.children||(this.children=[]),this.children.push(s)}}static fromWeldmentBusiness(s){return s.createViewModel()}}class st{constructor(s,t,e,a,i,r){this.key=s,this.refPart=t,this.refMaterial=e,this.messages=a,this.documents=i,this.variables=r,this.getDocuments=()=>new J(this.documents).getDocuments(),this.getSwcps=()=>this.part?.swcps??{},this.getHeritedVariables=()=>this.part?.heritedVariables??{},this.getTypedObjectVariables=()=>this.part?.typedObjectVariables??{},this.getName=()=>this.variables.ST_N??"",this.getDescription=()=>this.variables.MBS_Description??"",this.getConfiguration=()=>this.part?.getConfiguration()??"",this.getPartQuantity=()=>this.part?.getQuantity()??0,this.getQuantity=()=>this.variables.MBS_Quantity??0*this.getPartQuantity(),this.getLength=()=>this.variables.MBS_Length,this.getLengthTotal=()=>this.variables.MBS_TotalLength,this.getWidth=()=>this.variables.ST_W,this.getThickness=()=>this.variables.ST_T,this.getAngle1=()=>this.variables.MBS_Angle1??"",this.getAngle2=()=>this.variables.MBS_Angle2??"",this.getCutlist=()=>this.variables.MBS_Cutlist??"",this.getIsExcluded=()=>(this.part?.variables.TOTYPES).split(";").includes("EXCLUDED")}static{this.fromStockData=s=>new st(s.key,s.refPart,s.refMaterial,s.messages,s.documents,s.variables)}createViewModel(){return new Js(this.key,this.refPart,this.refMaterial,Z.fromMessagesRaw(this.messages,this.getName(),"Weldment"),this.getDocuments(),this.getSwcps(),this.variables,this.getHeritedVariables(),this.getTypedObjectVariables(),this.getName(),this.getDescription(),this.getConfiguration(),this.getQuantity(),this.getLength(),this.getLengthTotal(),this.getWidth(),this.getThickness(),this.getAngle1(),this.getAngle2(),this.getCutlist())}}class tt extends ${addInstances(s){for(const t of s)t.material?.variables.WELDMENT&&this.add(t.key,st.fromStockData(t));return this}}class et{constructor(s,t,e,a,i,r,n,h,o,c,g,l){this.key=s,this.messages=t,this.documents=e,this.variables=a,this.name=i,this.description=r,this.cost=n,this.costUnit=h,this.costType=o,this.quantity=c,this.type=g,this.unitOfMeasure=l,this.resource="weldmentMaterials"}static fromMaterialBusiness(s){return s.createViewModel()}}class at{constructor(s,t,e,a,i,r){this.key=s,this.description=t,this.messages=e,this.documents=a,this.variables=i,this.quantity=r,this.createViewModel=()=>new et(this.key,Z.fromMessagesRaw(this.messages,this.getName(),"Weldment Material"),this.getDocuments(),this.variables,this.getName(),this.description,this.getCost(),this.getCostUnit(),this.getCostType(),this.quantity,this.getType(),this.getUnitOfMeasure()),this.getDocuments=()=>new J(this.documents).getDocuments(),this.getName=()=>this.variables.MAT_NAME??"",this.getDescription=()=>this.variables.MAT_DESC??"",this.getCostUnit=()=>this.variables.MAT_UCOST??0,this.getCostType=()=>this.variables.MAT_COSTTYPE??0,this.getBoardLength=()=>this.variables.BOARD_LENGTH??0,this.getBoardWidth=()=>this.variables.BOARD_WIDTH??0,this.getUnitOfMeasure=()=>{switch(this.getCostType()){case 0:return"m³";case 1:return"m²";case 2:return"m";case 3:return"unit";default:return"unknown"}},this.getCost=()=>this.quantity*this.getCostUnit(),this.getType=()=>this.variables.MAT_TYPE??0,this.getIsWeldment=()=>this.variables.WELDMENT??!1}static{this.fromMaterialData=(s,t)=>new at(`${s.key}-${t.getDescription()} `,t.getDescription(),s.messages,s.documents,s.variables,t.getLengthTotal()/1e3)}}class it extends ${addInstances(s,t){for(const e of t){const t=s.get(e.refMaterial);if(t&&t.getIsWeldment()){const s=at.fromMaterialData(t,e);this.add(s.key,s)}}return this}}class rt{constructor(s,t,e,a,i,r,n,h,o,c){this.key=s,this.messages=t,this.documents=e,this.swcps=a,this.variables=i,this.heritedVariables=r,this.typedObjectVariables=n,this.name=h,this.configuration=o,this.quantity=c,this.resource="excluded"}static{this.fromExcludedBusiness=s=>s.createViewModel()}}class nt{constructor(s,t,e,a,i,r,n,h,o){this.key=s,this.messages=t,this.heritedVariables=e,this.typedObjectVariables=a,this.refParts=i,this.refAssemblies=r,this.documents=n,this.swcps=h,this.variables=o,this.parts=[],this.assemblies=[],this.getDocuments=()=>new J(this.documents).getDocuments(),this.getName=()=>this.variables.NAME,this.getConfiguration=()=>this.variables.CONF,this.getQuantity=()=>this.variables.NB}static{this.fromAssemblyPartBusiness=s=>new nt(s.key,s.messages,s.heritedVariables,s.typedObjectVariables,"refParts"in s?s.refParts:[],"refAssemblies"in s?s.refAssemblies:[],s.documents,s.swcps,s.variables)}createViewModel(){return new rt(this.key,Z.fromMessagesRaw(this.messages,this.getName(),"Excluded"),this.getDocuments(),this.swcps,this.variables,this.heritedVariables,this.typedObjectVariables,this.getName(),this.getConfiguration(),this.getQuantity())}}class ht extends gs{constructor(){super(...arguments),this.FrameTypedObjectName="EXCLUDED"}addInstances(s){const t=s.getInstancesByName(this.FrameTypedObjectName)??[];for(const e of t)this.addInstance(e.key,nt.fromAssemblyPartBusiness(e));return this}}class ot{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d,u,m,f,p,b,P,w,y,M,D,k,T,A,I,v){this.key=s,this.name=t,this.url=e,this.refBoard=a,this.quantity=i,this.length=r,this.width=n,this.thickness=h,this.cutterThickness=o,this.areaTotal=c,this.areaPanels=g,this.areaWaste=l,this.areaTrims=d,this.areaCuts=u,this.percentagePanels=m,this.percentageWaste=f,this.percentageTrims=p,this.quantityPanels=b,this.quantityWaste=P,this.quantityTrims=w,this.quantityCuts=y,this.lengthCuts=M,this.stock=D,this.refPanels=k,this.items=T,this.cuts=A,this.trims=I,this.waste=v,this.resource="patterns",this.panels=[]}static fromPatternBusiness(s){return s.createViewModel()}}class ct{constructor(s){this.cuts=[],this.length=s.length,this.width=s.width,this.cutDirection=s.cutDirection,this.coordinate=s.cutCoordinate,this.stockLeft=s.stockLeft?s.stockLeft:null,this.stockRight=s.stockRight?s.stockRight:null}}class gt{constructor(s){this.indexParent=-1,this.children=[],this.cuts=[],this.parent=null,this.quantity=1,this.stock=s,this.type=s.type,this.length=s.length,this.width=s.width,this.grain=s.grain,this.cutDirection=s.cutDirection,this.cutterThickness=s.cutterThickness,this.name=s.name??s.type??"group",this.cutCoordinate=s.cutCoordinate,this.x=s.x,this.y=s.y,this.parent=s.parent?new gt(s.parent):null}}class lt{constructor(s){this.parent=null,this.index=0,this.indexPanel=0,this.indexParent=-1,this.children=[],this.cuts=[],this.stock=s,this.type=s.type,this.length=s.length,this.width=s.width,this.grain=s.grain,this.cutDirection=s.cutDirection,this.cutterThickness=s.cutterThickness,this.name=s.name??s.type??"group",this.cutCoordinate=s.cutCoordinate,this.x=s.x,this.y=s.y,this.parent=s.parent?new lt(s.parent):null}getTrimSide(s){for(const t of this.children)if("trimming"===t.type||"padding"===t.type){if("length"===s&&"V"===this.cutDirection)return this.cutCoordinate;if("width"===s&&"H"===this.cutDirection)return this.cutCoordinate}return 0}getGroupedNodes(){const s=[];for(const t of this.children){const e=new gt(t.stock);this.isPreviousEqual(e,s[s.length-1])?s[s.length-1].quantity++:s.push(e)}return s}isPreviousEqual(s,t){return!!t&&s.length===t.length&&s.width===t.width&&s.type===t.type}}class dt{constructor(s,t=null,e=0,a=0){this.type=s.type,this.length=1e3*s.length,this.width=1e3*s.width,this.cutDirection=s.cut,this.name=""!=s["panel-name"]?s["panel-name"]:null,this.cutCoordinate=1e3*s["cut-coordinate"],this.grain=s["grain-direction"],this.cutterThickness=2*s["cut-half-thickness"]*1e3,this.parent=t,this.x=e,this.y=a;let i=0,r=0,n=0,h=0;"V"===s.cut&&(n=this.x+this.cutCoordinate+this.cutterThickness,h=this.y,i=this.x,r=this.y),"H"===s.cut&&(n=this.x,h=this.y+this.cutCoordinate+this.cutterThickness,i=this.x,r=this.y),this.stockLeft=s["left-stock"]?new dt(s["left-stock"],this,i,r):null,this.stockRight=s["right-stock"]?new dt(s["right-stock"],this,n,h):null}getTreeStructure(){const s=new lt(this),t=this.findChildren(s,this.stockLeft),e=this.findChildren(s,this.stockRight);s.children=[...t,...e];const a=new ct(this),i=this.findCuts(a,this.stockLeft),r=this.findCuts(a,this.stockRight);return s.cuts=[...i,...r],s}findChildren(s,t){if(!t)return[];const e=new lt(t);if(e.indexParent=s.index,null===t.type){if(s.cutDirection===t.cutDirection)return[...this.findChildren(s,t.stockLeft),...this.findChildren(s,t.stockRight)];const a=this.findChildren(e,t.stockLeft),i=this.findChildren(e,t.stockRight);e.children=[...a,...i]}return[e]}findCuts(s,t){if(!t)return[];const e=new ct(t);if(null===t.type){if(s.cutDirection===t.cutDirection)return[...this.findCuts(s,t.stockLeft),...this.findCuts(s,t.stockRight)];const a=this.findCuts(e,t.stockLeft),i=this.findCuts(e,t.stockRight);e.cuts=[...a,...i]}return[e]}}class ut{constructor(s,t,a,i,r,n,h,o,c,g){this.key=s,this.name=t,this.material=a,this.stock=i,this.length=r,this.width=n,this.thickness=h,this.cutterThickness=o,this.panelsBusiness=c,this.url=g,this.getQuantity=()=>e.getInstance().projectQuantity}static{this.fromPatternData=(s,t)=>{const e=new dt(s.stock);return new ut(s.key,s.name,s.material,e,e.length,e.width,s.thickness,e.cutterThickness,t,`patterns/${s.name}`)}}createViewModel(){return new ot(this.key,this.name,this.url,this.material,this.getQuantity(),this.length,this.width,1e3*this.thickness,this.cutterThickness,this.getTotalArea(),this.getPanelArea(),this.getWasteArea(),this.getTrimArea(),this.getCutArea(),this.getPanelAreaPercentage(),this.getWasteAreaPercentage(),this.getTrimAreaPercentage(),this.getRefPanels().length,this.getTrims().length,this.getWaste().length,this.getCuts().length,this.getLengthCuts(),this.stock,this.getRefPanels(),this.getItems(),this.getCuts(),this.getTrims(),this.getWaste())}getCuts(s=[],t){return t||(t=this.stock),t.cutDirection&&s.push(new ct(t)),t.stockLeft&&this.getCuts(s,t.stockLeft),t.stockRight&&this.getCuts(s,t.stockRight),s}getItems(s=!1){const t=this.getFlattenedTreeStructure(s),e=[];for(const a of t)a.type&&e.push(a);return e}getPanels(s=!1){const t=this.getFlattenedTreeStructure(s),e=[];for(const a of t)"item"===a.type&&e.push(a);return e}getRefPanels(s=!1){const t=this.getFlattenedTreeStructure(s),e=[];for(const a of t)"item"===a.type&&e.push(a.name??"");return e}getLengthCuts(s){const t=this.getCuts();let e=0;for(const i of t)"V"===i.cutDirection&&(e+=i.width),"H"===i.cutDirection&&(e+=i.length);const a=e/1e3;return s?parseFloat(a.toFixed(2)):a}getTrims(s=!1){const t=this.getFlattenedTreeStructure(s),e=[];for(const a of t)"trimming"!==a.type&&"padding"!==a.type||e.push(a);return e}getWaste(s=!1){const t=this.getFlattenedTreeStructure(s),e=[];for(const a of t)"waste"===a.type&&e.push(a);return e}getTreeStructure(s=!1){const t=this.stock.getTreeStructure();return s&&this.reverseChildren(t),this.assignIndexes(t)}getFlattenedTreeStructure(s=!1){const t=this.getTreeStructure(s),e=[];return this.flattenTree(t,e),e}getTotalArea(s){const t=this.length*this.width/1e6;return s?parseFloat(t.toFixed(2)):t}getPanelArea(s){const t=this.getPanels();let e=0;for(const i of t)e+=i.length*i.width;const a=e/1e6;return s?parseFloat(a.toFixed(2)):a}getPanelAreaPercentage(s){const t=this.getPanelArea()/this.getTotalArea()*100;return s?parseFloat(t.toFixed(2)):t}getWasteArea(s){const t=this.getWaste();let e=0;for(const i of t)e+=i.length*i.width;const a=e/1e6;return s?parseFloat(a.toFixed(2)):a}getWasteAreaPercentage(s){const t=this.getWasteArea()/this.getTotalArea()*100;return s?parseFloat(t.toFixed(2)):t}getTrimArea(s){const t=this.getTrims();let e=0;for(const i of t)e+=i.length*i.width;const a=e/1e6;return s?parseFloat(a.toFixed(2)):a}getCutArea(s){const t=this.getCuts();let e=0;for(const i of t)"V"===i.cutDirection&&(e+=i.width*this.cutterThickness),"H"===i.cutDirection&&(e+=i.length*this.cutterThickness);const a=e/1e6;return s?parseFloat(a.toFixed(2)):a}getTrimAreaPercentage(s){const t=this.getTrimArea()/this.getTotalArea()*100;return s?parseFloat(t.toFixed(2)):t}getFirstTrimSize(s=this.stock){return"trimming"===s.type||"padding"===s.type?s.parent.cutCoordinate:s.stockLeft?this.getFirstTrimSize(s.stockLeft):s.stockRight?this.getFirstTrimSize(s.stockRight):void 0}assignIndexes(s,t={index:0,panelIndex:0}){s.index=t.index++,"item"===s.type&&(s.indexPanel=t.panelIndex++);for(const e of s.children)this.assignIndexes(e,t);return s}flattenTree(s,t){if(t.push(s),s.children)for(const e of s.children)this.flattenTree(e,t)}reverseChildren(s){if(s.children){s.children.reverse();for(const t of s.children)this.reverseChildren(t)}}}class mt extends ${addInstances(s,t){for(const e of s)this.add(e.key,ut.fromPatternData(e,t));return this}}class ft{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d){this.key=s,this.name=t,this.description=e,this.length=a,this.width=i,this.thickness=r,this.count=n,this.quantity=h,this.type=o,this.unitOfMeasure=c,this.cost=g,this.costUnit=l,this.refMaterial=d,this.resource="boardMaterials"}static fromBoardMaterialBusiness(s){return s.createViewModel()}}class pt{constructor(s,t,a={},i={}){this.type=s,this.key=t,this.variables=a,this.articleVariables=i,this.createViewModel=()=>new ft(this.key,this.getName(),this.getDescription(),this.getLength(),this.getWidth(),this.getThickness(),this.getCount(),this.getQuantity(),this.getType(),this.getUnitOfMeasure(),this.getCost(),this.getCostUnit(),this.getRefMaterial()),this.getName=()=>{if("article"===this.type){const s=this.parseMaterialSize(this.articleVariables.name);return s?s.name:""}return this.variables.NBOARD_NAME??""},this.getDescription=()=>{if("article"===this.type){const s=this.parseMaterialSize(this.articleVariables.name);return s?s.name:""}return this.variables.NBOARD_DESC??""},this.getLength=()=>{if("article"===this.type){const s=this.parseMaterialSize(this.articleVariables.name);return s?s.length:0}return this.variables.NBOARD_L??0},this.getWidth=()=>{if("article"===this.type){const s=this.parseMaterialSize(this.articleVariables.name);return s?s.width:0}return this.variables.NBOARD_W??0},this.getThickness=()=>"article"===this.type?0:this.variables.NBOARD_T??0,this.getCount=()=>"article"===this.type?this.articleVariables.count:0,this.getQuantity=()=>"article"===this.type?(this.articleVariables.quantity??0)*e.getInstance().projectQuantity:(this.variables.NBOARD_QTY??0)*e.getInstance().projectQuantity,this.getType=()=>"article"===this.type?-1:this.variables.NBOARD_TYPE??0,this.getUnitOfMeasure=()=>"u",this.getCost=()=>"article"===this.type?this.articleVariables.cost*e.getInstance().projectQuantity:this.getQuantity()*this.getCostUnit(),this.getCostUnit=()=>"article"===this.type?this.articleVariables.costUnit:this.variables.NBOARD_COST??0,this.getRefMaterial=()=>"article"===this.type?this.getName():this.variables.NBOARD_MATNAME??""}static{this.fromBoardMaterialData=s=>new pt(s.type,s.key,s.variables,s.articleVariables)}parseMaterialSize(s){const t=s.match(/^(.+?)\s*\((\d+)x(\d+)\)$/);if(!t)return null;const[,e,a,i]=t;return{name:e.trim(),length:parseInt(a,10),width:parseInt(i,10)}}}class bt extends ${addInstances(s){for(const t of s)this.add(t.key,pt.fromBoardMaterialData(t));return this}}class Pt{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d,u,m,f,p,b,P,w,y){this.key=s,this.messages=t,this.refParts=e,this.refPartsQuantities=a,this.refAssemblies=i,this.refAssembliesQuantities=r,this.documents=n,this.swcps=h,this.variables=o,this.heritedVariables=c,this.typedObjectVariables=g,this.name=l,this.configuration=d,this.quantity=u,this.height=m,this.width=f,this.depth=p,this.url=b,this.cost=P,this.costPanels=w,this.costHardware=y,this.resource="subFrames",this.parts=[],this.assemblies=[],this.panels=[],this.programs=[],this.hardware=[],this.weldments=[],this.refQuantities=[]}static{this.fromFrameBusiness=s=>s.createViewModel()}}class wt{constructor(s,t,a,i,r,n,h,o,c,g,l){this.key=s,this.messages=t,this.heritedVariables=a,this.typedObjectVariables=i,this.refParts=r,this.refPartsQuantities=n,this.refAssemblies=h,this.refAssembliesQuantities=o,this.documents=c,this.swcps=g,this.variables=l,this.parts=[],this.assemblies=[],this.panels=[],this.programs=[],this.hardware=[],this.weldments=[],this.getName=()=>this.variables.NAME,this.getConfiguration=()=>this.variables.CONF,this.getQuantity=()=>(this.variables.NB??0)*e.getInstance().projectQuantity,this.getHeight=()=>this.variables.Height??0,this.getWidth=()=>this.variables.Width??0,this.getDepth=()=>this.variables.Depth??0,this.getImages=()=>new Y(this.documents).getImages(),this.getPDFs=()=>new ss(this.documents).getPDFs(),this.getDocuments=()=>new J(this.documents).getDocuments(),this.getUrl=()=>`frames/${this.key}`,this.getCostPanels=()=>{let s=0;for(const t of this.panels)s+=t.getCost();return s},this.getCostHardware=()=>{let s=0;for(const t of this.hardware)s+=t.getCost();return s},this.getCost=()=>this.getCostPanels()+this.getCostHardware(),this.getIsExcluded=()=>null!=this.typedObjectVariables&&"EXCLUDED"in this.typedObjectVariables}static{this.fromAssemblyPartBusiness=s=>new wt(s.key,s.messages,s.heritedVariables,s.typedObjectVariables,"refParts"in s?s.refParts:[],"refPartsQuantities"in s?s.refPartsQuantities:[],"refAssemblies"in s?s.refAssemblies:[],"refAssembliesQuantities"in s?s.refAssembliesQuantities:[],s.documents,s.swcps,s.variables)}createViewModel(){return new Pt(this.key,Z.fromMessagesRaw(this.messages,this.getName(),"Frame",this.getUrl()),this.refParts,this.refPartsQuantities,this.refAssemblies,this.refAssembliesQuantities,this.getDocuments(),this.swcps,this.variables,this.heritedVariables,this.typedObjectVariables,this.getName(),this.getConfiguration(),this.getQuantity(),this.getHeight(),this.getWidth(),this.getDepth(),this.getUrl(),this.getCost(),this.getCostPanels(),this.getCostHardware())}}class yt extends gs{constructor(){super(...arguments),this.FrameTypedObjectName="SUBFRAME"}addInstances(s){const t=s.getInstancesByName(this.FrameTypedObjectName)??[];for(const e of t)this.addInstance(e.key,wt.fromAssemblyPartBusiness(e));return this}}class Mt{constructor(s,t,e,a,i,r,n){this.key=s,this.refPart=t,this.messages=e,this.documents=a,this.variables=i,this.name=r,this.shape=n}static{this.fromProfileBusiness=s=>s.createViewModel()}}class Dt{constructor(s,t,e,a,i,r){this.key=s,this.refPart=t,this.variables=e,this.messages=a,this.documents=i,this.shape=r,this.createViewModel=()=>new Mt(this.key,this.refPart,Z.fromMessagesRaw(this.messages,this.getName(),"Profile"),this.getDocuments(),this.variables,this.getName(),this.shape),this.getDocuments=()=>new J(this.documents).getDocuments(),this.getName=()=>this.variables.PRF_N}static fromProfileData(s){return new Dt(s.key,s.refPart,s.variables,s.messages,s.documents,s.shape)}}class kt extends ${addInstances(s){for(const t of s)this.add(t.key,Dt.fromProfileData(t));return this}}class Tt{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d,u,m,f,p,b,P,w,y,M,D,k,T,A,I,v,B,S,C,R,N,O,E,V,L,W,x,j,Q,_,F,U,G,H,$,q,Z,Y,z,X,K,J){this.database=s,this.settings=t,this.projectBusiness=e,this.panelsBusiness=a,this.stocksBusiness=i,this.laminatesBusiness=r,this.partsBusiness=n,this.assembliesBusiness=h,this.edgebandsBusiness=o,this.edgebandMaterialsBusiness=c,this.profilesBusiness=g,this.materialsBusiness=l,this.weldmentMaterialsBusiness=d,this.boardMaterialsBusiness=u,this.programsBusiness=m,this.sheetBusiness=f,this.programPartsBusiness=p,this.toolsBusiness=b,this.spindlesBusiness=P,this.costsBusiness=w,this.typedObjectsBusiness=y,this.framesBusiness=M,this.subFramesBusiness=D,this.hardwaresBusiness=k,this.excludedItemsBusiness=T,this.panelProcessesBusiness=A,this.processZonesBusiness=I,this.weldmentsBusiness=v,this.patternsBusiness=B,this.panelBusinessManager=S,this.stockBusinessManager=C,this.laminateBusinessManager=R,this.partBusinessManager=N,this.assemblyBusinessManager=O,this.edgebandBusinessManager=E,this.edgebandMaterialBusinessManager=V,this.profilesBusinessManager=L,this.materialBusinessManager=W,this.weldmentMaterialBusinessManager=x,this.boardMaterialBusinessManager=j,this.programBusinessManager=Q,this.sheetBusinessManager=_,this.programPartBusinessManager=F,this.toolBusinessManager=U,this.spindleBusinessManager=G,this.costBusinessManager=H,this.frameBusinessManager=$,this.subFrameBusinessManager=q,this.hardwareBusinessManager=Z,this.excludedBusinessManager=Y,this.panelProcessBusinessManager=z,this.processZoneBusinessManager=X,this.weldmentBusinessManager=K,this.patternsBusinessManager=J}static createFromRawDataNew(s,t){const e=H.createFromRawData(s),a=ts.fromProjectData(e.projectData),i=new Ds;i.addInstances(e.materialsData);const r=new Fs;r.addInstances(e.toolsData);const n=new Rs;n.addInstances(e.programsData),n.addTools(r);const h=new js;h.addInstances(e.stocksData),h.addMaterials(i);const o=new Bs;o.addInstances(e.partsData),o.addStocks(h),o.addPrograms(n);const c=new X;c.addInstances(e.assembliesData),c.addPrograms(n),c.addParts(o),c.addAssemblies(c);const g=new ws;g.addInstances(e.stocksData,t);const l=new cs;l.addInstances(e.edgebandMaterialsData);const d=new ns;d.addInstances(e.edgebandsData),d.addMaterials(l);const u=(new kt).addInstances(e.profilesData),m=(new $s).addInstances(e.programsData),f=(new Es).addInstances(e.programPartsData),p=(new Ls).addInstances(e.spindlesData),b=(new as).addInstances(e.costsData),P=(new Us).addInstances(s,o,c),w=(new us).addInstances(P),y=(new yt).addInstances(P),M=(new ps).addInstances(P),D=(new ht).addInstances(P),k=(new Ys).addInstances(e.panelProcessesData),T=(new Ks).addInstances(e.processZonesData),A=(new tt).addInstances(e.stocksData),I=(new it).addInstances(i,A.getAll()),v=(new bt).addInstances(e.boardMaterialsData),B=new As;B.addInstances(e.panelsData,t),B.addStocks(h),B.addEdgebands(d),B.addLaminates(g),B.addPrograms(n);const S=(new mt).addInstances(e.patternsData,B.getAll());return new Tt(s,t,a,B.getAll(),h.getAll(),g.getAll(),o.getAll(),c.getAll(),d.getAll(),l.getAll(),u.getAll(),i.getAll(),I.getAll(),v.getAll(),n.getAll(),m.getAll(),f.getAll(),r.getAll(),p.getAll(),b.getAll(),P.getAll(),w.getAll(),y.getAll(),M.getAll(),D.getAll(),k.getAll(),T.getAll(),A.getAll(),S.getAll(),B,h,g,o,c,d,l,u,i,I,v,n,m,f,r,p,b,w,y,M,D,k,T,A,S)}static createFromRawData(s,t){const e=H.createFromRawData(s),a=ts.fromProjectData(e.projectData),i=(new Ds).addInstances(e.materialsData),r=(new Rs).addInstances(e.programsData),n=(new Bs).addInstances(e.partsData),h=(new X).addInstances(e.assembliesData),o=(new As).addInstances(e.panelsData,t),c=(new js).addInstances(e.stocksData),g=(new ws).addInstances(e.stocksData,t),l=(new ns).addInstances(e.edgebandsData),d=(new cs).addInstances(e.edgebandMaterialsData),u=(new kt).addInstances(e.profilesData),m=(new $s).addInstances(e.programsData),f=(new Es).addInstances(e.programPartsData),p=(new Fs).addInstances(e.toolsData),b=(new Ls).addInstances(e.spindlesData),P=(new as).addInstances(e.costsData),w=(new Us).addInstances(s,n,h),y=(new us).addInstances(w),M=(new yt).addInstances(w),D=(new ps).addInstances(w),k=(new ht).addInstances(w),T=(new Ys).addInstances(e.panelProcessesData),A=(new Ks).addInstances(e.processZonesData),I=(new tt).addInstances(e.stocksData),v=(new it).addInstances(i,I.getAll()),B=(new bt).addInstances(e.boardMaterialsData),S=(new mt).addInstances(e.patternsData,o.getAll());return new Tt(s,t,a,o.getAll(),c.getAll(),g.getAll(),n.getAll(),h.getAll(),l.getAll(),d.getAll(),u.getAll(),i.getAll(),v.getAll(),B.getAll(),r.getAll(),m.getAll(),f.getAll(),p.getAll(),b.getAll(),P.getAll(),w.getAll(),y.getAll(),M.getAll(),D.getAll(),k.getAll(),T.getAll(),A.getAll(),I.getAll(),S.getAll(),o,c,g,n,h,l,d,u,i,v,B,r,m,f,p,b,P,y,M,D,k,T,A,I,S).relateData()}relateData(){return this.assignDataToProject(),this.assignDataToEdgebands(),this.assignDataToStocks(),this.assignDataToWeldments(),this.assignDataToLaminates(),this.assignDataToPanels(),this.assignDataToAssemblies(),this.assignSubAssemblies(),this.assignDataToFrames(),this.assignDataToSubFrames(),this.assignDataToParts(),this.assignDataToSheets(),this.assignDataToProgramParts(),this.assignDataToProcessZones(),this}assignDataToProject(){for(const s of this.assemblyBusinessManager.getAll())if(this.projectBusiness.name===s.getName())return void(this.projectBusiness.component=s);for(const s of this.partBusinessManager.getAll())if(this.projectBusiness.name===s.getName())return void(this.projectBusiness.component=s)}assignDataToEdgebands(){for(const s of this.edgebandBusinessManager.getAll())s.material=this.edgebandMaterialBusinessManager.get(s.refMaterial),s.part=this.partBusinessManager.get(s.refPanel),s.panel=this.panelBusinessManager.get(s.refPanel)}assignDataToStocks(){for(const s of this.stockBusinessManager.getAll())s.material=this.materialBusinessManager.get(s.refMaterial),s.part=this.partBusinessManager.get(s.refPart),s.panel=this.panelBusinessManager.get(s.refPart)}assignDataToWeldments(){for(const s of this.weldmentBusinessManager.getAll())s.material=this.weldmentMaterialBusinessManager.get(s.refMaterial),s.part=this.partBusinessManager.get(s.refPart)}assignDataToLaminates(){for(const s of this.laminateBusinessManager.getAll())s.material=this.materialBusinessManager.get(s.refMaterial),s.part=this.partBusinessManager.get(s.refPanel),s.panel=this.panelBusinessManager.get(s.refPanel)}assignDataToPanels(){for(const s of this.panelBusinessManager.getAll()){s.project=this.projectBusiness;const t=this.partBusinessManager.get(s.key);t&&(s.part=t);for(const e of s.refStocks){const t=this.stockBusinessManager.get(e);if(t){s.stocks.push(t),"CORE"===t.variables.ST_N&&(s.material=t.material);continue}const a=this.laminateBusinessManager.get(e);a&&s.laminates.push(a)}for(const e of s.refEdgebands){const t=this.edgebandBusinessManager.get(e);t&&s.edgebands.push(t)}for(const e of s.refPrograms){const t=this.programBusinessManager.get(e);t&&s.programs.push(t)}for(const e of s.refProcessZones){const t=this.processZoneBusinessManager.get(e);t&&s.processZones.push(t)}s.isNested=this.programPartBusinessManager.getAll().some((t=>t.refPart===s.key)),s.isPatterned=this.patternsBusinessManager.getAll().some((t=>t.getRefPanels().includes(s.name)))}}assignDataToAssemblies(){for(const s of this.assemblyBusinessManager.getAll()){for(const t of s.refParts){const e=this.partBusinessManager.get(t);e&&s.parts?.push(e)}for(const t of s.refPrograms){const e=this.programBusinessManager.get(t);e&&s.programs?.push(e)}}}assignSubAssemblies(){for(const s of this.assemblyBusinessManager.getAll())for(const t of s.refAssemblies){const e=this.assemblyBusinessManager.get(t);e&&s.assemblies?.push(e)}}assignDataToFrames(){for(const s of this.frameBusinessManager.getAll()){for(const t of s.refParts){const e=this.partBusinessManager.get(t);e&&s.parts?.push(e);const a=this.panelBusinessManager.get(t);if(a){s.panels?.push(a);for(const t of a.programs)s.programs.push(t)}const i=this.hardwareBusinessManager.get(t);i&&s.hardware.push(i)}for(const t of s.refAssemblies){const e=this.assemblyBusinessManager.get(t);e&&s.assemblies.push(e);const a=this.hardwareBusinessManager.get(t);a&&s.hardware.push(a)}}}assignDataToSubFrames(){for(const s of this.subFrameBusinessManager.getAll()){for(const t of s.refParts){const e=this.partBusinessManager.get(t);e&&s.parts?.push(e);const a=this.panelBusinessManager.get(t);if(a){s.panels?.push(a);for(const t of a.programs)s.programs.push(t)}const i=this.hardwareBusinessManager.get(t);i&&s.hardware.push(i)}for(const t of s.refAssemblies){const e=this.assemblyBusinessManager.get(t);e&&s.assemblies.push(e);const a=this.hardwareBusinessManager.get(t);a&&s.hardware.push(a)}}}assignDataToParts(){for(const s of this.partBusinessManager.getAll()){s.panel=s.refPanel?this.panelBusinessManager.get(s.refPanel):void 0;for(const t of s.refStocks??[]){const e=this.stockBusinessManager.get(t);e&&s.stocks.push(e)}for(const t of s.refPrograms){const e=this.programBusinessManager.get(t);e&&(s.programs.push(e),e.part=s)}}}assignDataToSheets(){for(const s of this.sheetBusiness)for(const t of s.refProgramParts??[]){const e=this.programPartBusinessManager.get(t);e&&s.programParts.push(e)}}assignDataToProgramParts(){for(const s of this.programPartsBusiness){const t=this.panelBusinessManager.get(s.refPart);s.panel=t??void 0;const e=this.partBusinessManager.get(s.refPart);s.part=e??void 0;const a=this.sheetBusinessManager.get(s.refProgram);s.sheet=a??void 0;for(const i of this.sheetBusinessManager.getAll())i.programParts.some((t=>t.refPart===s.refPart))&&s.sheets.push(i)}}assignDataToProcessZones(){for(const s of this.processZonesBusiness){const t=this.panelProcessBusinessManager.get(s.refPanelProcess);s.panelProcess=t}}}class At extends gs{addInstances(s){for(const t of s)this.addInstance(t.key,q.fromAssemblyBusiness(t));return this}}class It extends gs{addInstances(s){for(const t of s)this.addInstance(t.key,ft.fromBoardMaterialBusiness(t));return this}}class vt extends gs{constructor(){super(...arguments),this.findProjectComponent=(s,t,e)=>{const a=s.name,i=e.find((s=>s.name===a));if(i)return i;const r=t.find((s=>s.name===a));return r||null},this.getAll=()=>{const s=Array.from(this.instances.values());return s.map((s=>this.clone(s))),s}}addInstances(s,t,e){const a=this.findProjectComponent(s,t,e);return a&&this.addInstance(a.key,a),this}clone(s){return Object.assign(Object.create(Object.getPrototypeOf(s)),s)}static{this.createBOM=s=>{for(const t of s.refPartsQuantities??[]){const{key:e}=t;if(s.children)for(let t=s.children?.length-1;t>=0;t--)e===s.children[t].key&&s.children.splice(t,1)}for(const t of s.refAssembliesQuantities??[]){const{key:e,quantity:a}=t;let i=a;if(s.children)for(let t=s.children?.length-1;t>=0;t--)e===s.children[t].key&&(i--,i>1&&s.children.splice(t,1))}return s}}}class Bt{constructor(s,t){this.articles=s,this.cost=t}static fromCostBusiness(s){return new Bt(s.articles,s.cost)}}class St extends gs{addInstances(s){return this.addInstance("0",Bt.fromCostBusiness(s[0])),this}}class Ct extends gs{constructor(){super(...arguments),this.getGroupKey=s=>`${s.length}_${s.width}_${s.thickness}_${s.material?.name}`}addInstances(s){for(const t of s)this.addInstance(t.key,is.fromEdgebandBusiness(t));return this}}class Rt extends gs{addInstances(s){for(const t of s)this.addInstance(t.key,hs.fromEdgebandMaterialBusiness(t));return this}}class Nt extends gs{constructor(){super(...arguments),this.FrameTypedObjectName="EXCLUDED"}addInstances(s){for(const t of s)this.addInstance(t.key,rt.fromExcludedBusiness(t));return this}}class Ot extends gs{addInstances(s){for(const t of s)t.getIsExcluded()||this.addInstance(t.key,ls.fromFrameBusiness(t));return this}}class Et extends gs{constructor(){super(...arguments),this.FrameTypedObjectName="HARDWARE"}addInstances(s){for(const t of s)t.getIsExcluded()||this.addInstance(t.key,ms.fromHardwareBusiness(t));return this}}class Vt{static{this.makeLabels=s=>{const t=[];let e=1;const a=s=>{const a=s.quantity>0?s.quantity:1;for(let i=0;i<a;i++){const a=this.clone(s);a.instance=i+1,a.instanceLabel=e,e++,t.push(a)}};return s?.forEach((s=>a(s))),t}}static{this.clone=s=>Object.assign(Object.create(Object.getPrototypeOf(s)),s)}static{this.deepCopy=s=>{if(null==s)return s;if(s instanceof Date)return new Date(s.getTime());if(Array.isArray(s))return s.map((s=>this.deepCopy(s)));if("object"==typeof s){const t={};for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e)){const a=s[e];t[e]=this.deepCopy(a)}return t}return s}}}class Lt{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d,u,m){this.key=s,this.messages=t,this.documents=e,this.variables=a,this.name=i,this.description=r,this.category=n,this.thickness=h,this.hasGrain=o,this.cost=c,this.costUnit=g,this.costType=l,this.quantity=d,this.type=u,this.unitOfMeasure=m,this.resource="laminateMaterials"}static fromMaterialBusiness(s){return s.createViewModel()}}class Wt extends gs{addInstances(s){for(const t of s)t.getIsWeldment()||1!==t.getType()||this.addInstance(t.key,Lt.fromMaterialBusiness(t));return this}}class xt extends gs{constructor(){super(...arguments),this.combinedInstances=new Map,this.getLongest=(s,t,e)=>e?{length:s,width:t}:t>s?{width:t,length:s}:{length:s,width:t},this.getGroupKey=s=>{const{length:t,width:e}=this.getLongest(s.length,s.width,s.material?.hasGrain??!1);return`${t}_${e}_${s.thickness}_${s.material?.hasGrain??!1}_${s.material?.name}`},this.getAllCombined=()=>{const s=new Map;for(const a of this.instances.values()){const t=this.getGroupKey(a);s.has(t)||s.set(t,[]),s.get(t).push(a)}const t=new Map;let e=1;for(const[,a]of s)if(1===a.length){const s=a[0];t.set(s.name,s)}else{const s=a[0],i=a.reduce(((s,t)=>s+t.quantity),0),r=bs.createCombinedLaminate(s,"Combined Laminate "+e++,i);r.children=a,r.part=s.part,r.panel=s.panel,r.material=s.material,t.set(r.name,r)}return Array.from(t.values())}}addInstances(s){for(const t of s)this.addInstance(t.key,bs.fromLaminateBusiness(t));return this}}class jt extends gs{addInstances(s){for(const t of s)t.getIsWeldment()||0!==t.getType()&&2!==t.getType()||this.addInstance(t.key,ys.fromMaterialBusiness(t));return this}}class Qt extends gs{addInstances(s,t){for(const e of t)this.addInstance(`${s}-${e.messageType}`,e);return this}processMessages(s,t,e,a,i,r,n,h,o,c,g,l,d){this.processProjectMessages(s),this.processSourceMessages(t),this.processSourceMessages(e),this.processSourceMessages(a),this.processSourceMessages(i),this.processSourceMessages(r),this.processSourceMessages(n),this.processSourceMessages(h),this.processSourceMessages(o),this.processSourceMessages(c),this.processSourceMessages(g),this.processSourceMessages(l),this.processSourceMessages(d),this.processPanelMessages(t),this.processProgramMessages(o)}processSourceMessages(s){for(const t of s)this.addInstances(t.key,t.messages)}processProjectMessages(s){this.addInstances(s.name,s.messages)}processPanelMessages(s){for(const t of s)this.processPanelSize(t),this.processPanelLength(t),this.processPanelWidth(t),this.processPanelInvalidDimensions(t)}processProgramMessages(s){for(const t of s)this.processProgramEncodeMessage(t)}processPanelSize(s){if(!1===s.hasGrain&&s.boardLength>0&&s.boardWidth>0){const t=s.lengthStock<=s.boardLength&&s.widthStock<=s.boardWidth,e=s.lengthStock<=s.boardWidth&&s.widthStock<=s.boardLength;if(!t&&!e){const t=new Z("ERROR","Error",`size out of range. Panel Size: ${s.lengthStock} x ${s.widthStock} | Board: ${s.boardLength} x ${s.boardWidth}`,`size out of range. Panel Size: ${s.lengthStock} x ${s.widthStock} | Board: ${s.boardLength} x ${s.boardWidth}`,s.name,s.name,"Panel","");this.addInstance(`${s.key}-${t.message}`,t),s.messages.push(t)}}}processPanelLength(s){if(s.boardLength<s.lengthStock&&s.boardLength>0&&s.hasGrain){const t=new Z("ERROR","Error",`length out of range. Length: ${s.lengthStock} | Board: ${s.boardLength} x ${s.boardWidth}`,`length out of range. Length: ${s.lengthStock} | Board: ${s.boardLength} x ${s.boardWidth}`,s.name,s.name,"Panel","");this.addInstance(`${s.key}-${t.message}`,t),s.messages.push(t)}}processPanelWidth(s){if(s.boardWidth<s.widthStock&&s.boardWidth>0&&s.hasGrain){const t=new Z("ERROR","Error",`width out of range. Width: ${s.widthStock} | Board: ${s.boardLength} x ${s.boardWidth}`,`width out of range. Width: ${s.widthStock} | Board: ${s.boardLength} x ${s.boardWidth}`,s.name,s.name,"Panel","");this.addInstance(`${s.key}-${t.message}`,t),s.messages.push(t)}}processPanelInvalidDimensions(s){if(0===s.length){const t=new Z("ERROR","Error","invalid length dimension, value is 0","invalid length dimension, value is 0",s.name,s.name,"Panel","");this.addInstance(`${s.key}-${t.message}`,t),s.messages.push(t)}if(0===s.width){const t=new Z("ERROR","Error","invalid width dimension, value is 0","invalid width dimension, value is 0",s.name,s.name,"Panel","");this.addInstance(`${s.key}-${t.message}`,t),s.messages.push(t)}if(0===s.thickness){const t=new Z("ERROR","Error","invalid thickness dimension, value is 0","invalid thickness dimension, value is 0",s.name,s.name,"Panel","");this.addInstance(`${s.key}-${t.message}`,t),s.messages.push(t)}}processProgramEncodeMessage(s){const t=s.variables.ENCODEMSG??"";if(""!==t){const e=new Z("ERROR","Error",t,t,s.name,s.name,"Program","");this.addInstance(`${s.key}-${t}`,e),s.messages.push(e)}}}class _t extends gs{constructor(){super(...arguments),this.combine=!1}addInstances(s){for(const t of s)t.getIsExcluded()||this.addInstance(t.key,t.createViewModel());return this}}class Ft extends gs{addInstances(s){for(const t of s)this.addInstance(t.key,t.createViewModel());return this}}class Ut extends gs{addInstances(s){for(const t of s)this.addInstance(t.key,Is.fromPartBusiness(t));return this}}class Gt extends gs{addInstances(s){for(const t of s)this.addInstance(t.key,ot.fromPatternBusiness(t));return this}}class Ht extends gs{addInstances(s){for(const t of s)this.addInstance(t.key,t.createViewModel());return this}}class $t extends gs{addInstances(s){for(const t of s)this.addInstance(t.key,Mt.fromProfileBusiness(t));return this}}class qt extends gs{addInstances(s){for(const t of s)t.refBoard||this.addInstance(t.key,Ss.fromProgramBusiness(t));return this}}class Zt extends gs{addInstances(s){for(const t of s)this.addInstance(t.key,Ns.fromProgramPartBusiness(t));return this}}class Yt extends gs{addInstances(s){for(const t of s)t.refBoard&&this.addInstance(t.key,Gs.fromProgramBusiness(t));return this}}class zt{constructor(s,t,e,a){this.key=s,this.messages=t,this.documents=e,this.variables=a,this.resource="spindles"}static{this.fromSpindleBusiness=s=>new zt(s.key,Z.fromMessagesRaw(s.messages,s.key,"Spindle",""),s.documents,s.variables)}}class Xt extends gs{addInstances(s){if(!s)return this;for(const t of s)this.addInstance(t.key,zt.fromSpindleBusiness(t));return this}}class Kt extends gs{constructor(){super(...arguments),this.sourceInstances=new Map,this.combine=!1}addInstances(s){for(const t of s)t.material?.getIsWeldment()||0!==t.material?.getType()&&2!==t.material?.getType()||this.addInstance(t.key,Ws.fromStockBusiness(t));return this}}class Jt extends gs{addInstances(s){for(const t of s)t.getIsExcluded()||this.addInstance(t.key,Pt.fromFrameBusiness(t));return this}}class se extends gs{addInstances(s){for(const t of s)this.addInstance(t.key,Qs.fromToolBusiness(t));return this}}class te{constructor(){this.instances=new Map,this.addInstance=(s,t)=>{const e=this.instances.get(s);e?e.push(t):this.instances.set(s,[t])},this.addInstances=(s,t,e)=>{for(const a of s.typedObjects){const s=t.get(a);if(s){const t=s.variables.TOTYPES.split(";");for(const e of t)this.addInstance(e,s)}const i=e.get(a);if(i){const s=i.variables.TOTYPES.split(";");for(const t of s)this.addInstance(t,i)}}return this},this.getInstancesByName=s=>this.instances.get(s)||void 0,this.getAll=()=>Object.fromEntries(this.instances)}}class ee extends gs{addInstances(s){for(const t of s)t.getIsExcluded()||this.addInstance(t.key,Js.fromWeldmentBusiness(t));return this}get(s){const t=this.instances.get(s);if(t)return t;for(const e of this.instances.values())for(const t of e.children??[])if(t.key===s)return t}getFromRefPart(s){const t=[],e=Array.from(this.instances.values());for(const a of e)a.refPart===s&&t.push(a);return t}}class ae extends gs{addInstances(s){for(const t of s)this.addInstance(t.key,et.fromMaterialBusiness(t));return this}}class ie{constructor(s,t,e,a,i,r,n,h,o,c,g,l,d,u,m,f,p,b,P,w,y,M,D,k,T,A,I,v,B,S,C,R,N,O,E,V,L,W,x,j,Q,_,F,U,G,H,$,q,Z,Y,z,X,K,J,ss,ts,es,as,is,rs,ns){this.database=s,this.settings=t,this.project=e,this.panels=a,this.stocks=i,this.parts=r,this.assemblies=n,this.bom=h,this.edgebands=o,this.laminates=c,this.programs=g,this.sheets=l,this.programParts=d,this.tools=u,this.spindles=m,this.costs=f,this.messages=p,this.typedObjects=b,this.frames=P,this.subFrames=w,this.hardware=y,this.excluded=M,this.panelProcesses=D,this.processZones=k,this.profiles=T,this.weldments=A,this.patterns=I,this.panelMaterials=v,this.laminateMaterials=B,this.edgebandMaterials=S,this.weldmentMaterials=C,this.boardMaterials=R,this.panelManager=N,this.stockManager=O,this.partManager=E,this.assemblyManager=V,this.edgebandManager=L,this.edgebandMaterialManager=W,this.laminateManager=x,this.materialManager=j,this.laminateMaterialManager=Q,this.weldmentMaterialManager=_,this.boardMaterialManager=F,this.programManager=U,this.sheetManager=G,this.programPartManager=H,this.toolManager=$,this.spindleManager=q,this.costManager=Z,this.messageManager=Y,this.typedObjectManager=z,this.frameManager=X,this.subFrameManager=K,this.hardwareManager=J,this.excludedManager=ss,this.panelProcessManager=ts,this.processZoneManager=es,this.profileManager=as,this.weldmentManager=is,this.patternManager=rs,this.labelManager=ns,this.relateData=()=>(this.assignDataToProject(),this.assignDataToEdgebands(),this.assignDataToStocks(),this.assignDataToWeldments(),this.assignDataToLaminates(),this.assignDataToPanels(),this.assignDataToAssemblies(),this.assignSubAssemblies(),this.assignDataToFrames(),this.assignDataToSubFrames(),this.assignDataToParts(),this.assignDataToSheets(),this.assignDataToPrograms(),this.assignDataToProgramParts(),this.assignDataToProcessZones(),this.assignDataToPatterns(),this.assignDataToBoards(),this.assignDataToTools(),this)}static createFromRawData(s,t,a){if(e.getInstance(s,t,a),!a.status)throw Error("");const i=Tt.createFromRawData(s,t),r=K.fromProjectBusiness(i.projectBusiness),n=(new _t).addInstances(i.panelsBusiness),h=(new jt).addInstances(i.materialsBusiness),o=(new Kt).addInstances(i.stocksBusiness),c=(new Ut).addInstances(i.partsBusiness),g=(new At).addInstances(i.assembliesBusiness),l=(new Ct).addInstances(i.edgebandsBusiness),d=(new Rt).addInstances(i.edgebandMaterialsBusiness),u=(new xt).addInstances(i.laminatesBusiness),m=(new Wt).addInstances(i.materialsBusiness),f=(new ae).addInstances(i.weldmentMaterialsBusiness),p=(new It).addInstances(i.boardMaterialsBusiness),b=(new qt).addInstances(i.programsBusiness),P=(new Yt).addInstances(i.sheetBusiness),w=(new Zt).addInstances(i.programPartsBusiness),y=(new se).addInstances(i.toolsBusiness),M=(new Xt).addInstances(i.spindlesBusiness),D=(new St).addInstances(i.costsBusiness),k=new Qt,T=(new te).addInstances(s,c,g),A=(new Ot).addInstances(i.framesBusiness),I=(new Jt).addInstances(i.subFramesBusiness),v=(new Et).addInstances(i.hardwaresBusiness),B=(new Nt).addInstances(i.excludedItemsBusiness),S=(new Ft).addInstances(i.panelProcessesBusiness),C=(new Ht).addInstances(i.processZonesBusiness),R=(new $t).addInstances(i.profilesBusiness),N=(new ee).addInstances(i.weldmentsBusiness),O=(new Gt).addInstances(i.patternsBusiness),E=(new vt).addInstances(r,g.getAll(),c.getAll());return k.processMessages(r,n.getAll(),o.getAll(),c.getAll(),g.getAll(),l.getAll(),u.getAll(),h.getAll(),b.getAll(),P.getAll(),w.getAll(),y.getAll(),M.getAll()),new ie(s,t,r,n.getAll(),o.getAll(),c.getAll(),g.getAll(),E.getAll(),l.getAll(),u.getAll(),b.getAll(),P.getAll(),w.getAll(),y.getAll(),M.getAll(),D.getAll(),k.getAll(),T.getAll(),A.getAll(),I.getAll(),v.getAll(),B.getAll(),S.getAll(),C.getAll(),R.getAll(),N.getAll(),O.getAll(),h.getAll(),m.getAll(),d.getAll(),f.getAll(),p.getAll(),n,o,c,g,l,d,u,h,m,f,p,b,P,w,y,M,D,k,T,A,I,v,B,S,C,R,N,O,Vt).relateData()}assignDataToProject(){}assignDataToEdgebands(){for(const s of this.edgebandManager.getAll())s.material=this.edgebandMaterialManager.get(s.refMaterial),s.part=this.partManager.get(s.refPanel),s.panel=this.panelManager.get(s.refPanel)}assignDataToStocks(){for(const s of this.stockManager.getAll()){this.assignDataToStock(s);for(const t of s.children??[])this.assignDataToStock(t)}}assignDataToStock(s){s.material=this.materialManager.get(s.refMaterial),s.material||console.warn(`material not found for stock: ${s.key}`),s.part=this.partManager.get(s.refPart),s.panel=this.panelManager.get(s.refPart)}assignDataToWeldments(){for(const s of this.weldments)s.material=this.materialManager.get(s.refMaterial),s.part=this.partManager.get(s.refPart)}assignDataToLaminates(){for(const s of this.laminateManager.getAll())s.material=this.laminateMaterialManager.get(s.refMaterial),s.material||console.warn(`material not found for laminate: ${s.key}`),s.part=this.partManager.get(s.refPanel),s.panel=this.panelManager.get(s.refPanel)}assignDataToPanels(){for(const s of this.panels)this.assignDataToPanel(s)}assignDataToPanel(s){s.project=this.project;const t=this.partManager.get(s.refPart);t&&(s.part=t);for(const e of s.refStocks){const t=this.stockManager.get(e);if(t){s.stocks.push(t),t.material||console.warn("material not found for stock",t.key,"in panel",s.key),"CORE"===t.variables.ST_N&&(s.material=t.material),t.variables.ST_N?.includes("LAYER")&&s.layers.push(t);continue}const a=this.laminateManager.get(e);a&&(s.laminates.push(a),"TOP"===a.name&&(s.laminateTop=a),"BOTTOM"===a.name&&(s.laminateBottom=a),a.variables.ST_N?.includes("LAYER")&&s.layers.push(a))}for(const e of s.refEdgebands){const t=this.edgebandManager.get(e);t&&(s.edgebands.push(t),"F"===t.position&&(s.edgebandFront=t),"B"===t.position&&(s.edgebandBack=t),"L"===t.position&&(s.edgebandLeft=t),"R"===t.position&&(s.edgebandRight=t))}for(const e of s.refPrograms){const a=this.programManager.get(e);a&&(s.programs.push(a),a.panel=s,a.material=s.material,t&&(a.part=t))}for(const e of s.refProcessZones){const t=this.processZoneManager.get(e);t&&s.processZones.push(t)}for(const e of this.patterns)for(const t of e.refPanels)t===s.name&&(s.pattern=e)}assignDataToAssemblies(){for(const s of this.assemblyManager.getAll()){for(const t of s.refParts){const e=this.partManager.get(t);e&&(s.parts.push(e),s.children||(s.children=[]),s.children.push(e))}for(const t of s.refPrograms){const e=this.programManager.get(t);e&&s.programs.push(e)}}}assignSubAssemblies(){for(const s of this.assemblyManager.getAll())for(const t of s.refAssemblies){const e=this.assemblyManager.get(t);e&&(s.assemblies.push(e),s.children||(s.children=[]),s.children.push(e))}}assignDataToFrames(){for(const s of this.frameManager.getAll()){for(const t of s.refParts){const e=this.partManager.get(t);if(e){s.parts?.push(e);const a=this.weldmentManager.getFromRefPart(t);a&&(s.weldments=[...a])}const a=this.panelManager.get(t);if(a){a.frames?.push(s),s.panels.push(a);for(const e of a.programs)s.programs.push(e);const t=s.refPartsQuantities.filter((s=>s.key===a.key)).reduce(((s,t)=>s+t.quantity),0);a.refQuantities.push({key:s.key,quantity:t})}const i=this.hardwareManager.get(t);if(i){s.hardware.push(i),i.frames?.push(s);const t=[...s.refPartsQuantities,...s.refAssembliesQuantities].filter((s=>s.key===i.key)).reduce(((s,t)=>s+t.quantity),0);i.refQuantities.push({key:s.key,quantity:t})}}for(const t of s.refAssemblies){const e=this.assemblyManager.get(t);e&&s.assemblies.push(e);const a=this.subFrameManager.get(t);if(a){s.subFrames||(s.subFrames=[]),s.subFrames.push(a);const t=s.refAssembliesQuantities.filter((s=>s.key===a.key)).reduce(((s,t)=>s+t.quantity),0);a.refQuantities.push({key:s.key,quantity:t})}const i=this.hardwareManager.get(t);if(i){s.hardware.push(i),i.frames?.push(s);const t=[...s.refPartsQuantities,...s.refAssembliesQuantities].filter((s=>s.key===i.key)).reduce(((s,t)=>s+t.quantity),0);i.refQuantities.push({key:s.key,quantity:t})}}}}assignDataToSubFrames(){for(const s of this.subFrameManager.getAll()){for(const t of s.refParts){const e=this.partManager.get(t);if(e){s.parts?.push(e);const a=this.weldmentManager.getFromRefPart(t);a&&(s.weldments=[...a])}const a=this.panelManager.get(t);if(a){s.panels.push(a);for(const t of a.programs)s.programs.push(t)}const i=this.hardwareManager.get(t);i&&s.hardware.push(i)}for(const t of s.refAssemblies){const e=this.assemblyManager.get(t);e&&s.assemblies.push(e);const a=this.hardwareManager.get(t);a&&s.hardware.push(a);const i=this.subFrameManager.get(t);i&&(i.subFrames||(i.subFrames=[]),i.subFrames.push(i))}}}assignDataToParts(){for(const s of this.partManager.getAll()){s.panel=s.refPanel?this.panelManager.get(s.refPanel):void 0;for(const t of s.refStocks??[]){const e=this.stockManager.get(t);e&&s.stocks.push(e)}for(const t of s.refPrograms){const e=this.programManager.get(t);e&&s.programs.push(e)}}}assignDataToSheets(){for(const s of this.sheets){for(const e of s.refProgramParts??[]){const t=this.programPartManager.get(e);t&&s.programParts.push(t)}for(const e of s.refTools??[]){const t=this.toolManager.get(e);t&&s.tools.push(t)}const t=this.boardMaterialManager.get(s.refBoard??"");s.board=t??void 0}}assignDataToPrograms(){for(const s of this.programs)for(const t of s.refTools??[]){const e=this.toolManager.get(t);e&&s.tools.push(e)}}assignDataToProgramParts(){for(const s of this.programParts){const t=this.panelManager.get(s.refPart);s.panel=t,t&&(t.programParts=t.programParts??[],t.programParts.push(s));const e=this.partManager.get(s.refPart);s.part=e??void 0,s.programs=e?.programs??[];const a=this.sheetManager.get(s.refProgram);s.sheet=a??void 0}}assignDataToProcessZones(){for(const s of this.processZones){const t=this.panelProcessManager.get(s.refPanelProcess);s.panelProcess=t}}assignDataToPatterns(){const s=new Map(this.panelManager.getAll().map((s=>[s.name,s])));for(const t of this.patterns){t.panels=t.refPanels.map((t=>s.get(t))).filter((s=>!!s));for(const s of this.boardMaterialManager.getAll())if(s.name===t.refBoard){t.board=s;break}}}assignDataToBoards(){for(const s of this.boardMaterialManager.getAll())s.material=this.materialManager.get(s.refMaterial)}assignDataToTools(){for(const s of this.toolManager.getAll())for(const t of s.refSpindles){const e=this.spindleManager.get(t);e?s.spindles.push(e):console.warn(`Spindle not found for refSpindle: ${t} in tool: ${s.key}`)}}}s("default",ie)}}}));
