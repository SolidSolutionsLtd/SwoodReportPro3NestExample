!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var s=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=s){var n,a,i,r,o=[],u=!0,l=!1;try{if(i=(s=s.call(t)).next,0===e){if(Object(s)!==s)return;u=!1}else for(;!(u=(n=i.call(s)).done)&&(o.push(n.value),o.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=s.return&&(r=s.return(),Object(r)!==r))return}finally{if(l)throw a}}return o}}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){var s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!s){if(Array.isArray(t)||(s=a(t))||e&&t&&"number"==typeof t.length){s&&(t=s);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,u=!1;return{s:function(){s=s.call(t)},n:function(){var t=s.next();return o=t.done,t},e:function(t){u=!0,r=t},f:function(){try{o||null==s.return||s.return()}finally{if(u)throw r}}}}function a(t,e){if(t){if("string"==typeof t)return i(t,e);var s={}.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,n=Array(e);s<e;s++)n[s]=t[s];return n}function r(e,s,n){return s=u(s),function(e,s){if(s&&("object"==t(s)||"function"==typeof s))return s;if(void 0!==s)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(e,o()?Reflect.construct(s,n||[],u(e).constructor):s.apply(e,n))}function o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(o=function(){return!!t})()}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function c(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function g(t,e,s){return e&&c(t.prototype,e),s&&c(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(e){var s=function(e,s){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,s||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===s?String:Number)(e)}(e,"string");return"symbol"==t(s)?s:s+""}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}System.register(["../main-legacy.Cjh8uCWE.js"],(function(a,i){"use strict";var o,u,h;return{setters:[function(t){o=t.o,u=t.V,h=t.S}],execute:function(){var i,c,d,v,m,y,p,b,k,P,w,M,D,I,T,A,C,S,B,E,O,N,R,V,L,W,j,_,Q,F,H,U,G=function(t){return t.replace(/\\/g,"/")},x=g((function t(e,s,n,a,i,r,o,u,l,h){f(this,t),this.name=e,this.type=s,this.docType=n,this.processingStatus=a,this.absoluteURI=i,this.relativeURI=r,this.hidden=o,this.storageType=u,this.exists=l,this.objType=h}));(i=x).fromDocumentRaw=function(t){var e,s="",n=o.getInstance(),a="file:///"+G(n.reportPath)+"/",r=t.absoluteURI;return r.startsWith(a)&&(s=r.slice(a.length)),new i(null!==(e=t.documentName)&&void 0!==e?e:"",t.type,t.docType,t.processingStatus,t.absoluteURI,s,t.hidden,t.storageType,t.exists,t.objType)},i.fromDocumentsRaw=function(t){var e,s=[],a=n(null!=t?t:[]);try{for(a.s();!(e=a.n()).done;){var r=e.value;s.push(i.fromDocumentRaw(r))}}catch(o){a.e(o)}finally{a.f()}return s};var q=function(){function t(e,s,n,a,i,r,o,u,l,h,c,g,d){f(this,t),this.key=e,this.messages=s,this.variables=n,this.serialNumbers=a,this.heritedVariables=i,this.typedObjectVariables=r,this.refPrograms=o,this.refParts=u,this.refPartsQuantities=l,this.refAssemblies=h,this.refAssembliesQuantities=c,this.documents=g,this.swcps=d,this.programs=[],this.parts=[],this.assemblies=[]}return g(t,null,[{key:"fromAssemblyRaw",value:function(e,s){var n=u.parseVariables(e.variables,s),a=u.parseVariablesArrayToObject(e.serialNumbers.variables),i=u.parseTypedVariablesArray(e.heritedVariables),r=u.parseVariableGroupToRecord(e.typedObjectVariables),o=h.parseVariablesArrayToObject(e.swcps),l=e.partsRefs.map((function(t){return{key:t.ID,quantity:t.count}})),c=e.assembliesRefs.map((function(t){return{key:t.ID,quantity:t.count}}));return new t(e.ID,e.messages,n,a,i,r,e.programs,e.parts,l,e.assemblies,c,x.fromDocumentsRaw(e.documents),o)}}])}(),Z=function(){return g((function t(){f(this,t),this.instances=new Map}),[{key:"addInstance",value:function(t,e){this.instances.set(t,e)}},{key:"get",value:function(t){return this.instances.get(t)}},{key:"getAll",value:function(){return Array.from(this.instances.values())}},{key:"getTotalInstances",value:function(){return this.instances.size}}])}(),Y=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t.assemblies);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstance(a.ID,q.fromAssemblyRaw(a,t.variableDefinitions.assemblies))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Z),z=g((function t(e,s){f(this,t),this.articles=e,this.cost=s}));(c=z).fromToolRaw=function(t){return new c(t.articles,t.cost)};var X=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){return this.addInstance("0",z.fromToolRaw(t.costing)),this}}])}(Z),K=function(){function t(e,s,n,a,i,r,o){f(this,t),this.key=e,this.panel=s,this.refMaterial=n,this.variables=a,this.serialNumbers=i,this.documents=r,this.messages=o}return g(t,null,[{key:"fromEdgebandRaw",value:function(e,s){var n=u.parseVariables(e.variables,s),a=u.parseVariablesArrayToObject(e.serialNumbers.variables);return new t(e.ID,e.panel,e.edgebandMaterial,n,a,x.fromDocumentsRaw(e.documents),e.messages)}}])}(),$=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t.edgebands);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstance(a.ID,K.fromEdgebandRaw(a,t.variableDefinitions.edgebands))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Z),J=function(){function t(e,s){f(this,t),this.key=e,this.variables=s}return g(t,null,[{key:"fromEdgebandMaterialRaw",value:function(e,s){var n=u.parseVariables(e.variables,s);return new t(e.ID,n)}}])}(),tt=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s,a=n(null!==(e=t.edgebandMaterials)&&void 0!==e?e:[]);try{for(a.s();!(s=a.n()).done;){var i=s.value;this.addInstance(i.ID,J.fromEdgebandMaterialRaw(i,t.variableDefinitions.edgebandMaterials))}}catch(r){a.e(r)}finally{a.f()}return this}}])}(Z),et=g((function t(e,s,n,a,i){f(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a,this.serialNumbers=i}));(d=et).fromMaterialRaw=function(t,e){var s=u.parseVariables(t.variables,e),n=u.parseVariablesArrayToObject(t.serialNumbers.variables);return new d(t.ID,t.messages,x.fromDocumentsRaw(t.documents),s,n)};var st=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s,a=n(null!==(e=t.materials)&&void 0!==e?e:[]);try{for(a.s();!(s=a.n()).done;){var i=s.value;this.addInstance(i.ID,et.fromMaterialRaw(i,t.variableDefinitions.materials))}}catch(r){a.e(r)}finally{a.f()}return this}}])}(Z),nt=function(){function t(e,s,n,a,i,r,o,u,l,h,c){f(this,t),this.key=e,this.name=s,this.refPart=n,this.refPrograms=a,this.refStocks=i,this.refProcessZones=r,this.refEdgebands=o,this.messages=u,this.documents=l,this.variables=h,this.serialNumbers=c,this.programs=[],this.stocks=[],this.edgebands=[]}return g(t,null,[{key:"fromPanelRaw",value:function(e,s){var n=u.parseVariables(e.variables,s),a=u.parseVariablesArrayToObject(e.serialNumbers.variables);return new t(e.ID,e.name,e.ID,e.programs,e.stocks,e.processZones,e.edgebands,e.messages,x.fromDocumentsRaw(e.documents),n,a)}}])}(),at=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s,a=n(null!==(e=t.panels)&&void 0!==e?e:[]);try{for(a.s();!(s=a.n()).done;){var i=s.value;this.addInstance(i.ID,nt.fromPanelRaw(i,t.variableDefinitions.panels))}}catch(r){a.e(r)}finally{a.f()}return this}}])}(Z),it=function(){function t(e,s,n,a){f(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a}return g(t,null,[{key:"fromPanelProcessRaw",value:function(e,s){var n=u.parseVariables(e.variables,s);return new t(e.ID,e.messages,x.fromDocumentsRaw(e.documents),n)}}])}(),rt=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){if(!t.panelProcesses)return this;var e,s=n(t.panelProcesses);try{for(s.s();!(e=s.n()).done;){var a,i=e.value;this.addInstance(i.ID,it.fromPanelProcessRaw(i,null!==(a=t.variableDefinitions.panelProcesses)&&void 0!==a?a:[]))}}catch(r){s.e(r)}finally{s.f()}return this}}])}(Z),ot=function(){function t(e,s,n,a,i,r){f(this,t),this.key=e,this.refPanel=s,this.refPanelProcess=n,this.messages=a,this.documents=i,this.variables=r}return g(t,null,[{key:"fromProcessZoneRaw",value:function(e,s){var n=u.parseVariables(e.variables,s);return new t(e.ID,e.panel,e.panelProcess,e.messages,x.fromDocumentsRaw(e.documents),n)}}])}(),ut=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){if(!t.processZones)return this;var e,s=n(t.processZones);try{for(s.s();!(e=s.n()).done;){var a,i=e.value;this.addInstance(i.ID,ot.fromProcessZoneRaw(i,null!==(a=t.variableDefinitions.processZones)&&void 0!==a?a:[]))}}catch(r){s.e(r)}finally{s.f()}return this}}])}(Z),lt=function(){function t(e,s,n,a,i,r,o,u,l,h,c,g){f(this,t),this.key=e,this.refPrograms=s,this.refStocks=n,this.refPanel=a,this.bodyCount=i,this.messages=r,this.variables=o,this.serialNumbers=u,this.heritedVariables=l,this.typedObjectVariables=h,this.documents=c,this.swcps=g,this.programs=[],this.stocks=[]}return g(t,null,[{key:"fromPartRaw",value:function(e,s){var n=u.parseVariables(e.variables,s),a=u.parseVariablesArrayToObject(e.serialNumbers.variables),i=u.parseTypedVariablesArray(e.heritedVariables),r=u.parseVariableGroupToRecord(e.typedObjectVariables),o=h.parseVariablesArrayToObject(e.swcps);return new t(e.ID,e.programs,e.stocks,e.panel,e.bodyCount,e.messages,n,a,i,r,x.fromDocumentsRaw(e.documents),o)}}])}(),ht=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t.parts);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstance(a.ID,lt.fromPartRaw(a,t.variableDefinitions.parts))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Z),ct=function(){function t(e,s,n,a,i,r,o,u){f(this,t),this.key=e,this.refTools=s,this.refProgramParts=n,this.refBoard=a,this.messages=i,this.documents=r,this.variables=o,this.serialNumbers=u,this.tools=[]}return g(t,null,[{key:"fromProgramRaw",value:function(e,s){var n=u.parseVariables(e.variables,s),a=u.parseVariablesArrayToObject(e.serialNumbers.variables);return new t(e.ID,e.tools,e.programParts,e.nestingBoard,e.messages,x.fromDocumentsRaw(e.documents),n,a)}}])}(),gt=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t.programs);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstance(a.ID,ct.fromProgramRaw(a,t.variableDefinitions.programs))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Z),dt=function(){function t(e,s,n,a,i,r,o){f(this,t),this.key=e,this.part=s,this.program=n,this.documents=a,this.messages=i,this.variables=r,this.serialNumbers=o}return g(t,null,[{key:"fromProgramPartRaw",value:function(e,s){var n=u.parseVariables(e.variables,s),a=u.parseVariablesArrayToObject(e.serialNumbers.variables);return new t(e.ID,e.part,e.program,x.fromDocumentsRaw(e.documents),e.messages,n,a)}}])}(),ft=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t.programParts);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstance(a.ID,dt.fromProgramPartRaw(a,t.variableDefinitions.programParts))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Z),vt=function(){function t(e,s,n,a,i,r,o,u,l,h,c,g,d){f(this,t),this.key=e,this.swoodVersion=s,this.schemaVersion=n,this.name=a,this.projectPath=i,this.reportPath=r,this.timestamp=o,this.createdBy=u,this.documents=l,this.messages=h,this.variables=c,this.serialNumbers=g,this.swcps=d}return g(t,null,[{key:"fromProjectRaw",value:function(e,s){var n=u.parseVariables(e.variables,s),a=u.parseVariablesArrayToObject(e.serialNumbers.variables),i=h.parseVariablesArrayToObject(e.swcps);return new t(e.reportGUID,e.reportVersion,e.schemaVersion,e.projectName,e.projectPath,e.reportPath,e.createdDate,e.createdBy,x.fromDocumentsRaw(e.documents),e.messages,n,a,i)}}])}(),mt=function(){function t(e,s,n,a){f(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a}return g(t,null,[{key:"fromSpindleRaw",value:function(e,s){var n=u.parseVariables(e.variables,s);return new t(e.ID,e.messages,x.fromDocumentsRaw(e.documents),n)}}])}(),yt=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){if(!t.spindles)return this;var e,s=n(t.spindles);try{for(s.s();!(e=s.n()).done;){var a,i=e.value;this.addInstance(i.ID,mt.fromSpindleRaw(i,null!==(a=t.variableDefinitions.spindles)&&void 0!==a?a:[]))}}catch(r){s.e(r)}finally{s.f()}return this}}])}(Z),pt=g((function t(e,s,n,a,i,r){f(this,t),this.key=e,this.refPart=s,this.refMaterial=n,this.messages=a,this.documents=i,this.variables=r}));(v=pt).fromStockRaw=function(t,e){var s=u.parseVariables(t.variables,e);return new v(t.ID,t.part,t.material,t.messages,x.fromDocumentsRaw(t.documents),s)};var bt=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t.stocks);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstance(a.ID,pt.fromStockRaw(a,t.variableDefinitions.stocks))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Z),kt=function(){function t(e,s,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];f(this,t),this.key=e,this.variables=s,this.messages=n,this.documents=a,this.refSpindles=i}return g(t,null,[{key:"fromToolRaw",value:function(e,s){var n,a=u.parseVariables(e.variables,s);return new t(e.ID,a,e.messages,x.fromDocumentsRaw(e.documents),null!==(n=e.spindles)&&void 0!==n?n:[])}}])}(),Pt=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s,a=n(null!==(e=t.tools)&&void 0!==e?e:[]);try{for(a.s();!(s=a.n()).done;){var i=s.value;this.addInstance(i.ID,kt.fromToolRaw(i,t.variableDefinitions.tools))}}catch(r){a.e(r)}finally{a.f()}return this}}])}(Z),wt=function(){return g((function t(){f(this,t),this.instances=new Map}),[{key:"addInstance",value:function(t,e){var s=this.instances.get(t);s?s.push(e):this.instances.set(t,[e])}},{key:"addInstances",value:function(t,e,s){var a,i=n(t.typedObjects);try{for(i.s();!(a=i.n()).done;){var r=a.value,o=e.get(r);if(o){var u,l=n(o.variables.TOTYPES.split(";"));try{for(l.s();!(u=l.n()).done;){var h=u.value;this.addInstance(h,o)}}catch(v){l.e(v)}finally{l.f()}}var c=s.get(r);if(c){var g,d=n(c.variables.TOTYPES.split(";"));try{for(d.s();!(g=d.n()).done;){var f=g.value;this.addInstance(f,c)}}catch(v){d.e(v)}finally{d.f()}}}}catch(v){i.e(v)}finally{i.f()}return this}},{key:"getInstancesById",value:function(t){return this.instances.get(t)||null}},{key:"getAll",value:function(){return this.instances}}])}(),Mt=function(){function t(e,s,n,a,i){f(this,t),this.key=e,this.name=s,this.material=n,this.thickness=a,this.stock=i}return g(t,null,[{key:"fromPatternRaw",value:function(e,s,n){return new t(e,e,s.material,s.thickness,n)}}])}(),Dt=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=1,a=n(null!=t?t:[]);try{for(a.s();!(e=a.n()).done;){var i,r,o=e.value,u=n(null!==(i=o.stocks)&&void 0!==i?i:[]);try{for(u.s();!(r=u.n()).done;){var l=r.value,h="Pattern ".concat(s.toString());this.addInstance(h,Mt.fromPatternRaw(h,o,l)),s++}}catch(c){u.e(c)}finally{u.f()}}}catch(c){a.e(c)}finally{a.f()}return this}}])}(Z),It=function(){function t(e,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};f(this,t),this.type=e,this.key=s,this.variables=n,this.articleVariables=a}return g(t,null,[{key:"fromArticlesRaw",value:function(e){return new t("article",e.name,{},{name:e.name,count:e.count,quantity:e.quantity,quantityUnit:e.quantityUnit,cost:e.cost,costUnit:e.unitCost})}},{key:"fromBoardMaterialRaw",value:function(e,s){var n=u.parseVariables(e.variables,s);return new t("material",e.ID,n)}}])}(),Tt=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s,a,i=n(null!==(e=t.costing.articles)&&void 0!==e?e:[]);try{for(i.s();!(a=i.n()).done;){var r=a.value;"CUTTINGPATTERN_BOARD"===r.type&&this.addInstance(r.name,It.fromArticlesRaw(r))}}catch(h){i.e(h)}finally{i.f()}var o,u=n(null!==(s=t.boards)&&void 0!==s?s:[]);try{for(u.s();!(o=u.n()).done;){var l=o.value;this.addInstance(l.ID,It.fromBoardMaterialRaw(l,t.variableDefinitions.boards))}}catch(h){u.e(h)}finally{u.f()}return this}}])}(Z);function At(t,e){return e.split(".").reduce((function(t,e){return null==t?void 0:t[e]}),t)}var Ct=function(t,e){t.sort((function(t,s){var a,i=n(e);try{for(i.s();!(a=i.n()).done;){var r=a.value,o=r.field,u=r.order,l=void 0===u?"asc":u,h=At(t,o),c=At(s,o);if(null==h&&null!=c)return"asc"===l?1:-1;if(null!=h&&null==c)return"asc"===l?-1:1;if(null!=h||null!=c){if(h<c)return"asc"===l?-1:1;if(h>c)return"asc"===l?1:-1}}}catch(g){i.e(g)}finally{i.f()}return 0}));var s,a=n(t);try{for(a.s();!(s=a.n()).done;){var i=s.value;Array.isArray(i.children)&&Ct(i.children,e)}}catch(r){a.e(r)}finally{a.f()}},St=function(t,e){return function(s,n){for(var a in t){var i=s[t[a].Property],r=n[t[a].Property];if(Bt(i)&&(i=new Date(i)),Bt(r)&&(r=new Date(r)),0!=s.combineId&&"Name"==t[a].Property&&(i=e.CombinedPanelName+" "+s.combineId+" - "+s.Name),0!=n.combineId&&"Name"==t[a].Property&&(r=e.CombinedPanelName+" "+n.combineId+" - "+n.Name),s.Multibody&&"Name"==t[a].Property&&(0==s.Quantity?i=s.ParentFrame+" - "+s.Name:0!=s.Quantity&&(i=s.Quantity>1?s.ParentFrame+" - "+s.WeldmentFolder+" - "+s.Name:s.ParentFrame+" - "+s.WeldmentFolder)),n.Multibody&&"Name"==t[a].Property&&(0==n.Quantity?r=n.ParentFrame+" - "+n.Name:0!=n.Quantity&&(r=n.Quantity>1?n.ParentFrame+" - "+n.WeldmentFolder+" - "+n.Name:n.ParentFrame+" - "+n.WeldmentFolder)),s.hasOwnProperty("CombinedList")&&s.CombinedList.sort(St(t,e)),n.hasOwnProperty("CombinedList")&&n.CombinedList.sort(St(t,e)),"string"==typeof i){var o=i.localeCompare(r,"en",{numeric:!0});if(0!=o)return o*t[a].Type}else{if(i>r)return 1*t[a].Type;if(i<r)return-1*t[a].Type}}return 1}};function Bt(t){if("string"!=typeof t)return!1;var e=t.match(/^(\d{2})\/(\d{2})\/(\d{4})$/);if(e){var s=parseInt(e[1],10),n=parseInt(e[2],10)-1,a=parseInt(e[3],10),i=new Date(a,n,s);return i.getFullYear()===a&&i.getMonth()===n&&i.getDate()===s}var r=new Date(t);return!isNaN(r.getTime())&&t===r.toISOString().split("T")[0]}var Et=function(){function t(e,s,n,a,i,r,o,u,l,h,c,g,d,v,m,y,p,b,k,P,w,M,D,I,T,A,C,S,B,E,O,N,R,V,L){f(this,t),this.database=e,this.projectData=s,this.panelsData=n,this.stocksData=a,this.partsData=i,this.assembliesData=r,this.edgebandsData=o,this.edgebandMaterialsData=u,this.materialsData=l,this.boardMaterialsData=h,this.programsData=c,this.programPartsData=g,this.toolsData=d,this.spindlesData=v,this.costsData=m,this.typedObjectsData=y,this.panelProcessesData=p,this.processZonesData=b,this.patternsData=k,this.panelDataManager=P,this.stockDataManager=w,this.partDataManager=M,this.assemblyDataManager=D,this.edgebandDataManager=I,this.edgebandMaterialDataManager=T,this.materialDataManager=A,this.boardMaterialDataManager=C,this.programDataManager=S,this.programPartDataManager=B,this.toolDataManager=E,this.spindleDataManager=O,this.costDataManager=N,this.panelProcessDataManager=R,this.processZoneDataManager=V,this.patternDataManager=L}return g(t,[{key:"relateData",value:function(){return this.assignDataToEdgebands(),this.assignDataToStocks(),this.assignDataToPanels(),this.assignDataToAssemblies(),this.assignSubAssemblies(),this.assignDataToParts(),this.sortData(),this}},{key:"sortData",value:function(){Ct(this.panelsData,[{field:"variables.PAN_T",order:"desc"},{field:"material.name",order:"asc"},{field:"variables.PAN_L",order:"desc"},{field:"variables.PAN_W",order:"desc"},{field:"name",order:"asc"},{field:"quantity",order:"asc"}]);Ct(this.stocksData,[{field:"variables.ST_T",order:"desc"},{field:"refMaterial",order:"asc"},{field:"variables.ST_L",order:"desc"},{field:"variables.ST_W",order:"desc"},{field:"name",order:"asc"},{field:"quantity",order:"asc"}])}},{key:"assignDataToEdgebands",value:function(){var t,e=n(this.edgebandDataManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.edgebandMaterialDataManager.get(s.refMaterial)}}catch(a){e.e(a)}finally{e.f()}}},{key:"assignDataToStocks",value:function(){var t,e=n(this.stockDataManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value,a=this.materialDataManager.get(s.refMaterial);s.material=a}}catch(i){e.e(i)}finally{e.f()}}},{key:"assignDataToPanels",value:function(){var t,e=n(this.panelDataManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,a=t.value,i=n(a.refStocks);try{for(i.s();!(s=i.n()).done;){var r=s.value,o=this.stockDataManager.get(r);o&&(a.stocks.push(o),"CORE"===o.variables.ST_N&&(a.material=o.material))}}catch(y){i.e(y)}finally{i.f()}var u,l=n(a.refEdgebands);try{for(l.s();!(u=l.n()).done;){var h=u.value,c=this.edgebandDataManager.get(h);c&&a.edgebands.push(c)}}catch(y){l.e(y)}finally{l.f()}var g,d=n(a.refPrograms);try{for(d.s();!(g=d.n()).done;){var f=g.value,v=this.programDataManager.get(f);v&&a.programs.push(v)}}catch(y){d.e(y)}finally{d.f()}var m=this.partDataManager.get(a.key);m&&(a.part=m)}}catch(y){e.e(y)}finally{e.f()}}},{key:"assignDataToAssemblies",value:function(){var t,e=n(this.assemblyDataManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,a=t.value,i=n(a.refParts);try{for(i.s();!(s=i.n()).done;){var r,o=s.value,u=this.partDataManager.get(o);u&&(null===(r=a.parts)||void 0===r||r.push(u))}}catch(f){i.e(f)}finally{i.f()}var l,h=n(a.refPrograms);try{for(h.s();!(l=h.n()).done;){var c,g=l.value,d=this.programDataManager.get(g);d&&(null===(c=a.programs)||void 0===c||c.push(d))}}catch(f){h.e(f)}finally{h.f()}}}catch(f){e.e(f)}finally{e.f()}}},{key:"assignSubAssemblies",value:function(){var t,e=n(this.assemblyDataManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,a=t.value,i=n(a.refAssemblies);try{for(i.s();!(s=i.n()).done;){var r,o=s.value,u=this.assemblyDataManager.get(o);u&&(null===(r=a.assemblies)||void 0===r||r.push(u))}}catch(l){i.e(l)}finally{i.f()}}}catch(l){e.e(l)}finally{e.f()}}},{key:"assignDataToParts",value:function(){var t,e=n(this.partDataManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,a=t.value;a.panel=a.refPanel?this.panelDataManager.get(a.refPanel):void 0;var i,r=n(null!==(s=a.refStocks)&&void 0!==s?s:[]);try{for(r.s();!(i=r.n()).done;){var o=i.value,u=this.stockDataManager.get(o);u&&a.stocks.push(u)}}catch(d){r.e(d)}finally{r.f()}var l,h=n(a.refPrograms);try{for(h.s();!(l=h.n()).done;){var c=l.value,g=this.programDataManager.get(c);g&&(a.programs.push(g),g.part=a)}}catch(d){h.e(d)}finally{h.f()}}}catch(d){e.e(d)}finally{e.f()}}}],[{key:"createFromRawData",value:function(e){var s=vt.fromProjectRaw(e,e.variableDefinitions.report),n=(new at).addInstances(e),a=(new bt).addInstances(e),i=(new ht).addInstances(e),r=(new Y).addInstances(e),o=(new $).addInstances(e),u=(new tt).addInstances(e),l=(new st).addInstances(e),h=(new Tt).addInstances(e),c=(new gt).addInstances(e),g=(new ft).addInstances(e),d=(new Pt).addInstances(e),f=(new yt).addInstances(e),v=(new X).addInstances(e),m=(new wt).addInstances(e,i,r),y=(new rt).addInstances(e),p=(new ut).addInstances(e),b=(new Dt).addInstances(e.cuttingPattern);return new t(e,s,n.getAll(),a.getAll(),i.getAll(),r.getAll(),o.getAll(),u.getAll(),l.getAll(),h.getAll(),c.getAll(),g.getAll(),d.getAll(),f.getAll(),v.getAll(),m.getAll(),y.getAll(),p.getAll(),b.getAll(),n,a,i,r,o,u,l,h,c,g,d,f,v,y,p,b).relateData()}}])}(),Ot=function(){return g((function t(){f(this,t),this.instances=new Map}),[{key:"add",value:function(t,e){this.instances.set(t,e)}},{key:"get",value:function(t){var e=this.instances.get(t);return e||console.error("".concat(this.constructor.name," - unable to find instance: ").concat(t)),e}},{key:"getAll",value:function(){return Array.from(this.instances.values())}},{key:"getTotalInstances",value:function(){return this.instances.size}}])}(),Nt=function(){return g((function t(e,s,n,a,i,r,o,u,l,h,c,g,d,v,m,y,p,b,k,P,w){f(this,t),this.key=e,this.messages=s,this.variables=n,this.heritedVariables=a,this.typedObjectVariables=i,this.refPrograms=r,this.refParts=o,this.refPartsQuantities=u,this.refAssemblies=l,this.refAssembliesQuantities=h,this.documents=c,this.swcps=g,this.name=d,this.description=v,this.configuration=m,this.quantity=y,this.height=p,this.width=b,this.depth=k,this.images=P,this.edrawings=w,this.resource="assemblies",this.programs=[],this.parts=[],this.assemblies=[]}),null,[{key:"fromAssemblyBusiness",value:function(t){return t.createViewModel()}}])}(),Rt=g((function t(e,s,n,a,i,r,o,u){f(this,t),this.type=e,this.typeDescription=s,this.description=n,this.message=a,this.messageType=i,this.item=r,this.category=o,this.url=u,this.resource="messages"}));(m=Rt).fromMessageRaw=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return new m(t.type,t.typeDesc,t.desc,t.message,t.messageType,e,s,n)},m.fromMessagesRaw=function(t){var e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=[],o=n(null!=t?t:[]);try{for(o.s();!(e=o.n()).done;){var u=e.value;r.push(m.fromMessageRaw(u,s,a,i))}}catch(l){o.e(l)}finally{o.f()}return r};var Vt=function(){return g((function t(e){f(this,t),this.documents=e}),[{key:"getImages",value:function(){var t,e,s,a,i={},r=n(null!==(t=this.documents)&&void 0!==t?t:[]);try{for(r.s();!(e=r.n()).done;){var u=e.value;if("IMAGE"===u.docType){var l=u.absoluteURI,h=o.getInstance(),c="file:///"+G(h.reportPath),g=(a=c,(s=l).startsWith(a)?s.slice(a.length):s);null!==u.name&&(i[u.name]=g)}}}catch(d){r.e(d)}finally{r.f()}return i}}])}(),Lt=function(){return g((function t(e,s,n,a,i,r,u,l,h,c,g,d){var v=this;f(this,t),this.key=e,this.messages=s,this.variables=n,this.heritedVariables=a,this.typedObjectVariables=i,this.refPrograms=r,this.refParts=u,this.refPartsQuantities=l,this.refAssemblies=h,this.refAssembliesQuantities=c,this.documents=g,this.swcps=d,this.programs=[],this.parts=[],this.assemblies=[],this.getName=function(){return v.variables.NAME},this.getDescription=function(){return v.variables.DESC},this.getConfiguration=function(){return v.variables.CONF},this.getQuantity=function(){var t;return(null!==(t=v.variables.NB)&&void 0!==t?t:0)*o.getInstance().projectQuantity},this.getHeight=function(){var t;return null!==(t=v.variables.Height)&&void 0!==t?t:0},this.getWidth=function(){var t;return null!==(t=v.variables.Width)&&void 0!==t?t:0},this.getDepth=function(){var t;return null!==(t=v.variables.Depth)&&void 0!==t?t:0},this.getImages=function(){return new Vt(v.documents).getImages()}}),[{key:"createViewModel",value:function(){return new Nt(this.key,Rt.fromMessagesRaw(this.messages,this.getName(),"Assembly"),this.variables,this.heritedVariables,this.typedObjectVariables,this.refPrograms,this.refParts,this.refPartsQuantities,this.refAssemblies,this.refAssembliesQuantities,this.documents,this.swcps,this.getName(),this.getDescription(),this.getConfiguration(),this.getQuantity(),this.getHeight(),this.getWidth(),this.getDepth(),this.getImages(),this.getEdrawings())}},{key:"getEdrawings",value:function(){return"edrawings/".concat(this.getName(),".html")}}])}();(y=Lt).fromAssemblyData=function(t){return new y(t.key,t.messages,t.variables,t.heritedVariables,t.typedObjectVariables,t.refPrograms,t.refParts,t.refPartsQuantities,t.refAssemblies,t.refAssembliesQuantities,t.documents,t.swcps)};var Wt=function(t){function e(){var t;return f(this,e),(t=r(this,e,arguments)).addPrograms=function(e){var s,a=n(t.getAll());try{for(a.s();!(s=a.n()).done;){var i,r=s.value,o=n(r.refPrograms);try{for(o.s();!(i=o.n()).done;){var u=i.value,l=e.get(u);l&&r.programs.push(l)}}catch(h){o.e(h)}finally{o.f()}}}catch(h){a.e(h)}finally{a.f()}},t.addParts=function(e){var s,a=n(t.getAll());try{for(a.s();!(s=a.n()).done;){var i,r=s.value,o=n(r.refParts);try{for(o.s();!(i=o.n()).done;){var u=i.value,l=e.get(u);l&&r.parts.push(l)}}catch(h){o.e(h)}finally{o.f()}}}catch(h){a.e(h)}finally{a.f()}},t.addAssemblies=function(e){var s,a=n(t.getAll());try{for(a.s();!(s=a.n()).done;){var i,r=s.value,o=n(r.refAssemblies);try{for(o.s();!(i=o.n()).done;){var u=i.value,l=e.get(u);l&&r.assemblies.push(l)}}catch(h){o.e(h)}finally{o.f()}}}catch(h){a.e(h)}finally{a.f()}},t}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.add(a.key,Lt.fromAssemblyData(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ot),jt=function(){return g((function t(e,s,n,a,i,r,o,u,l,h,c,g,d,v,m,y,p,b,k,P,w,M,D){f(this,t),this.key=e,this.swoodVersion=s,this.schemaVersion=n,this.name=a,this.projectPath=i,this.reportPath=r,this.timestamp=o,this.date=u,this.time=l,this.createdBy=h,this.documents=c,this.swcps=g,this.messages=d,this.variables=v,this.isDesign=m,this.isCam=y,this.isNesting=p,this.isUsingOffcuts=b,this.images=k,this.pdfs=P,this.configuration=w,this.description=M,this.reportVersion=D,this.resource="project"}),null,[{key:"fromProjectBusiness",value:function(t){return t.createViewModel()}}])}(),_t=function(){return g((function t(e){f(this,t),this.documents=e}),[{key:"getDocuments",value:function(){var t,e,s={},a=n(null!==(t=this.documents)&&void 0!==t?t:[]);try{for(a.s();!(e=a.n()).done;){var i=e.value;null!==i.name&&(s[i.name]=i)}}catch(r){a.e(r)}finally{a.f()}return s}}])}(),Qt=function(){return g((function t(e){f(this,t),this.documents=e}),[{key:"getPDFs",value:function(){var t,e,s={},a=n(null!==(t=this.documents)&&void 0!==t?t:[]);try{for(a.s();!(e=a.n()).done;){var i=e.value;"DRAWING2PDF"===i.docType&&i.exists&&null!==i.name&&(s[i.name]=i.relativeURI)}}catch(r){a.e(r)}finally{a.f()}return s}}])}(),Ft=function(){return g((function t(e,s,n,a,i,r,o,u,l,h,c,g){var d=this;f(this,t),this.key=e,this.swoodVersion=s,this.schemaVersion=n,this.name=a,this.projectPath=i,this.reportPath=r,this.timestamp=o,this.createdBy=u,this.documents=l,this.messages=h,this.variables=c,this.swcps=g,this.getTime=function(){var t=new Date(d.timestamp),e=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),n=String(t.getSeconds()).padStart(2,"0");return"".concat(e,":").concat(s,":").concat(n)},this.getDate=function(){var t=new Date(d.timestamp),e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return"".concat(n,"/").concat(s,"/").concat(e)},this.getIsDesign=function(){var t;return null!==(t=d.variables.REPORT_ISUSINGDESIGN)&&void 0!==t&&t},this.getIsCam=function(){var t;return null!==(t=d.variables.REPORT_ISUSINGCAM)&&void 0!==t&&t},this.getIsNesting=function(){var t;return null!==(t=d.variables.REPORT_ISNESTINGPROJECT)&&void 0!==t&&t},this.getIsUsingOffcuts=function(){var t;return null!==(t=d.variables.MODULE_PROGRAMOFFCUTS_ISACTIVE)&&void 0!==t&&t},this.getImages=function(){return new Vt(d.documents).getImages()},this.getPDFs=function(){return new Qt(d.documents).getPDFs()},this.getDocuments=function(){return new _t(d.documents).getDocuments()},this.getConfiguration=function(){var t,e;return null!==(t=null===(e=d.component)||void 0===e?void 0:e.getConfiguration())&&void 0!==t?t:""},this.getDescription=function(){var t,e;return null!==(t=null===(e=d.component)||void 0===e?void 0:e.getDescription())&&void 0!==t?t:""},this.getReportVersion=function(){var t;return null!==(t=d.variables.ReportVersion)&&void 0!==t?t:"0.0.0"}}),[{key:"createViewModel",value:function(){return new jt(this.key,this.swoodVersion,this.schemaVersion,this.name,this.projectPath,this.reportPath,this.timestamp,this.getDate(),this.getTime(),this.createdBy,this.getDocuments(),this.swcps,Rt.fromMessagesRaw(this.messages,this.name,"Project"),this.variables,this.getIsDesign(),this.getIsCam(),this.getIsNesting(),this.getIsUsingOffcuts(),this.getImages(),this.getPDFs(),this.getConfiguration(),this.getDescription(),this.getReportVersion())}}])}();(p=Ft).fromProjectData=function(t){return new p(t.key,t.swoodVersion,t.schemaVersion,t.name,t.projectPath,t.reportPath,t.timestamp,t.createdBy,t.documents,t.messages,t.variables,t.swcps)};var Ht=g((function t(e,s){f(this,t),this.articles=e,this.cost=s}));(b=Ht).fromCostData=function(t){return new b(t.articles,t.cost)};var Ut=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){return this.add("0",Ht.fromCostData(t[0])),this}}])}(Ot),Gt=function(){return g((function t(e,s,n,a,i,r,o,u,l,h,c,g,d,v,m,y,p){f(this,t),this.key=e,this.refPanel=s,this.refMaterial=n,this.variables=a,this.documents=i,this.messages=r,this.name=o,this.quantity=u,this.length=l,this.lengthStock=h,this.width=c,this.thickness=g,this.overLength=d,this.position=v,this.isCurved=m,this.isPaint=y,this.cost=p,this.resource="edgebands"}),null,[{key:"fromEdgebandBusiness",value:function(t){return t.createViewModel()}}])}();(k=Gt).createCombinedEdgeband=function(t,e,s){return new k(t.key,t.refPanel,t.refMaterial,t.variables,t.documents,t.messages,e,s,t.length,t.lengthStock,t.width,t.thickness,t.overLength,t.position,t.isCurved,t.isPaint,t.cost)};var xt=function(){return g((function t(e,s,n,a,i,r){var o=this;f(this,t),this.key=e,this.refPanel=s,this.refMaterial=n,this.variables=a,this.documents=i,this.messages=r,this.getDocuments=function(){return new _t(o.documents).getDocuments()},this.getName=function(){var t;return null!==(t=o.variables.EB_N)&&void 0!==t?t:""},this.getQuantity=function(){var t,e;return null!==(t=null===(e=o.panel)||void 0===e?void 0:e.getQuantity())&&void 0!==t?t:0},this.getLength=function(){var t;return null!==(t=o.variables.EB_L)&&void 0!==t?t:0},this.getLengthStock=function(){var t;return null!==(t=o.variables.EB_LSTOCK)&&void 0!==t?t:0},this.getWidth=function(){var t,e;return null!==(t=null===(e=o.panel)||void 0===e?void 0:e.getThickness())&&void 0!==t?t:0},this.getThickness=function(){var t,e;return null!==(t=null===(e=o.material)||void 0===e?void 0:e.getThickness())&&void 0!==t?t:0},this.getOverLength=function(){var t;return null!==(t=o.variables.EB_OVERLENGTH)&&void 0!==t?t:0},this.getPosition=function(){return o.variables.EB_STOCKPOSITION},this.getIsCurved=function(){var t;return null!==(t=o.variables.EB_ISCURVED)&&void 0!==t&&t},this.getIsPaint=function(){var t,e;return null!==(t=null===(e=o.material)||void 0===e?void 0:e.getIsPaint())&&void 0!==t&&t},this.getMaterialQuantity=function(){return(o.getLength()+o.getOverLength())/1e3*o.getQuantity()},this.getCost=function(){var t,e;return o.getMaterialQuantity()*(null!==(t=null===(e=o.material)||void 0===e?void 0:e.getCostUnit())&&void 0!==t?t:0)},this.updateMaterialQuantity=function(){o.material?o.material.quantity+=(o.getLength()+o.getOverLength())/1e3*o.getQuantity():console.warn("unable to update quantity â€“ material or panel missing for ".concat(o.getName()))}}),[{key:"createViewModel",value:function(){return this.updateMaterialQuantity(),new Gt(this.key,this.refPanel,this.refMaterial,this.variables,this.getDocuments(),Rt.fromMessagesRaw(this.messages,this.getName(),"Edgeband"),this.getName(),this.getQuantity(),this.getLength(),this.getLengthStock(),this.getWidth(),this.getThickness(),this.getOverLength(),this.getPosition(),this.getIsCurved(),this.getIsPaint(),this.getCost())}}])}();(P=xt).fromEdgebandData=function(t){return new P(t.key,t.panel,t.refMaterial,t.variables,t.documents,t.messages)};var qt=function(t){function e(){var t;return f(this,e),(t=r(this,e,arguments)).addMaterials=function(e){var s,a=n(t.getAll());try{for(a.s();!(s=a.n()).done;){var i=s.value,r=e.get(i.refMaterial);r&&(i.material=r)}}catch(o){a.e(o)}finally{a.f()}},t}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.add(a.key,xt.fromEdgebandData(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ot),Zt=function(){return g((function t(e,s,n,a,i,r,o,u,l,h,c,g,d,v){f(this,t),this.key=e,this.variables=s,this.name=n,this.description=a,this.reference=i,this.thickness=r,this.extension=o,this.color=u,this.isPaint=l,this.cost=h,this.costUnit=c,this.costType=g,this.quantity=d,this.unitOfMeasure=v}),null,[{key:"fromEdgebandMaterialBusiness",value:function(t){return t.createViewModel()}}])}(),Yt=g((function t(e,s,n){var a=this;f(this,t),this.key=e,this.variables=s,this.quantity=n,this.createViewModel=function(){return new Zt(a.key,a.variables,a.getName(),a.getDescription(),a.getReference(),a.getThickness(),a.getExtension(),a.getColor(),a.getIsPaint(),a.getCost(),a.getCostUnit(),2,a.quantity,"m")},this.getName=function(){var t;return null!==(t=a.variables.EBMAT_C)&&void 0!==t?t:""},this.getDescription=function(){var t;return null!==(t=a.variables.EBMAT_D)&&void 0!==t?t:""},this.getReference=function(){var t;return null!==(t=a.variables.EBMAT_REF)&&void 0!==t?t:""},this.getCostUnit=function(){return a.variables.EBMAT_UCOST},this.getThickness=function(){var t;return null!==(t=a.variables.EBMAT_T)&&void 0!==t?t:0},this.getIsPaint=function(){var t;return null!==(t=a.variables.PAINT)&&void 0!==t&&t},this.getExtension=function(){var t;return null!==(t=a.variables.EXTENSION)&&void 0!==t?t:0},this.getCost=function(){return a.quantity*a.getCostUnit()},this.getColor=function(){return void 0===a.variables.EBMAT_CO||"0"===a.variables.EBMAT_CO?"#000000ff":a.argbToRgba(a.variables.EBMAT_CO)},this.argbToRgba=function(t){if(8!==(t=t.replace(/^#/,"")).length)return console.warn("invalid ARGB hex format: ".concat(t)),"#000000ff";var e=parseInt(t.slice(0,2),16)/255,s=parseInt(t.slice(2,4),16),n=parseInt(t.slice(4,6),16),a=parseInt(t.slice(6,8),16);return"rgba(".concat(s,", ").concat(n,", ").concat(a,", ").concat(e.toFixed(2),")")}}));(w=Yt).fromEdgebandMaterialData=function(t){return new w(t.key,t.variables,0)};var zt=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.add(a.key,Yt.fromEdgebandMaterialData(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ot),Xt=function(){return g((function t(){f(this,t),this.instances=new Map}),[{key:"addInstance",value:function(t,e){this.instances.set(t,e)}},{key:"get",value:function(t){return this.instances.get(t)}},{key:"getAll",value:function(){return Array.from(this.instances.values())}},{key:"getTotalInstances",value:function(){return this.instances.size}},{key:"groupBy",value:function(t){var e,s=new Map,a=n(this.getAll());try{for(a.s();!(e=a.n()).done;){var i=e.value,r=this.getNestedValue(t.toString(),i);s.has(r)||s.set(r,[]),s.get(r).push(i)}}catch(o){a.e(o)}finally{a.f()}return s}},{key:"mergeDescription",value:function(t,e){return t?e?t.includes(e)?t:"".concat(t," | ").concat(e):t:e}},{key:"getNestedValue",value:function(t,e){return t.split(".").reduce((function(t,e){return null==t?void 0:t[e]}),e)}}])}(),Kt=g((function t(e,s,n,a,i,r,o,u,l,h,c,g,d,v,m,y,p,b,k,P,w,M,D,I,T){f(this,t),this.key=e,this.messages=s,this.refParts=n,this.refPartsQuantities=a,this.refAssemblies=i,this.refAssembliesQuantities=r,this.documents=o,this.swcps=u,this.variables=l,this.heritedVariables=h,this.typedObjectVariables=c,this.id=g,this.name=d,this.description=v,this.configuration=m,this.quantity=y,this.height=p,this.width=b,this.depth=k,this.url=P,this.images=w,this.pdfs=M,this.cost=D,this.costPanels=I,this.costHardware=T,this.resource="frames",this.parts=[],this.assemblies=[],this.panels=[],this.programs=[],this.hardware=[],this.weldments=[]}));Kt.fromFrameBusiness=function(t){return t.createViewModel()};var $t=function(){return g((function t(e,s,a,i,r,u,l,h,c,g,d){var v=this;f(this,t),this.key=e,this.messages=s,this.heritedVariables=a,this.typedObjectVariables=i,this.refParts=r,this.refPartsQuantities=u,this.refAssemblies=l,this.refAssembliesQuantities=h,this.documents=c,this.swcps=g,this.variables=d,this.parts=[],this.assemblies=[],this.panels=[],this.programs=[],this.hardware=[],this.weldments=[],this.getID=function(){return v.variables.ID},this.getName=function(){return v.variables.NAME},this.getDescription=function(){return v.variables.DESC},this.getConfiguration=function(){return v.variables.CONF},this.getQuantity=function(){var t;return(null!==(t=v.variables.NB)&&void 0!==t?t:0)*o.getInstance().projectQuantity},this.getHeight=function(){var t;return null!==(t=v.variables.Height)&&void 0!==t?t:0},this.getWidth=function(){var t;return null!==(t=v.variables.Width)&&void 0!==t?t:0},this.getDepth=function(){var t;return null!==(t=v.variables.Depth)&&void 0!==t?t:0},this.getImages=function(){return new Vt(v.documents).getImages()},this.getPDFs=function(){return new Qt(v.documents).getPDFs()},this.getDocuments=function(){return new _t(v.documents).getDocuments()},this.getUrl=function(){return"frames/".concat(v.key)},this.getCostPanels=function(){var t,e=0,s=n(v.panels);try{for(s.s();!(t=s.n()).done;){e+=t.value.getCost()}}catch(a){s.e(a)}finally{s.f()}return e},this.getCostHardware=function(){var t,e=0,s=n(v.hardware);try{for(s.s();!(t=s.n()).done;){e+=t.value.getCost()}}catch(a){s.e(a)}finally{s.f()}return e},this.getCost=function(){return v.getCostPanels()+v.getCostHardware()},this.getIsExcluded=function(){return null!=v.typedObjectVariables&&"EXCLUDED"in v.typedObjectVariables}}),[{key:"createViewModel",value:function(){return new Kt(this.key,Rt.fromMessagesRaw(this.messages,this.getName(),"Frame",this.getUrl()),this.refParts,this.refPartsQuantities,this.refAssemblies,this.refAssembliesQuantities,this.getDocuments(),this.swcps,this.variables,this.heritedVariables,this.typedObjectVariables,this.getID(),this.getName(),this.getDescription(),this.getConfiguration(),this.getQuantity(),this.getHeight(),this.getWidth(),this.getDepth(),this.getUrl(),this.getImages(),this.getPDFs(),this.getCost(),this.getCostPanels(),this.getCostHardware())}}])}();(M=$t).fromAssemblyPartBusiness=function(t){return new M(t.key,t.messages,t.heritedVariables,t.typedObjectVariables,"refParts"in t?t.refParts:[],"refPartsQuantities"in t?t.refPartsQuantities:[],"refAssemblies"in t?t.refAssemblies:[],"refAssembliesQuantities"in t?t.refAssembliesQuantities:[],t.documents,t.swcps,t.variables)};var Jt=function(t){function e(){var t;return f(this,e),(t=r(this,e,arguments)).FrameTypedObjectName="FRAME",t}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s,a=n(null!==(e=t.getInstancesByName(this.FrameTypedObjectName))&&void 0!==e?e:[]);try{for(a.s();!(s=a.n()).done;){var i=s.value;this.addInstance(i.key,$t.fromAssemblyPartBusiness(i))}}catch(r){a.e(r)}finally{a.f()}return this}}])}(Xt),te=g((function t(e,s,n,a,i,r,o,u,l,h,c,g,d,v,m,y,p,b){f(this,t),this.key=e,this.messages=s,this.heritedVariables=n,this.typedObjectVariables=a,this.refPrograms=i,this.refParts=r,this.refAssemblies=o,this.documents=u,this.swcps=l,this.variables=h,this.name=c,this.description=g,this.configuration=d,this.quantity=v,this.length=m,this.images=y,this.cost=p,this.costUnit=b,this.resource="hardware",this.parts=[],this.assemblies=[]}));te.fromHardwareBusiness=function(t){return t.createViewModel()};var ee=g((function t(e,s,n,a,i,r,o,u,l,h){var c=this;f(this,t),this.key=e,this.messages=s,this.heritedVariables=n,this.typedObjectVariables=a,this.refPrograms=i,this.refParts=r,this.refAssemblies=o,this.documents=u,this.swcps=l,this.variables=h,this.parts=[],this.assemblies=[],this.createViewModel=function(){return new te(c.key,Rt.fromMessagesRaw(c.messages,c.getName(),"Hardware"),c.heritedVariables,c.typedObjectVariables,c.refPrograms,c.refParts,c.refAssemblies,c.getDocuments(),c.swcps,c.variables,c.getName(),c.getDescription(),c.getConfiguration(),c.getQuantity(),c.getLength(),c.getImages(),c.getCost(),c.getCostUnit())},this.getName=function(){return c.variables.NAME},this.getDescription=function(){return c.variables.DESC},this.getConfiguration=function(){return c.variables.CONF},this.getQuantity=function(){return c.variables.NB},this.getLength=function(){return c.variables.Length},this.getImages=function(){return new Vt(c.documents).getImages()},this.getCost=function(){return c.getCostUnit()*c.getQuantity()},this.getCostUnit=function(){var t;return null!==(t=c.swcps.Cost)&&void 0!==t?t:0},this.getDocuments=function(){return new _t(c.documents).getDocuments()}}));(D=ee).fromAssemblyPartBusiness=function(t){return new D(t.key,t.messages,t.heritedVariables,t.typedObjectVariables,t.refPrograms,"refParts"in t?t.refParts:[],"refAssemblies"in t?t.refAssemblies:[],t.documents,t.swcps,t.variables)};var se=function(t){function e(){var t;return f(this,e),(t=r(this,e,arguments)).HardwareTypedObjectName="HARDWARE",t}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s,a=n(null!==(e=t.getInstancesByName(this.HardwareTypedObjectName))&&void 0!==e?e:[]);try{for(a.s();!(s=a.n()).done;){var i=s.value;this.addInstance(i.key,ee.fromAssemblyPartBusiness(i))}}catch(r){a.e(r)}finally{a.f()}return this}}])}(Xt),ne=g((function t(e,s,n,a,i,r,o,u,l,h,c,g,d){f(this,t),this.key=e,this.refPart=s,this.refMaterial=n,this.messages=a,this.documents=i,this.variables=r,this.name=o,this.description=u,this.quantity=l,this.length=h,this.width=c,this.thickness=g,this.cost=d,this.resource="laminates"}));(I=ne).fromLaminateBusiness=function(t){return t.createViewModel()},I.createCombinedLaminate=function(t,e,s){return new I(t.key,t.refPart,t.refMaterial,t.messages,t.documents,t.variables,e,t.description,s,t.length,t.width,t.thickness,t.cost)};var ae=function(){return g((function t(e,s,n,a,i,r,o){var u=this;f(this,t),this.key=e,this.refPart=s,this.refMaterial=n,this.messages=a,this.documents=i,this.variables=r,this.settings=o,this.createViewModel=function(){return u.updateMaterialQuantity(),new ne(u.key,u.refPart,u.refMaterial,Rt.fromMessagesRaw(u.messages,u.getName(),"Laminate"),u.getDocuments(),u.variables,u.getName(),u.getDescription(),u.getQuantity(),u.getLength(),u.getWidth(),u.getThickness(),u.getCost())},this.getDocuments=function(){return new _t(u.documents).getDocuments()},this.getName=function(){return u.variables.ST_N},this.getDescription=function(){return u.variables.ST_DESC},this.getQuantity=function(){var t,e;return null!==(t=null===(e=u.part)||void 0===e?void 0:e.getQuantity())&&void 0!==t?t:0},this.getSwoodLength=function(){return u.variables.ST_L},this.getSwoodWidth=function(){return u.variables.ST_W},this.getThickness=function(){return u.variables.ST_T},this.getHasGrain=function(){var t,e;return null!==(t=null===(e=u.material)||void 0===e?void 0:e.getHasGrain())&&void 0!==t&&t},this.getLength=function(){return u.getLongest(u.getSwoodLength(),u.getSwoodWidth(),u.getHasGrain()).length},this.getWidth=function(){return u.getLongest(u.getSwoodLength(),u.getSwoodWidth(),u.getHasGrain()).width},this.getVolume=function(){return u.getLength()*u.getWidth()*u.getThickness()/1e9},this.getSurface=function(){return u.getLength()*u.getWidth()/1e6},this.getMaterialQuantity=function(){if(!u.material)return console.warn("material not defined for ".concat(u.getName())),0;switch(u.material.getCostType()){case 0:return u.getVolume();case 1:return u.getSurface();case 2:return u.getLength()/1e3;case 3:return u.getQuantity();default:return 0}},this.getCost=function(){var t,e;return u.getMaterialQuantity()*(null!==(t=null===(e=u.material)||void 0===e?void 0:e.getCostUnit())&&void 0!==t?t:0)},this.updateMaterialQuantity=function(){var t=u.getName();if(u.panel)if(u.material){if(!u.panel.isNested&&!u.panel.isPatterned){var e=u.getMaterialQuantity()*u.getQuantity();u.material.quantity+=e}}else console.warn("unable to update quantity â€“ material missing for ".concat(t));else console.warn("Panel not defined for ".concat(t))}}),[{key:"getLongest",value:function(t,e,s){return this.settings.LengthLongestEdge?s?{length:t,width:e}:e>t?{width:e,length:t}:{length:t,width:e}:{length:t,width:e}}}])}();(T=ae).fromStockData=function(t,e){return new T(t.key,t.refPart,t.refMaterial,t.messages,t.documents,t.variables,e)};var ie=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t,e){var s,a=n(t);try{for(a.s();!(s=a.n()).done;){var i,r=s.value;1===(null===(i=r.material)||void 0===i?void 0:i.variables.MAT_TYPE)&&this.add(r.key,ae.fromStockData(r,e))}}catch(o){a.e(o)}finally{a.f()}return this}}])}(Ot),re=function(){return g((function t(e,s,n,a,i,r,o,u,l,h,c,g,d,v,m){f(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a,this.name=i,this.description=r,this.category=o,this.thickness=u,this.hasGrain=l,this.cost=h,this.costUnit=c,this.costType=g,this.quantity=d,this.type=v,this.unitOfMeasure=m,this.resource="materials.panels"}),null,[{key:"fromMaterialBusiness",value:function(t){return t.createViewModel()}}])}(),oe=g((function t(e,s,n,a,i){var r=this;f(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a,this.quantity=i,this.createViewModel=function(){return new re(r.key,Rt.fromMessagesRaw(r.messages,r.getName(),"Material"),r.getDocuments(),r.variables,r.getName(),r.getDescription(),r.getCategory(),r.getThickness(),r.getHasGrain(),r.getCost(),r.getCostUnit(),r.getCostType(),r.quantity,r.getType(),r.getUnitOfMeasure())},this.getDocuments=function(){return new _t(r.documents).getDocuments()},this.getName=function(){var t;return null!==(t=r.variables.MAT_NAME)&&void 0!==t?t:""},this.getDescription=function(){var t;return null!==(t=r.variables.MAT_DESC)&&void 0!==t?t:""},this.getCategory=function(){var t;return null!==(t=r.variables.CATEGORY)&&void 0!==t?t:""},this.getCostUnit=function(){var t;return null!==(t=r.variables.MAT_UCOST)&&void 0!==t?t:0},this.getCostType=function(){var t;return null!==(t=r.variables.MAT_COSTTYPE)&&void 0!==t?t:0},this.getHasGrain=function(){var t;return null!==(t=r.variables.MAT_WITHGRAIN)&&void 0!==t&&t},this.getThickness=function(){var t;return null!==(t=r.variables.MAT_T)&&void 0!==t?t:0},this.getBoardLength=function(){var t;return null!==(t=r.variables.BOARD_LENGTH)&&void 0!==t?t:0},this.getBoardWidth=function(){var t;return null!==(t=r.variables.BOARD_WIDTH)&&void 0!==t?t:0},this.getUnitOfMeasure=function(){switch(r.getCostType()){case 0:return"mÂ³";case 1:return"mÂ²";case 2:return"m";case 3:return"unit";default:return"unknown"}},this.getCost=function(){return r.quantity*r.getCostUnit()},this.getType=function(){var t;return null!==(t=r.variables.MAT_TYPE)&&void 0!==t?t:0},this.getIsWeldment=function(){var t;return null!==(t=r.variables.WELDMENT)&&void 0!==t&&t}}));(A=oe).fromMaterialData=function(t){return new A(t.key,t.messages,t.documents,t.variables,0)};var ue=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.add(a.key,oe.fromMaterialData(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ot),le=function(){function t(e,s,n,a,i,r,o,u,l,h,c,g,d,v,m,y,p,b,k,P,w,M,D,I,T,A,C,S,B,E,O,N,R,V,L,W,j,_,Q,F,H,U,G,x,q,Z,Y,z,X,K,$,J,tt,et,st,nt,at,it,rt,ot,ut){var lt=this,ht=arguments.length>61&&void 0!==arguments[61]?arguments[61]:"";f(this,t),this.key=e,this.name=s,this.refPart=n,this.refPrograms=a,this.refStocks=i,this.refProcessZones=r,this.refEdgebands=o,this.messages=u,this.variables=l,this.heritedVariables=h,this.typedObjectVariables=c,this.serialNumbers=g,this.documents=d,this.swcps=v,this.id=m,this.description=y,this.configuration=p,this.quantity=b,this.length=k,this.width=P,this.thickness=w,this.lengthWithEdgeband=M,this.widthWithEdgeband=D,this.thicknessWithLaminate=I,this.lengthWithoutEdgeband=T,this.widthWithoutEdgeband=A,this.thicknessWithoutLaminate=C,this.lengthStock=S,this.widthStock=B,this.thicknessStock=E,this.hasGrain=O,this.hasEdgebands=N,this.hasLaminates=R,this.hasPrograms=V,this.hasProcessZones=L,this.isCompleted=W,this.isPatterned=j,this.isNested=_,this.listEdgebandMaterials=Q,this.angle=F,this.edgingCode=H,this.edgingCodeOrder=U,this.volume=G,this.nameHead=x,this.nameTail=q,this.board=Z,this.images=Y,this.pdfs=z,this.cost=X,this.costUnit=K,this.costCore=$,this.costEdgebands=J,this.costLaminates=tt,this.costPrograms=et,this.costProcessZones=st,this.hasTopPrograms=nt,this.hasBottomPrograms=at,this.quantityTopPrograms=it,this.quantityBottomPrograms=rt,this.combineId=ot,this.settings=ut,this.comment=ht,this.resource="panels",this.stocks=[],this.layers=[],this.edgebands=[],this.laminates=[],this.programs=[],this.processZones=[],this.addChildren=function(t){lt.children||(lt.children=[]),lt.children.push(t)}}return g(t,null,[{key:"fromPanelBusiness",value:function(t){return t.createViewModel()}},{key:"createCombinedPanel",value:function(e,s){return new t("combined-panel-".concat(e.key),"Combined Panel ".concat(e.combineId),e.refPart,e.refPrograms,e.refStocks,e.refProcessZones,e.refEdgebands,e.messages,e.variables,e.heritedVariables,e.typedObjectVariables,e.serialNumbers,e.documents,e.swcps,e.id,e.description,e.configuration,s,e.length,e.width,e.thickness,e.lengthWithEdgeband,e.widthWithEdgeband,e.thicknessWithLaminate,e.lengthWithoutEdgeband,e.widthWithoutEdgeband,e.thicknessWithoutLaminate,e.lengthStock,e.widthStock,e.thicknessStock,e.hasGrain,e.hasEdgebands,e.hasLaminates,e.hasPrograms,e.hasProcessZones,e.isCompleted,e.isPatterned,e.isNested,e.listEdgebandMaterials,e.angle,e.edgingCode,e.edgingCodeOrder,e.volume,e.nameHead,e.nameTail,e.board,e.images,e.pdfs,e.cost,e.costUnit,e.costCore,e.costEdgebands,e.costLaminates,e.costPrograms,e.costProcessZones,e.hasTopPrograms,e.hasBottomPrograms,e.quantityTopPrograms,e.quantityBottomPrograms,e.combineId,e.settings)}}])}(),he=function(t,e){var s,a,i=[],r="",o=n(t.edgebands);try{for(o.s();!(s=o.n()).done;){var u,l=s.value;i.push(null===(u=l.material)||void 0===u?void 0:u.getName())}}catch(w){o.e(w)}finally{o.f()}var h,c=n(i=(a=i).filter((function(t,e){return a.indexOf(t)===e})));try{for(c.s();!(h=c.n()).done;){r+=h.value+", "}}catch(w){c.e(w)}finally{c.f()}r=r.slice(0,-2),null!=t.edgebands&&t.edgebands.sort(St([{Property:"Order",Type:1}],e));var g,d=[],f=n(t.edgebands);try{for(f.s();!(g=f.n()).done;){var v=g.value;v.getIsPaint()||v.getIsCurved()?!v.getIsPaint()&&v.getIsCurved()&&d.push("C"):v.getLengthStock()===t.getLengthStock()?t.getLengthStock()>t.getWidthStock()?d.push("L"):d.push("S"):v.getLengthStock()==t.getWidthStock()?t.getLengthStock()>t.getWidthStock()?d.push("S"):d.push("L"):(console.warn("Unable to categorise EB in: "+t.name),d.push("U"))}}catch(w){f.e(w)}finally{f.f()}for(var m="",y=0;y<d.length;y++){for(var p=1;d[y]==d[y+1];)p++,y++;m+=p+d[y],y!=d.length-1&&(m+=e.EBStringSeparator)}d.sort(),e.EBStringReverse&&d.reverse();for(var b="",k=0;k<d.length;k++){for(var P=1;d[k]===d[k+1];)P++,k++;b+=P+d[k],k!=d.length-1&&(b+=e.EBStringSeparator)}return{EBString:b,EBStringOrder:m,EdgingListString:r}},ce=function(){return g((function t(e,s,a,i,r,o,u,l,h,c,g,d){var v=this;f(this,t),this.key=e,this.name=s,this.refPart=a,this.refPrograms=i,this.refStocks=r,this.refProcessZones=o,this.refEdgebands=u,this.messages=l,this.documents=h,this.variables=c,this.serialNumbers=g,this.settings=d,this.programs=[],this.stocks=[],this.edgebands=[],this.laminates=[],this.processZones=[],this.isPatterned=!1,this.isNested=!1,this.getID=function(){var t,e;return null!==(t=null===(e=v.part)||void 0===e?void 0:e.variables.ID)&&void 0!==t?t:""},this.getDescription=function(){var t,e;return null!==(t=null===(e=v.part)||void 0===e?void 0:e.getDescription())&&void 0!==t?t:""},this.getConfiguration=function(){var t,e;return null!==(t=null===(e=v.part)||void 0===e?void 0:e.getConfiguration())&&void 0!==t?t:""},this.getQuantity=function(){var t,e;return null!==(t=null===(e=v.part)||void 0===e?void 0:e.getQuantity())&&void 0!==t?t:0},this.getCombineId=function(){var t,e;return null!==(t=null===(e=v.part)||void 0===e?void 0:e.getCombinedId())&&void 0!==t?t:0},this.getIsCompleted=function(){var t;return null!==(t=v.variables.IS_COMPLETED)&&void 0!==t&&t},this.getSwoodLength=function(){return v.variables.PAN_L},this.getSwoodWidth=function(){var t;return null!==(t=v.variables.PAN_W)&&void 0!==t?t:0},this.getSwoodThickness=function(){return v.variables.PAN_T},this.getSwoodLengthWithEdgeband=function(){return v.variables.PAN_LWEB},this.getSwoodWidthWithEdgeband=function(){return v.variables.PAN_WWEB},this.getSwoodThicknessWithLaminate=function(){return v.variables.PAN_TWL},this.getSwoodLengthWithoutEdgeband=function(){return v.variables.PAN_LWOEB},this.getSwoodWidthWithoutEdgeband=function(){return v.variables.PAN_WWOEB},this.getSwoodThicknessWithoutLaminate=function(){return v.variables.PAN_TWOL},this.getSwoodLengthStock=function(){return v.variables.PAN_STL},this.getSwoodWidthStock=function(){return v.variables.PAN_STW},this.getSwoodThicknessStock=function(){return v.variables.PAN_STT},this.getLength=function(){return v.getLongest(v.getSwoodLength(),v.getSwoodWidth(),v.getHasGrain()).length},this.getWidth=function(){return v.getLongest(v.getSwoodLength(),v.getSwoodWidth(),v.getHasGrain()).width},this.getThickness=function(){return v.getSwoodThickness()},this.getHasGrain=function(){return v.stocks.some((function(t){var e;return!0===(null===(e=t.material)||void 0===e?void 0:e.getHasGrain())}))},this.getHasEdgebands=function(){return v.edgebands.length>0},this.getHasLaminates=function(){return v.laminates.length>0},this.getHasPrograms=function(){return v.programs.length>0},this.getHasProcessZones=function(){return v.processZones.length>0},this.getListEdgebandMaterials=function(){return he(v,v.settings).EdgingListString},this.getAngleGrain=function(){var t;return null!==(t=v.getCoreStock())&&void 0!==t&&null!==(t=t.material)&&void 0!==t&&t.getHasGrain()?v.variables.PAN_ANGLEINPART+v.variables.PAN_GRAINANGLEINPART:null},this.getEdgingCode=function(){return he(v,v.settings).EBString},this.getEdgingCodeOrder=function(){return he(v,v.settings).EBStringOrder},this.getLengthWithEdgeband=function(){return v.getLongest(v.getSwoodLengthWithEdgeband(),v.getSwoodWidthWithEdgeband(),v.getHasGrain()).length},this.getWidthWithEdgeband=function(){return v.getLongest(v.getSwoodLengthWithEdgeband(),v.getSwoodLengthWithEdgeband(),v.getHasGrain()).width},this.getThicknessWithLaminate=function(){return v.getSwoodThicknessWithLaminate()},this.getLengthWithoutEdgeband=function(){return v.getLongest(v.getSwoodLengthWithoutEdgeband(),v.getSwoodWidthWithoutEdgeband(),v.getHasGrain()).length},this.getWidthWithoutEdgeband=function(){return v.getLongest(v.getSwoodLengthWithoutEdgeband(),v.getSwoodWidthWithoutEdgeband(),v.getHasGrain()).width},this.getThicknessWithoutLaminate=function(){return v.getSwoodThicknessWithoutLaminate()},this.getLengthStock=function(){return v.getLongest(v.getSwoodLengthStock(),v.getSwoodWidthStock(),v.getHasGrain()).length},this.getWidthStock=function(){return v.getLongest(v.getSwoodLengthStock(),v.getSwoodWidthStock(),v.getHasGrain()).width},this.getThicknessStock=function(){return v.getSwoodThicknessStock()},this.getVolume=function(){return v.getLength()*v.getWidth()*v.getThickness()/1e9},this.getSurface=function(){return v.getLength()*v.getWidth()/1e6},this.getImages=function(){return new Vt(v.documents).getImages()},this.getPDFs=function(){return new Qt(v.documents).getPDFs()},this.getDocuments=function(){return new _t(v.documents).getDocuments()},this.getSwcps=function(){var t,e;return null!==(t=null===(e=v.part)||void 0===e?void 0:e.swcps)&&void 0!==t?t:{}},this.getHeritedVariables=function(){var t,e;return null!==(t=null===(e=v.part)||void 0===e?void 0:e.heritedVariables)&&void 0!==t?t:{}},this.getTypedObjectVariables=function(){var t,e;return null!==(t=null===(e=v.part)||void 0===e?void 0:e.typedObjectVariables)&&void 0!==t?t:{}},this.getMaterialQuantity=function(){if(!v.material)return console.warn("material not defined for ".concat(v.name)),0;switch(v.material.getCostType()){case 0:return v.getVolume();case 1:return v.getSurface();case 2:return v.getLength()/1e3;case 3:return v.getQuantity();default:return 0}},this.getCost=function(){return v.getCostUnit()*v.getQuantity()},this.getCostUnit=function(){return v.getCostCore()+v.getCostEdgebands()+v.getCostLaminates()+v.getCostProcessZones()},this.getCostCore=function(){var t,e;return v.getMaterialQuantity()*(null!==(t=null===(e=v.material)||void 0===e?void 0:e.getCostUnit())&&void 0!==t?t:0)},this.getCostEdgebands=function(){var t,e=0,s=n(v.edgebands);try{for(s.s();!(t=s.n()).done;){e+=t.value.getCost()}}catch(a){s.e(a)}finally{s.f()}return e},this.getCostLaminates=function(){var t,e=0,s=n(v.laminates);try{for(s.s();!(t=s.n()).done;){e+=t.value.getCost()}}catch(a){s.e(a)}finally{s.f()}return e},this.getCostPrograms=function(){var t,e=0,s=n(v.programs);try{for(s.s();!(t=s.n()).done;){e+=t.value.getCost()}}catch(a){s.e(a)}finally{s.f()}return e},this.getCostProcessZone=function(t){if(!t.panelProcess)return console.warn("panelProcess not defined for ".concat(v.name)),0;var e=t.panelProcess.getCostUnit(),s=0,n=0;switch(t.getCostType()){case 0:n=e*(s=v.getVolume());break;case 1:n=e*(s=v.getSurface());break;case 2:n=e*(s=v.getLength()/1e3);break;case 3:n=e*(s=v.getQuantity());break;default:return 0}return t.panelProcess.quantity+=s,n},this.getCostProcessZones=function(){var t,e=0,s=n(v.processZones);try{for(s.s();!(t=s.n()).done;){var a=t.value;e+=v.getCostProcessZone(a)}}catch(i){s.e(i)}finally{s.f()}return e},this.getQuantityTopPrograms=function(){return v.programs.filter((function(t){return t.getIsTopProgram()})).length},this.getQuantityBottomPrograms=function(){return v.programs.filter((function(t){return t.getIsBottomProgram()})).length},this.getHasTopPrograms=function(){return v.programs.some((function(t){return t.getIsTopProgram()}))},this.getHasBottomPrograms=function(){return v.programs.some((function(t){return t.getIsBottomProgram()}))},this.getBoard=function(){var t,e,s,n;return{length:null!==(t=null===(e=v.material)||void 0===e?void 0:e.getBoardLength())&&void 0!==t?t:0,width:null!==(s=null===(n=v.material)||void 0===n?void 0:n.getBoardWidth())&&void 0!==s?s:0}},this.getIsExcluded=function(){var t;return(null===(t=v.part)||void 0===t?void 0:t.variables.TOTYPES).split(";").includes("EXCLUDED")},this.updateMaterialQuantity=function(){if(v.material){if(!(v.isNested||v.isPatterned||v.getIsExcluded())){var t=v.getMaterialQuantity()*v.getQuantity();v.material.quantity+=t}}else console.warn("unable to update quantity â€“ material missing for ".concat(v.name))}}),[{key:"createViewModel",value:function(){return this.updateMaterialQuantity(),new le(this.key,this.name,this.refPart,this.refPrograms,this.refStocks,this.refProcessZones,this.refEdgebands,Rt.fromMessagesRaw(this.messages,this.name,"Panel"),this.variables,this.getHeritedVariables(),this.getTypedObjectVariables(),this.serialNumbers,this.getDocuments(),this.getSwcps(),this.getID(),this.getDescription(),this.getConfiguration(),this.getQuantity(),this.getLength(),this.getWidth(),this.getThickness(),this.getLengthWithEdgeband(),this.getWidthWithEdgeband(),this.getThicknessWithLaminate(),this.getLengthWithoutEdgeband(),this.getWidthWithoutEdgeband(),this.getThicknessWithoutLaminate(),this.getLengthStock(),this.getWidthStock(),this.getThicknessStock(),this.getHasGrain(),this.getHasEdgebands(),this.getHasLaminates(),this.getHasPrograms(),this.getHasProcessZones(),this.getIsCompleted(),this.isPatterned,this.isNested,this.getListEdgebandMaterials(),this.getAngleGrain(),this.getEdgingCode(),this.getEdgingCodeOrder(),this.getVolume(),this.getNameHead(),this.getNameTail(),this.getBoard(),this.getImages(),this.getPDFs(),this.getCost(),this.getCostUnit(),this.getCostCore(),this.getCostEdgebands(),this.getCostLaminates(),this.getCostPrograms(),this.getCostProcessZones(),this.getHasTopPrograms(),this.getHasBottomPrograms(),this.getQuantityTopPrograms(),this.getQuantityBottomPrograms(),this.getCombineId(),this.settings)}},{key:"createCombinedViewModel",value:function(){return new le("combined-panel-".concat(this.getCombineId()),"Combined Panel ".concat(this.getCombineId()),this.refPart,this.refPrograms,this.refStocks,this.refProcessZones,this.refEdgebands,Rt.fromMessagesRaw(this.messages,"Panel"),this.variables,this.getHeritedVariables(),this.getTypedObjectVariables(),this.serialNumbers,this.getDocuments(),this.getSwcps(),this.getID(),this.getDescription(),this.getConfiguration(),this.getQuantity(),this.getLength(),this.getWidth(),this.getThickness(),this.getLengthWithEdgeband(),this.getWidthWithEdgeband(),this.getThicknessWithLaminate(),this.getLengthWithoutEdgeband(),this.getWidthWithoutEdgeband(),this.getThicknessWithoutLaminate(),this.getLengthStock(),this.getWidthStock(),this.getThicknessStock(),this.getHasGrain(),this.getHasEdgebands(),this.getHasLaminates(),this.getHasPrograms(),this.getHasProcessZones(),this.getIsCompleted(),this.isPatterned,this.isNested,this.getListEdgebandMaterials(),this.getAngleGrain(),this.getEdgingCode(),this.getEdgingCodeOrder(),this.getVolume(),this.getNameHead(),this.getNameTail(),this.getBoard(),this.getImages(),this.getPDFs(),this.getCost(),this.getCostUnit(),this.getCostCore(),this.getCostEdgebands(),this.getCostLaminates(),this.getCostPrograms(),this.getCostProcessZones(),this.getHasTopPrograms(),this.getHasBottomPrograms(),this.getQuantityTopPrograms(),this.getQuantityBottomPrograms(),this.getCombineId(),this.settings)}},{key:"getLongest",value:function(t,e,s){return this.settings.LengthLongestEdge?s?{length:t,width:e}:e>t?{width:e,length:t}:{length:t,width:e}:{length:t,width:e}}},{key:"getCoreStock",value:function(){var t,e=n(this.stocks);try{for(e.s();!(t=e.n()).done;){var s=t.value;if("CORE"===s.variables.ST_N)return s}}catch(a){e.e(a)}finally{e.f()}}},{key:"getNameTail",value:function(){var t=this.name.lastIndexOf("_");return-1===t?this.name:this.name.substring(t+1,this.name.length)}},{key:"getNameHead",value:function(){var t=this.name.indexOf("_");return-1===t?this.name:this.name.substring(0,t)}}])}();(C=ce).fromPanelData=function(t,e){return new C(t.key,t.name,t.refPart,t.refPrograms,t.refStocks,t.refProcessZones,t.refEdgebands,t.messages,t.documents,t.variables,t.serialNumbers,e)};var ge=function(t){function e(){var t;return f(this,e),(t=r(this,e,arguments)).addStocks=function(e){var s,a=n(t.getAll());try{for(a.s();!(s=a.n()).done;){var i,r=s.value,o=n(r.refStocks);try{for(o.s();!(i=o.n()).done;){var u=i.value,l=e.get(u);l&&(r.stocks.push(l),"CORE"===l.variables.ST_N&&(r.material=l.material))}}catch(h){o.e(h)}finally{o.f()}}}catch(h){a.e(h)}finally{a.f()}},t.addPrograms=function(e){var s,a=n(t.getAll());try{for(a.s();!(s=a.n()).done;){var i,r=s.value,o=n(r.refPrograms);try{for(o.s();!(i=o.n()).done;){var u=i.value,l=e.get(u);l&&(r.programs.push(l),l.panel=r)}}catch(h){o.e(h)}finally{o.f()}}}catch(h){a.e(h)}finally{a.f()}},t.addEdgebands=function(e){var s,a=n(t.getAll());try{for(a.s();!(s=a.n()).done;){var i,r=s.value,o=n(r.refEdgebands);try{for(o.s();!(i=o.n()).done;){var u=i.value,l=e.get(u);l&&(r.edgebands.push(l),l.panel=r)}}catch(h){o.e(h)}finally{o.f()}}}catch(h){a.e(h)}finally{a.f()}},t.addLaminates=function(e){var s,a=n(t.getAll());try{for(a.s();!(s=a.n()).done;){var i,r=s.value,o=n(r.refStocks);try{for(o.s();!(i=o.n()).done;){var u=i.value,l=e.get(u);l&&(r.laminates.push(l),l.panel=r)}}catch(h){o.e(h)}finally{o.f()}}}catch(h){a.e(h)}finally{a.f()}},t}return l(e,t),g(e,[{key:"addInstances",value:function(t,e){var s,a=n(t);try{for(a.s();!(s=a.n()).done;){var i=s.value;this.add(i.key,ce.fromPanelData(i,e))}}catch(r){a.e(r)}finally{a.f()}return this}}])}(Ot),de=function(){return g((function t(e,s,n,a,i,r,o,u,l,h,c,g,d,v,m,y,p,b,k){f(this,t),this.key=e,this.refPrograms=s,this.refStocks=n,this.refPanel=a,this.bodyCount=i,this.messages=r,this.variables=o,this.heritedVariables=u,this.typedObjectVariables=l,this.documents=h,this.swcps=c,this.name=g,this.description=d,this.configuration=v,this.quantity=m,this.height=y,this.width=p,this.depth=b,this.images=k,this.resource="parts",this.programs=[],this.stocks=[]}),null,[{key:"fromPartBusiness",value:function(t){return t.createViewModel()}}])}(),fe=function(){return g((function t(e,s,n,a,i,r,u,l,h,c,g){var d=this;f(this,t),this.key=e,this.refPrograms=s,this.refStocks=n,this.refPanel=a,this.bodyCount=i,this.messages=r,this.variables=u,this.heritedVariables=l,this.typedObjectVariables=h,this.documents=c,this.swcps=g,this.programs=[],this.stocks=[],this.getDocuments=function(){return new _t(d.documents).getDocuments()},this.getName=function(){var t;return null!==(t=d.variables.NAME)&&void 0!==t?t:""},this.getDescription=function(){return d.variables.DESC},this.getConfiguration=function(){var t;return null!==(t=d.variables.CONF)&&void 0!==t?t:""},this.getQuantity=function(){var t;return(null!==(t=d.variables.NB)&&void 0!==t?t:0)*o.getInstance().projectQuantity},this.getImages=function(){return new Vt(d.documents).getImages()},this.getCombinedId=function(){var t;return null!==(t=d.variables.CombineID)&&void 0!==t?t:0}}),[{key:"createViewModel",value:function(){return new de(this.key,this.refPrograms,this.refStocks,this.refPanel,this.bodyCount,Rt.fromMessagesRaw(this.messages,this.getName(),"Part"),this.variables,this.heritedVariables,this.typedObjectVariables,this.getDocuments(),this.swcps,this.getName(),this.getDescription(),this.getConfiguration(),this.getQuantity(),0,0,0,this.getImages())}}])}();(S=fe).fromPartData=function(t){return new S(t.key,t.refPrograms,t.refStocks,t.refPanel,t.bodyCount,t.messages,t.variables,t.heritedVariables,t.typedObjectVariables,t.documents,t.swcps)};var ve=function(t){function e(){var t;return f(this,e),(t=r(this,e,arguments)).addStocks=function(e){var s,a=n(t.getAll());try{for(a.s();!(s=a.n()).done;){var i,r,o=s.value,u=n(null!==(i=o.refStocks)&&void 0!==i?i:[]);try{for(u.s();!(r=u.n()).done;){var l=r.value,h=e.get(l);h&&(o.stocks.push(h),h.part=o)}}catch(c){u.e(c)}finally{u.f()}}}catch(c){a.e(c)}finally{a.f()}},t.addPrograms=function(e){var s,a=n(t.getAll());try{for(a.s();!(s=a.n()).done;){var i,r=s.value,o=n(r.refPrograms);try{for(o.s();!(i=o.n()).done;){var u=i.value,l=e.get(u);l&&(r.programs.push(l),l.part=r)}}catch(h){o.e(h)}finally{o.f()}}}catch(h){a.e(h)}finally{a.f()}},t}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.add(a.key,fe.fromPartData(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ot),me=g((function t(e,s,n,a,i,r,o,u,l,h,c,g,d,v,m,y,p,b,k,P,w,M,D,I,T,A,C){f(this,t),this.key=e,this.refTools=s,this.programParts=n,this.refBoard=a,this.variables=i,this.heritedVariables=r,this.typedObjectVariables=o,this.messages=u,this.documents=l,this.swcps=h,this.name=c,this.description=g,this.configuration=d,this.quantity=v,this.length=m,this.width=y,this.thickness=p,this.url=b,this.cost=k,this.costHour=P,this.time=w,this.isTopProgram=M,this.isBottomProgram=D,this.machine=I,this.images=T,this.programFilepath=A,this.programFile=C,this.resource="programs",this.tools=[]}));me.fromProgramBusiness=function(t){return t.createViewModel()};var ye=function(){return g((function t(e,s,n,a,i,r,o){var u=this;f(this,t),this.key=e,this.refTools=s,this.programParts=n,this.refBoard=a,this.variables=i,this.messages=r,this.documents=o,this.tools=[],this.getDocuments=function(){return new _t(u.documents).getDocuments()},this.getSwcps=function(){var t,e;return null!==(t=null===(e=u.part)||void 0===e?void 0:e.swcps)&&void 0!==t?t:{}},this.getHeritedVariables=function(){var t,e;return null!==(t=null===(e=u.part)||void 0===e?void 0:e.heritedVariables)&&void 0!==t?t:{}},this.getTypedObjectVariables=function(){var t,e;return null!==(t=null===(e=u.part)||void 0===e?void 0:e.typedObjectVariables)&&void 0!==t?t:{}},this.getName=function(){return u.variables.PROG_PHASENAME},this.getDescription=function(){var t,e;return null!==(t=null===(e=u.part)||void 0===e?void 0:e.getDescription())&&void 0!==t?t:""},this.getConfiguration=function(){var t,e;return null!==(t=null===(e=u.part)||void 0===e?void 0:e.getConfiguration())&&void 0!==t?t:""},this.getQuantity=function(){var t,e;return null!==(t=null===(e=u.part)||void 0===e?void 0:e.getQuantity())&&void 0!==t?t:0},this.getLength=function(){var t;return null!==(t=u.variables.PROGBX)&&void 0!==t?t:0},this.getWidth=function(){var t;return null!==(t=u.variables.PROGBY)&&void 0!==t?t:0},this.getThickness=function(){var t;return null!==(t=u.variables.PROGBZ)&&void 0!==t?t:0},this.getUrl=function(){return"programs/".concat(u.key)},this.getImages=function(){return new Vt(u.documents).getImages()},this.getCostHour=function(){var t;return null!==(t=u.variables.PROGMAC_HOURCOST)&&void 0!==t?t:0},this.getTotalTime=function(){var t;return null!==(t=u.variables.PROGTPS)&&void 0!==t?t:0},this.getCost=function(){return u.getCostHour()*u.getTotalTime()/3600},this.getIsTopProgram=function(){return 1===u.variables.PROG_OP0ZXPANELZ},this.getIsBottomProgram=function(){return-1===u.variables.PROG_OP0ZXPANELZ},this.getMachine=function(){var t;return null!==(t=u.variables.PROGMAC)&&void 0!==t?t:""},this.getProgramFilepath=function(){var t;return null!==(t=u.variables.PROGPATH)&&void 0!==t?t:""},this.getProgramFile=function(){var t=u.documents.find((function(t){return"PROGRAM"===t.objType&&null===t.type&&null===t.docType}));return t||console.warn("unable to find program file for program: ".concat(u.getName())),t}}),[{key:"createViewModel",value:function(){return new me(this.key,this.refTools,this.programParts,this.refBoard,this.variables,this.getHeritedVariables(),this.getTypedObjectVariables(),Rt.fromMessagesRaw(this.messages,this.getName(),"Program",this.getUrl()),this.getDocuments(),this.getSwcps(),this.getName(),this.getDescription(),this.getConfiguration(),this.getQuantity(),this.getLength(),this.getWidth(),this.getThickness(),this.getUrl(),this.getCost(),this.getCostHour(),this.getTotalTime(),this.getIsTopProgram(),this.getIsBottomProgram(),this.getMachine(),this.getImages(),this.getProgramFilepath(),this.getProgramFile())}}])}();(B=ye).fromProgramData=function(t){return new B(t.key,t.refTools,t.refProgramParts,t.refBoard,t.variables,t.messages,t.documents)};var pe=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;a.refBoard||this.add(a.key,ye.fromProgramData(a))}}catch(i){s.e(i)}finally{s.f()}return this}},{key:"addTools",value:function(t){var e,s=n(this.getAll());try{for(s.s();!(e=s.n()).done;){var a,i=e.value,r=n(i.refTools);try{for(r.s();!(a=r.n()).done;){var o=a.value,u=t.get(o);u&&i.tools.push(u)}}catch(l){r.e(l)}finally{r.f()}}}catch(l){s.e(l)}finally{s.f()}}}])}(Ot),be=g((function t(e,s,n,a,i,r,o,u,l,h,c,g,d,v,m,y){f(this,t),this.key=e,this.refPart=s,this.refProgram=n,this.documents=a,this.messages=i,this.variables=r,this.images=o,this.name=u,this.description=l,this.configuration=h,this.quantity=c,this.quantityInSheet=g,this.quantityInProject=d,this.programPartId=v,this.angle=m,this.parent=y,this.resource="programParts"}));be.fromProgramPartBusiness=function(t){return t.createViewModel()};var ke=function(){return g((function t(e,s,a,i,r,u){var l=this;f(this,t),this.key=e,this.refPart=s,this.refProgram=a,this.documents=i,this.messages=r,this.variables=u,this.sheets=[],this.getDocuments=function(){return new _t(l.documents).getDocuments()},this.getImages=function(){return new Vt(l.documents).getImages()},this.getName=function(){var t;return null===(t=l.panel)||void 0===t?void 0:t.name},this.getDescription=function(){var t,e;return null!==(t=null===(e=l.part)||void 0===e?void 0:e.getDescription())&&void 0!==t?t:""},this.getConfiguration=function(){var t,e;return null!==(t=null===(e=l.part)||void 0===e?void 0:e.getConfiguration())&&void 0!==t?t:""},this.getQuantity=function(){var t,e;return(null!==(t=null===(e=l.sheet)||void 0===e?void 0:e.getQuantity())&&void 0!==t?t:0)*o.getInstance().projectQuantity},this.getQuantityInSheet=function(){var t,e;return(null!==(t=null===(e=l.sheet)||void 0===e?void 0:e.programParts)&&void 0!==t?t:[]).filter((function(t){return l.getName()===t.getName()})).length},this.getQuantityInProject=function(){var t,e=0,s=n(l.sheets);try{for(s.s();!(t=s.n()).done;){var a,i=t.value,r=n(i.programParts);try{for(r.s();!(a=r.n()).done;){var u;(null===(u=a.value.part)||void 0===u?void 0:u.getName())===l.getName()&&(e+=i.getQuantity()*o.getInstance().projectQuantity)}}catch(h){r.e(h)}finally{r.f()}}}catch(h){s.e(h)}finally{s.f()}return e},this.getProgramPartId=function(){return l.variables.PROGPART_ID},this.getAngle=function(){return l.variables.PROGPART_NANGLE},this.getParentIndex=function(){return l.variables.PROGPART_NPARENTINDEX},this.getParentName=function(){return l.variables.PROGPART_NPARENTNAME},this.getParentPath=function(){return l.variables.PROGPART_NPARENTPATH},this.getParentConfiguration=function(){return l.variables.PROGPART_NPARENTCONFIG}}),[{key:"createViewModel",value:function(){return new be(this.key,this.refPart,this.refProgram,this.getDocuments(),Rt.fromMessagesRaw(this.messages,this.getName(),"Program Part"),this.variables,this.getImages(),this.getName(),this.getDescription(),this.getConfiguration(),this.getQuantity(),this.getQuantityInSheet(),this.getQuantityInProject(),this.getProgramPartId(),this.getAngle(),{index:this.getParentIndex(),name:this.getParentName(),configuration:this.getParentConfiguration(),filepath:this.getParentPath()})}}])}();(E=ke).fromProgramPartData=function(t){return new E(t.key,t.part,t.program,t.documents,t.messages,t.variables)};var Pe=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.add(a.key,ke.fromProgramPartData(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ot),we=g((function t(e,s,n,a){f(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a}));(O=we).fromSpindleData=function(t){return new O(t.key,t.messages,t.documents,t.variables)};var Me=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){if(!t)return this;var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.add(a.key,we.fromSpindleData(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ot),De=g((function t(e,s,n,a,i,r,o,u,l,h,c,g,d,v,m){f(this,t),this.key=e,this.refPart=s,this.refMaterial=n,this.messages=a,this.documents=i,this.swcps=r,this.variables=o,this.name=u,this.description=l,this.configuration=h,this.quantity=c,this.length=g,this.width=d,this.thickness=v,this.angle=m,this.resource="stocks"}));(N=De).fromStockBusiness=function(t){return t.createViewModel()},N.createCombinedStock=function(t,e,s){return new N(t.key,t.refPart,t.refMaterial,t.messages,t.documents,t.swcps,t.variables,e,t.description,t.configuration,s,t.length,t.width,t.thickness,t.angle)};var Ie=g((function t(e,s,n,a,i,r){var o=this;f(this,t),this.key=e,this.refPart=s,this.refMaterial=n,this.messages=a,this.documents=i,this.variables=r,this.createViewModel=function(){return new De(o.key,o.refPart,o.refMaterial,Rt.fromMessagesRaw(o.messages,o.getName(),"Stock"),o.documents,o.getSwcps(),o.variables,o.getName(),o.getDescription(),o.getConfiguration(),o.getQuantity(),o.getLength(),o.getWidth(),o.getThickness(),o.getAngle())},this.getSwcps=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.swcps)&&void 0!==t?t:{}},this.getName=function(){var t,e;return null!==(t=null===(e=o.panel)||void 0===e?void 0:e.name)&&void 0!==t?t:""},this.getDescription=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.getDescription())&&void 0!==t?t:""},this.getConfiguration=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.getConfiguration())&&void 0!==t?t:""},this.getQuantity=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.getQuantity())&&void 0!==t?t:0},this.getLength=function(){return o.variables.ST_L},this.getWidth=function(){return o.variables.ST_W},this.getThickness=function(){return o.variables.ST_T},this.getAngle=function(){var t;return null!==(t=o.variables.ST_ANGLEINPANEL)&&void 0!==t?t:0}}));(R=Ie).fromStockData=function(t){return new R(t.key,t.refPart,t.refMaterial,t.messages,t.documents,t.variables)};var Te=function(t){function e(){var t;return f(this,e),(t=r(this,e,arguments)).addMaterials=function(e){var s,a=n(t.getAll());try{for(a.s();!(s=a.n()).done;){var i=s.value,r=e.get(i.refMaterial);r&&(i.material=r)}}catch(o){a.e(o)}finally{a.f()}},t}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.add(a.key,Ie.fromStockData(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ot),Ae=g((function t(e,s,n,a,i,r,o,u,l){f(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a,this.refSpindles=i,this.name=r,this.reference=o,this.number=u,this.diameter=l,this.spindles=[]}));Ae.fromToolBusiness=function(t){return t.createViewModel()};var Ce=function(){function t(e,s,n,a){var i=this,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];f(this,t),this.key=e,this.variables=s,this.messages=n,this.documents=a,this.refSpindles=r,this.createViewModel=function(){return new Ae(i.key,Rt.fromMessagesRaw(i.messages,i.getName(),"Tool"),i.getDocuments(),i.variables,i.refSpindles,i.getName(),i.getReference(),i.getNumber(),i.getDiameter())},this.getDocuments=function(){return new _t(i.documents).getDocuments()},this.getName=function(){return i.variables.TOOL_NAME},this.getReference=function(){return i.variables.TOOL_REFERENCE},this.getNumber=function(){return i.variables.TOOL_DIAM},this.getDiameter=function(){return i.variables.TOOL_NUMBER}}return g(t,null,[{key:"fromToolData",value:function(e){return new t(e.key,e.variables,e.messages,e.documents,e.refSpindles)}}])}(),Se=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.add(a.key,Ce.fromToolData(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ot),Be=function(){return g((function t(){f(this,t),this.instances=new Map}),[{key:"addInstance",value:function(t,e){var s=this.instances.get(t);s?s.push(e):this.instances.set(t,[e])}},{key:"addInstances",value:function(t,e,s){var a,i=n(t.typedObjects);try{for(i.s();!(a=i.n()).done;){var r=a.value,o=e.get(r);if(o){var u,l=n(o.variables.TOTYPES.split(";"));try{for(l.s();!(u=l.n()).done;){var h=u.value;this.addInstance(h,o)}}catch(v){l.e(v)}finally{l.f()}}var c=s.get(r);if(c){var g,d=n(c.variables.TOTYPES.split(";"));try{for(d.s();!(g=d.n()).done;){var f=g.value;this.addInstance(f,c)}}catch(v){d.e(v)}finally{d.f()}}}}catch(v){i.e(v)}finally{i.f()}return this}},{key:"getInstancesByName",value:function(t){return this.instances.get(t)||void 0}},{key:"getAll",value:function(){return this.instances}}])}(),Ee=g((function t(e,s,n,a,i,r,o,u,l,h,c,g,d,v,m,y,p,b,k,P,w){f(this,t),this.key=e,this.refTools=s,this.refProgramParts=n,this.refBoard=a,this.variables=i,this.messages=r,this.documents=o,this.name=u,this.quantity=l,this.programFilename=h,this.programFilepath=c,this.comments=g,this.totalParts=d,this.totalOffcuts=v,this.machine=m,this.length=y,this.width=p,this.thickness=b,this.url=k,this.images=P,this.programFile=w,this.resource="sheets",this.tools=[],this.programParts=[]}));Ee.fromProgramBusiness=function(t){return t.createViewModel()};var Oe=function(){return g((function t(e,s,n,a,i,r,u){var l=this;f(this,t),this.key=e,this.refTools=s,this.refProgramParts=n,this.refBoard=a,this.variables=i,this.messages=r,this.documents=u,this.programParts=[],this.getDocuments=function(){return new _t(l.documents).getDocuments()},this.getName=function(){return l.variables.PROG_PHASENAME},this.getQuantity=function(){var t;return(null!==(t=l.variables.PROG_NSHEETQTY)&&void 0!==t?t:0)*o.getInstance().projectQuantity},this.getProgramFilename=function(){return l.variables.PROGCFGFILE},this.getProgramFilepath=function(){return l.variables.PROGCFGPATH},this.getProgramComment=function(){return l.variables.PROGCOMMENT},this.getTotalParts=function(){return l.variables.PROG_PARTCOUNT},this.getTotalOffcuts=function(){return l.variables.PROG_OFFCUTCOUNT},this.getMachine=function(){return l.variables.PROGMAC},this.getLength=function(){return l.variables.PROGBX},this.getWidth=function(){return l.variables.PROGBY},this.getThickness=function(){return l.variables.PROGBZ},this.getUrl=function(){return"sheets/".concat(l.key)},this.getImages=function(){return new Vt(l.documents).getImages()},this.getProgramFile=function(){var t=l.documents.find((function(t){return"PROGRAM"===t.objType&&null===t.type&&null===t.docType}));return t||console.warn("unable to find program file for program: ".concat(l.getName())),t}}),[{key:"createViewModel",value:function(){return new Ee(this.key,this.refTools,this.refProgramParts,this.refBoard,this.variables,Rt.fromMessagesRaw(this.messages,this.getName(),"Sheet",this.getUrl()),this.getDocuments(),this.getName(),this.getQuantity(),this.getProgramFilename(),this.getProgramFilepath(),this.getProgramComment(),this.getTotalParts(),this.getTotalOffcuts(),this.getMachine(),this.getLength(),this.getWidth(),this.getThickness(),this.getUrl(),this.getImages(),this.getProgramFile())}}])}();(V=Oe).fromProgramData=function(t){return new V(t.key,t.refTools,t.refProgramParts,t.refBoard,t.variables,t.messages,t.documents)};var Ne=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;a.refBoard&&this.add(a.key,Oe.fromProgramData(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ot),Re=g((function t(e,s,n,a,i,r,o,u,l,h,c,g){f(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a,this.name=i,this.description=r,this.quantity=o,this.thickness=u,this.category=l,this.cost=h,this.costUnit=c,this.costType=g,this.resource="panelProcesses"}));Re.fromPanelProcessBusiness=function(t){return t.createViewModel()};var Ve=function(){function t(e,s,n,a,i){var r=this;f(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a,this.quantity=i,this.createViewModel=function(){return new Re(r.key,Rt.fromMessagesRaw(r.messages,r.getName(),"Panel Process"),r.documents,r.variables,r.getName(),r.getDescription(),r.quantity,r.getThickness(),r.getCategory(),r.getCost(),r.getCostUnit(),r.getCostType())},this.getName=function(){return r.variables.PROC_NAME},this.getDescription=function(){return r.variables.PROC_DESC},this.getThickness=function(){return r.variables.PROC_THICKNESS},this.getCategory=function(){return r.variables.PROC_CAT},this.getCostUnit=function(){return r.variables.PROC_UCOST},this.getCost=function(){return r.quantity*r.getCostUnit()},this.getCostType=function(){return r.variables.PROC_COSTTYPE}}return g(t,null,[{key:"fromPanelProcessData",value:function(e){return new t(e.key,e.messages,e.documents,e.variables,0)}}])}(),Le=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){if(!t)return this;var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.add(a.key,Ve.fromPanelProcessData(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ot),We=g((function t(e,s,n,a,i,r,o,u,l,h,c){f(this,t),this.key=e,this.refPanel=s,this.refPanelProcess=n,this.messages=a,this.documents=i,this.variables=r,this.name=o,this.quantity=u,this.unitOfMeasure=l,this.cost=h,this.mask=c,this.resource="processZones"}));We.fromProcessZoneBusiness=function(t){return t.createViewModel()};var je=function(){function t(e,s,n,a,i,r){var o=this;f(this,t),this.key=e,this.refPanel=s,this.refPanelProcess=n,this.messages=a,this.documents=i,this.variables=r,this.createViewModel=function(){return new We(o.key,o.refPanel,o.refPanelProcess,Rt.fromMessagesRaw(o.messages,o.getName(),"Process Zone"),o.documents,o.variables,o.getName(),o.getQuantity(),o.getUnitOfMeasure(),o.getCost(),o.getMask())},this.getName=function(){return o.variables.PROC_ZONENAME},this.getQuantity=function(){return o.variables.PROC_ZONE_QTT},this.getUnitOfMeasure=function(){return o.variables.PROC_ZONE_QTT_UNIT},this.getCost=function(){return o.variables.PROC_ZONE_COST},this.getMask=function(){return o.variables.PROC_ZONEMASK},this.getCostUnit=function(){return o.panelProcess?o.panelProcess.getCostUnit():0},this.getCostType=function(){return o.panelProcess?o.panelProcess.getCostType():0}}return g(t,null,[{key:"fromProcessZoneData",value:function(e){return new t(e.key,e.refPanel,e.refPanelProcess,e.messages,e.documents,e.variables)}}])}(),_e=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){if(!t)return this;var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.add(a.key,je.fromProcessZoneData(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ot),Qe=function(){return g((function t(e,s,n,a,i,r,o,u,l,h,c,g,d,v,m,y,p,b,k,P){var w=this;f(this,t),this.key=e,this.refPart=s,this.refMaterial=n,this.messages=a,this.documents=i,this.swcps=r,this.variables=o,this.heritedVariables=u,this.typedObjectVariables=l,this.name=h,this.description=c,this.configuration=g,this.quantity=d,this.length=v,this.lengthTotal=m,this.width=y,this.thickness=p,this.angle1=b,this.angle2=k,this.cutlist=P,this.resource="weldments",this.addChildren=function(t){w.children||(w.children=[]),w.children.push(t)}}),null,[{key:"fromWeldmentBusiness",value:function(t){return t.createViewModel()}},{key:"fromWeldmentBusinessChild",value:function(t){return t.createViewModelChild()}}])}(),Fe=function(){return g((function t(e,s,n,a,i,r){var o=this;f(this,t),this.key=e,this.refPart=s,this.refMaterial=n,this.messages=a,this.documents=i,this.variables=r,this.getDocuments=function(){return new _t(o.documents).getDocuments()},this.getSwcps=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.swcps)&&void 0!==t?t:{}},this.getHeritedVariables=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.heritedVariables)&&void 0!==t?t:{}},this.getTypedObjectVariables=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.typedObjectVariables)&&void 0!==t?t:{}},this.getName=function(){var t;return null!==(t=o.variables.ST_N)&&void 0!==t?t:""},this.getDescription=function(){var t;return null!==(t=o.variables.MBS_Description)&&void 0!==t?t:""},this.getConfiguration=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.getConfiguration())&&void 0!==t?t:""},this.getPartQuantity=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.getQuantity())&&void 0!==t?t:0},this.getQuantity=function(){var t;return null!==(t=o.variables.MBS_Quantity)&&void 0!==t?t:0*o.getPartQuantity()},this.getLength=function(){return o.variables.MBS_Length},this.getLengthTotal=function(){return o.variables.MBS_TotalLength},this.getWidth=function(){return o.variables.ST_W},this.getThickness=function(){return o.variables.ST_T},this.getAngle1=function(){var t;return null!==(t=o.variables.MBS_Angle1)&&void 0!==t?t:""},this.getAngle2=function(){var t;return null!==(t=o.variables.MBS_Angle2)&&void 0!==t?t:""},this.getCutlist=function(){var t;return null!==(t=o.variables.MBS_Cutlist)&&void 0!==t?t:""}}),[{key:"createViewModel",value:function(){return new Qe(this.key,this.refPart,this.refMaterial,Rt.fromMessagesRaw(this.messages,this.getName(),"Weldment"),this.getDocuments(),this.getSwcps(),this.variables,this.getHeritedVariables(),this.getTypedObjectVariables(),this.getCutlist(),this.getDescription(),this.getConfiguration(),this.getQuantity(),this.getLength(),this.getLengthTotal(),this.getWidth(),this.getThickness(),this.getAngle1(),this.getAngle2(),this.getCutlist())}},{key:"createViewModelChild",value:function(){return new Qe(this.key,this.refPart,this.refMaterial,Rt.fromMessagesRaw(this.messages,this.getName(),"Weldment"),this.getDocuments(),this.getSwcps(),this.variables,this.getHeritedVariables(),this.getTypedObjectVariables(),this.getName(),this.getDescription(),this.getConfiguration(),1,this.getLength(),this.getLengthTotal(),this.getWidth(),this.getThickness(),this.getAngle1(),this.getAngle2(),this.getCutlist())}}])}();(L=Fe).fromStockData=function(t){return new L(t.key,t.refPart,t.refMaterial,t.messages,t.documents,t.variables)};var He=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a,i=e.value;null!==(a=i.material)&&void 0!==a&&a.variables.WELDMENT&&this.add(i.key,Fe.fromStockData(i))}}catch(r){s.e(r)}finally{s.f()}return this}}])}(Ot),Ue=function(){return g((function t(e,s,n,a,i,r,o,u,l,h,c,g){f(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a,this.name=i,this.description=r,this.cost=o,this.costUnit=u,this.costType=l,this.quantity=h,this.type=c,this.unitOfMeasure=g}),null,[{key:"fromMaterialBusiness",value:function(t){return t.createViewModel()}}])}(),Ge=g((function t(e,s,n,a,i,r){var o=this;f(this,t),this.key=e,this.description=s,this.messages=n,this.documents=a,this.variables=i,this.quantity=r,this.createViewModel=function(){return new Ue(o.key,Rt.fromMessagesRaw(o.messages,o.getName(),"Weldment Material"),o.getDocuments(),o.variables,o.getName(),o.description,o.getCost(),o.getCostUnit(),o.getCostType(),o.quantity,o.getType(),o.getUnitOfMeasure())},this.getDocuments=function(){return new _t(o.documents).getDocuments()},this.getName=function(){var t;return null!==(t=o.variables.MAT_NAME)&&void 0!==t?t:""},this.getDescription=function(){var t;return null!==(t=o.variables.MAT_DESC)&&void 0!==t?t:""},this.getCostUnit=function(){var t;return null!==(t=o.variables.MAT_UCOST)&&void 0!==t?t:0},this.getCostType=function(){var t;return null!==(t=o.variables.MAT_COSTTYPE)&&void 0!==t?t:0},this.getBoardLength=function(){var t;return null!==(t=o.variables.BOARD_LENGTH)&&void 0!==t?t:0},this.getBoardWidth=function(){var t;return null!==(t=o.variables.BOARD_WIDTH)&&void 0!==t?t:0},this.getUnitOfMeasure=function(){switch(o.getCostType()){case 0:return"mÂ³";case 1:return"mÂ²";case 2:return"m";case 3:return"unit";default:return"unknown"}},this.getCost=function(){return o.quantity*o.getCostUnit()},this.getType=function(){var t;return null!==(t=o.variables.MAT_TYPE)&&void 0!==t?t:0},this.getIsWeldment=function(){var t;return null!==(t=o.variables.WELDMENT)&&void 0!==t&&t}}));(W=Ge).fromMaterialData=function(t,e){return new W("".concat(t.key,"-").concat(e.getDescription()," "),e.getDescription(),t.messages,t.documents,t.variables,e.getLengthTotal()/1e3)};var xe=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t,e){var s,a=n(e);try{for(a.s();!(s=a.n()).done;){var i=s.value,r=t.get(i.refMaterial);if(r&&r.getIsWeldment()){var o=Ge.fromMaterialData(r,i);this.add(o.key,o)}}}catch(u){a.e(u)}finally{a.f()}return this}}])}(Ot),qe=g((function t(e,s,n,a,i,r,o,u,l,h,c){f(this,t),this.key=e,this.messages=s,this.documents=n,this.swcps=a,this.variables=i,this.heritedVariables=r,this.typedObjectVariables=o,this.name=u,this.description=l,this.configuration=h,this.quantity=c,this.resource="excluded"}));qe.fromExcludedBusiness=function(t){return t.createViewModel()};var Ze=function(){return g((function t(e,s,n,a,i,r,o,u,l){var h=this;f(this,t),this.key=e,this.messages=s,this.heritedVariables=n,this.typedObjectVariables=a,this.refParts=i,this.refAssemblies=r,this.documents=o,this.swcps=u,this.variables=l,this.parts=[],this.assemblies=[],this.getDocuments=function(){return new _t(h.documents).getDocuments()},this.getName=function(){return h.variables.NAME},this.getDescription=function(){return h.variables.DESC},this.getConfiguration=function(){return h.variables.CONF},this.getQuantity=function(){return h.variables.NB}}),[{key:"createViewModel",value:function(){return new qe(this.key,Rt.fromMessagesRaw(this.messages,this.getName(),"Excluded"),this.getDocuments(),this.swcps,this.variables,this.heritedVariables,this.typedObjectVariables,this.getName(),this.getDescription(),this.getConfiguration(),this.getQuantity())}}])}();(j=Ze).fromAssemblyPartBusiness=function(t){return new j(t.key,t.messages,t.heritedVariables,t.typedObjectVariables,"refParts"in t?t.refParts:[],"refAssemblies"in t?t.refAssemblies:[],t.documents,t.swcps,t.variables)};var Ye=function(t){function e(){var t;return f(this,e),(t=r(this,e,arguments)).FrameTypedObjectName="EXCLUDED",t}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s,a=n(null!==(e=t.getInstancesByName(this.FrameTypedObjectName))&&void 0!==e?e:[]);try{for(a.s();!(s=a.n()).done;){var i=s.value;this.addInstance(i.key,Ze.fromAssemblyPartBusiness(i))}}catch(r){a.e(r)}finally{a.f()}return this}}])}(Xt),ze=function(){return g((function t(e,s,n,a,i,r,o,u,l,h,c,g,d,v,m,y,p,b,k,P,w,M,D,I,T,A,C,S){f(this,t),this.key=e,this.name=s,this.url=n,this.refBoard=a,this.quantity=i,this.length=r,this.width=o,this.thickness=u,this.cutterThickness=l,this.areaTotal=h,this.areaPanels=c,this.areaWaste=g,this.areaTrims=d,this.areaCuts=v,this.percentagePanels=m,this.percentageWaste=y,this.percentageTrims=p,this.quantityPanels=b,this.quantityWaste=k,this.quantityTrims=P,this.quantityCuts=w,this.lengthCuts=M,this.stock=D,this.refPanels=I,this.items=T,this.cuts=A,this.trims=C,this.waste=S,this.resource="patterns",this.panels=[]}),null,[{key:"fromPatternBusiness",value:function(t){return t.createViewModel()}}])}(),Xe=g((function t(e){f(this,t),this.cuts=[],this.length=e.length,this.width=e.width,this.cutDirection=e.cutDirection,this.coordinate=e.cutCoordinate,this.stockLeft=e.stockLeft?e.stockLeft:null,this.stockRight=e.stockRight?e.stockRight:null})),Ke=g((function t(e){var s,n;f(this,t),this.indexParent=-1,this.children=[],this.cuts=[],this.parent=null,this.quantity=1,this.stock=e,this.type=e.type,this.length=e.length,this.width=e.width,this.grain=e.grain,this.cutDirection=e.cutDirection,this.cutterThickness=e.cutterThickness,this.name=null!==(s=null!==(n=e.name)&&void 0!==n?n:e.type)&&void 0!==s?s:"group",this.cutCoordinate=e.cutCoordinate,this.x=e.x,this.y=e.y,this.parent=e.parent?new t(e.parent):null})),$e=function(){return g((function t(e){var s,n;f(this,t),this.parent=null,this.index=0,this.indexPanel=0,this.indexParent=-1,this.children=[],this.cuts=[],this.stock=e,this.type=e.type,this.length=e.length,this.width=e.width,this.grain=e.grain,this.cutDirection=e.cutDirection,this.cutterThickness=e.cutterThickness,this.name=null!==(s=null!==(n=e.name)&&void 0!==n?n:e.type)&&void 0!==s?s:"group",this.cutCoordinate=e.cutCoordinate,this.x=e.x,this.y=e.y,this.parent=e.parent?new t(e.parent):null}),[{key:"getTrimSide",value:function(t){var e,s=n(this.children);try{for(s.s();!(e=s.n()).done;){var a=e.value;if("trimming"===a.type||"padding"===a.type){if("length"===t&&"V"===this.cutDirection)return this.cutCoordinate;if("width"===t&&"H"===this.cutDirection)return this.cutCoordinate}}}catch(i){s.e(i)}finally{s.f()}return 0}},{key:"getGroupedNodes",value:function(){var t,e=[],s=n(this.children);try{for(s.s();!(t=s.n()).done;){var a=t.value,i=new Ke(a.stock);this.isPreviousEqual(i,e[e.length-1])?e[e.length-1].quantity++:e.push(i)}}catch(r){s.e(r)}finally{s.f()}return e}},{key:"isPreviousEqual",value:function(t,e){return!!e&&(t.length===e.length&&t.width===e.width&&t.type===e.type)}}])}(),Je=function(){return g((function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;f(this,t),this.type=e.type,this.length=1e3*e.length,this.width=1e3*e.width,this.cutDirection=e.cut,this.name=""!=e["panel-name"]?e["panel-name"]:null,this.cutCoordinate=1e3*e["cut-coordinate"],this.grain=e["grain-direction"],this.cutterThickness=2*e["cut-half-thickness"]*1e3,this.parent=s,this.x=n,this.y=a;var i=0,r=0,o=0,u=0;"V"===e.cut&&(o=this.x+this.cutCoordinate+this.cutterThickness,u=this.y,i=this.x,r=this.y),"H"===e.cut&&(o=this.x,u=this.y+this.cutCoordinate+this.cutterThickness,i=this.x,r=this.y),this.stockLeft=e["left-stock"]?new t(e["left-stock"],this,i,r):null,this.stockRight=e["right-stock"]?new t(e["right-stock"],this,o,u):null}),[{key:"getTreeStructure",value:function(){var t=new $e(this),e=this.findChildren(t,this.stockLeft),n=this.findChildren(t,this.stockRight);t.children=[].concat(s(e),s(n));var a=new Xe(this),i=this.findCuts(a,this.stockLeft),r=this.findCuts(a,this.stockRight);return t.cuts=[].concat(s(i),s(r)),t}},{key:"findChildren",value:function(t,e){if(!e)return[];var n=new $e(e);if(n.indexParent=t.index,null===e.type){if(t.cutDirection===e.cutDirection){var a=this.findChildren(t,e.stockLeft),i=this.findChildren(t,e.stockRight);return[].concat(s(a),s(i))}var r=this.findChildren(n,e.stockLeft),o=this.findChildren(n,e.stockRight);n.children=[].concat(s(r),s(o))}return[n]}},{key:"findCuts",value:function(t,e){if(!e)return[];var n=new Xe(e);if(null===e.type){if(t.cutDirection===e.cutDirection){var a=this.findCuts(t,e.stockLeft),i=this.findCuts(t,e.stockRight);return[].concat(s(a),s(i))}var r=this.findCuts(n,e.stockLeft),o=this.findCuts(n,e.stockRight);n.cuts=[].concat(s(r),s(o))}return[n]}}])}(),ts=function(){return g((function t(e,s,n,a,i,r,u,l,h,c){f(this,t),this.key=e,this.name=s,this.material=n,this.stock=a,this.length=i,this.width=r,this.thickness=u,this.cutterThickness=l,this.panelsBusiness=h,this.url=c,this.getQuantity=function(){return o.getInstance().projectQuantity}}),[{key:"createViewModel",value:function(){return new ze(this.key,this.name,this.url,this.material,this.getQuantity(),this.length,this.width,1e3*this.thickness,this.cutterThickness,this.getTotalArea(),this.getPanelArea(),this.getWasteArea(),this.getTrimArea(),this.getCutArea(),this.getPanelAreaPercentage(),this.getWasteAreaPercentage(),this.getTrimAreaPercentage(),this.getRefPanels().length,this.getTrims().length,this.getWaste().length,this.getCuts().length,this.getLengthCuts(),this.stock,this.getRefPanels(),this.getItems(),this.getCuts(),this.getTrims(),this.getWaste())}},{key:"getCuts",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;return e||(e=this.stock),e.cutDirection&&t.push(new Xe(e)),e.stockLeft&&this.getCuts(t,e.stockLeft),e.stockRight&&this.getCuts(t,e.stockRight),t}},{key:"getItems",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=[],a=n(this.getFlattenedTreeStructure(e));try{for(a.s();!(t=a.n()).done;){var i=t.value;i.type&&s.push(i)}}catch(r){a.e(r)}finally{a.f()}return s}},{key:"getPanels",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=[],a=n(this.getFlattenedTreeStructure(e));try{for(a.s();!(t=a.n()).done;){var i=t.value;"item"===i.type&&s.push(i)}}catch(r){a.e(r)}finally{a.f()}return s}},{key:"getRefPanels",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=[],a=n(this.getFlattenedTreeStructure(e));try{for(a.s();!(t=a.n()).done;){var i,r=t.value;"item"===r.type&&s.push(null!==(i=r.name)&&void 0!==i?i:"")}}catch(o){a.e(o)}finally{a.f()}return s}},{key:"getLengthCuts",value:function(t){var e,s=0,a=n(this.getCuts());try{for(a.s();!(e=a.n()).done;){var i=e.value;"V"===i.cutDirection&&(s+=i.width),"H"===i.cutDirection&&(s+=i.length)}}catch(o){a.e(o)}finally{a.f()}var r=s/1e3;return t?parseFloat(r.toFixed(2)):r}},{key:"getTrims",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=[],a=n(this.getFlattenedTreeStructure(e));try{for(a.s();!(t=a.n()).done;){var i=t.value;"trimming"!==i.type&&"padding"!==i.type||s.push(i)}}catch(r){a.e(r)}finally{a.f()}return s}},{key:"getWaste",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=[],a=n(this.getFlattenedTreeStructure(e));try{for(a.s();!(t=a.n()).done;){var i=t.value;"waste"===i.type&&s.push(i)}}catch(r){a.e(r)}finally{a.f()}return s}},{key:"getTreeStructure",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.stock.getTreeStructure();return t&&this.reverseChildren(e),this.assignIndexes(e)}},{key:"getFlattenedTreeStructure",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.getTreeStructure(t),s=[];return this.flattenTree(e,s),s}},{key:"getTotalArea",value:function(t){var e=this.length*this.width/1e6;return t?parseFloat(e.toFixed(2)):e}},{key:"getPanelArea",value:function(t){var e,s=0,a=n(this.getPanels());try{for(a.s();!(e=a.n()).done;){var i=e.value;s+=i.length*i.width}}catch(o){a.e(o)}finally{a.f()}var r=s/1e6;return t?parseFloat(r.toFixed(2)):r}},{key:"getPanelAreaPercentage",value:function(t){var e=this.getPanelArea()/this.getTotalArea()*100;return t?parseFloat(e.toFixed(2)):e}},{key:"getWasteArea",value:function(t){var e,s=0,a=n(this.getWaste());try{for(a.s();!(e=a.n()).done;){var i=e.value;s+=i.length*i.width}}catch(o){a.e(o)}finally{a.f()}var r=s/1e6;return t?parseFloat(r.toFixed(2)):r}},{key:"getWasteAreaPercentage",value:function(t){var e=this.getWasteArea()/this.getTotalArea()*100;return t?parseFloat(e.toFixed(2)):e}},{key:"getTrimArea",value:function(t){var e,s=0,a=n(this.getTrims());try{for(a.s();!(e=a.n()).done;){var i=e.value;s+=i.length*i.width}}catch(o){a.e(o)}finally{a.f()}var r=s/1e6;return t?parseFloat(r.toFixed(2)):r}},{key:"getCutArea",value:function(t){var e,s=0,a=n(this.getCuts());try{for(a.s();!(e=a.n()).done;){var i=e.value;"V"===i.cutDirection&&(s+=i.width*this.cutterThickness),"H"===i.cutDirection&&(s+=i.length*this.cutterThickness)}}catch(o){a.e(o)}finally{a.f()}var r=s/1e6;return t?parseFloat(r.toFixed(2)):r}},{key:"getTrimAreaPercentage",value:function(t){var e=this.getTrimArea()/this.getTotalArea()*100;return t?parseFloat(e.toFixed(2)):e}},{key:"getFirstTrimSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.stock;return"trimming"===t.type||"padding"===t.type?t.parent.cutCoordinate:t.stockLeft?this.getFirstTrimSize(t.stockLeft):t.stockRight?this.getFirstTrimSize(t.stockRight):void 0}},{key:"assignIndexes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{index:0,panelIndex:0};t.index=e.index++,"item"===t.type&&(t.indexPanel=e.panelIndex++);var s,a=n(t.children);try{for(a.s();!(s=a.n()).done;){var i=s.value;this.assignIndexes(i,e)}}catch(r){a.e(r)}finally{a.f()}return t}},{key:"flattenTree",value:function(t,e){if(e.push(t),t.children){var s,a=n(t.children);try{for(a.s();!(s=a.n()).done;){var i=s.value;this.flattenTree(i,e)}}catch(r){a.e(r)}finally{a.f()}}}},{key:"reverseChildren",value:function(t){if(t.children){t.children.reverse();var e,s=n(t.children);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.reverseChildren(a)}}catch(i){s.e(i)}finally{s.f()}}}}])}();(_=ts).fromPatternData=function(t,e){var s=new Je(t.stock);return new _(t.key,t.name,t.material,s,s.length,s.width,t.thickness,s.cutterThickness,e,"patterns/".concat(t.name))};var es=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t,e){var s,a=n(t);try{for(a.s();!(s=a.n()).done;){var i=s.value;this.add(i.key,ts.fromPatternData(i,e))}}catch(r){a.e(r)}finally{a.f()}return this}}])}(Ot),ss=function(){return g((function t(e,s,n,a,i,r,o,u,l,h,c,g,d){f(this,t),this.key=e,this.name=s,this.description=n,this.length=a,this.width=i,this.thickness=r,this.count=o,this.quantity=u,this.type=l,this.unitOfMeasure=h,this.cost=c,this.costUnit=g,this.refMaterial=d,this.resource="materials.board"}),null,[{key:"fromBoardMaterialBusiness",value:function(t){return t.createViewModel()}}])}(),ns=function(){return g((function t(e,s){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};f(this,t),this.type=e,this.key=s,this.variables=a,this.articleVariables=i,this.createViewModel=function(){return new ss(n.key,n.getName(),n.getDescription(),n.getLength(),n.getWidth(),n.getThickness(),n.getCount(),n.getQuantity(),n.getType(),n.getUnitOfMeasure(),n.getCost(),n.getCostUnit(),n.getRefMaterial())},this.getName=function(){var t;if("article"===n.type){var e=n.parseMaterialSize(n.articleVariables.name);return e?e.name:""}return null!==(t=n.variables.NBOARD_NAME)&&void 0!==t?t:""},this.getDescription=function(){var t;if("article"===n.type){var e=n.parseMaterialSize(n.articleVariables.name);return e?e.name:""}return null!==(t=n.variables.NBOARD_DESC)&&void 0!==t?t:""},this.getLength=function(){var t;if("article"===n.type){var e=n.parseMaterialSize(n.articleVariables.name);return e?e.length:0}return null!==(t=n.variables.NBOARD_L)&&void 0!==t?t:0},this.getWidth=function(){var t;if("article"===n.type){var e=n.parseMaterialSize(n.articleVariables.name);return e?e.width:0}return null!==(t=n.variables.NBOARD_W)&&void 0!==t?t:0},this.getThickness=function(){var t;return"article"===n.type?0:null!==(t=n.variables.NBOARD_T)&&void 0!==t?t:0},this.getCount=function(){return"article"===n.type?n.articleVariables.count:0},this.getQuantity=function(){var t,e;return"article"===n.type?(null!==(t=n.articleVariables.quantity)&&void 0!==t?t:0)*o.getInstance().projectQuantity:(null!==(e=n.variables.NBOARD_QTY)&&void 0!==e?e:0)*o.getInstance().projectQuantity},this.getType=function(){var t;return"article"===n.type?-1:null!==(t=n.variables.NBOARD_TYPE)&&void 0!==t?t:0},this.getUnitOfMeasure=function(){return"u"},this.getCost=function(){return"article"===n.type?n.articleVariables.cost*o.getInstance().projectQuantity:n.getQuantity()*n.getCostUnit()},this.getCostUnit=function(){var t;return"article"===n.type?n.articleVariables.costUnit:null!==(t=n.variables.NBOARD_COST)&&void 0!==t?t:0},this.getRefMaterial=function(){var t;return"article"===n.type?n.getName():null!==(t=n.variables.NBOARD_MATNAME)&&void 0!==t?t:""}}),[{key:"parseMaterialSize",value:function(t){var s=t.match(/^(.+?)\s*\((\d+)x(\d+)\)$/);if(!s)return null;var n=e(s,4),a=n[1],i=n[2],r=n[3];return{name:a.trim(),length:parseInt(i,10),width:parseInt(r,10)}}}])}();(Q=ns).fromBoardMaterialData=function(t){return new Q(t.type,t.key,t.variables,t.articleVariables)};var as=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.add(a.key,ns.fromBoardMaterialData(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Ot),is=g((function t(e,s,n,a,i,r,o,u,l,h,c,g,d,v,m,y,p,b,k,P,w,M,D,I,T){f(this,t),this.key=e,this.messages=s,this.refParts=n,this.refPartsQuantities=a,this.refAssemblies=i,this.refAssembliesQuantities=r,this.documents=o,this.swcps=u,this.variables=l,this.heritedVariables=h,this.typedObjectVariables=c,this.id=g,this.name=d,this.description=v,this.configuration=m,this.quantity=y,this.height=p,this.width=b,this.depth=k,this.url=P,this.images=w,this.pdfs=M,this.cost=D,this.costPanels=I,this.costHardware=T,this.resource="subFrames",this.parts=[],this.assemblies=[],this.panels=[],this.programs=[],this.hardware=[],this.weldments=[]}));is.fromFrameBusiness=function(t){return t.createViewModel()};var rs=function(){return g((function t(e,s,a,i,r,u,l,h,c,g,d){var v=this;f(this,t),this.key=e,this.messages=s,this.heritedVariables=a,this.typedObjectVariables=i,this.refParts=r,this.refPartsQuantities=u,this.refAssemblies=l,this.refAssembliesQuantities=h,this.documents=c,this.swcps=g,this.variables=d,this.parts=[],this.assemblies=[],this.panels=[],this.programs=[],this.hardware=[],this.weldments=[],this.getID=function(){return v.variables.ID},this.getName=function(){return v.variables.NAME},this.getDescription=function(){return v.variables.DESC},this.getConfiguration=function(){return v.variables.CONF},this.getQuantity=function(){var t;return(null!==(t=v.variables.NB)&&void 0!==t?t:0)*o.getInstance().projectQuantity},this.getHeight=function(){var t;return null!==(t=v.variables.Height)&&void 0!==t?t:0},this.getWidth=function(){var t;return null!==(t=v.variables.Width)&&void 0!==t?t:0},this.getDepth=function(){var t;return null!==(t=v.variables.Depth)&&void 0!==t?t:0},this.getImages=function(){return new Vt(v.documents).getImages()},this.getPDFs=function(){return new Qt(v.documents).getPDFs()},this.getDocuments=function(){return new _t(v.documents).getDocuments()},this.getUrl=function(){return"frames/".concat(v.key)},this.getCostPanels=function(){var t,e=0,s=n(v.panels);try{for(s.s();!(t=s.n()).done;){e+=t.value.getCost()}}catch(a){s.e(a)}finally{s.f()}return e},this.getCostHardware=function(){var t,e=0,s=n(v.hardware);try{for(s.s();!(t=s.n()).done;){e+=t.value.getCost()}}catch(a){s.e(a)}finally{s.f()}return e},this.getCost=function(){return v.getCostPanels()+v.getCostHardware()},this.getIsExcluded=function(){return null!=v.typedObjectVariables&&"EXCLUDED"in v.typedObjectVariables}}),[{key:"createViewModel",value:function(){return new is(this.key,Rt.fromMessagesRaw(this.messages,this.getName(),"Frame",this.getUrl()),this.refParts,this.refPartsQuantities,this.refAssemblies,this.refAssembliesQuantities,this.getDocuments(),this.swcps,this.variables,this.heritedVariables,this.typedObjectVariables,this.getID(),this.getName(),this.getDescription(),this.getConfiguration(),this.getQuantity(),this.getHeight(),this.getWidth(),this.getDepth(),this.getUrl(),this.getImages(),this.getPDFs(),this.getCost(),this.getCostPanels(),this.getCostHardware())}}])}();(F=rs).fromAssemblyPartBusiness=function(t){return new F(t.key,t.messages,t.heritedVariables,t.typedObjectVariables,"refParts"in t?t.refParts:[],"refPartsQuantities"in t?t.refPartsQuantities:[],"refAssemblies"in t?t.refAssemblies:[],"refAssembliesQuantities"in t?t.refAssembliesQuantities:[],t.documents,t.swcps,t.variables)};var os=function(t){function e(){var t;return f(this,e),(t=r(this,e,arguments)).FrameTypedObjectName="SUBFRAME",t}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s,a=n(null!==(e=t.getInstancesByName(this.FrameTypedObjectName))&&void 0!==e?e:[]);try{for(a.s();!(s=a.n()).done;){var i=s.value;this.addInstance(i.key,rs.fromAssemblyPartBusiness(i))}}catch(r){a.e(r)}finally{a.f()}return this}}])}(Xt),us=function(){function t(e,s,n,a,i,r,o,u,l,h,c,g,d,v,m,y,p,b,k,P,w,M,D,I,T,A,C,S,B,E,O,N,R,V,L,W,j,_,Q,F,H,U,G,x,q,Z,Y,z,X,K,$,J){f(this,t),this.database=e,this.settings=s,this.projectBusiness=n,this.panelsBusiness=a,this.stocksBusiness=i,this.laminatesBusiness=r,this.partsBusiness=o,this.assembliesBusiness=u,this.edgebandsBusiness=l,this.edgebandMaterialsBusiness=h,this.materialsBusiness=c,this.weldmentMaterialsBusiness=g,this.boardMaterialsBusiness=d,this.programsBusiness=v,this.sheetBusiness=m,this.programPartsBusiness=y,this.toolsBusiness=p,this.spindlesBusiness=b,this.costsBusiness=k,this.typedObjectsBusiness=P,this.framesBusiness=w,this.subFramesBusiness=M,this.hardwaresBusiness=D,this.excludedItemsBusiness=I,this.panelProcessesBusiness=T,this.processZonesBusiness=A,this.weldmentsBusiness=C,this.patternsBusiness=S,this.panelBusinessManager=B,this.stockBusinessManager=E,this.laminateBusinessManager=O,this.partBusinessManager=N,this.assemblyBusinessManager=R,this.edgebandBusinessManager=V,this.edgebandMaterialBusinessManager=L,this.materialBusinessManager=W,this.weldmentMaterialBusinessManager=j,this.boardMaterialBusinessManager=_,this.programBusinessManager=Q,this.sheetBusinessManager=F,this.programPartBusinessManager=H,this.toolBusinessManager=U,this.spindleBusinessManager=G,this.costBusinessManager=x,this.frameBusinessManager=q,this.subFrameBusinessManager=Z,this.hardwareBusinessManager=Y,this.excludedBusinessManager=z,this.panelProcessBusinessManager=X,this.processZoneBusinessManager=K,this.weldmentBusinessManager=$,this.patternsBusinessManager=J}return g(t,[{key:"relateData",value:function(){return this.assignDataToProject(),this.assignDataToEdgebands(),this.assignDataToStocks(),this.assignDataToWeldments(),this.assignDataToLaminates(),this.assignDataToPanels(),this.assignDataToAssemblies(),this.assignSubAssemblies(),this.assignDataToFrames(),this.assignDataToSubFrames(),this.assignDataToParts(),this.assignDataToSheets(),this.assignDataToProgramParts(),this.assignDataToProcessZones(),this}},{key:"assignDataToProject",value:function(){var t,e=n(this.assemblyBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;if(this.projectBusiness.name===s.getName())return void(this.projectBusiness.component=s)}}catch(o){e.e(o)}finally{e.f()}var a,i=n(this.partBusinessManager.getAll());try{for(i.s();!(a=i.n()).done;){var r=a.value;if(this.projectBusiness.name===r.getName())return void(this.projectBusiness.component=r)}}catch(o){i.e(o)}finally{i.f()}}},{key:"assignDataToEdgebands",value:function(){var t,e=n(this.edgebandBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.edgebandMaterialBusinessManager.get(s.refMaterial),s.part=this.partBusinessManager.get(s.refPanel),s.panel=this.panelBusinessManager.get(s.refPanel)}}catch(a){e.e(a)}finally{e.f()}}},{key:"assignDataToStocks",value:function(){var t,e=n(this.stockBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.materialBusinessManager.get(s.refMaterial),s.part=this.partBusinessManager.get(s.refPart),s.panel=this.panelBusinessManager.get(s.refPart)}}catch(a){e.e(a)}finally{e.f()}}},{key:"assignDataToWeldments",value:function(){var t,e=n(this.weldmentBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.weldmentMaterialBusinessManager.get(s.refMaterial),s.part=this.partBusinessManager.get(s.refPart)}}catch(a){e.e(a)}finally{e.f()}}},{key:"assignDataToLaminates",value:function(){var t,e=n(this.laminateBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.materialBusinessManager.get(s.refMaterial),s.part=this.partBusinessManager.get(s.refPart),s.panel=this.panelBusinessManager.get(s.refPart)}}catch(a){e.e(a)}finally{e.f()}}},{key:"assignDataToPanels",value:function(){var t,e=this,s=n(this.panelBusinessManager.getAll());try{var a=function(){var s=t.value;s.project=e.projectBusiness;var a=e.partBusinessManager.get(s.key);a&&(s.part=a);var i,r=n(s.refStocks);try{for(r.s();!(i=r.n()).done;){var o=i.value,u=e.stockBusinessManager.get(o);if(u)s.stocks.push(u),"CORE"===u.variables.ST_N&&(s.material=u.material);else{var l=e.laminateBusinessManager.get(o);l&&s.laminates.push(l)}}}catch(w){r.e(w)}finally{r.f()}var h,c=n(s.refEdgebands);try{for(c.s();!(h=c.n()).done;){var g=h.value,d=e.edgebandBusinessManager.get(g);d&&s.edgebands.push(d)}}catch(w){c.e(w)}finally{c.f()}var f,v=n(s.refPrograms);try{for(v.s();!(f=v.n()).done;){var m=f.value,y=e.programBusinessManager.get(m);y&&s.programs.push(y)}}catch(w){v.e(w)}finally{v.f()}var p,b=n(s.refProcessZones);try{for(b.s();!(p=b.n()).done;){var k=p.value,P=e.processZoneBusinessManager.get(k);P&&s.processZones.push(P)}}catch(w){b.e(w)}finally{b.f()}s.isNested=e.programPartBusinessManager.getAll().some((function(t){return t.refPart===s.key})),s.isPatterned=e.patternsBusinessManager.getAll().some((function(t){return t.getRefPanels().includes(s.name)}))};for(s.s();!(t=s.n()).done;)a()}catch(i){s.e(i)}finally{s.f()}}},{key:"assignDataToAssemblies",value:function(){var t,e=n(this.assemblyBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,a=t.value,i=n(a.refParts);try{for(i.s();!(s=i.n()).done;){var r,o=s.value,u=this.partBusinessManager.get(o);u&&(null===(r=a.parts)||void 0===r||r.push(u))}}catch(f){i.e(f)}finally{i.f()}var l,h=n(a.refPrograms);try{for(h.s();!(l=h.n()).done;){var c,g=l.value,d=this.programBusinessManager.get(g);d&&(null===(c=a.programs)||void 0===c||c.push(d))}}catch(f){h.e(f)}finally{h.f()}}}catch(f){e.e(f)}finally{e.f()}}},{key:"assignSubAssemblies",value:function(){var t,e=n(this.assemblyBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,a=t.value,i=n(a.refAssemblies);try{for(i.s();!(s=i.n()).done;){var r,o=s.value,u=this.assemblyBusinessManager.get(o);u&&(null===(r=a.assemblies)||void 0===r||r.push(u))}}catch(l){i.e(l)}finally{i.f()}}}catch(l){e.e(l)}finally{e.f()}}},{key:"assignDataToFrames",value:function(){var t,e=n(this.frameBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,a=t.value,i=n(a.refParts);try{for(i.s();!(s=i.n()).done;){var r,o=s.value,u=this.partBusinessManager.get(o);u&&(null===(r=a.parts)||void 0===r||r.push(u));var l=this.panelBusinessManager.get(o);if(l){var h;null===(h=a.panels)||void 0===h||h.push(l);var c,g=n(l.programs);try{for(g.s();!(c=g.n()).done;){var d=c.value;a.programs.push(d)}}catch(k){g.e(k)}finally{g.f()}}var f=this.hardwareBusinessManager.get(o);f&&a.hardware.push(f)}}catch(k){i.e(k)}finally{i.f()}var v,m=n(a.refAssemblies);try{for(m.s();!(v=m.n()).done;){var y=v.value,p=this.assemblyBusinessManager.get(y);p&&a.assemblies.push(p);var b=this.hardwareBusinessManager.get(y);b&&a.hardware.push(b)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){e.e(k)}finally{e.f()}}},{key:"assignDataToSubFrames",value:function(){var t,e=n(this.subFrameBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,a=t.value,i=n(a.refParts);try{for(i.s();!(s=i.n()).done;){var r,o=s.value,u=this.partBusinessManager.get(o);u&&(null===(r=a.parts)||void 0===r||r.push(u));var l=this.panelBusinessManager.get(o);if(l){var h;null===(h=a.panels)||void 0===h||h.push(l);var c,g=n(l.programs);try{for(g.s();!(c=g.n()).done;){var d=c.value;a.programs.push(d)}}catch(k){g.e(k)}finally{g.f()}}var f=this.hardwareBusinessManager.get(o);f&&a.hardware.push(f)}}catch(k){i.e(k)}finally{i.f()}var v,m=n(a.refAssemblies);try{for(m.s();!(v=m.n()).done;){var y=v.value,p=this.assemblyBusinessManager.get(y);p&&a.assemblies.push(p);var b=this.hardwareBusinessManager.get(y);b&&a.hardware.push(b)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){e.e(k)}finally{e.f()}}},{key:"assignDataToParts",value:function(){var t,e=n(this.partBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,a=t.value;a.panel=a.refPanel?this.panelBusinessManager.get(a.refPanel):void 0;var i,r=n(null!==(s=a.refStocks)&&void 0!==s?s:[]);try{for(r.s();!(i=r.n()).done;){var o=i.value,u=this.stockBusinessManager.get(o);u&&a.stocks.push(u)}}catch(d){r.e(d)}finally{r.f()}var l,h=n(a.refPrograms);try{for(h.s();!(l=h.n()).done;){var c=l.value,g=this.programBusinessManager.get(c);g&&(a.programs.push(g),g.part=a)}}catch(d){h.e(d)}finally{h.f()}}}catch(d){e.e(d)}finally{e.f()}}},{key:"assignDataToSheets",value:function(){var t,e=n(this.sheetBusiness);try{for(e.s();!(t=e.n()).done;){var s,a,i=t.value,r=n(null!==(s=i.refProgramParts)&&void 0!==s?s:[]);try{for(r.s();!(a=r.n()).done;){var o=a.value,u=this.programPartBusinessManager.get(o);u&&i.programParts.push(u)}}catch(l){r.e(l)}finally{r.f()}}}catch(l){e.e(l)}finally{e.f()}}},{key:"assignDataToProgramParts",value:function(){var t,e=this,s=n(this.programPartsBusiness);try{var a=function(){var s=t.value,a=e.panelBusinessManager.get(s.refPart);s.panel=null!=a?a:void 0;var i=e.partBusinessManager.get(s.refPart);s.part=null!=i?i:void 0;var r=e.sheetBusinessManager.get(s.refProgram);s.sheet=null!=r?r:void 0;var o,u=n(e.sheetBusinessManager.getAll());try{for(u.s();!(o=u.n()).done;){var l=o.value;l.programParts.some((function(t){return t.refPart===s.refPart}))&&s.sheets.push(l)}}catch(h){u.e(h)}finally{u.f()}};for(s.s();!(t=s.n()).done;)a()}catch(i){s.e(i)}finally{s.f()}}},{key:"assignDataToProcessZones",value:function(){var t,e=n(this.processZonesBusiness);try{for(e.s();!(t=e.n()).done;){var s=t.value,a=this.panelProcessBusinessManager.get(s.refPanelProcess);s.panelProcess=a}}catch(i){e.e(i)}finally{e.f()}}}],[{key:"createFromRawDataNew",value:function(e,s){var n=Et.createFromRawData(e),a=Ft.fromProjectData(n.projectData),i=new ue;i.addInstances(n.materialsData);var r=new Se;r.addInstances(n.toolsData);var o=new pe;o.addInstances(n.programsData),o.addTools(r);var u=new Te;u.addInstances(n.stocksData),u.addMaterials(i);var l=new ve;l.addInstances(n.partsData),l.addStocks(u),l.addPrograms(o);var h=new Wt;h.addInstances(n.assembliesData),h.addPrograms(o),h.addParts(l),h.addAssemblies(h);var c=new ie;c.addInstances(n.stocksData,s);var g=new zt;g.addInstances(n.edgebandMaterialsData);var d=new qt;d.addInstances(n.edgebandsData),d.addMaterials(g);var f=(new Ne).addInstances(n.programsData),v=(new Pe).addInstances(n.programPartsData),m=(new Me).addInstances(n.spindlesData),y=(new Ut).addInstances(n.costsData),p=(new Be).addInstances(e,l,h),b=(new Jt).addInstances(p),k=(new os).addInstances(p),P=(new se).addInstances(p),w=(new Ye).addInstances(p),M=(new Le).addInstances(n.panelProcessesData),D=(new _e).addInstances(n.processZonesData),I=(new He).addInstances(n.stocksData),T=(new xe).addInstances(i,I.getAll()),A=(new as).addInstances(n.boardMaterialsData),C=new ge;C.addInstances(n.panelsData,s),C.addStocks(u),C.addEdgebands(d),C.addLaminates(c),C.addPrograms(o);var S=(new es).addInstances(n.patternsData,C.getAll());return new t(e,s,a,C.getAll(),u.getAll(),c.getAll(),l.getAll(),h.getAll(),d.getAll(),g.getAll(),i.getAll(),T.getAll(),A.getAll(),o.getAll(),f.getAll(),v.getAll(),r.getAll(),m.getAll(),y.getAll(),p.getAll(),b.getAll(),k.getAll(),P.getAll(),w.getAll(),M.getAll(),D.getAll(),I.getAll(),S.getAll(),C,u,c,l,h,d,g,i,T,A,o,f,v,r,m,y,b,k,P,w,M,D,I,S)}},{key:"createFromRawData",value:function(e,s){var n=Et.createFromRawData(e),a=Ft.fromProjectData(n.projectData),i=(new ue).addInstances(n.materialsData),r=(new pe).addInstances(n.programsData),o=(new ve).addInstances(n.partsData),u=(new Wt).addInstances(n.assembliesData),l=(new ge).addInstances(n.panelsData,s),h=(new Te).addInstances(n.stocksData),c=(new ie).addInstances(n.stocksData,s),g=(new qt).addInstances(n.edgebandsData),d=(new zt).addInstances(n.edgebandMaterialsData),f=(new Ne).addInstances(n.programsData),v=(new Pe).addInstances(n.programPartsData),m=(new Se).addInstances(n.toolsData),y=(new Me).addInstances(n.spindlesData),p=(new Ut).addInstances(n.costsData),b=(new Be).addInstances(e,o,u),k=(new Jt).addInstances(b),P=(new os).addInstances(b),w=(new se).addInstances(b),M=(new Ye).addInstances(b),D=(new Le).addInstances(n.panelProcessesData),I=(new _e).addInstances(n.processZonesData),T=(new He).addInstances(n.stocksData),A=(new xe).addInstances(i,T.getAll()),C=(new as).addInstances(n.boardMaterialsData),S=(new es).addInstances(n.patternsData,l.getAll());return new t(e,s,a,l.getAll(),h.getAll(),c.getAll(),o.getAll(),u.getAll(),g.getAll(),d.getAll(),i.getAll(),A.getAll(),C.getAll(),r.getAll(),f.getAll(),v.getAll(),m.getAll(),y.getAll(),p.getAll(),b.getAll(),k.getAll(),P.getAll(),w.getAll(),M.getAll(),D.getAll(),I.getAll(),T.getAll(),S.getAll(),l,h,c,o,u,g,d,i,A,C,r,f,v,m,y,p,k,P,w,M,D,I,T,S).relateData()}}])}(),ls=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstance(a.key,Nt.fromAssemblyBusiness(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Xt),hs=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstance(a.key,ss.fromBoardMaterialBusiness(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Xt),cs=function(t){function e(){var t;return f(this,e),(t=r(this,e,arguments)).findProjectComponent=function(t,e,s){var n=t.name,a=s.find((function(t){return t.name===n}));if(a)return a;var i=e.find((function(t){return t.name===n}));return i||null},t.getAll=function(){var e=Array.from(t.instances.values());return e.map((function(e){return t.clone(e)})),e},t}return l(e,t),g(e,[{key:"addInstances",value:function(t,e,s){var n=this.findProjectComponent(t,e,s);return n&&this.addInstance(n.key,n),this}},{key:"clone",value:function(t){return Object.assign(Object.create(Object.getPrototypeOf(t)),t)}}])}(Xt);cs.createBOM=function(t){var e,s,a,i=n(null!==(e=t.refPartsQuantities)&&void 0!==e?e:[]);try{for(i.s();!(a=i.n()).done;){var r=a.value.key;if(t.children)for(var o=(null===(u=t.children)||void 0===u?void 0:u.length)-1;o>=0;o--){var u;r===t.children[o].key&&t.children.splice(o,1)}}}catch(m){i.e(m)}finally{i.f()}var l,h=n(null!==(s=t.refAssembliesQuantities)&&void 0!==s?s:[]);try{for(h.s();!(l=h.n()).done;){var c=l.value,g=c.key,d=c.quantity;if(t.children)for(var f=(null===(v=t.children)||void 0===v?void 0:v.length)-1;f>=0;f--){var v;g===t.children[f].key&&--d>1&&t.children.splice(f,1)}}}catch(m){h.e(m)}finally{h.f()}return t};var gs=function(){function t(e,s){f(this,t),this.articles=e,this.cost=s}return g(t,null,[{key:"fromCostBusiness",value:function(e){return new t(e.articles,e.cost)}}])}(),ds=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){return this.addInstance("0",gs.fromCostBusiness(t[0])),this}}])}(Xt),fs=function(t){function s(){var t;return f(this,s),(t=r(this,s,arguments)).getGroupKey=function(t){var e;return"".concat(t.length,"_").concat(t.width,"_").concat(t.thickness,"_").concat(null===(e=t.material)||void 0===e?void 0:e.name)},t.getAllCombined=function(){var s,a=new Map,i=n(t.instances.values());try{for(i.s();!(s=i.n()).done;){var r=s.value,o=t.getGroupKey(r);a.has(o)||a.set(o,[]),a.get(o).push(r)}}catch(y){i.e(y)}finally{i.f()}var u,l=new Map,h=1,c=n(a);try{for(c.s();!(u=c.n()).done;){var g=e(u.value,2)[1];if(1===g.length){var d=g[0];l.set(d.name,d)}else{var f=g[0],v=g.reduce((function(t,e){return t+e.quantity}),0),m=Gt.createCombinedEdgeband(f,"Combined Edgeband ".concat(h++),v);m.children=g,m.part=f.part,m.panel=f.panel,m.material=f.material,l.set(m.name,m)}}}catch(y){c.e(y)}finally{c.f()}return Array.from(l.values())},t}return l(s,t),g(s,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstance(a.key,Gt.fromEdgebandBusiness(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Xt),vs=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstance(a.key,Zt.fromEdgebandMaterialBusiness(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Xt),ms=function(t){function e(){var t;return f(this,e),(t=r(this,e,arguments)).FrameTypedObjectName="EXCLUDED",t}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstance(a.key,qe.fromExcludedBusiness(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Xt),ys=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;a.getIsExcluded()||this.addInstance(a.key,Kt.fromFrameBusiness(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Xt),ps=function(t){function e(){var t;return f(this,e),(t=r(this,e,arguments)).FrameTypedObjectName="HARDWARE",t}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstance(a.key,te.fromHardwareBusiness(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Xt),bs=g((function t(){f(this,t)}));(H=bs).makeLabels=function(t){var e,s=[],n=0,a="programParts"===(null===(e=t[0])||void 0===e?void 0:e.resource),i=new Map;console.log(a);var r=function(t){for(var e=t.quantity>0?t.quantity:1,i=0;i<e;i++){var r=H.clone(t);r.instance=a?o(t):i+1,n++,r.instanceLabel=n,s.push(r)}},o=function(t){var e,s,n=null!==(e=t.refPart)&&void 0!==e?e:"",a=(null!==(s=i.get(n))&&void 0!==s?s:0)+1;return i.set(n,a),a};return null==t||t.forEach((function(t){"panels"===t.resource&&t.children&&0!==t.children.length?t.children.forEach((function(t){var e=H.clone(t);0!==e.combineId&&(e.name="Combined Panel ".concat(e.combineId)),r(e)})):r(t)})),s},H.clone=function(t){return Object.assign(Object.create(Object.getPrototypeOf(t)),t)},H.deepCopy=function(e){if(null==e)return e;if(e instanceof Date)return new Date(e.getTime());if(Array.isArray(e))return e.map((function(t){return H.deepCopy(t)}));if("object"===t(e)){var s={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=e[n];s[n]=H.deepCopy(a)}return s}return e};var ks=function(){return g((function t(e,s,n,a,i,r,o,u,l,h,c,g,d,v,m){f(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a,this.name=i,this.description=r,this.category=o,this.thickness=u,this.hasGrain=l,this.cost=h,this.costUnit=c,this.costType=g,this.quantity=d,this.type=v,this.unitOfMeasure=m}),null,[{key:"fromMaterialBusiness",value:function(t){return t.createViewModel()}}])}(),Ps=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;a.getIsWeldment()||1!==a.getType()||this.addInstance(a.key,ks.fromMaterialBusiness(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Xt),ws=function(t){function s(){var t;return f(this,s),(t=r(this,s,arguments)).combinedInstances=new Map,t.getLongest=function(t,e,s){return s?{length:t,width:e}:e>t?{width:e,length:t}:{length:t,width:e}},t.getGroupKey=function(e){var s,n,a,i,r,o=t.getLongest(e.length,e.width,null!==(s=null===(n=e.material)||void 0===n?void 0:n.hasGrain)&&void 0!==s&&s),u=o.length,l=o.width;return"".concat(u,"_").concat(l,"_").concat(e.thickness,"_").concat(null!==(a=null===(i=e.material)||void 0===i?void 0:i.hasGrain)&&void 0!==a&&a,"_").concat(null===(r=e.material)||void 0===r?void 0:r.name)},t.getAllCombined=function(){var s,a=new Map,i=n(t.instances.values());try{for(i.s();!(s=i.n()).done;){var r=s.value,o=t.getGroupKey(r);a.has(o)||a.set(o,[]),a.get(o).push(r)}}catch(y){i.e(y)}finally{i.f()}var u,l=new Map,h=1,c=n(a);try{for(c.s();!(u=c.n()).done;){var g=e(u.value,2)[1];if(1===g.length){var d=g[0];l.set(d.name,d)}else{var f=g[0],v=g.reduce((function(t,e){return t+e.quantity}),0),m=ne.createCombinedLaminate(f,"Combined Laminate ".concat(h++),v);m.children=g,m.part=f.part,m.panel=f.panel,m.material=f.material,l.set(m.name,m)}}}catch(y){c.e(y)}finally{c.f()}return Array.from(l.values())},t}return l(s,t),g(s,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstance(a.key,ne.fromLaminateBusiness(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Xt),Ms=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;a.getIsWeldment()||0!==a.getType()||this.addInstance(a.key,re.fromMaterialBusiness(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Xt),Ds=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t,e){var s,a=n(e);try{for(a.s();!(s=a.n()).done;){var i=s.value;this.addInstance("".concat(t,"-").concat(i.messageType),i)}}catch(r){a.e(r)}finally{a.f()}return this}},{key:"processMessages",value:function(t,e,s,n,a,i,r,o,u,l,h,c,g){this.processProjectMessages(t),this.processSourceMessages(e),this.processSourceMessages(s),this.processSourceMessages(n),this.processSourceMessages(a),this.processSourceMessages(i),this.processSourceMessages(r),this.processSourceMessages(o),this.processSourceMessages(u),this.processSourceMessages(l),this.processSourceMessages(h),this.processSourceMessages(c),this.processSourceMessages(g),this.processPanelMessages(e),this.processProgramMessages(u)}},{key:"processSourceMessages",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstances(a.key,a.messages)}}catch(i){s.e(i)}finally{s.f()}}},{key:"processProjectMessages",value:function(t){this.addInstances(t.name,t.messages)}},{key:"processPanelMessages",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.processPanelSize(a),this.processPanelLength(a),this.processPanelWidth(a),this.processPanelInvalidDimensions(a)}}catch(i){s.e(i)}finally{s.f()}}},{key:"processProgramMessages",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.processProgramEncodeMessage(a)}}catch(i){s.e(i)}finally{s.f()}}},{key:"processPanelSize",value:function(t){if(!1===t.hasGrain&&t.board.length>0&&t.board.width>0){var e=t.lengthStock<=t.board.length&&t.widthStock<=t.board.width,s=t.lengthStock<=t.board.width&&t.widthStock<=t.board.length;if(!e&&!s){var n=new Rt("ERROR","Error","size out of range. Panel Size: ".concat(t.lengthStock," x ").concat(t.widthStock," | Board: ").concat(t.board.length," x ").concat(t.board.width),"size out of range. Panel Size: ".concat(t.lengthStock," x ").concat(t.widthStock," | Board: ").concat(t.board.length," x ").concat(t.board.width),t.name,t.name,"Panel","");this.addInstance("".concat(t.key,"-").concat(n.message),n),t.messages.push(n)}}}},{key:"processPanelLength",value:function(t){if(t.board.length<t.lengthStock&&t.board.length>0&&t.hasGrain){var e=new Rt("ERROR","Error","length out of range. Length: ".concat(t.lengthStock," | Board: ").concat(t.board.length," x ").concat(t.board.width),"length out of range. Length: ".concat(t.lengthStock," | Board: ").concat(t.board.length," x ").concat(t.board.width),t.name,t.name,"Panel","");this.addInstance("".concat(t.key,"-").concat(e.message),e),t.messages.push(e)}}},{key:"processPanelWidth",value:function(t){if(t.board.width<t.widthStock&&t.board.width>0&&t.hasGrain){var e=new Rt("ERROR","Error","width out of range. Width: ".concat(t.widthStock," | Board: ").concat(t.board.length," x ").concat(t.board.width),"width out of range. Width: ".concat(t.widthStock," | Board: ").concat(t.board.length," x ").concat(t.board.width),t.name,t.name,"Panel","");this.addInstance("".concat(t.key,"-").concat(e.message),e),t.messages.push(e)}}},{key:"processPanelInvalidDimensions",value:function(t){if(0===t.length){var e=new Rt("ERROR","Error","invalid length dimension, value is 0","invalid length dimension, value is 0",t.name,t.name,"Panel","");this.addInstance("".concat(t.key,"-").concat(e.message),e),t.messages.push(e)}if(0===t.width){var s=new Rt("ERROR","Error","invalid width dimension, value is 0","invalid width dimension, value is 0",t.name,t.name,"Panel","");this.addInstance("".concat(t.key,"-").concat(s.message),s),t.messages.push(s)}if(0===t.thickness){var n=new Rt("ERROR","Error","invalid thickness dimension, value is 0","invalid thickness dimension, value is 0",t.name,t.name,"Panel","");this.addInstance("".concat(t.key,"-").concat(n.message),n),t.messages.push(n)}}},{key:"processProgramEncodeMessage",value:function(t){var e,s=null!==(e=t.variables.ENCODEMSG)&&void 0!==e?e:"";if(""!==s){var n=new Rt("ERROR","Error",s,s,t.name,t.name,"Program","");this.addInstance("".concat(t.key,"-").concat(s),n),t.messages.push(n)}}}])}(Xt),Is=function(t){function s(){var t;return f(this,s),(t=r(this,s,arguments)).combine=!1,t.getCombinedPanels=function(){var e=t.getAll();return s.generateCombinedPanels(e)},t}return l(s,t),g(s,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;if(!a.getIsExcluded())if(this.combine)if(0!==a.getCombineId()){var i="combined-panel-".concat(a.getCombineId()),r=this.instances.get(i),o=a.createViewModel();if(r)r.addChildren(o),r.quantity+=o.quantity,r.cost+=o.cost,r.description=this.mergeDescription(r.description,o.description);else{var u=a.createCombinedViewModel();u.addChildren(o),this.addInstance(u.key,u)}}else this.addInstance(a.key,a.createViewModel());else this.addInstance(a.key,a.createViewModel())}}catch(l){s.e(l)}finally{s.f()}return this}},{key:"get",value:function(t){var e=this.instances.get(t);if(e)return e;var s,a=n(this.instances.values());try{for(a.s();!(s=a.n()).done;){var i,r,o=s.value,u=n(null!==(i=o.children)&&void 0!==i?i:[]);try{for(u.s();!(r=u.n()).done;){if(r.value.key===t)return o}}catch(l){u.e(l)}finally{u.f()}}}catch(l){a.e(l)}finally{a.f()}}}],[{key:"generateCombinedPanels",value:function(t){var s,a=new Map,i=n(t);try{for(i.s();!(s=i.n()).done;){var r=s.value,o=r.combineId;a.has(o)||a.set(o,[]),a.get(o).push(r)}}catch(T){i.e(T)}finally{i.f()}var u,l,h,c=new Map,g=n(a);try{for(g.s();!(u=g.n()).done;){var d=e(u.value,2),f=d[0],v=d[1];if(0===f){var m,y=n(v);try{for(y.s();!(m=y.n()).done;){var p=m.value;c.set(p.key,p)}}catch(T){y.e(T)}finally{y.f()}}else{var b=v[0],k=v.reduce((function(t,e){return t+e.quantity}),0),P=le.createCombinedPanel(b,k);P.children=v,P.material=b.material;var w,M="",D=n(v);try{for(D.s();!(w=D.n()).done;){var I=w.value;l=M,h=I.description,M=l?h?l.includes(h)?l:"".concat(l," | ").concat(h):l:h}}catch(T){D.e(T)}finally{D.f()}P.description=M,c.set(P.name,P)}}}catch(T){g.e(T)}finally{g.f()}return Array.from(c.values())}}])}(Xt),Ts=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstance(a.key,a.createViewModel())}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Xt),As=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstance(a.key,de.fromPartBusiness(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Xt),Cs=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstance(a.key,ze.fromPatternBusiness(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Xt),Ss=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstance(a.key,a.createViewModel())}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Xt),Bs=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;a.refBoard||this.addInstance(a.key,me.fromProgramBusiness(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Xt),Es=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstance(a.key,be.fromProgramPartBusiness(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Xt),Os=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;a.refBoard&&this.addInstance(a.key,Ee.fromProgramBusiness(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Xt),Ns=g((function t(e,s,n,a){f(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a,this.resource="spindles"}));(U=Ns).fromSpindleBusiness=function(t){return new U(t.key,Rt.fromMessagesRaw(t.messages,t.key,"Spindle",""),t.documents,t.variables)};var Rs=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){if(!t)return this;var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstance(a.key,Ns.fromSpindleBusiness(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Xt),Vs=function(t){function s(){var t;return f(this,s),(t=r(this,s,arguments)).sourceInstances=new Map,t.combine=!0,t.getLongest=function(t,e,s){return s?{length:t,width:e}:e>t?{width:e,length:t}:{length:t,width:e}},t.getGroupKey=function(e){var s,n,a,i,r,o=t.getLongest(e.length,e.width,null!==(s=null===(n=e.material)||void 0===n?void 0:n.hasGrain)&&void 0!==s&&s),u=o.length,l=o.width;return"".concat(u,"_").concat(l,"_").concat(e.thickness,"_").concat(null!==(a=null===(i=e.material)||void 0===i?void 0:i.hasGrain)&&void 0!==a&&a,"_").concat(null===(r=e.material)||void 0===r?void 0:r.name)},t.combineStocks=function(){var s,a=new Map,i=n(t.sourceInstances.values());try{for(i.s();!(s=i.n()).done;){var r=s.value,o=t.getGroupKey(r);a.has(o)||a.set(o,[]),a.get(o).push(r)}}catch(P){i.e(P)}finally{i.f()}var u,l=new Map,h=1,c=n(a);try{for(c.s();!(u=c.n()).done;){var g=e(u.value,2)[1];if(1===g.length){var d=g[0];l.set(d.name,d)}else{var f=g[0],v=g.reduce((function(t,e){return t+e.quantity}),0),m=De.createCombinedStock(f,"Combined Stock ".concat(h++),v);m.children=g;var y,p="",b=n(g);try{for(b.s();!(y=b.n()).done;){var k=y.value;p=t.mergeDescription(p,k.description)}}catch(P){b.e(P)}finally{b.f()}m.description=p,l.set(m.name,m)}}}catch(P){c.e(P)}finally{c.f()}return Array.from(l.values())},t}return l(s,t),g(s,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a,i,r=e.value;null!==(a=r.material)&&void 0!==a&&a.getIsWeldment()||0===(null===(i=r.material)||void 0===i?void 0:i.getType())&&this.addSourceInstance(r.key,De.fromStockBusiness(r))}}catch(h){s.e(h)}finally{s.f()}var o,u=n(this.combine?this.combineStocks():Array.from(this.sourceInstances.values()));try{for(u.s();!(o=u.n()).done;){var l=o.value;this.addInstance(l.key,l)}}catch(h){u.e(h)}finally{u.f()}return this}},{key:"addSourceInstance",value:function(t,e){this.sourceInstances.set(t,e)}},{key:"get",value:function(t){var e=this.instances.get(t);if(e)return e;var s,a=n(this.instances.values());try{for(a.s();!(s=a.n()).done;){var i,r,o=s.value,u=n(null!==(i=o.children)&&void 0!==i?i:[]);try{for(u.s();!(r=u.n()).done;){if(r.value.key===t)return o}}catch(l){u.e(l)}finally{u.f()}}}catch(l){a.e(l)}finally{a.f()}}}])}(Xt),Ls=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;a.getIsExcluded()||this.addInstance(a.key,is.fromFrameBusiness(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Xt),Ws=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstance(a.key,Ae.fromToolBusiness(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Xt),js=g((function t(){var e=this;f(this,t),this.instances=new Map,this.addInstance=function(t,s){var n=e.instances.get(t);n?n.push(s):e.instances.set(t,[s])},this.addInstances=function(t,s,a){var i,r=n(t.typedObjects);try{for(r.s();!(i=r.n()).done;){var o=i.value,u=s.get(o);if(u){var l,h=n(u.variables.TOTYPES.split(";"));try{for(h.s();!(l=h.n()).done;){var c=l.value;e.addInstance(c,u)}}catch(m){h.e(m)}finally{h.f()}}var g=a.get(o);if(g){var d,f=n(g.variables.TOTYPES.split(";"));try{for(f.s();!(d=f.n()).done;){var v=d.value;e.addInstance(v,g)}}catch(m){f.e(m)}finally{f.f()}}}}catch(m){r.e(m)}finally{r.f()}return e},this.getInstancesByName=function(t){return e.instances.get(t)||void 0},this.getAll=function(){return Object.fromEntries(e.instances)}})),_s=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value,i=a.getCutlist(),r=this.instances.get(i);if(r)r.addChildren(Qe.fromWeldmentBusinessChild(a));else{var o=Qe.fromWeldmentBusiness(a);o.addChildren(Qe.fromWeldmentBusinessChild(a)),this.addInstance(i,o)}}}catch(u){s.e(u)}finally{s.f()}return this}},{key:"get",value:function(t){var e=this.instances.get(t);if(e)return e;var s,a=n(this.instances.values());try{for(a.s();!(s=a.n()).done;){var i,r,o=n(null!==(i=s.value.children)&&void 0!==i?i:[]);try{for(o.s();!(r=o.n()).done;){var u=r.value;if(u.key===t)return u}}catch(l){o.e(l)}finally{o.f()}}}catch(l){a.e(l)}finally{a.f()}}},{key:"getFromRefPart",value:function(t){for(var e=[],s=0,n=Array.from(this.instances.values());s<n.length;s++){var a=n[s];a.refPart===t&&e.push(a)}return e}}])}(Xt),Qs=function(t){function e(){return f(this,e),r(this,e,arguments)}return l(e,t),g(e,[{key:"addInstances",value:function(t){var e,s=n(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.addInstance(a.key,Ue.fromMaterialBusiness(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Xt);a("default",function(){function t(e,s,n,a,i,r,o,u,l,h,c,g,d,v,m,y,p,b,k,P,w,M,D,I,T,A,C,S,B,E,O,N,R,V,L,W,j,_,Q,F,H,U,G,x,q,Z,Y,z,X,K,$,J,tt,et,st){var nt=this;f(this,t),this.database=e,this.settings=s,this.project=n,this.panels=a,this.stocks=i,this.parts=r,this.assemblies=o,this.bom=u,this.edgebands=l,this.laminates=h,this.programs=c,this.sheets=g,this.programParts=d,this.tools=v,this.spindles=m,this.costs=y,this.messages=p,this.typedObjects=b,this.frames=k,this.subFrames=P,this.hardware=w,this.excluded=M,this.panelProcesses=D,this.processZones=I,this.weldments=T,this.patterns=A,this.materials=C,this.panelManager=S,this.stockManager=B,this.partManager=E,this.assemblyManager=O,this.edgebandManager=N,this.edgebandMaterialManager=R,this.laminateManager=V,this.materialManager=L,this.laminateMaterialManager=W,this.weldmentMaterialManager=j,this.boardMaterialManager=_,this.programManager=Q,this.sheetManager=F,this.programPartManager=H,this.toolManager=U,this.spindleManager=G,this.costManager=x,this.messageManager=q,this.typedObjectManager=Z,this.frameManager=Y,this.subFrameManager=z,this.hardwareManager=X,this.excludedManager=K,this.panelProcessManager=$,this.processZoneManager=J,this.weldmentManager=tt,this.patternManager=et,this.labelManager=st,this.relateData=function(){return nt.assignDataToProject(),nt.assignDataToEdgebands(),nt.assignDataToStocks(),nt.assignDataToWeldments(),nt.assignDataToLaminates(),nt.assignDataToPanels(),nt.assignDataToAssemblies(),nt.assignSubAssemblies(),nt.assignDataToFrames(),nt.assignDataToSubFrames(),nt.assignDataToParts(),nt.assignDataToSheets(),nt.assignDataToPrograms(),nt.assignDataToProgramParts(),nt.assignDataToProcessZones(),nt.assignDataToPatterns(),nt.assignDataToBoards(),nt.assignDataToTools(),nt}}return g(t,[{key:"assignDataToProject",value:function(){}},{key:"assignDataToEdgebands",value:function(){var t,e=n(this.edgebandManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.edgebandMaterialManager.get(s.refMaterial),s.part=this.partManager.get(s.refPanel),s.panel=this.panelManager.get(s.refPanel)}}catch(a){e.e(a)}finally{e.f()}}},{key:"assignDataToStocks",value:function(){var t,e=n(this.stockManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,a=t.value;this.assignDataToStock(a);var i,r=n(null!==(s=a.children)&&void 0!==s?s:[]);try{for(r.s();!(i=r.n()).done;){var o=i.value;this.assignDataToStock(o)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){e.e(u)}finally{e.f()}}},{key:"assignDataToStock",value:function(t){t.material=this.materialManager.get(t.refMaterial),t.material||console.warn("material not found for stock: ".concat(t.key)),t.part=this.partManager.get(t.refPart),t.panel=this.panelManager.get(t.refPart)}},{key:"assignDataToWeldments",value:function(){var t,e=n(this.weldments);try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.materialManager.get(s.refMaterial),s.part=this.partManager.get(s.refPart)}}catch(a){e.e(a)}finally{e.f()}}},{key:"assignDataToLaminates",value:function(){var t,e=n(this.laminateManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.laminateMaterialManager.get(s.refMaterial),s.material||console.warn("material not found for laminate: ".concat(s.key)),s.part=this.partManager.get(s.refPart),s.panel=this.panelManager.get(s.refPart)}}catch(a){e.e(a)}finally{e.f()}}},{key:"assignDataToPanels",value:function(){var t,e=n(this.panels);try{for(e.s();!(t=e.n()).done;){var s,a=t.value;this.assignDataToPanel(a);var i,r=n(null!==(s=a.children)&&void 0!==s?s:[]);try{for(r.s();!(i=r.n()).done;){var o=i.value;this.assignDataToPanel(o)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){e.e(u)}finally{e.f()}}},{key:"assignDataToPanel",value:function(t){t.project=this.project;var e=this.partManager.get(t.refPart);e&&(t.part=e);var s,a=n(t.refStocks);try{for(a.s();!(s=a.n()).done;){var i=s.value,r=this.stockManager.get(i);if(r){var o;t.stocks.push(r),r.material||console.warn("material not found for stock",r.key,"in panel",t.key),"CORE"===r.variables.ST_N?t.material=r.material:0===(null===(o=r.material)||void 0===o?void 0:o.type)&&t.layers.push(r)}else{var u=this.laminateManager.get(i);u&&(t.laminates.push(u),"TOP"===u.name&&(t.laminateTop=u),"BOTTOM"===u.name&&(t.laminateBottom=u))}}}catch(P){a.e(P)}finally{a.f()}var l,h=n(t.refEdgebands);try{for(h.s();!(l=h.n()).done;){var c=l.value,g=this.edgebandManager.get(c);g&&(t.edgebands.push(g),"F"===g.position&&(t.edgebandFront=g),"B"===g.position&&(t.edgebandBack=g),"L"===g.position&&(t.edgebandLeft=g),"R"===g.position&&(t.edgebandRight=g))}}catch(P){h.e(P)}finally{h.f()}var d,f=n(t.refPrograms);try{for(f.s();!(d=f.n()).done;){var v=d.value,m=this.programManager.get(v);m&&(t.programs.push(m),m.panel=t,m.material=t.material,e&&(m.part=e))}}catch(P){f.e(P)}finally{f.f()}var y,p=n(t.refProcessZones);try{for(p.s();!(y=p.n()).done;){var b=y.value,k=this.processZoneManager.get(b);k&&t.processZones.push(k)}}catch(P){p.e(P)}finally{p.f()}}},{key:"assignDataToAssemblies",value:function(){var t,e=n(this.assemblyManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,a=t.value,i=n(a.refParts);try{for(i.s();!(s=i.n()).done;){var r=s.value,o=this.partManager.get(r);o&&(a.parts.push(o),a.children||(a.children=[]),a.children.push(o))}}catch(g){i.e(g)}finally{i.f()}var u,l=n(a.refPrograms);try{for(l.s();!(u=l.n()).done;){var h=u.value,c=this.programManager.get(h);c&&a.programs.push(c)}}catch(g){l.e(g)}finally{l.f()}}}catch(g){e.e(g)}finally{e.f()}}},{key:"assignSubAssemblies",value:function(){var t,e=n(this.assemblyManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,a=t.value,i=n(a.refAssemblies);try{for(i.s();!(s=i.n()).done;){var r=s.value,o=this.assemblyManager.get(r);o&&(a.assemblies.push(o),a.children||(a.children=[]),a.children.push(o))}}catch(u){i.e(u)}finally{i.f()}}}catch(u){e.e(u)}finally{e.f()}}},{key:"assignDataToFrames",value:function(){var t,e=n(this.frameManager.getAll());try{for(e.s();!(t=e.n()).done;){var a,i=t.value,r=[],o=n(i.refParts);try{for(o.s();!(a=o.n()).done;){var u=a.value,l=this.partManager.get(u);if(l){var h;null===(h=i.parts)||void 0===h||h.push(l);var c=this.weldmentManager.getFromRefPart(u);c&&(i.weldments=s(c))}var g=this.panelManager.get(u);if(g){g.frame=i,r.push(g);var d,f=n(g.programs);try{for(f.s();!(d=f.n()).done;){var v=d.value;i.programs.push(v)}}catch(M){f.e(M)}finally{f.f()}}else console.warn("Panel not found for refPart: ".concat(u," in frame: ").concat(i.name));var m=this.hardwareManager.get(u);m&&i.hardware.push(m)}}catch(M){o.e(M)}finally{o.f()}i.panels=Is.generateCombinedPanels(r);var y,p=n(i.refAssemblies);try{for(p.s();!(y=p.n()).done;){var b=y.value,k=this.assemblyManager.get(b);k&&i.assemblies.push(k);var P=this.hardwareManager.get(b);P&&i.hardware.push(P);var w=this.subFrameManager.get(b);w&&(i.children||(i.children=[]),i.children.push(w))}}catch(M){p.e(M)}finally{p.f()}}}catch(M){e.e(M)}finally{e.f()}}},{key:"assignDataToSubFrames",value:function(){var t,e=n(this.subFrameManager.getAll());try{for(e.s();!(t=e.n()).done;){var a,i=t.value,r=[],o=n(i.refParts);try{for(o.s();!(a=o.n()).done;){var u=a.value,l=this.partManager.get(u);if(l){var h;null===(h=i.parts)||void 0===h||h.push(l);var c=this.weldmentManager.getFromRefPart(u);c&&(i.weldments=s(c))}var g=this.panelManager.get(u);if(g){r.push(g);var d,f=n(g.programs);try{for(f.s();!(d=f.n()).done;){var v=d.value;i.programs.push(v)}}catch(M){f.e(M)}finally{f.f()}}else console.warn("Panel not found for refPart: ".concat(u," in frame: ").concat(i.name));var m=this.hardwareManager.get(u);m&&i.hardware.push(m)}}catch(M){o.e(M)}finally{o.f()}i.panels=Is.generateCombinedPanels(r);var y,p=n(i.refAssemblies);try{for(p.s();!(y=p.n()).done;){var b=y.value,k=this.assemblyManager.get(b);k&&i.assemblies.push(k);var P=this.hardwareManager.get(b);P&&i.hardware.push(P);var w=this.subFrameManager.get(b);w&&(i.children||(i.children=[]),i.children.push(w))}}catch(M){p.e(M)}finally{p.f()}}}catch(M){e.e(M)}finally{e.f()}}},{key:"assignDataToParts",value:function(){var t,e=n(this.partManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,a=t.value;a.panel=a.refPanel?this.panelManager.get(a.refPanel):void 0;var i,r=n(null!==(s=a.refStocks)&&void 0!==s?s:[]);try{for(r.s();!(i=r.n()).done;){var o=i.value,u=this.stockManager.get(o);u&&a.stocks.push(u)}}catch(d){r.e(d)}finally{r.f()}var l,h=n(a.refPrograms);try{for(h.s();!(l=h.n()).done;){var c=l.value,g=this.programManager.get(c);g&&a.programs.push(g)}}catch(d){h.e(d)}finally{h.f()}}}catch(d){e.e(d)}finally{e.f()}}},{key:"assignDataToSheets",value:function(){var t,e=n(this.sheets);try{for(e.s();!(t=e.n()).done;){var s,a,i,r,o=t.value,u=n(null!==(a=o.refProgramParts)&&void 0!==a?a:[]);try{for(u.s();!(r=u.n()).done;){var l=r.value,h=this.programPartManager.get(l);h&&o.programParts.push(h)}}catch(m){u.e(m)}finally{u.f()}var c,g=n(null!==(i=o.refTools)&&void 0!==i?i:[]);try{for(g.s();!(c=g.n()).done;){var d=c.value,f=this.toolManager.get(d);f&&o.tools.push(f)}}catch(m){g.e(m)}finally{g.f()}var v=this.boardMaterialManager.get(null!==(s=o.refBoard)&&void 0!==s?s:"");o.board=null!=v?v:void 0}}catch(m){e.e(m)}finally{e.f()}}},{key:"assignDataToPrograms",value:function(){var t,e=n(this.programs);try{for(e.s();!(t=e.n()).done;){var s,a,i=t.value,r=n(null!==(s=i.refTools)&&void 0!==s?s:[]);try{for(r.s();!(a=r.n()).done;){var o=a.value,u=this.toolManager.get(o);u&&i.tools.push(u)}}catch(l){r.e(l)}finally{r.f()}}}catch(l){e.e(l)}finally{e.f()}}},{key:"assignDataToProgramParts",value:function(){var t,e=n(this.programParts);try{for(e.s();!(t=e.n()).done;){var s=t.value,a=this.panelManager.get(s.refPart);s.panel=a,a&&(a.programPart=s);var i=this.partManager.get(s.refPart);s.part=null!=i?i:void 0;var r=this.sheetManager.get(s.refProgram);s.sheet=null!=r?r:void 0}}catch(o){e.e(o)}finally{e.f()}}},{key:"assignDataToProcessZones",value:function(){var t,e=n(this.processZones);try{for(e.s();!(t=e.n()).done;){var s=t.value,a=this.panelProcessManager.get(s.refPanelProcess);s.panelProcess=a}}catch(i){e.e(i)}finally{e.f()}}},{key:"assignDataToPatterns",value:function(){var t,e=new Map(this.panelManager.getAll().map((function(t){return[t.name,t]}))),s=n(this.patterns);try{for(s.s();!(t=s.n()).done;){var a=t.value;a.panels=a.refPanels.map((function(t){return e.get(t)})).filter((function(t){return!!t}))}}catch(i){s.e(i)}finally{s.f()}}},{key:"assignDataToBoards",value:function(){var t,e=n(this.boardMaterialManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.materialManager.get(s.refMaterial)}}catch(a){e.e(a)}finally{e.f()}}},{key:"assignDataToTools",value:function(){var t,e=n(this.toolManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,a=t.value,i=n(a.refSpindles);try{for(i.s();!(s=i.n()).done;){var r=s.value,o=this.spindleManager.get(r);o?a.spindles.push(o):console.warn("Spindle not found for refSpindle: ".concat(r," in tool: ").concat(a.key))}}catch(u){i.e(u)}finally{i.f()}}}catch(u){e.e(u)}finally{e.f()}}}],[{key:"createFromRawData",value:function(e,s,n){if(o.getInstance(e,n),!n.status)throw Error("");var a=us.createFromRawData(e,s),i=jt.fromProjectBusiness(a.projectBusiness),r=(new Is).addInstances(a.panelsBusiness),u=(new Vs).addInstances(a.stocksBusiness),l=(new As).addInstances(a.partsBusiness),h=(new ls).addInstances(a.assembliesBusiness),c=(new fs).addInstances(a.edgebandsBusiness),g=(new vs).addInstances(a.edgebandMaterialsBusiness),d=(new ws).addInstances(a.laminatesBusiness),f=(new Ms).addInstances(a.materialsBusiness),v=(new Ps).addInstances(a.materialsBusiness),m=(new Qs).addInstances(a.weldmentMaterialsBusiness),y=(new hs).addInstances(a.boardMaterialsBusiness),p=(new Bs).addInstances(a.programsBusiness),b=(new Os).addInstances(a.sheetBusiness),k=(new Es).addInstances(a.programPartsBusiness),P=(new Ws).addInstances(a.toolsBusiness),w=(new Rs).addInstances(a.spindlesBusiness),M=(new ds).addInstances(a.costsBusiness),D=new Ds,I=(new js).addInstances(e,l,h),T=(new ys).addInstances(a.framesBusiness),A=(new Ls).addInstances(a.subFramesBusiness),C=(new ps).addInstances(a.hardwaresBusiness),S=(new ms).addInstances(a.excludedItemsBusiness),B=(new Ts).addInstances(a.panelProcessesBusiness),E=(new Ss).addInstances(a.processZonesBusiness),O=(new _s).addInstances(a.weldmentsBusiness),N=(new Cs).addInstances(a.patternsBusiness),R=(new cs).addInstances(i,h.getAll(),l.getAll());return D.processMessages(i,r.getAll(),u.getAll(),l.getAll(),h.getAll(),c.getAll(),d.getAll(),f.getAll(),p.getAll(),b.getAll(),k.getAll(),P.getAll(),w.getAll()),new t(e,s,i,r.getCombinedPanels(),u.getAll(),l.getAll(),h.getAll(),R.getAll(),c.getAll(),d.getAll(),p.getAll(),b.getAll(),k.getAll(),P.getAll(),w.getAll(),M.getAll(),D.getAll(),I.getAll(),T.getAll(),A.getAll(),C.getAll(),S.getAll(),B.getAll(),E.getAll(),O.getAll(),N.getAll(),{panels:f.getAll(),laminates:v.getAll(),edgebands:g.getAll(),weldments:m.getAll(),boards:y.getAll()},r,u,l,h,c,g,d,f,v,m,y,p,b,k,P,w,M,D,I,T,A,C,S,B,E,O,N,bs).relateData()}}])}())}}}))}();
