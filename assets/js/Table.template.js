var Or=Object.defineProperty;var Cr=(e,t,s)=>t in e?Or(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var E=(e,t,s)=>Cr(e,typeof t!="symbol"?t+"":t,s);import{s as En,t as Dn,v as re,w as Dt,x as te,r as D,y as Pn,z as Tr,D as Er,T as et,j as m,E as Ps,F as Rn,G as Dr,H as di,J as Pr,K as Rr,L as Ir,g as vt,B as ut,k as Fr,I as In,R as Ws,m as Lr,c as jr,a as $s,P as zr,o as Br,d as Nr,S as Wr,M as $r}from"../main.C0iT5PB5.js";import{f as Hr,C as Vr,g as Yr,I as Fn,r as Hs,v as Me,h as Ur,R as ys,l as Xr,B as qr,s as Kr,i as Gr,P as Qr,j as Zr,k as Jr,X as to,Q as eo,b as so,a as io,t as no,S as ro,F as oo,T as ao,c as lo,d as fi}from"./Table.js";function co(e){return Dn("MuiFormControlLabel",e)}const be=En("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),ho=e=>{const{classes:t,disabled:s,labelPlacement:i,error:n,required:r}=e,o={root:["root",s&&"disabled","labelPlacement".concat(Dt(i)),n&&"error",r&&"required"],label:["label",s&&"disabled"],asterisk:["asterisk",n&&"error"]};return Rn(o,co,t)},uo=re("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[{["& .".concat(be.label)]:t.label},t.root,t["labelPlacement".concat(Dt(s.labelPlacement))]]}})(te(({theme:e})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,["&.".concat(be.disabled)]:{cursor:"default"},["& .".concat(be.label)]:{["&.".concat(be.disabled)]:{color:(e.vars||e).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:t})=>t==="start"||t==="top"||t==="bottom",style:{marginLeft:16}}]}))),fo=re("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(te(({theme:e})=>({["&.".concat(be.error)]:{color:(e.vars||e).palette.error.main}}))),Ln=D.forwardRef(function(t,s){var C;const i=Pn({props:t,name:"MuiFormControlLabel"}),{checked:n,className:r,componentsProps:o={},control:a,disabled:l,disableTypography:c,inputRef:h,label:u,labelPlacement:d="end",name:f,onChange:p,required:g,slots:b={},slotProps:x={},value:y,..._}=i,v=Tr(),S=(C=l!=null?l:a.props.disabled)!=null?C:v==null?void 0:v.disabled,M=g!=null?g:a.props.required,w={disabled:S,required:M};["checked","name","onChange","value","inputRef"].forEach(R=>{typeof a.props[R]>"u"&&typeof i[R]<"u"&&(w[R]=i[R])});const O=Hr({props:i,muiFormControl:v,states:["error"]}),P={...i,disabled:S,labelPlacement:d,required:M,error:O.error},T=ho(P),k={slots:b,slotProps:{...o,...x}},[A,L]=Er("typography",{elementType:et,externalForwardedProps:k,ownerState:P});let N=u;return N!=null&&N.type!==et&&!c&&(N=m.jsx(A,{component:"span",...L,className:Ps(T.label,L==null?void 0:L.className),children:N})),m.jsxs(uo,{className:Ps(T.root,r),ownerState:P,ref:s,..._,children:[D.cloneElement(a,w),M?m.jsxs("div",{children:[N,m.jsxs(fo,{ownerState:P,"aria-hidden":!0,className:T.asterisk,children:[" ","*"]})]}):N]})});function po(e){return Dn("MuiSwitch",e)}const tt=En("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),go=e=>{const{classes:t,edge:s,size:i,color:n,checked:r,disabled:o}=e,a={root:["root",s&&"edge".concat(Dt(s)),"size".concat(Dt(i))],switchBase:["switchBase","color".concat(Dt(n)),r&&"checked",o&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=Rn(a,po,t);return{...t,...l}},mo=re("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.edge&&t["edge".concat(Dt(s.edge))],t["size".concat(Dt(s.size))]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,["& .".concat(tt.thumb)]:{width:16,height:16},["& .".concat(tt.switchBase)]:{padding:4,["&.".concat(tt.checked)]:{transform:"translateX(16px)"}}}}]}),bo=re(Dr,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.switchBase,{["& .".concat(tt.input)]:t.input},s.color!=="default"&&t["color".concat(Dt(s.color))]]}})(te(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:"".concat(e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]),transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),["&.".concat(tt.checked)]:{transform:"translateX(20px)"},["&.".concat(tt.disabled)]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:"".concat(e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600])},["&.".concat(tt.checked," + .").concat(tt.track)]:{opacity:.5},["&.".concat(tt.disabled," + .").concat(tt.track)]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:"".concat(e.palette.mode==="light"?.12:.2)},["& .".concat(tt.input)]:{left:"-100%",width:"300%"}})),te(({theme:e})=>({"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.action.activeChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):di(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter(Pr(["light"])).map(([t])=>({props:{color:t},style:{["&.".concat(tt.checked)]:{color:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette[t].mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):di(e.palette[t].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(tt.disabled)]:{color:e.vars?e.vars.palette.Switch["".concat(t,"DisabledColor")]:"".concat(e.palette.mode==="light"?Rr(e.palette[t].main,.62):Ir(e.palette[t].main,.55))}},["&.".concat(tt.checked," + .").concat(tt.track)]:{backgroundColor:(e.vars||e).palette[t].main}}}))]}))),xo=re("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(te(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:"".concat(e.palette.mode==="light"?e.palette.common.black:e.palette.common.white),opacity:e.vars?e.vars.opacity.switchTrack:"".concat(e.palette.mode==="light"?.38:.3)}))),yo=re("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(te(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),jn=D.forwardRef(function(t,s){const i=Pn({props:t,name:"MuiSwitch"}),{className:n,color:r="primary",edge:o=!1,size:a="medium",sx:l,...c}=i,h={...i,color:r,edge:o,size:a},u=go(h),d=m.jsx(yo,{className:u.thumb,ownerState:h});return m.jsxs(mo,{className:Ps(u.root,n),sx:l,ownerState:h,children:[m.jsx(bo,{type:"checkbox",icon:d,checkedIcon:d,ref:s,ownerState:h,...c,classes:{...u,root:u.switchBase}}),m.jsx(xo,{className:u.track,ownerState:h})]})});var at="INUMBER",oe="IOP1",ae="IOP2",le="IOP3",wt="IVAR",Yt="IVARNAME",ee="IFUNCALL",hs="IFUNDEF",rt="IEXPR",Vs="IEXPREVAL",Xt="IMEMBER",us="IENDSTATEMENT",se="IARRAY";function I(e,t){this.type=e,this.value=t!=null?t:0}I.prototype.toString=function(){switch(this.type){case at:case oe:case ae:case le:case wt:case Yt:case us:return this.value;case ee:return"CALL "+this.value;case hs:return"DEF "+this.value;case se:return"ARRAY "+this.value;case Xt:return"."+this.value;default:return"Invalid Instruction"}};function ds(e){return new I(oe,e)}function kt(e){return new I(ae,e)}function zn(e){return new I(le,e)}function Rs(e,t,s,i,n){for(var r=[],o=[],a,l,c,h,u=0;u<e.length;u++){var d=e[u],f=d.type;if(f===at||f===Yt)Array.isArray(d.value)?r.push.apply(r,Rs(d.value.map(function(p){return new I(at,p)}).concat(new I(se,d.value.length)),t,s,i,n)):r.push(d);else if(f===wt&&n.hasOwnProperty(d.value))d=new I(at,n[d.value]),r.push(d);else if(f===ae&&r.length>1)l=r.pop(),a=r.pop(),h=s[d.value],d=new I(at,h(a.value,l.value)),r.push(d);else if(f===le&&r.length>2)c=r.pop(),l=r.pop(),a=r.pop(),d.value==="?"?r.push(a.value?l.value:c.value):(h=i[d.value],d=new I(at,h(a.value,l.value,c.value)),r.push(d));else if(f===oe&&r.length>0)a=r.pop(),h=t[d.value],d=new I(at,h(a.value)),r.push(d);else if(f===rt){for(;r.length>0;)o.push(r.shift());o.push(new I(rt,Rs(d.value,t,s,i,n)))}else if(f===Xt&&r.length>0)a=r.pop(),r.push(new I(at,a.value[d.value]));else{for(;r.length>0;)o.push(r.shift());o.push(d)}}for(;r.length>0;)o.push(r.shift());return o}function Bn(e,t,s){for(var i=[],n=0;n<e.length;n++){var r=e[n],o=r.type;if(o===wt&&r.value===t)for(var a=0;a<s.tokens.length;a++){var l=s.tokens[a],c;l.type===oe?c=ds(l.value):l.type===ae?c=kt(l.value):l.type===le?c=zn(l.value):c=new I(l.type,l.value),i.push(c)}else o===rt?i.push(new I(rt,Bn(r.value,t,s))):i.push(r)}return i}function $t(e,t,s){var i=[],n,r,o,a,l,c;if(Ys(e))return mt(e,s);for(var h=e.length,u=0;u<h;u++){var d=e[u],f=d.type;if(f===at||f===Yt)i.push(d.value);else if(f===ae)r=i.pop(),n=i.pop(),d.value==="and"?i.push(n?!!$t(r,t,s):!1):d.value==="or"?i.push(n?!0:!!$t(r,t,s)):d.value==="="?(a=t.binaryOps[d.value],i.push(a(n,$t(r,t,s),s))):(a=t.binaryOps[d.value],i.push(a(mt(n,s),mt(r,s))));else if(f===le)o=i.pop(),r=i.pop(),n=i.pop(),d.value==="?"?i.push($t(n?r:o,t,s)):(a=t.ternaryOps[d.value],i.push(a(mt(n,s),mt(r,s),mt(o,s))));else if(f===wt)if(d.value in t.functions)i.push(t.functions[d.value]);else if(d.value in t.unaryOps&&t.parser.isOperatorEnabled(d.value))i.push(t.unaryOps[d.value]);else{var p=s[d.value];if(p!==void 0)i.push(p);else throw new Error("undefined variable: "+d.value)}else if(f===oe)n=i.pop(),a=t.unaryOps[d.value],i.push(a(mt(n,s)));else if(f===ee){for(c=d.value,l=[];c-- >0;)l.unshift(mt(i.pop(),s));if(a=i.pop(),a.apply&&a.call)i.push(a.apply(void 0,l));else throw new Error(a+" is not a function")}else if(f===hs)i.push(function(){for(var g=i.pop(),b=[],x=d.value;x-- >0;)b.unshift(i.pop());var y=i.pop(),_=function(){for(var v=Object.assign({},s),S=0,M=b.length;S<M;S++)v[b[S]]=arguments[S];return $t(g,t,v)};return Object.defineProperty(_,"name",{value:y,writable:!1}),s[y]=_,_}());else if(f===rt)i.push(_o(d,t));else if(f===Vs)i.push(d);else if(f===Xt)n=i.pop(),i.push(n[d.value]);else if(f===us)i.pop();else if(f===se){for(c=d.value,l=[];c-- >0;)l.unshift(i.pop());i.push(l)}else throw new Error("invalid Expression")}if(i.length>1)throw new Error("invalid Expression (parity)");return i[0]===0?0:mt(i[0],s)}function _o(e,t,s){return Ys(e)?e:{type:Vs,value:function(i){return $t(e.value,t,i)}}}function Ys(e){return e&&e.type===Vs}function mt(e,t){return Ys(e)?e.value(t):e}function Us(e,t){for(var s=[],i,n,r,o,a,l,c=0;c<e.length;c++){var h=e[c],u=h.type;if(u===at)typeof h.value=="number"&&h.value<0?s.push("("+h.value+")"):Array.isArray(h.value)?s.push("["+h.value.map(pi).join(", ")+"]"):s.push(pi(h.value));else if(u===ae)n=s.pop(),i=s.pop(),o=h.value,t?o==="^"?s.push("Math.pow("+i+", "+n+")"):o==="and"?s.push("(!!"+i+" && !!"+n+")"):o==="or"?s.push("(!!"+i+" || !!"+n+")"):o==="||"?s.push("(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+i+"),("+n+")))"):o==="=="?s.push("("+i+" === "+n+")"):o==="!="?s.push("("+i+" !== "+n+")"):o==="["?s.push(i+"[("+n+") | 0]"):s.push("("+i+" "+o+" "+n+")"):o==="["?s.push(i+"["+n+"]"):s.push("("+i+" "+o+" "+n+")");else if(u===le)if(r=s.pop(),n=s.pop(),i=s.pop(),o=h.value,o==="?")s.push("("+i+" ? "+n+" : "+r+")");else throw new Error("invalid Expression");else if(u===wt||u===Yt)s.push(h.value);else if(u===oe)i=s.pop(),o=h.value,o==="-"||o==="+"?s.push("("+o+i+")"):t?o==="not"?s.push("(!"+i+")"):o==="!"?s.push("fac("+i+")"):s.push(o+"("+i+")"):o==="!"?s.push("("+i+"!)"):s.push("("+o+" "+i+")");else if(u===ee){for(l=h.value,a=[];l-- >0;)a.unshift(s.pop());o=s.pop(),s.push(o+"("+a.join(", ")+")")}else if(u===hs){for(n=s.pop(),l=h.value,a=[];l-- >0;)a.unshift(s.pop());i=s.pop(),t?s.push("("+i+" = function("+a.join(", ")+") { return "+n+" })"):s.push("("+i+"("+a.join(", ")+") = "+n+")")}else if(u===Xt)i=s.pop(),s.push(i+"."+h.value);else if(u===se){for(l=h.value,a=[];l-- >0;)a.unshift(s.pop());s.push("["+a.join(", ")+"]")}else if(u===rt)s.push("("+Us(h.value,t)+")");else if(u!==us)throw new Error("invalid Expression")}return s.length>1&&(t?s=[s.join(",")]:s=[s.join(";")]),String(s[0])}function pi(e){return typeof e=="string"?JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):e}function Zt(e,t){for(var s=0;s<e.length;s++)if(e[s]===t)return!0;return!1}function Xs(e,t,s){s=s||{};for(var i=!!s.withMembers,n=null,r=0;r<e.length;r++){var o=e[r];o.type===wt||o.type===Yt?!i&&!Zt(t,o.value)?t.push(o.value):(n!==null&&(Zt(t,n)||t.push(n)),n=o.value):o.type===Xt&&i&&n!==null?n+="."+o.value:o.type===rt?Xs(o.value,t,s):n!==null&&(Zt(t,n)||t.push(n),n=null)}n!==null&&!Zt(t,n)&&t.push(n)}function dt(e,t){this.tokens=e,this.parser=t,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.functions=t.functions}dt.prototype.simplify=function(e){return e=e||{},new dt(Rs(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,e),this.parser)};dt.prototype.substitute=function(e,t){return t instanceof dt||(t=this.parser.parse(String(t))),new dt(Bn(this.tokens,e,t),this.parser)};dt.prototype.evaluate=function(e){return e=e||{},$t(this.tokens,this,e)};dt.prototype.toString=function(){return Us(this.tokens,!1)};dt.prototype.symbols=function(e){e=e||{};var t=[];return Xs(this.tokens,t,e),t};dt.prototype.variables=function(e){e=e||{};var t=[];Xs(this.tokens,t,e);var s=this.functions;return t.filter(function(i){return!(i in s)})};dt.prototype.toJSFunction=function(e,t){var s=this,i=new Function(e,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+Us(this.simplify(t).tokens,!0)+"; }");return function(){return i.apply(s,arguments)}};var Ee="TEOF",B="TOP",fs="TNUMBER",Nn="TSTRING",St="TPAREN",ie="TBRACKET",ps="TCOMMA",qs="TNAME",Ks="TSEMICOLON";function Wn(e,t,s){this.type=e,this.value=t,this.index=s}Wn.prototype.toString=function(){return this.type+": "+this.value};function Y(e,t){this.pos=0,this.current=null,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.consts=e.consts,this.expression=t,this.savedPosition=0,this.savedCurrent=null,this.options=e.options,this.parser=e}Y.prototype.newToken=function(e,t,s){return new Wn(e,t,s!=null?s:this.pos)};Y.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current};Y.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent};Y.prototype.next=function(){if(this.pos>=this.expression.length)return this.newToken(Ee,"EOF");if(this.isWhitespace()||this.isComment())return this.next();if(this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName())return this.current;this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')};Y.prototype.isString=function(){var e=!1,t=this.pos,s=this.expression.charAt(t);if(s==="'"||s==='"')for(var i=this.expression.indexOf(s,t+1);i>=0&&this.pos<this.expression.length;){if(this.pos=i+1,this.expression.charAt(i-1)!=="\\"){var n=this.expression.substring(t+1,i);this.current=this.newToken(Nn,this.unescape(n),t),e=!0;break}i=this.expression.indexOf(s,i+1)}return e};Y.prototype.isParen=function(){var e=this.expression.charAt(this.pos);return e==="("||e===")"?(this.current=this.newToken(St,e),this.pos++,!0):!1};Y.prototype.isBracket=function(){var e=this.expression.charAt(this.pos);return(e==="["||e==="]")&&this.isOperatorEnabled("[")?(this.current=this.newToken(ie,e),this.pos++,!0):!1};Y.prototype.isComma=function(){var e=this.expression.charAt(this.pos);return e===","?(this.current=this.newToken(ps,","),this.pos++,!0):!1};Y.prototype.isSemicolon=function(){var e=this.expression.charAt(this.pos);return e===";"?(this.current=this.newToken(Ks,";"),this.pos++,!0):!1};Y.prototype.isConst=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var s=this.expression.charAt(t);if(s.toUpperCase()===s.toLowerCase()&&(t===this.pos||s!=="_"&&s!=="."&&(s<"0"||s>"9")))break}if(t>e){var i=this.expression.substring(e,t);if(i in this.consts)return this.current=this.newToken(fs,this.consts[i]),this.pos+=i.length,!0}return!1};Y.prototype.isNamedOp=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var s=this.expression.charAt(t);if(s.toUpperCase()===s.toLowerCase()&&(t===this.pos||s!=="_"&&(s<"0"||s>"9")))break}if(t>e){var i=this.expression.substring(e,t);if(this.isOperatorEnabled(i)&&(i in this.binaryOps||i in this.unaryOps||i in this.ternaryOps))return this.current=this.newToken(B,i),this.pos+=i.length,!0}return!1};Y.prototype.isName=function(){for(var e=this.pos,t=e,s=!1;t<this.expression.length;t++){var i=this.expression.charAt(t);if(i.toUpperCase()===i.toLowerCase()){if(t===this.pos&&(i==="$"||i==="_")){i==="_"&&(s=!0);continue}else if(t===this.pos||!s||i!=="_"&&(i<"0"||i>"9"))break}else s=!0}if(s){var n=this.expression.substring(e,t);return this.current=this.newToken(qs,n),this.pos+=n.length,!0}return!1};Y.prototype.isWhitespace=function(){for(var e=!1,t=this.expression.charAt(this.pos);(t===" "||t==="	"||t==="\n"||t==="\r")&&(e=!0,this.pos++,!(this.pos>=this.expression.length));)t=this.expression.charAt(this.pos);return e};var vo=/^[0-9a-f]{4}$/i;Y.prototype.unescape=function(e){var t=e.indexOf("\\");if(t<0)return e;for(var s=e.substring(0,t);t>=0;){var i=e.charAt(++t);switch(i){case"'":s+="'";break;case'"':s+='"';break;case"\\":s+="\\";break;case"/":s+="/";break;case"b":s+="\b";break;case"f":s+="\f";break;case"n":s+="\n";break;case"r":s+="\r";break;case"t":s+="	";break;case"u":var n=e.substring(t+1,t+5);vo.test(n)||this.parseError("Illegal escape sequence: \\u"+n),s+=String.fromCharCode(parseInt(n,16)),t+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+i+'"')}++t;var r=e.indexOf("\\",t);s+=e.substring(t,r<0?e.length:r),t=r}return s};Y.prototype.isComment=function(){var e=this.expression.charAt(this.pos);return e==="/"&&this.expression.charAt(this.pos+1)==="*"?(this.pos=this.expression.indexOf("*/",this.pos)+2,this.pos===1&&(this.pos=this.expression.length),!0):!1};Y.prototype.isRadixInteger=function(){var e=this.pos;if(e>=this.expression.length-2||this.expression.charAt(e)!=="0")return!1;++e;var t,s;if(this.expression.charAt(e)==="x")t=16,s=/^[0-9a-f]$/i,++e;else if(this.expression.charAt(e)==="b")t=2,s=/^[01]$/i,++e;else return!1;for(var i=!1,n=e;e<this.expression.length;){var r=this.expression.charAt(e);if(s.test(r))e++,i=!0;else break}return i&&(this.current=this.newToken(fs,parseInt(this.expression.substring(n,e),t)),this.pos=e),i};Y.prototype.isNumber=function(){for(var e=!1,t=this.pos,s=t,i=t,n=!1,r=!1,o;t<this.expression.length&&(o=this.expression.charAt(t),o>="0"&&o<="9"||!n&&o===".");)o==="."?n=!0:r=!0,t++,e=r;if(e&&(i=t),o==="e"||o==="E"){t++;for(var a=!0,l=!1;t<this.expression.length;){if(o=this.expression.charAt(t),a&&(o==="+"||o==="-"))a=!1;else if(o>="0"&&o<="9")l=!0,a=!1;else break;t++}l||(t=i)}return e?(this.current=this.newToken(fs,parseFloat(this.expression.substring(s,t))),this.pos=t):this.pos=i,e};Y.prototype.isOperator=function(){var e=this.pos,t=this.expression.charAt(this.pos);if(t==="+"||t==="-"||t==="*"||t==="/"||t==="%"||t==="^"||t==="?"||t===":"||t===".")this.current=this.newToken(B,t);else if(t==="∙"||t==="•")this.current=this.newToken(B,"*");else if(t===">")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(B,">="),this.pos++):this.current=this.newToken(B,">");else if(t==="<")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(B,"<="),this.pos++):this.current=this.newToken(B,"<");else if(t==="|")if(this.expression.charAt(this.pos+1)==="|")this.current=this.newToken(B,"||"),this.pos++;else return!1;else if(t==="=")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(B,"=="),this.pos++):this.current=this.newToken(B,t);else if(t==="!")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(B,"!="),this.pos++):this.current=this.newToken(B,t);else return!1;return this.pos++,this.isOperatorEnabled(this.current.value)?!0:(this.pos=e,!1)};Y.prototype.isOperatorEnabled=function(e){return this.parser.isOperatorEnabled(e)};Y.prototype.getCoordinates=function(){var e=0,t,s=-1;do e++,t=this.pos-s,s=this.expression.indexOf("\n",s+1);while(s>=0&&s<this.pos);return{line:e,column:t}};Y.prototype.parseError=function(e){var t=this.getCoordinates();throw new Error("parse error ["+t.line+":"+t.column+"]: "+e)};function H(e,t,s){this.parser=e,this.tokens=t,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=s.allowMemberAccess!==!1}H.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()};H.prototype.tokenMatches=function(e,t){return typeof t>"u"?!0:Array.isArray(t)?Zt(t,e.value):typeof t=="function"?t(e):e.value===t};H.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()};H.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken};H.prototype.accept=function(e,t){return this.nextToken.type===e&&this.tokenMatches(this.nextToken,t)?(this.next(),!0):!1};H.prototype.expect=function(e,t){if(!this.accept(e,t)){var s=this.tokens.getCoordinates();throw new Error("parse error ["+s.line+":"+s.column+"]: Expected "+(t||e))}};H.prototype.parseAtom=function(e){var t=this.tokens.unaryOps;function s(n){return n.value in t}if(this.accept(qs)||this.accept(B,s))e.push(new I(wt,this.current.value));else if(this.accept(fs))e.push(new I(at,this.current.value));else if(this.accept(Nn))e.push(new I(at,this.current.value));else if(this.accept(St,"("))this.parseExpression(e),this.expect(St,")");else if(this.accept(ie,"["))if(this.accept(ie,"]"))e.push(new I(se,0));else{var i=this.parseArrayList(e);e.push(new I(se,i))}else throw new Error("unexpected "+this.nextToken)};H.prototype.parseExpression=function(e){var t=[];this.parseUntilEndStatement(e,t)||(this.parseVariableAssignmentExpression(t),!this.parseUntilEndStatement(e,t)&&this.pushExpression(e,t))};H.prototype.pushExpression=function(e,t){for(var s=0,i=t.length;s<i;s++)e.push(t[s])};H.prototype.parseUntilEndStatement=function(e,t){return this.accept(Ks)?(this.nextToken&&this.nextToken.type!==Ee&&!(this.nextToken.type===St&&this.nextToken.value===")")&&t.push(new I(us)),this.nextToken.type!==Ee&&this.parseExpression(t),e.push(new I(rt,t)),!0):!1};H.prototype.parseArrayList=function(e){for(var t=0;!this.accept(ie,"]");)for(this.parseExpression(e),++t;this.accept(ps);)this.parseExpression(e),++t;return t};H.prototype.parseVariableAssignmentExpression=function(e){for(this.parseConditionalExpression(e);this.accept(B,"=");){var t=e.pop(),s=[],i=e.length-1;if(t.type===ee){if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var n=0,r=t.value+1;n<r;n++){var o=i-n;e[o].type===wt&&(e[o]=new I(Yt,e[o].value))}this.parseVariableAssignmentExpression(s),e.push(new I(rt,s)),e.push(new I(hs,t.value));continue}if(t.type!==wt&&t.type!==Xt)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(s),e.push(new I(Yt,t.value)),e.push(new I(rt,s)),e.push(kt("="))}};H.prototype.parseConditionalExpression=function(e){for(this.parseOrExpression(e);this.accept(B,"?");){var t=[],s=[];this.parseConditionalExpression(t),this.expect(B,":"),this.parseConditionalExpression(s),e.push(new I(rt,t)),e.push(new I(rt,s)),e.push(zn("?"))}};H.prototype.parseOrExpression=function(e){for(this.parseAndExpression(e);this.accept(B,"or");){var t=[];this.parseAndExpression(t),e.push(new I(rt,t)),e.push(kt("or"))}};H.prototype.parseAndExpression=function(e){for(this.parseComparison(e);this.accept(B,"and");){var t=[];this.parseComparison(t),e.push(new I(rt,t)),e.push(kt("and"))}};var wo=["==","!=","<","<=",">=",">","in"];H.prototype.parseComparison=function(e){for(this.parseAddSub(e);this.accept(B,wo);){var t=this.current;this.parseAddSub(e),e.push(kt(t.value))}};var So=["+","-","||"];H.prototype.parseAddSub=function(e){for(this.parseTerm(e);this.accept(B,So);){var t=this.current;this.parseTerm(e),e.push(kt(t.value))}};var Mo=["*","/","%"];H.prototype.parseTerm=function(e){for(this.parseFactor(e);this.accept(B,Mo);){var t=this.current;this.parseFactor(e),e.push(kt(t.value))}};H.prototype.parseFactor=function(e){var t=this.tokens.unaryOps;function s(n){return n.value in t}if(this.save(),this.accept(B,s)){if(this.current.value!=="-"&&this.current.value!=="+"){if(this.nextToken.type===St&&this.nextToken.value==="("){this.restore(),this.parseExponential(e);return}else if(this.nextToken.type===Ks||this.nextToken.type===ps||this.nextToken.type===Ee||this.nextToken.type===St&&this.nextToken.value===")"){this.restore(),this.parseAtom(e);return}}var i=this.current;this.parseFactor(e),e.push(ds(i.value))}else this.parseExponential(e)};H.prototype.parseExponential=function(e){for(this.parsePostfixExpression(e);this.accept(B,"^");)this.parseFactor(e),e.push(kt("^"))};H.prototype.parsePostfixExpression=function(e){for(this.parseFunctionCall(e);this.accept(B,"!");)e.push(ds("!"))};H.prototype.parseFunctionCall=function(e){var t=this.tokens.unaryOps;function s(r){return r.value in t}if(this.accept(B,s)){var i=this.current;this.parseAtom(e),e.push(ds(i.value))}else for(this.parseMemberExpression(e);this.accept(St,"(");)if(this.accept(St,")"))e.push(new I(ee,0));else{var n=this.parseArgumentList(e);e.push(new I(ee,n))}};H.prototype.parseArgumentList=function(e){for(var t=0;!this.accept(St,")");)for(this.parseExpression(e),++t;this.accept(ps);)this.parseExpression(e),++t;return t};H.prototype.parseMemberExpression=function(e){for(this.parseAtom(e);this.accept(B,".")||this.accept(ie,"[");){var t=this.current;if(t.value==="."){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect(qs),e.push(new I(Xt,this.current.value))}else if(t.value==="["){if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(e),this.expect(ie,"]"),e.push(kt("["))}else throw new Error("unexpected symbol: "+t.value)}};function ko(e,t){return Number(e)+Number(t)}function Ao(e,t){return e-t}function Oo(e,t){return e*t}function Co(e,t){return e/t}function To(e,t){return e%t}function Eo(e,t){return Array.isArray(e)&&Array.isArray(t)?e.concat(t):""+e+t}function Do(e,t){return e===t}function Po(e,t){return e!==t}function Ro(e,t){return e>t}function Io(e,t){return e<t}function Fo(e,t){return e>=t}function Lo(e,t){return e<=t}function jo(e,t){return!!(e&&t)}function zo(e,t){return!!(e||t)}function Bo(e,t){return Zt(t,e)}function No(e){return(Math.exp(e)-Math.exp(-e))/2}function Wo(e){return(Math.exp(e)+Math.exp(-e))/2}function $o(e){return e===1/0?1:e===-1/0?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function Ho(e){return e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))}function Vo(e){return Math.log(e+Math.sqrt(e*e-1))}function Yo(e){return Math.log((1+e)/(1-e))/2}function gi(e){return Math.log(e)*Math.LOG10E}function Uo(e){return-e}function Xo(e){return!e}function qo(e){return e<0?Math.ceil(e):Math.floor(e)}function Ko(e){return Math.random()*(e||1)}function mi(e){return Gs(e+1)}function Go(e){return isFinite(e)&&e===Math.round(e)}var Qo=4.7421875,_s=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function Gs(e){var t,s;if(Go(e)){if(e<=0)return isFinite(e)?1/0:NaN;if(e>171)return 1/0;for(var i=e-2,n=e-1;i>1;)n*=i,i--;return n===0&&(n=1),n}if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*Gs(1-e));if(e>=171.35)return 1/0;if(e>85){var r=e*e,o=r*e,a=o*e,l=a*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*r)-139/(51840*o)-571/(2488320*a)+163879/(209018880*l)+5246819/(75246796800*l*e))}--e,s=_s[0];for(var c=1;c<_s.length;++c)s+=_s[c]/(e+c);return t=e+Qo+.5,Math.sqrt(2*Math.PI)*Math.pow(t,e+.5)*Math.exp(-t)*s}function Zo(e){return Array.isArray(e)?e.length:String(e).length}function bi(){for(var e=0,t=0,s=0;s<arguments.length;s++){var i=Math.abs(arguments[s]),n;t<i?(n=t/i,e=e*n*n+1,t=i):i>0?(n=i/t,e+=n*n):e+=i}return t===1/0?1/0:t*Math.sqrt(e)}function xi(e,t,s){return e?t:s}function Jo(e,t){return typeof t>"u"||+t==0?Math.round(e):(e=+e,t=-+t,isNaN(e)||!(typeof t=="number"&&t%1===0)?NaN:(e=e.toString().split("e"),e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-t:-t))),e=e.toString().split("e"),+(e[0]+"e"+(e[1]?+e[1]+t:t))))}function ta(e,t,s){return s&&(s[e]=t),t}function ea(e,t){return e[t|0]}function sa(e){return arguments.length===1&&Array.isArray(e)?Math.max.apply(Math,e):Math.max.apply(Math,arguments)}function ia(e){return arguments.length===1&&Array.isArray(e)?Math.min.apply(Math,e):Math.min.apply(Math,arguments)}function na(e,t){if(typeof e!="function")throw new Error("First argument to map is not a function");if(!Array.isArray(t))throw new Error("Second argument to map is not an array");return t.map(function(s,i){return e(s,i)})}function ra(e,t,s){if(typeof e!="function")throw new Error("First argument to fold is not a function");if(!Array.isArray(s))throw new Error("Second argument to fold is not an array");return s.reduce(function(i,n,r){return e(i,n,r)},t)}function oa(e,t){if(typeof e!="function")throw new Error("First argument to filter is not a function");if(!Array.isArray(t))throw new Error("Second argument to filter is not an array");return t.filter(function(s,i){return e(s,i)})}function aa(e,t){if(!(Array.isArray(t)||typeof t=="string"))throw new Error("Second argument to indexOf is not a string or array");return t.indexOf(e)}function la(e,t){if(!Array.isArray(t))throw new Error("Second argument to join is not an array");return t.join(e)}function ca(e){return(e>0)-(e<0)||+e}var yi=1/3;function ha(e){return e<0?-Math.pow(-e,yi):Math.pow(e,yi)}function ua(e){return Math.exp(e)-1}function da(e){return Math.log(1+e)}function fa(e){return Math.log(e)/Math.LN2}function qt(e){this.options=e||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||No,cosh:Math.cosh||Wo,tanh:Math.tanh||$o,asinh:Math.asinh||Ho,acosh:Math.acosh||Vo,atanh:Math.atanh||Yo,sqrt:Math.sqrt,cbrt:Math.cbrt||ha,log:Math.log,log2:Math.log2||fa,ln:Math.log,lg:Math.log10||gi,log10:Math.log10||gi,expm1:Math.expm1||ua,log1p:Math.log1p||da,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||qo,"-":Uo,"+":Number,exp:Math.exp,not:Xo,length:Zo,"!":mi,sign:Math.sign||ca},this.binaryOps={"+":ko,"-":Ao,"*":Oo,"/":Co,"%":To,"^":Math.pow,"||":Eo,"==":Do,"!=":Po,">":Ro,"<":Io,">=":Fo,"<=":Lo,and:jo,or:zo,in:Bo,"=":ta,"[":ea},this.ternaryOps={"?":xi},this.functions={random:Ko,fac:mi,min:ia,max:sa,hypot:Math.hypot||bi,pyt:Math.hypot||bi,pow:Math.pow,atan2:Math.atan2,if:xi,gamma:Gs,roundTo:Jo,map:na,fold:ra,filter:oa,indexOf:aa,join:la},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}qt.prototype.parse=function(e){var t=[],s=new H(this,new Y(this,e),{allowMemberAccess:this.options.allowMemberAccess});return s.parseExpression(t),s.expect(Ee,"EOF"),new dt(t,this)};qt.prototype.evaluate=function(e,t){return this.parse(e).evaluate(t)};var $n=new qt;qt.parse=function(e){return $n.parse(e)};qt.evaluate=function(e,t){return $n.parse(e).evaluate(t)};var _i={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};function pa(e){return _i.hasOwnProperty(e)?_i[e]:e}qt.prototype.isOperatorEnabled=function(e){var t=pa(e),s=this.options.operators||{};return!(t in s)||!!s[t]};class Hn{constructor(t){E(this,"parser");E(this,"defaultDecimals");E(this,"defaultLocale");E(this,"resources",{});E(this,"validOperations",["arraySum","arrayAvg","arrayCount","arrayMin","arrayMax"]);var s,i;this.defaultDecimals=(s=t==null?void 0:t.defaultDecimals)!=null?s:2,this.defaultLocale=(i=t==null?void 0:t.defaultLocale)!=null?i:"en-GB",this.parser=new qt,this.patchPlusOperator(),this.addFormatFunction(),this.addArraySumFunction(),this.addArrayAvgFunction(),this.addArrayCountFunction(),this.addArrayMaxFunction(),this.addArrayMinFunction(),this.addLookupFunctions(),this.removeLengthFunction()}registerData(t,s){this.resources[t]=s}getData(t){return this.resources[t]||[]}getResourceNames(){return Object.keys(this.resources)}getTableNames(){return Object.keys(this.resources).filter(t=>t.startsWith("table."))}transformArrayFunctionArgs(t){const s=this.validOperations.join("|"),i=new RegExp("\\b(".concat(s,")\\s*\\(([^)]*)\\)"),"g");return t.replace(i,(n,r,o)=>{const l=o.split(",").map(c=>c.trim()).filter(c=>c.length>0).map(c=>/^['"].*['"]$/.test(c)||/^\d+(\.\d+)?$/.test(c)||/^(true|false|null)$/.test(c)||/^[[{].*[\]}]$/.test(c)||/[+\-*/%<>=!&|^]/.test(c)?c:'"'.concat(c,'"'));return"".concat(r,"(").concat(l.join(","),")")})}transformArraySelectors(t){const s=/([A-Za-z_$][A-Za-z0-9_$]*(?:\.[A-Za-z_$][A-Za-z0-9_$]*)*)\s*\[\s*([^\]]+)\s*\]((?:\.[A-Za-z_$][A-Za-z0-9_$]*)*)/g;return t.replace(s,(i,n,r,o)=>{if(n=n.trim(),r=r.trim(),o=o||"",/^\d+$/.test(r))return"".concat(n,"[").concat(r,"]").concat(o);(r.startsWith('"')&&r.endsWith('"')||r.startsWith("'")&&r.endsWith("'"))&&(r=r.slice(1,-1));const l=r.indexOf(":");let c="",h="";l===-1?(c=r,h=r):(c=r.slice(0,l).trim(),h=r.slice(l+1).trim()),o.startsWith(".")&&(o=o.slice(1));const u=o?',"'.concat(o.replace(/\./g,"."),'"'):"";return"lookup(".concat(n,',"').concat(c,'",').concat(h).concat(u,")")})}removeLengthFunction(){delete this.parser.unaryOps.length}patchPlusOperator(){const t=this.parser.binaryOps["+"];this.parser.binaryOps["+"]=(s,i)=>typeof s=="string"||typeof i=="string"?String(s!=null?s:"")+String(i!=null?i:""):t(s,i)}addFormatFunction(){this.parser.functions.format=(t,s=this.defaultDecimals,i,n=this.defaultLocale)=>{if(typeof t!="number")return String(t!=null?t:"");let o=new Intl.NumberFormat(n,{minimumFractionDigits:s,maximumFractionDigits:s}).format(t);if(i){const[a,l]=o.split(/[.,]/),c=a.padStart(i,"0");o=l?"".concat(c,".").concat(l):c}return o}}collectField(t,s){const i=(s!=null?s:["item"]).flatMap(o=>o==="tables"?this.getTableNames():[o]),n=[];let r;try{r=this.parser.parse(t)}catch(o){return n}return i.forEach(o=>{const a=this.getData(o);if(!Array.isArray(a)){console.warn('Resource "'.concat(o,'" is not an array.'));return}a.forEach(l=>{try{const c=r.evaluate(l);c!=null&&!isNaN(Number(c))&&n.push(Number(c))}catch(c){console.log(c)}})}),n}addArraySumFunction(){this.parser.functions.arraySum=(t,s)=>this.collectField(t,s==null?void 0:s.split(",").map(n=>n.trim())).reduce((n,r)=>n+r,0)}addArrayAvgFunction(){this.parser.functions.arrayAvg=(t,s)=>{const i=this.collectField(t,s==null?void 0:s.split(",").map(n=>n.trim()));return i.length?this.parser.functions.arraySum(t,s)/i.length:0}}addArrayCountFunction(){this.parser.functions.arrayCount=(t,s)=>this.collectField(t,s==null?void 0:s.split(",").map(i=>i.trim())).length}addArrayMaxFunction(){this.parser.functions.arrayMax=(t,s)=>{const i=this.collectField(t,s==null?void 0:s.split(",").map(n=>n.trim()));return i.length?Math.max(...i):null}}addArrayMinFunction(){this.parser.functions.arrayMin=(t,s)=>{const i=this.collectField(t,s==null?void 0:s.split(",").map(n=>n.trim()));return i.length?Math.min(...i):null}}addLookupFunctions(){this.parser.functions.lookup=(t,s,i,n,r=null)=>{if(!Array.isArray(t))return r;for(const o of t)try{if(o&&String(o[s])===String(i)){if(!n||n==="")return o;const a=String(n).split(".");let l=o;for(const c of a){if(l==null)break;l=l[c]}return l!=null?l:r}}catch(a){console.log(a)}return r}}parse(t){let s=null,i=t;for(;i!==s;)s=i,i=this.transformArrayFunctionArgs(i),i=this.transformArraySelectors(i);return this.parser.parse(i)}evaluate(t,s={}){try{return this.registerData("item",s),Object.keys(s).forEach(n=>{(Array.isArray(s[n])||typeof s[n]=="object")&&(this.resources[n]||this.registerData(n,s[n]))}),this.parse(t).evaluate(s)}catch(i){return console.error("[ExpressionParser] Evaluation error for expression:",t,"->",i),"«error»"}}evaluateTables(t,s){return!t||!this.validOperations.includes(t)?null:this.evaluate("".concat(t,'("').concat(s,'")'))}}const ga=({value:e,formatterParams:t})=>e?m.jsx(Vr,{color:"success"}):t!=null&&t.disableCrossElement?null:m.jsx(Yr,{color:"error"}),vs=({value:e,item:t,maxFontSize:s,minFontSize:i=8,precision:n=.5})=>{const r=D.useRef(null),o=D.useRef(null),a=D.useRef(null),[l,c]=D.useState(t.fontSize||s),h=f=>{if(o.current)return o.current;const p=document.createElement("div");p.style.position="absolute",p.style.visibility="hidden",p.style.whiteSpace=t.wrapText?"normal":"nowrap",p.style.padding="0",p.style.margin="0",p.style.boxSizing="border-box",p.style.width="".concat(f.clientWidth,"px");const g=window.getComputedStyle(f);return p.style.fontFamily=g.fontFamily||"inherit",p.style.fontWeight=g.fontWeight||"normal",p.style.lineHeight=g.lineHeight||"normal",p.style.letterSpacing=g.letterSpacing||"normal",document.body.appendChild(p),o.current=p,p},u=()=>{if(o.current){try{o.current.remove()}catch(f){}o.current=null}},d=()=>{const f=r.current;if(!f||typeof e=="object")return;const p=h(f);p.style.width="".concat(f.clientWidth,"px"),p.style.whiteSpace=t.wrapText?"normal":"nowrap";const g=(t.prefix?t.prefix:"")+String(e);p.innerText=g;const b=v=>{p.style.fontSize="".concat(v,"px");const S=p.scrollWidth,M=p.scrollHeight,w=S<=f.clientWidth+.5,O=M<=f.clientHeight+.5;return w&&O};if(b(s)){l!==s&&c(s);return}if(!b(i)){l!==i&&c(i);return}let x=i,y=s;for(;y-x>n;){const v=(x+y)/2;b(v)?x=v:y=v}const _=Math.max(i,Math.min(s,Math.round(x/n)*n));_!==l&&c(_)};return D.useLayoutEffect(()=>(a.current&&cancelAnimationFrame(a.current),a.current=requestAnimationFrame(()=>{d(),a.current=null}),()=>{a.current&&(cancelAnimationFrame(a.current),a.current=null)}),[e,t.wrapText,t.prefix,s,i,n]),D.useEffect(()=>{const f=r.current;if(!f)return;let p=null;const g=()=>{a.current&&cancelAnimationFrame(a.current),a.current=requestAnimationFrame(()=>{d(),a.current=null})};return typeof ResizeObserver<"u"?(p=new ResizeObserver(g),p.observe(f)):window.addEventListener("resize",g),()=>{p?(p.disconnect(),p=null):window.removeEventListener("resize",g)}},[e,t.wrapText,t.prefix,s,i,n]),D.useEffect(()=>u,[]),typeof e=="object"?null:m.jsx("div",{ref:r,style:{width:"100%",height:"100%",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"flex-start"},children:m.jsxs(et,{component:"div",sx:{m:0,...t.sx},style:{fontSize:l,whiteSpace:t.wrapText?"normal":"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"block",width:"100%"},children:[t.prefix&&m.jsx("b",{children:t.prefix}),e]})})},ma=({data:e,item:t})=>{var c,h;const s=vt((h=(c=t.formatterParams)==null?void 0:c.image)!=null?h:"",e),i=vt(t.field,e),[n,r]=D.useState(()=>{const u=localStorage.getItem("show-edrawings");return u!==null?JSON.parse(u):!0}),[o,a]=D.useState(n),l=()=>{r(u=>(u||a(!0),localStorage.setItem("show-edrawings",JSON.stringify(!u)),!u))};return m.jsxs(ut,{position:"relative",height:"100%",width:"100%",children:[o&&m.jsx("iframe",{className:"no-print",src:i,style:{width:"100%",height:"100%",display:n?"block":"none"},title:"edrawings",sandbox:"allow-scripts allow-same-origin"}),m.jsx(ut,{className:"print-image",sx:{width:"100%",height:"100%",display:n?"none":"block"},children:m.jsx(Fn,{value:s,data:e})}),m.jsx(ut,{position:"absolute",bottom:5,right:5,bgcolor:"rgba(255,255,255,0.8)",borderRadius:1,className:"no-print",children:m.jsx(Ln,{control:m.jsx(jn,{checked:n,onChange:l,color:"primary"}),label:"eDrawings",labelPlacement:"start"})}),m.jsx("style",{children:"\n				@media print {\n					iframe.no-print {\n						display: none !important;\n					}\n					.print-image {\n						display: block !important;\n					}\n				}\n				"})]})},ba=Fr(m.jsx("path",{d:"M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H15v-8h5V8zm-1 7V3.5L18.5 9zm4 12.66V16h5.66v2h-2.24l2.95 2.95-1.41 1.41L19 19.41v2.24h-2z"}),"FileOpen"),xa=({value:e})=>{const t=()=>{window.open(e)};return e&&m.jsx(In,{"aria-label":"open pdf",onClick:t,children:m.jsx(ba,{color:"primary",style:{width:24,height:24}})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Le(e){return e+.5|0}const Et=(e,t,s)=>Math.max(Math.min(e,s),t);function xe(e){return Et(Le(e*2.55),0,255)}function Pt(e){return Et(Le(e*255),0,255)}function _t(e){return Et(Le(e/2.55)/100,0,1)}function vi(e){return Et(Le(e*100),0,100)}const ot={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Is=[..."0123456789ABCDEF"],ya=e=>Is[e&15],_a=e=>Is[(e&240)>>4]+Is[e&15],ze=e=>(e&240)>>4===(e&15),va=e=>ze(e.r)&&ze(e.g)&&ze(e.b)&&ze(e.a);function wa(e){var t=e.length,s;return e[0]==="#"&&(t===4||t===5?s={r:255&ot[e[1]]*17,g:255&ot[e[2]]*17,b:255&ot[e[3]]*17,a:t===5?ot[e[4]]*17:255}:(t===7||t===9)&&(s={r:ot[e[1]]<<4|ot[e[2]],g:ot[e[3]]<<4|ot[e[4]],b:ot[e[5]]<<4|ot[e[6]],a:t===9?ot[e[7]]<<4|ot[e[8]]:255})),s}const Sa=(e,t)=>e<255?t(e):"";function Ma(e){var t=va(e)?ya:_a;return e?"#"+t(e.r)+t(e.g)+t(e.b)+Sa(e.a,t):void 0}const ka=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Vn(e,t,s){const i=t*Math.min(s,1-s),n=(r,o=(r+e/30)%12)=>s-i*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function Aa(e,t,s){const i=(n,r=(n+e/60)%6)=>s-s*t*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function Oa(e,t,s){const i=Vn(e,1,.5);let n;for(t+s>1&&(n=1/(t+s),t*=n,s*=n),n=0;n<3;n++)i[n]*=1-t-s,i[n]+=t;return i}function Ca(e,t,s,i,n){return e===n?(t-s)/i+(t<s?6:0):t===n?(s-e)/i+2:(e-t)/i+4}function Qs(e){const s=e.r/255,i=e.g/255,n=e.b/255,r=Math.max(s,i,n),o=Math.min(s,i,n),a=(r+o)/2;let l,c,h;return r!==o&&(h=r-o,c=a>.5?h/(2-r-o):h/(r+o),l=Ca(s,i,n,h,r),l=l*60+.5),[l|0,c||0,a]}function Zs(e,t,s,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,s,i)).map(Pt)}function Js(e,t,s){return Zs(Vn,e,t,s)}function Ta(e,t,s){return Zs(Oa,e,t,s)}function Ea(e,t,s){return Zs(Aa,e,t,s)}function Yn(e){return(e%360+360)%360}function Da(e){const t=ka.exec(e);let s=255,i;if(!t)return;t[5]!==i&&(s=t[6]?xe(+t[5]):Pt(+t[5]));const n=Yn(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=Ta(n,r,o):t[1]==="hsv"?i=Ea(n,r,o):i=Js(n,r,o),{r:i[0],g:i[1],b:i[2],a:s}}function Pa(e,t){var s=Qs(e);s[0]=Yn(s[0]+t),s=Js(s),e.r=s[0],e.g=s[1],e.b=s[2]}function Ra(e){if(!e)return;const t=Qs(e),s=t[0],i=vi(t[1]),n=vi(t[2]);return e.a<255?"hsla(".concat(s,", ").concat(i,"%, ").concat(n,"%, ").concat(_t(e.a),")"):"hsl(".concat(s,", ").concat(i,"%, ").concat(n,"%)")}const wi={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Si={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Ia(){const e={},t=Object.keys(Si),s=Object.keys(wi);let i,n,r,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],n=0;n<s.length;n++)r=s[n],a=a.replace(r,wi[r]);r=parseInt(Si[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let Be;function Fa(e){Be||(Be=Ia(),Be.transparent=[0,0,0,0]);const t=Be[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const La=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ja(e){const t=La.exec(e);let s=255,i,n,r;if(t){if(t[7]!==i){const o=+t[7];s=t[8]?xe(o):Et(o*255,0,255)}return i=+t[1],n=+t[3],r=+t[5],i=255&(t[2]?xe(i):Et(i,0,255)),n=255&(t[4]?xe(n):Et(n,0,255)),r=255&(t[6]?xe(r):Et(r,0,255)),{r:i,g:n,b:r,a:s}}}function za(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(_t(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}const ws=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Gt=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Ba(e,t,s){const i=Gt(_t(e.r)),n=Gt(_t(e.g)),r=Gt(_t(e.b));return{r:Pt(ws(i+s*(Gt(_t(t.r))-i))),g:Pt(ws(n+s*(Gt(_t(t.g))-n))),b:Pt(ws(r+s*(Gt(_t(t.b))-r))),a:e.a+s*(t.a-e.a)}}function Ne(e,t,s){if(e){let i=Qs(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*s,t===0?360:1)),i=Js(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function Un(e,t){return e&&Object.assign(t||{},e)}function Mi(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Pt(e[3]))):(t=Un(e,{r:0,g:0,b:0,a:1}),t.a=Pt(t.a)),t}function Na(e){return e.charAt(0)==="r"?ja(e):Da(e)}class De{constructor(t){if(t instanceof De)return t;const s=typeof t;let i;s==="object"?i=Mi(t):s==="string"&&(i=wa(t)||Fa(t)||Na(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Un(this._rgb);return t&&(t.a=_t(t.a)),t}set rgb(t){this._rgb=Mi(t)}rgbString(){return this._valid?za(this._rgb):void 0}hexString(){return this._valid?Ma(this._rgb):void 0}hslString(){return this._valid?Ra(this._rgb):void 0}mix(t,s){if(t){const i=this.rgb,n=t.rgb;let r;const o=s===r?.5:s,a=2*o-1,l=i.a-n.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*n.r+.5,i.g=255&c*i.g+r*n.g+.5,i.b=255&c*i.b+r*n.b+.5,i.a=o*i.a+(1-o)*n.a,this.rgb=i}return this}interpolate(t,s){return t&&(this._rgb=Ba(this._rgb,t._rgb,s)),this}clone(){return new De(this.rgb)}alpha(t){return this._rgb.a=Pt(t),this}clearer(t){const s=this._rgb;return s.a*=1-t,this}greyscale(){const t=this._rgb,s=Le(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=s,this}opaquer(t){const s=this._rgb;return s.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Ne(this._rgb,2,t),this}darken(t){return Ne(this._rgb,2,-t),this}saturate(t){return Ne(this._rgb,1,t),this}desaturate(t){return Ne(this._rgb,1,-t),this}rotate(t){return Pa(this._rgb,t),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function bt(){}const Wa=(()=>{let e=0;return()=>e++})();function J(e){return e==null}function G(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function F(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Mt(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function ft(e,t){return Mt(e)?e:t}function z(e,t){return typeof e>"u"?t:e}const $a=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,Xn=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function $(e,t,s){if(e&&typeof e.call=="function")return e.apply(s,t)}function j(e,t,s,i){let n,r,o;if(G(e))for(r=e.length,n=0;n<r;n++)t.call(s,e[n],n);else if(F(e))for(o=Object.keys(e),r=o.length,n=0;n<r;n++)t.call(s,e[o[n]],o[n])}function ts(e,t){let s,i,n,r;if(!e||!t||e.length!==t.length)return!1;for(s=0,i=e.length;s<i;++s)if(n=e[s],r=t[s],n.datasetIndex!==r.datasetIndex||n.index!==r.index)return!1;return!0}function es(e){if(G(e))return e.map(es);if(F(e)){const t=Object.create(null),s=Object.keys(e),i=s.length;let n=0;for(;n<i;++n)t[s[n]]=es(e[s[n]]);return t}return e}function qn(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function Ha(e,t,s,i){if(!qn(e))return;const n=t[e],r=s[e];F(n)&&F(r)?Pe(n,r,i):t[e]=es(r)}function Pe(e,t,s){const i=G(t)?t:[t],n=i.length;if(!F(e))return e;s=s||{};const r=s.merger||Ha;let o;for(let a=0;a<n;++a){if(o=i[a],!F(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)r(l[c],e,o,s)}return e}function ke(e,t){return Pe(e,t,{merger:Va})}function Va(e,t,s){if(!qn(e))return;const i=t[e],n=s[e];F(i)&&F(n)?ke(i,n):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=es(n))}const ki={"":e=>e,x:e=>e.x,y:e=>e.y};function Ya(e){const t=e.split("."),s=[];let i="";for(const n of t)i+=n,i.endsWith("\\")?i=i.slice(0,-1)+".":(s.push(i),i="");return s}function Ua(e){const t=Ya(e);return s=>{for(const i of t){if(i==="")break;s=s&&s[i]}return s}}function Re(e,t){return(ki[t]||(ki[t]=Ua(t)))(e)}function ti(e){return e.charAt(0).toUpperCase()+e.slice(1)}const ss=e=>typeof e<"u",Rt=e=>typeof e=="function",Ai=(e,t)=>{if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0};function Xa(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const q=Math.PI,X=2*q,is=Number.POSITIVE_INFINITY,qa=q/180,K=q/2,jt=q/4,Oi=q*2/3,Ci=Math.log10,Ti=Math.sign;function Ka(e){const t=[],s=Math.sqrt(e);let i;for(i=1;i<s;i++)e%i===0&&(t.push(i),t.push(e/i));return s===(s|0)&&t.push(s),t.sort((n,r)=>n-r).pop(),t}function Ga(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function ns(e){return!Ga(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Ht(e){return e*(q/180)}function Qa(e){return e*(180/q)}function Kn(e,t){const s=t.x-e.x,i=t.y-e.y,n=Math.sqrt(s*s+i*i);let r=Math.atan2(i,s);return r<-.5*q&&(r+=X),{angle:r,distance:n}}function Za(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function zt(e){return(e%X+X)%X}function rs(e,t,s,i){const n=zt(e),r=zt(t),o=zt(s),a=zt(r-n),l=zt(o-n),c=zt(n-r),h=zt(n-o);return n===r||n===o||i&&r===o||a>l&&c<h}function lt(e,t,s){return Math.max(t,Math.min(s,e))}function Ja(e){return lt(e,-32768,32767)}function ye(e,t,s,i=1e-6){return e>=Math.min(t,s)-i&&e<=Math.max(t,s)+i}function ei(e,t,s){s=s||(o=>e[o]<t);let i=e.length-1,n=0,r;for(;i-n>1;)r=n+i>>1,s(r)?n=r:i=r;return{lo:n,hi:i}}const Fs=(e,t,s,i)=>ei(e,s,i?n=>{const r=e[n][t];return r<s||r===s&&e[n+1][t]===s}:n=>e[n][t]<s),tl=(e,t,s)=>ei(e,s,i=>e[i][t]>=s);function el(e,t,s){let i=0,n=e.length;for(;i<n&&e[i]<t;)i++;for(;n>i&&e[n-1]>s;)n--;return i>0||n<e.length?e.slice(i,n):e}const Gn=["push","pop","shift","splice","unshift"];function sl(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Gn.forEach(s=>{const i="_onData"+ti(s),n=e[s];Object.defineProperty(e,s,{configurable:!0,enumerable:!1,value(...r){const o=n.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function Ei(e,t){const s=e._chartjs;if(!s)return;const i=s.listeners,n=i.indexOf(t);n!==-1&&i.splice(n,1),!(i.length>0)&&(Gn.forEach(r=>{delete e[r]}),delete e._chartjs)}function il(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Qn=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function Zn(e,t){let s=[],i=!1;return function(...n){s=n,i||(i=!0,Qn.call(window,()=>{i=!1,e.apply(t,s)}))}}function nl(e,t){let s;return function(...i){return t?(clearTimeout(s),s=setTimeout(e,t,i)):e.apply(this,i),t}}const si=e=>e==="start"?"left":e==="end"?"right":"center",Q=(e,t,s)=>e==="start"?t:e==="end"?s:(t+s)/2,rl=(e,t,s,i)=>e===(i?"left":"right")?s:e==="center"?(t+s)/2:t,We=e=>e===0||e===1,Di=(e,t,s)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*X/s)),Pi=(e,t,s)=>Math.pow(2,-10*e)*Math.sin((e-t)*X/s)+1,Ae={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*K)+1,easeOutSine:e=>Math.sin(e*K),easeInOutSine:e=>-.5*(Math.cos(q*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>We(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>We(e)?e:Di(e,.075,.3),easeOutElastic:e=>We(e)?e:Pi(e,.075,.3),easeInOutElastic(e){return We(e)?e:e<.5?.5*Di(e*2,.1125,.45):.5+.5*Pi(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Ae.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Ae.easeInBounce(e*2)*.5:Ae.easeOutBounce(e*2-1)*.5+.5};function Jn(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Ri(e){return Jn(e)?e:new De(e)}function Ss(e){return Jn(e)?e:new De(e).saturate(.5).darken(.1).hexString()}const ol=["x","y","borderWidth","radius","tension"],al=["color","borderColor","backgroundColor"];function ll(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:al},numbers:{type:"number",properties:ol}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function cl(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Ii=new Map;function hl(e,t){t=t||{};const s=e+JSON.stringify(t);let i=Ii.get(s);return i||(i=new Intl.NumberFormat(e,t),Ii.set(s,i)),i}function tr(e,t,s){return hl(t,s).format(e)}const er={values(e){return G(e)?e:""+e},numeric(e,t,s){if(e===0)return"0";const i=this.chart.options.locale;let n,r=e;if(s.length>1){const c=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(c<1e-4||c>1e15)&&(n="scientific"),r=ul(e,s)}const o=Ci(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:n,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),tr(e,i,l)},logarithmic(e,t,s){if(e===0)return"0";const i=s[t].significand||e/Math.pow(10,Math.floor(Ci(e)));return[1,2,3,5,10,15].includes(i)||t>.8*s.length?er.numeric.call(this,e,t,s):""}};function ul(e,t){let s=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(s)>=1&&e!==Math.floor(e)&&(s=e-Math.floor(e)),s}var dl={formatters:er};function fl(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,s)=>s.lineWidth,tickColor:(t,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:dl.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Ut=Object.create(null),Ls=Object.create(null);function Oe(e,t){if(!t)return e;const s=t.split(".");for(let i=0,n=s.length;i<n;++i){const r=s[i];e=e[r]||(e[r]=Object.create(null))}return e}function Ms(e,t,s){return typeof t=="string"?Pe(Oe(e,t),s):Pe(Oe(e,""),t)}class pl{constructor(t,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,n)=>Ss(n.backgroundColor),this.hoverBorderColor=(i,n)=>Ss(n.borderColor),this.hoverColor=(i,n)=>Ss(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(s)}set(t,s){return Ms(this,t,s)}get(t){return Oe(this,t)}describe(t,s){return Ms(Ls,t,s)}override(t,s){return Ms(Ut,t,s)}route(t,s,i,n){const r=Oe(this,t),o=Oe(this,i),a="_"+s;Object.defineProperties(r,{[a]:{value:r[s],writable:!0},[s]:{enumerable:!0,get(){const l=this[a],c=o[n];return F(l)?Object.assign({},c,l):z(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(s=>s(this))}}var U=new pl({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[ll,cl,fl]);function gl(e){return!e||J(e.size)||J(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Fi(e,t,s,i,n){let r=t[n];return r||(r=t[n]=e.measureText(n).width,s.push(n)),r>i&&(i=r),i}function Bt(e,t,s){const i=e.currentDevicePixelRatio,n=s!==0?Math.max(s/2,.5):0;return Math.round((t-n)*i)/i+n}function Li(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function ji(e,t,s,i){sr(e,t,s,i,null)}function sr(e,t,s,i,n){let r,o,a,l,c,h,u,d;const f=t.pointStyle,p=t.rotation,g=t.radius;let b=(p||0)*qa;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(s,i),e.rotate(b),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),e.restore();return}if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:n?e.ellipse(s,i,n/2,g,0,0,X):e.arc(s,i,g,0,X),e.closePath();break;case"triangle":h=n?n/2:g,e.moveTo(s+Math.sin(b)*h,i-Math.cos(b)*g),b+=Oi,e.lineTo(s+Math.sin(b)*h,i-Math.cos(b)*g),b+=Oi,e.lineTo(s+Math.sin(b)*h,i-Math.cos(b)*g),e.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(b+jt)*l,u=Math.cos(b+jt)*(n?n/2-c:l),a=Math.sin(b+jt)*l,d=Math.sin(b+jt)*(n?n/2-c:l),e.arc(s-u,i-a,c,b-q,b-K),e.arc(s+d,i-o,c,b-K,b),e.arc(s+u,i+a,c,b,b+K),e.arc(s-d,i+o,c,b+K,b+q),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,h=n?n/2:l,e.rect(s-h,i-l,2*h,2*l);break}b+=jt;case"rectRot":u=Math.cos(b)*(n?n/2:g),o=Math.cos(b)*g,a=Math.sin(b)*g,d=Math.sin(b)*(n?n/2:g),e.moveTo(s-u,i-a),e.lineTo(s+d,i-o),e.lineTo(s+u,i+a),e.lineTo(s-d,i+o),e.closePath();break;case"crossRot":b+=jt;case"cross":u=Math.cos(b)*(n?n/2:g),o=Math.cos(b)*g,a=Math.sin(b)*g,d=Math.sin(b)*(n?n/2:g),e.moveTo(s-u,i-a),e.lineTo(s+u,i+a),e.moveTo(s+d,i-o),e.lineTo(s-d,i+o);break;case"star":u=Math.cos(b)*(n?n/2:g),o=Math.cos(b)*g,a=Math.sin(b)*g,d=Math.sin(b)*(n?n/2:g),e.moveTo(s-u,i-a),e.lineTo(s+u,i+a),e.moveTo(s+d,i-o),e.lineTo(s-d,i+o),b+=jt,u=Math.cos(b)*(n?n/2:g),o=Math.cos(b)*g,a=Math.sin(b)*g,d=Math.sin(b)*(n?n/2:g),e.moveTo(s-u,i-a),e.lineTo(s+u,i+a),e.moveTo(s+d,i-o),e.lineTo(s-d,i+o);break;case"line":o=n?n/2:Math.cos(b)*g,a=Math.sin(b)*g,e.moveTo(s-o,i-a),e.lineTo(s+o,i+a);break;case"dash":e.moveTo(s,i),e.lineTo(s+Math.cos(b)*(n?n/2:g),i+Math.sin(b)*g);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function ir(e,t,s){return s=s||.5,!t||e&&e.x>t.left-s&&e.x<t.right+s&&e.y>t.top-s&&e.y<t.bottom+s}function ii(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function ni(e){e.restore()}function ml(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),J(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function bl(e,t,s,i,n){if(n.strikethrough||n.underline){const r=e.measureText(i),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=s-r.actualBoundingBoxAscent,c=s+r.actualBoundingBoxDescent,h=n.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=n.decorationWidth||2,e.moveTo(o,h),e.lineTo(a,h),e.stroke()}}function xl(e,t){const s=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=s}function Ie(e,t,s,i,n,r={}){const o=G(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(e.save(),e.font=n.string,ml(e,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&xl(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),J(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,s,i,r.maxWidth)),e.fillText(c,s,i,r.maxWidth),bl(e,s,i,c,r),i+=Number(n.lineHeight);e.restore()}function js(e,t){const{x:s,y:i,w:n,h:r,radius:o}=t;e.arc(s+o.topLeft,i+o.topLeft,o.topLeft,1.5*q,q,!0),e.lineTo(s,i+r-o.bottomLeft),e.arc(s+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,q,K,!0),e.lineTo(s+n-o.bottomRight,i+r),e.arc(s+n-o.bottomRight,i+r-o.bottomRight,o.bottomRight,K,0,!0),e.lineTo(s+n,i+o.topRight),e.arc(s+n-o.topRight,i+o.topRight,o.topRight,0,-K,!0),e.lineTo(s+o.topLeft,i)}const yl=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,_l=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function vl(e,t){const s=(""+e).match(yl);if(!s||s[1]==="normal")return t*1.2;switch(e=+s[2],s[3]){case"px":return e;case"%":e/=100;break}return t*e}const wl=e=>+e||0;function ri(e,t){const s={},i=F(t),n=i?Object.keys(t):t,r=F(e)?i?o=>z(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of n)s[o]=wl(r(o));return s}function Sl(e){return ri(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Ce(e){return ri(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ht(e){const t=Sl(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Z(e,t){e=e||{},t=t||U.font;let s=z(e.size,t.size);typeof s=="string"&&(s=parseInt(s,10));let i=z(e.style,t.style);i&&!(""+i).match(_l)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const n={family:z(e.family,t.family),lineHeight:vl(z(e.lineHeight,t.lineHeight),s),size:s,style:i,weight:z(e.weight,t.weight),string:""};return n.string=gl(n),n}function $e(e,t,s,i){let n,r,o;for(n=0,r=e.length;n<r;++n)if(o=e[n],o!==void 0&&o!==void 0)return o}function Ml(e,t,s){const{min:i,max:n}=e,r=Xn(t,(n-i)/2),o=(a,l)=>s&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(n,r)}}function ce(e,t){return Object.assign(Object.create(e),t)}function oi(e,t=[""],s,i,n=()=>e[0]){const r=s||e;typeof i>"u"&&(i=ar("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:i,_getTarget:n,override:a=>oi([a,...e],t,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return rr(a,l,()=>Pl(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return Bi(a).includes(l)},ownKeys(a){return Bi(a)},set(a,l,c){const h=a._storage||(a._storage=n());return a[l]=h[l]=c,delete a._keys,!0}})}function ne(e,t,s,i){const n={_cacheable:!1,_proxy:e,_context:t,_subProxy:s,_stack:new Set,_descriptors:nr(e,i),setContext:r=>ne(e,r,s,i),override:r=>ne(e.override(r),t,s,i)};return new Proxy(n,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return rr(r,o,()=>Al(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function nr(e,t={scriptable:!0,indexable:!0}){const{_scriptable:s=t.scriptable,_indexable:i=t.indexable,_allKeys:n=t.allKeys}=e;return{allKeys:n,scriptable:s,indexable:i,isScriptable:Rt(s)?s:()=>s,isIndexable:Rt(i)?i:()=>i}}const kl=(e,t)=>e?e+ti(t):t,ai=(e,t)=>F(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function rr(e,t,s){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const i=s();return e[t]=i,i}function Al(e,t,s){const{_proxy:i,_context:n,_subProxy:r,_descriptors:o}=e;let a=i[t];return Rt(a)&&o.isScriptable(t)&&(a=Ol(t,a,e,s)),G(a)&&a.length&&(a=Cl(t,a,e,o.isIndexable)),ai(t,a)&&(a=ne(a,n,r&&r[t],o)),a}function Ol(e,t,s,i){const{_proxy:n,_context:r,_subProxy:o,_stack:a}=s;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||i);return a.delete(e),ai(e,l)&&(l=li(n._scopes,n,e,l)),l}function Cl(e,t,s,i){const{_proxy:n,_context:r,_subProxy:o,_descriptors:a}=s;if(typeof r.index<"u"&&i(e))return t[r.index%t.length];if(F(t[0])){const l=t,c=n._scopes.filter(h=>h!==l);t=[];for(const h of l){const u=li(c,n,e,h);t.push(ne(u,r,o&&o[e],a))}}return t}function or(e,t,s){return Rt(e)?e(t,s):e}const Tl=(e,t)=>e===!0?t:typeof e=="string"?Re(t,e):void 0;function El(e,t,s,i,n){for(const r of t){const o=Tl(s,r);if(o){e.add(o);const a=or(o._fallback,s,n);if(typeof a<"u"&&a!==s&&a!==i)return a}else if(o===!1&&typeof i<"u"&&s!==i)return null}return!1}function li(e,t,s,i){const n=t._rootScopes,r=or(t._fallback,s,i),o=[...e,...n],a=new Set;a.add(i);let l=zi(a,o,s,r||s,i);return l===null||typeof r<"u"&&r!==s&&(l=zi(a,o,r,l,i),l===null)?!1:oi(Array.from(a),[""],n,r,()=>Dl(t,s,i))}function zi(e,t,s,i,n){for(;s;)s=El(e,t,s,i,n);return s}function Dl(e,t,s){const i=e._getTarget();t in i||(i[t]={});const n=i[t];return G(n)&&F(s)?s:n||{}}function Pl(e,t,s,i){let n;for(const r of t)if(n=ar(kl(r,e),s),typeof n<"u")return ai(e,n)?li(s,i,e,n):n}function ar(e,t){for(const s of t){if(!s)continue;const i=s[e];if(typeof i<"u")return i}}function Bi(e){let t=e._keys;return t||(t=e._keys=Rl(e._scopes)),t}function Rl(e){const t=new Set;for(const s of e)for(const i of Object.keys(s).filter(n=>!n.startsWith("_")))t.add(i);return Array.from(t)}function ci(){return typeof window<"u"&&typeof document<"u"}function hi(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function os(e,t,s){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*t.parentNode[s])):i=e,i}const gs=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function Il(e,t){return gs(e).getPropertyValue(t)}const Fl=["top","right","bottom","left"];function Vt(e,t,s){const i={};s=s?"-"+s:"";for(let n=0;n<4;n++){const r=Fl[n];i[r]=parseFloat(e[t+"-"+r+s])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Ll=(e,t,s)=>(e>0||t>0)&&(!s||!s.shadowRoot);function jl(e,t){const s=e.touches,i=s&&s.length?s[0]:e,{offsetX:n,offsetY:r}=i;let o=!1,a,l;if(Ll(n,r,e.target))a=n,l=r;else{const c=t.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Wt(e,t){if("native"in e)return e;const{canvas:s,currentDevicePixelRatio:i}=t,n=gs(s),r=n.boxSizing==="border-box",o=Vt(n,"padding"),a=Vt(n,"border","width"),{x:l,y:c,box:h}=jl(e,s),u=o.left+(h&&a.left),d=o.top+(h&&a.top);let{width:f,height:p}=t;return r&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-u)/f*s.width/i),y:Math.round((c-d)/p*s.height/i)}}function zl(e,t,s){let i,n;if(t===void 0||s===void 0){const r=e&&hi(e);if(!r)t=e.clientWidth,s=e.clientHeight;else{const o=r.getBoundingClientRect(),a=gs(r),l=Vt(a,"border","width"),c=Vt(a,"padding");t=o.width-c.width-l.width,s=o.height-c.height-l.height,i=os(a.maxWidth,r,"clientWidth"),n=os(a.maxHeight,r,"clientHeight")}}return{width:t,height:s,maxWidth:i||is,maxHeight:n||is}}const He=e=>Math.round(e*10)/10;function Bl(e,t,s,i){const n=gs(e),r=Vt(n,"margin"),o=os(n.maxWidth,e,"clientWidth")||is,a=os(n.maxHeight,e,"clientHeight")||is,l=zl(e,t,s);let{width:c,height:h}=l;if(n.boxSizing==="content-box"){const d=Vt(n,"border","width"),f=Vt(n,"padding");c-=f.width+d.width,h-=f.height+d.height}return c=Math.max(0,c-r.width),h=Math.max(0,i?c/i:h-r.height),c=He(Math.min(c,o,l.maxWidth)),h=He(Math.min(h,a,l.maxHeight)),c&&!h&&(h=He(c/2)),(t!==void 0||s!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=He(Math.floor(h*i))),{width:c,height:h}}function Ni(e,t,s){const i=t||1,n=Math.floor(e.height*i),r=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(s||!o.style.height&&!o.style.width)&&(o.style.height="".concat(e.height,"px"),o.style.width="".concat(e.width,"px")),e.currentDevicePixelRatio!==i||o.height!==n||o.width!==r?(e.currentDevicePixelRatio=i,o.height=n,o.width=r,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Nl=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};ci()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(t){}return e}();function Wi(e,t){const s=Il(e,t),i=s&&s.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const Wl=function(e,t){return{x(s){return e+e+t-s},setWidth(s){t=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,i){return s-i},leftForLtr(s,i){return s-i}}},$l=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Jt(e,t,s){return e?Wl(t,s):$l()}function lr(e,t){let s,i;(t==="ltr"||t==="rtl")&&(s=e.canvas.style,i=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",t,"important"),e.prevTextDirection=i)}function cr(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Ve(e,t,s){return e.options.clip?e[s]:t[s]}function Hl(e,t){const{xScale:s,yScale:i}=e;return s&&i?{left:Ve(s,t,"left"),right:Ve(s,t,"right"),top:Ve(i,t,"top"),bottom:Ve(i,t,"bottom")}:t}function Vl(e,t){const s=t._clip;if(s.disabled)return!1;const i=Hl(t,e.chartArea);return{left:s.left===!1?0:i.left-(s.left===!0?0:s.left),right:s.right===!1?e.width:i.right+(s.right===!0?0:s.right),top:s.top===!1?0:i.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?e.height:i.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Yl{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,s,i,n){const r=s.listeners[n],o=s.duration;r.forEach(a=>a({chart:t,initial:s.initial,numSteps:o,currentStep:Math.min(i-s.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Qn.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let s=0;this._charts.forEach((i,n)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(n.draw(),this._notify(n,i,t,"progress")),r.length||(i.running=!1,this._notify(n,i,t,"complete"),i.initial=!1),s+=r.length}),this._lastDate=t,s===0&&(this._running=!1)}_getAnims(t){const s=this._charts;let i=s.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(t,i)),i}listen(t,s,i){this._getAnims(t).listeners[s].push(i)}add(t,s){!s||!s.length||this._getAnims(t).items.push(...s)}has(t){return this._getAnims(t).items.length>0}start(t){const s=this._charts.get(t);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((i,n)=>Math.max(i,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;const s=this._charts.get(t);return!(!s||!s.running||!s.items.length)}stop(t){const s=this._charts.get(t);if(!s||!s.items.length)return;const i=s.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();s.items=[],this._notify(t,s,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var xt=new Yl;const $i="transparent",Ul={boolean(e,t,s){return s>.5?t:e},color(e,t,s){const i=Ri(e||$i),n=i.valid&&Ri(t||$i);return n&&n.valid?n.mix(i,s).hexString():t},number(e,t,s){return e+(t-e)*s}};class Xl{constructor(t,s,i,n){const r=s[i];n=$e([t.to,n,r,t.from]);const o=$e([t.from,r,n]);this._active=!0,this._fn=t.fn||Ul[t.type||typeof o],this._easing=Ae[t.easing]||Ae.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=s,this._prop=i,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(t,s,i){if(this._active){this._notify(!1);const n=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=$e([t.to,s,n,t.from]),this._from=$e([t.from,n,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const s=t-this._start,i=this._duration,n=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||s<i),!this._active){this._target[n]=a,this._notify(!0);return}if(s<0){this._target[n]=r;return}l=s/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[n]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((s,i)=>{t.push({res:s,rej:i})})}_notify(t){const s=t?"res":"rej",i=this._promises||[];for(let n=0;n<i.length;n++)i[n][s]()}}class hr{constructor(t,s){this._chart=t,this._properties=new Map,this.configure(s)}configure(t){if(!F(t))return;const s=Object.keys(U.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const r=t[n];if(!F(r))return;const o={};for(const a of s)o[a]=r[a];(G(r.properties)&&r.properties||[n]).forEach(a=>{(a===n||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,s){const i=s.options,n=Kl(t,i);if(!n)return[];const r=this._createAnimations(n,i);return i.$shared&&ql(t.options.$animations,i).then(()=>{t.options=i},()=>{}),r}_createAnimations(t,s){const i=this._properties,n=[],r=t.$animations||(t.$animations={}),o=Object.keys(s),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){n.push(...this._animateOptions(t,s));continue}const h=s[c];let u=r[c];const d=i.get(c);if(u)if(d&&u.active()){u.update(d,h,a);continue}else u.cancel();if(!d||!d.duration){t[c]=h;continue}r[c]=u=new Xl(d,t,c,h),n.push(u)}return n}update(t,s){if(this._properties.size===0){Object.assign(t,s);return}const i=this._createAnimations(t,s);if(i.length)return xt.add(this._chart,i),!0}}function ql(e,t){const s=[],i=Object.keys(t);for(let n=0;n<i.length;n++){const r=e[i[n]];r&&r.active()&&s.push(r.wait())}return Promise.all(s)}function Kl(e,t){if(!t)return;let s=e.options;if(!s){e.options=t;return}return s.$shared&&(e.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function Hi(e,t){const s=e&&e.options||{},i=s.reverse,n=s.min===void 0?t:0,r=s.max===void 0?t:0;return{start:i?r:n,end:i?n:r}}function Gl(e,t,s){if(s===!1)return!1;const i=Hi(e,s),n=Hi(t,s);return{top:n.end,right:i.end,bottom:n.start,left:i.start}}function Ql(e){let t,s,i,n;return F(e)?(t=e.top,s=e.right,i=e.bottom,n=e.left):t=s=i=n=e,{top:t,right:s,bottom:i,left:n,disabled:e===!1}}function ur(e,t){const s=[],i=e._getSortedDatasetMetas(t);let n,r;for(n=0,r=i.length;n<r;++n)s.push(i[n].index);return s}function Vi(e,t,s,i={}){const n=e.keys,r=i.mode==="single";let o,a,l,c;if(t===null)return;let h=!1;for(o=0,a=n.length;o<a;++o){if(l=+n[o],l===s){if(h=!0,i.all)continue;break}c=e.values[l],Mt(c)&&(r||t===0||Ti(t)===Ti(c))&&(t+=c)}return!h&&!i.all?0:t}function Zl(e,t){const{iScale:s,vScale:i}=t,n=s.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[n]:h,[r]:e[h]};return a}function ks(e,t){const s=e&&e.options.stacked;return s||s===void 0&&t.stack!==void 0}function Jl(e,t,s){return"".concat(e.id,".").concat(t.id,".").concat(s.stack||s.type)}function tc(e){const{min:t,max:s,minDefined:i,maxDefined:n}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:n?s:Number.POSITIVE_INFINITY}}function ec(e,t,s){const i=e[t]||(e[t]={});return i[s]||(i[s]={})}function Yi(e,t,s,i){for(const n of t.getMatchingVisibleMetas(i).reverse()){const r=e[n.index];if(s&&r>0||!s&&r<0)return n.index}return null}function Ui(e,t){const{chart:s,_cachedMeta:i}=e,n=s._stacks||(s._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,h=Jl(r,o,i),u=t.length;let d;for(let f=0;f<u;++f){const p=t[f],{[l]:g,[c]:b}=p,x=p._stacks||(p._stacks={});d=x[c]=ec(n,h,g),d[a]=b,d._top=Yi(d,o,!0,i.type),d._bottom=Yi(d,o,!1,i.type);const y=d._visualValues||(d._visualValues={});y[a]=b}}function As(e,t){const s=e.scales;return Object.keys(s).filter(i=>s[i].axis===t).shift()}function sc(e,t){return ce(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function ic(e,t,s){return ce(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:s,index:t,mode:"default",type:"data"})}function de(e,t){const s=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const n of t){const r=n._stacks;if(!r||r[i]===void 0||r[i][s]===void 0)return;delete r[i][s],r[i]._visualValues!==void 0&&r[i]._visualValues[s]!==void 0&&delete r[i]._visualValues[s]}}}const Os=e=>e==="reset"||e==="none",Xi=(e,t)=>t?e:Object.assign({},e),nc=(e,t,s)=>e&&!t.hidden&&t._stacked&&{keys:ur(s,!0),values:null};class Te{constructor(t,s){this.chart=t,this._ctx=t.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=ks(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&de(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,s=this._cachedMeta,i=this.getDataset(),n=(u,d,f,p)=>u==="x"?d:u==="r"?p:f,r=s.xAxisID=z(i.xAxisID,As(t,"x")),o=s.yAxisID=z(i.yAxisID,As(t,"y")),a=s.rAxisID=z(i.rAxisID,As(t,"r")),l=s.indexAxis,c=s.iAxisID=n(l,r,o,a),h=s.vAxisID=n(l,o,r,a);s.xScale=this.getScaleForId(r),s.yScale=this.getScaleForId(o),s.rScale=this.getScaleForId(a),s.iScale=this.getScaleForId(c),s.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const s=this._cachedMeta;return t===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Ei(this._data,this),t._stacked&&de(t)}_dataCheck(){const t=this.getDataset(),s=t.data||(t.data=[]),i=this._data;if(F(s)){const n=this._cachedMeta;this._data=Zl(s,n)}else if(i!==s){if(i){Ei(i,this);const n=this._cachedMeta;de(n),n._parsed=[]}s&&Object.isExtensible(s)&&sl(s,this),this._syncList=[],this._data=s}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const s=this._cachedMeta,i=this.getDataset();let n=!1;this._dataCheck();const r=s._stacked;s._stacked=ks(s.vScale,s),s.stack!==i.stack&&(n=!0,de(s),s.stack=i.stack),this._resyncElements(t),(n||r!==s._stacked)&&(Ui(this,s._parsed),s._stacked=ks(s.vScale,s))}configure(){const t=this.chart.config,s=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),s,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,s){const{_cachedMeta:i,_data:n}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=t===0&&s===n.length?!0:i._sorted,c=t>0&&i._parsed[t-1],h,u,d;if(this._parsing===!1)i._parsed=n,i._sorted=!0,d=n;else{G(n[t])?d=this.parseArrayData(i,n,t,s):F(n[t])?d=this.parseObjectData(i,n,t,s):d=this.parsePrimitiveData(i,n,t,s);const f=()=>u[a]===null||c&&u[a]<c[a];for(h=0;h<s;++h)i._parsed[h+t]=u=d[h],l&&(f()&&(l=!1),c=u);i._sorted=l}o&&Ui(this,d)}parsePrimitiveData(t,s,i,n){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),h=r===o,u=new Array(n);let d,f,p;for(d=0,f=n;d<f;++d)p=d+i,u[d]={[a]:h||r.parse(c[p],p),[l]:o.parse(s[p],p)};return u}parseArrayData(t,s,i,n){const{xScale:r,yScale:o}=t,a=new Array(n);let l,c,h,u;for(l=0,c=n;l<c;++l)h=l+i,u=s[h],a[l]={x:r.parse(u[0],h),y:o.parse(u[1],h)};return a}parseObjectData(t,s,i,n){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(n);let h,u,d,f;for(h=0,u=n;h<u;++h)d=h+i,f=s[d],c[h]={x:r.parse(Re(f,a),d),y:o.parse(Re(f,l),d)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,s,i){const n=this.chart,r=this._cachedMeta,o=s[t.axis],a={keys:ur(n,!0),values:s._stacks[t.axis]._visualValues};return Vi(a,o,r.index,{mode:i})}updateRangeFromParsed(t,s,i,n){const r=i[s.axis];let o=r===null?NaN:r;const a=n&&i._stacks[s.axis];n&&a&&(n.values=a,o=Vi(n,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,s){const i=this._cachedMeta,n=i._parsed,r=i._sorted&&t===i.iScale,o=n.length,a=this._getOtherScale(t),l=nc(s,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:u}=tc(a);let d,f;function p(){f=n[d];const g=f[a.axis];return!Mt(f[t.axis])||h>g||u<g}for(d=0;d<o&&!(!p()&&(this.updateRangeFromParsed(c,t,f,l),r));++d);if(r){for(d=o-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(c,t,f,l);break}}return c}getAllParsedValues(t){const s=this._cachedMeta._parsed,i=[];let n,r,o;for(n=0,r=s.length;n<r;++n)o=s[n][t.axis],Mt(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const s=this._cachedMeta,i=s.iScale,n=s.vScale,r=this.getParsed(t);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:n?""+n.getLabelForValue(r[n.axis]):""}}_update(t){const s=this._cachedMeta;this.update(t||"default"),s._clip=Ql(z(this.options.clip,Gl(s.xScale,s.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,s=this.chart,i=this._cachedMeta,n=i.data||[],r=s.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||n.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(t,r,a,l),h=a;h<a+l;++h){const u=n[h];u.hidden||(u.active&&c?o.push(u):u.draw(t,r))}for(h=0;h<o.length;++h)o[h].draw(t,r)}getStyle(t,s){const i=s?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,s,i){const n=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=ic(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=n.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=sc(this.chart.getContext(),this.index)),r.dataset=n,r.index=r.datasetIndex=this.index;return r.active=!!s,r.mode=i,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,s){return this._resolveElementOptions(this.dataElementType.id,s,t)}_resolveElementOptions(t,s="default",i){const n=s==="active",r=this._cachedDataOpts,o=t+"-"+s,a=r[o],l=this.enableOptionSharing&&ss(i);if(a)return Xi(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,t),u=n?["".concat(t,"Hover"),"hover",t,""]:[t,""],d=c.getOptionScopes(this.getDataset(),h),f=Object.keys(U.elements[t]),p=()=>this.getContext(i,n,s),g=c.resolveNamedOptions(d,f,p,u);return g.$shared&&(g.$shared=l,r[o]=Object.freeze(Xi(g,l))),g}_resolveAnimations(t,s,i){const n=this.chart,r=this._cachedDataOpts,o="animation-".concat(s),a=r[o];if(a)return a;let l;if(n.options.animation!==!1){const h=this.chart.config,u=h.datasetAnimationScopeKeys(this._type,s),d=h.getOptionScopes(this.getDataset(),u);l=h.createResolver(d,this.getContext(t,i,s))}const c=new hr(n,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,s){return!s||Os(t)||this.chart._animationsDisabled}_getSharedOptions(t,s){const i=this.resolveDataElementOptions(t,s),n=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(s,r)||r!==n;return this.updateSharedOptions(r,s,i),{sharedOptions:r,includeOptions:o}}updateElement(t,s,i,n){Os(n)?Object.assign(t,i):this._resolveAnimations(s,n).update(t,i)}updateSharedOptions(t,s,i){t&&!Os(s)&&this._resolveAnimations(void 0,s).update(t,i)}_setStyle(t,s,i,n){t.active=n;const r=this.getStyle(s,n);this._resolveAnimations(s,i,n).update(t,{options:!n&&this.getSharedOptions(r)||r})}removeHoverStyle(t,s,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,s,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const s=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const n=i.length,r=s.length,o=Math.min(r,n);o&&this.parse(0,o),r>n?this._insertElements(n,r-n,t):r<n&&this._removeElements(r,n-r)}_insertElements(t,s,i=!0){const n=this._cachedMeta,r=n.data,o=t+s;let a;const l=c=>{for(c.length+=s,a=c.length-1;a>=o;a--)c[a]=c[a-s]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(n._parsed),this.parse(t,s),i&&this.updateElements(r,t,s,"reset")}updateElements(t,s,i,n){}_removeElements(t,s){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(t,s);i._stacked&&de(i,n)}i.data.splice(t,s)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[s,i,n]=t;this[s](i,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,s){s&&this._sync(["_removeElements",t,s]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}E(Te,"defaults",{}),E(Te,"datasetElementType",null),E(Te,"dataElementType",null);function rc(e,t,s){let i=1,n=1,r=0,o=0;if(t<X){const a=e,l=a+t,c=Math.cos(a),h=Math.sin(a),u=Math.cos(l),d=Math.sin(l),f=(_,v,S)=>rs(_,a,l,!0)?1:Math.max(v,v*s,S,S*s),p=(_,v,S)=>rs(_,a,l,!0)?-1:Math.min(v,v*s,S,S*s),g=f(0,c,u),b=f(K,h,d),x=p(q,c,u),y=p(q+K,h,d);i=(g-x)/2,n=(b-y)/2,r=-(g+x)/2,o=-(b+y)/2}return{ratioX:i,ratioY:n,offsetX:r,offsetY:o}}class _e extends Te{constructor(t,s){super(t,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,s){const i=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=i;else{let r=l=>+i[l];if(F(i[t])){const{key:l="value"}=this._parsing;r=c=>+Re(i[c],l)}let o,a;for(o=t,a=t+s;o<a;++o)n._parsed[o]=r(o)}}_getRotation(){return Ht(this.options.rotation-90)}_getCircumference(){return Ht(this.options.circumference)}_getRotationExtents(){let t=X,s=-X;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const n=this.chart.getDatasetMeta(i).controller,r=n._getRotation(),o=n._getCircumference();t=Math.min(t,r),s=Math.max(s,r+o)}return{rotation:t,circumference:s-t}}update(t){const s=this.chart,{chartArea:i}=s,n=this._cachedMeta,r=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min($a(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:u}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:p,offsetY:g}=rc(u,h,l),b=(i.width-o)/d,x=(i.height-o)/f,y=Math.max(Math.min(b,x)/2,0),_=Xn(this.options.radius,y),v=Math.max(_*l,0),S=(_-v)/this._getVisibleDatasetWeightTotal();this.offsetX=p*_,this.offsetY=g*_,n.total=this.calculateTotal(),this.outerRadius=_-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,s){const i=this.options,n=this._cachedMeta,r=this._getCircumference();return s&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||n._parsed[t]===null||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*r/X)}updateElements(t,s,i,n){const r=n==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,u=(a.top+a.bottom)/2,d=r&&c.animateScale,f=d?0:this.innerRadius,p=d?0:this.outerRadius,{sharedOptions:g,includeOptions:b}=this._getSharedOptions(s,n);let x=this._getRotation(),y;for(y=0;y<s;++y)x+=this._circumference(y,r);for(y=s;y<s+i;++y){const _=this._circumference(y,r),v=t[y],S={x:h+this.offsetX,y:u+this.offsetY,startAngle:x,endAngle:x+_,circumference:_,outerRadius:p,innerRadius:f};b&&(S.options=g||this.resolveDataElementOptions(y,v.active?"active":n)),x+=_,this.updateElement(v,y,S,n)}}calculateTotal(){const t=this._cachedMeta,s=t.data;let i=0,n;for(n=0;n<s.length;n++){const r=t._parsed[n];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(n)&&!s[n].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(t){const s=this._cachedMeta.total;return s>0&&!isNaN(t)?X*(Math.abs(t)/s):0}getLabelAndValue(t){const s=this._cachedMeta,i=this.chart,n=i.data.labels||[],r=tr(s._parsed[t],i.options.locale);return{label:n[t]||"",value:r}}getMaxBorderWidth(t){let s=0;const i=this.chart;let n,r,o,a,l;if(!t){for(n=0,r=i.data.datasets.length;n<r;++n)if(i.isDatasetVisible(n)){o=i.getDatasetMeta(n),t=o.data,a=o.controller;break}}if(!t)return 0;for(n=0,r=t.length;n<r;++n)l=a.resolveDataElementOptions(n),l.borderAlign!=="inner"&&(s=Math.max(s,l.borderWidth||0,l.hoverBorderWidth||0));return s}getMaxOffset(t){let s=0;for(let i=0,n=t.length;i<n;++i){const r=this.resolveDataElementOptions(i);s=Math.max(s,r.offset||0,r.hoverOffset||0)}return s}_getRingWeightOffset(t){let s=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(s+=this._getRingWeight(i));return s}_getRingWeight(t){return Math.max(z(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}E(_e,"id","doughnut"),E(_e,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),E(_e,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),E(_e,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const s=t.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:i,color:n}}=t.legend.options;return s.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,s,i){i.chart.toggleDataVisibility(s.index),i.chart.update()}}}});function Nt(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ui{constructor(t){E(this,"options");this.options=t||{}}static override(t){Object.assign(ui.prototype,t)}init(){}formats(){return Nt()}parse(){return Nt()}format(){return Nt()}add(){return Nt()}diff(){return Nt()}startOf(){return Nt()}endOf(){return Nt()}}var oc={_date:ui};function ac(e,t,s,i){const{controller:n,data:r,_sorted:o}=e,a=n._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const c=a._reversePixels?tl:Fs;if(i){if(n._sharedOptions){const h=r[0],u=typeof h.getRange=="function"&&h.getRange(t);if(u){const d=c(r,t,s-u),f=c(r,t,s+u);return{lo:d.lo,hi:f.hi}}}}else{const h=c(r,t,s);if(l){const{vScale:u}=n._cachedMeta,{_parsed:d}=e,f=d.slice(0,h.lo+1).reverse().findIndex(g=>!J(g[u.axis]));h.lo-=Math.max(0,f);const p=d.slice(h.hi).findIndex(g=>!J(g[u.axis]));h.hi+=Math.max(0,p)}return h}}return{lo:0,hi:r.length-1}}function je(e,t,s,i,n){const r=e.getSortedVisibleDatasetMetas(),o=s[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:h}=r[a],{lo:u,hi:d}=ac(r[a],t,o,n);for(let f=u;f<=d;++f){const p=h[f];p.skip||i(p,c,f)}}}function lc(e){const t=e.indexOf("x")!==-1,s=e.indexOf("y")!==-1;return function(i,n){const r=t?Math.abs(i.x-n.x):0,o=s?Math.abs(i.y-n.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Cs(e,t,s,i,n){const r=[];return!n&&!e.isPointInArea(t)||je(e,s,t,function(a,l,c){!n&&!ir(a,e.chartArea,0)||a.inRange(t.x,t.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function cc(e,t,s,i){let n=[];function r(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:u}=Kn(o,{x:t.x,y:t.y});rs(u,c,h)&&n.push({element:o,datasetIndex:a,index:l})}return je(e,s,t,r),n}function hc(e,t,s,i,n,r){let o=[];const a=lc(s);let l=Number.POSITIVE_INFINITY;function c(h,u,d){const f=h.inRange(t.x,t.y,n);if(i&&!f)return;const p=h.getCenterPoint(n);if(!(!!r||e.isPointInArea(p))&&!f)return;const b=a(t,p);b<l?(o=[{element:h,datasetIndex:u,index:d}],l=b):b===l&&o.push({element:h,datasetIndex:u,index:d})}return je(e,s,t,c),o}function Ts(e,t,s,i,n,r){return!r&&!e.isPointInArea(t)?[]:s==="r"&&!i?cc(e,t,s,n):hc(e,t,s,i,n,r)}function qi(e,t,s,i,n){const r=[],o=s==="x"?"inXRange":"inYRange";let a=!1;return je(e,s,t,(l,c,h)=>{l[o]&&l[o](t[s],n)&&(r.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(t.x,t.y,n))}),i&&!a?[]:r}var uc={evaluateInteractionItems:je,modes:{index(e,t,s,i){const n=Wt(t,e),r=s.axis||"x",o=s.includeInvisible||!1,a=s.intersect?Cs(e,n,r,i,o):Ts(e,n,r,!1,i,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,u=c.data[h];u&&!u.skip&&l.push({element:u,datasetIndex:c.index,index:h})}),l):[]},dataset(e,t,s,i){const n=Wt(t,e),r=s.axis||"xy",o=s.includeInvisible||!1;let a=s.intersect?Cs(e,n,r,i,o):Ts(e,n,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(e,t,s,i){const n=Wt(t,e),r=s.axis||"xy",o=s.includeInvisible||!1;return Cs(e,n,r,i,o)},nearest(e,t,s,i){const n=Wt(t,e),r=s.axis||"xy",o=s.includeInvisible||!1;return Ts(e,n,r,s.intersect,i,o)},x(e,t,s,i){const n=Wt(t,e);return qi(e,n,"x",s.intersect,i)},y(e,t,s,i){const n=Wt(t,e);return qi(e,n,"y",s.intersect,i)}}};const dr=["left","top","right","bottom"];function fe(e,t){return e.filter(s=>s.pos===t)}function Ki(e,t){return e.filter(s=>dr.indexOf(s.pos)===-1&&s.box.axis===t)}function pe(e,t){return e.sort((s,i)=>{const n=t?i:s,r=t?s:i;return n.weight===r.weight?n.index-r.index:n.weight-r.weight})}function dc(e){const t=[];let s,i,n,r,o,a;for(s=0,i=(e||[]).length;s<i;++s)n=e[s],{position:r,options:{stack:o,stackWeight:a=1}}=n,t.push({index:s,box:n,pos:r,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&r+o,stackWeight:a});return t}function fc(e){const t={};for(const s of e){const{stack:i,pos:n,stackWeight:r}=s;if(!i||!dr.includes(n))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function pc(e,t){const s=fc(e),{vBoxMaxWidth:i,hBoxMaxHeight:n}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,c=s[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&t.availableWidth,a.height=n):(a.width=i,a.height=h?h*n:l&&t.availableHeight)}return s}function gc(e){const t=dc(e),s=pe(t.filter(c=>c.box.fullSize),!0),i=pe(fe(t,"left"),!0),n=pe(fe(t,"right")),r=pe(fe(t,"top"),!0),o=pe(fe(t,"bottom")),a=Ki(t,"x"),l=Ki(t,"y");return{fullSize:s,leftAndTop:i.concat(r),rightAndBottom:n.concat(l).concat(o).concat(a),chartArea:fe(t,"chartArea"),vertical:i.concat(n).concat(l),horizontal:r.concat(o).concat(a)}}function Gi(e,t,s,i){return Math.max(e[s],t[s])+Math.max(e[i],t[i])}function fr(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function mc(e,t,s,i){const{pos:n,box:r}=s,o=e.maxPadding;if(!F(n)){s.size&&(e[n]-=s.size);const u=i[s.stack]||{size:0,count:1};u.size=Math.max(u.size,s.horizontal?r.height:r.width),s.size=u.size/u.count,e[n]+=s.size}r.getPadding&&fr(o,r.getPadding());const a=Math.max(0,t.outerWidth-Gi(o,e,"left","right")),l=Math.max(0,t.outerHeight-Gi(o,e,"top","bottom")),c=a!==e.w,h=l!==e.h;return e.w=a,e.h=l,s.horizontal?{same:c,other:h}:{same:h,other:c}}function bc(e){const t=e.maxPadding;function s(i){const n=Math.max(t[i]-e[i],0);return e[i]+=n,n}e.y+=s("top"),e.x+=s("left"),s("right"),s("bottom")}function xc(e,t){const s=t.maxPadding;function i(n){const r={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{r[o]=Math.max(t[o],s[o])}),r}return i(e?["left","right"]:["top","bottom"])}function ve(e,t,s,i){const n=[];let r,o,a,l,c,h;for(r=0,o=e.length,c=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,xc(a.horizontal,t));const{same:u,other:d}=mc(t,s,a,i);c|=u&&n.length,h=h||d,l.fullSize||n.push(a)}return c&&ve(n,t,s,i)||h}function Ye(e,t,s,i,n){e.top=s,e.left=t,e.right=t+i,e.bottom=s+n,e.width=i,e.height=n}function Qi(e,t,s,i){const n=s.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const u=t.w*h,d=c.size||l.height;ss(c.start)&&(o=c.start),l.fullSize?Ye(l,n.left,o,s.outerWidth-n.right-n.left,d):Ye(l,t.left+c.placed,o,u,d),c.start=o,c.placed+=u,o=l.bottom}else{const u=t.h*h,d=c.size||l.width;ss(c.start)&&(r=c.start),l.fullSize?Ye(l,r,n.top,d,s.outerHeight-n.bottom-n.top):Ye(l,r,t.top+c.placed,d,u),c.start=r,c.placed+=u,r=l.right}}t.x=r,t.y=o}var ct={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(s){t.draw(s)}}]},e.boxes.push(t)},removeBox(e,t){const s=e.boxes?e.boxes.indexOf(t):-1;s!==-1&&e.boxes.splice(s,1)},configure(e,t,s){t.fullSize=s.fullSize,t.position=s.position,t.weight=s.weight},update(e,t,s,i){if(!e)return;const n=ht(e.options.layout.padding),r=Math.max(t-n.width,0),o=Math.max(s-n.height,0),a=gc(e.boxes),l=a.vertical,c=a.horizontal;j(e.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const h=l.reduce((g,b)=>b.box.options&&b.box.options.display===!1?g:g+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:s,padding:n,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),d=Object.assign({},n);fr(d,ht(i));const f=Object.assign({maxPadding:d,w:r,h:o,x:n.left,y:n.top},n),p=pc(l.concat(c),u);ve(a.fullSize,f,u,p),ve(l,f,u,p),ve(c,f,u,p)&&ve(l,f,u,p),bc(f),Qi(a.leftAndTop,f,u,p),f.x+=f.w,f.y+=f.h,Qi(a.rightAndBottom,f,u,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},j(a.chartArea,g=>{const b=g.box;Object.assign(b,e.chartArea),b.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class pr{acquireContext(t,s){}releaseContext(t){return!1}addEventListener(t,s,i){}removeEventListener(t,s,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,s,i,n){return s=Math.max(0,s||t.width),i=i||t.height,{width:s,height:Math.max(0,n?Math.floor(s/n):i)}}isAttached(t){return!0}updateConfig(t){}}class yc extends pr{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Ze="$chartjs",_c={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Zi=e=>e===null||e==="";function vc(e,t){const s=e.style,i=e.getAttribute("height"),n=e.getAttribute("width");if(e[Ze]={initial:{height:i,width:n,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",Zi(n)){const r=Wi(e,"width");r!==void 0&&(e.width=r)}if(Zi(i))if(e.style.height==="")e.height=e.width/(t||2);else{const r=Wi(e,"height");r!==void 0&&(e.height=r)}return e}const gr=Nl?{passive:!0}:!1;function wc(e,t,s){e&&e.addEventListener(t,s,gr)}function Sc(e,t,s){e&&e.canvas&&e.canvas.removeEventListener(t,s,gr)}function Mc(e,t){const s=_c[e.type]||e.type,{x:i,y:n}=Wt(e,t);return{type:s,chart:t,native:e,x:i!==void 0?i:null,y:n!==void 0?n:null}}function as(e,t){for(const s of e)if(s===t||s.contains(t))return!0}function kc(e,t,s){const i=e.canvas,n=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||as(a.addedNodes,i),o=o&&!as(a.removedNodes,i);o&&s()});return n.observe(document,{childList:!0,subtree:!0}),n}function Ac(e,t,s){const i=e.canvas,n=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||as(a.removedNodes,i),o=o&&!as(a.addedNodes,i);o&&s()});return n.observe(document,{childList:!0,subtree:!0}),n}const Fe=new Map;let Ji=0;function mr(){const e=window.devicePixelRatio;e!==Ji&&(Ji=e,Fe.forEach((t,s)=>{s.currentDevicePixelRatio!==e&&t()}))}function Oc(e,t){Fe.size||window.addEventListener("resize",mr),Fe.set(e,t)}function Cc(e){Fe.delete(e),Fe.size||window.removeEventListener("resize",mr)}function Tc(e,t,s){const i=e.canvas,n=i&&hi(i);if(!n)return;const r=Zn((a,l)=>{const c=n.clientWidth;s(a,l),c<n.clientWidth&&s()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||r(c,h)});return o.observe(n),Oc(e,r),o}function Es(e,t,s){s&&s.disconnect(),t==="resize"&&Cc(e)}function Ec(e,t,s){const i=e.canvas,n=Zn(r=>{e.ctx!==null&&s(Mc(r,e))},e);return wc(i,t,n),n}class Dc extends pr{acquireContext(t,s){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(vc(t,s),i):null}releaseContext(t){const s=t.canvas;if(!s[Ze])return!1;const i=s[Ze].initial;["height","width"].forEach(r=>{const o=i[r];J(o)?s.removeAttribute(r):s.setAttribute(r,o)});const n=i.style||{};return Object.keys(n).forEach(r=>{s.style[r]=n[r]}),s.width=s.width,delete s[Ze],!0}addEventListener(t,s,i){this.removeEventListener(t,s);const n=t.$proxies||(t.$proxies={}),o={attach:kc,detach:Ac,resize:Tc}[s]||Ec;n[s]=o(t,s,i)}removeEventListener(t,s){const i=t.$proxies||(t.$proxies={}),n=i[s];if(!n)return;({attach:Es,detach:Es,resize:Es}[s]||Sc)(t,s,n),i[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,s,i,n){return Bl(t,s,i,n)}isAttached(t){const s=t&&hi(t);return!!(s&&s.isConnected)}}function Pc(e){return!ci()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?yc:Dc}class It{constructor(){E(this,"x");E(this,"y");E(this,"active",!1);E(this,"options");E(this,"$animations")}tooltipPosition(t){const{x:s,y:i}=this.getProps(["x","y"],t);return{x:s,y:i}}hasValue(){return ns(this.x)&&ns(this.y)}getProps(t,s){const i=this.$animations;if(!s||!i)return this;const n={};return t.forEach(r=>{n[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),n}}E(It,"defaults",{}),E(It,"defaultRoutes");function Rc(e,t){const s=e.options.ticks,i=Ic(e),n=Math.min(s.maxTicksLimit||i,i),r=s.major.enabled?Lc(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>n)return jc(t,c,r,o/n),c;const h=Fc(r,t,n);if(o>0){let u,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(Ue(t,c,h,J(f)?0:a-f,a),u=0,d=o-1;u<d;u++)Ue(t,c,h,r[u],r[u+1]);return Ue(t,c,h,l,J(f)?t.length:l+f),c}return Ue(t,c,h),c}function Ic(e){const t=e.options.offset,s=e._tickSize(),i=e._length/s+(t?0:1),n=e._maxLength/s;return Math.floor(Math.min(i,n))}function Fc(e,t,s){const i=zc(e),n=t.length/s;if(!i)return Math.max(n,1);const r=Ka(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>n)return l}return Math.max(n,1)}function Lc(e){const t=[];let s,i;for(s=0,i=e.length;s<i;s++)e[s].major&&t.push(s);return t}function jc(e,t,s,i){let n=0,r=s[0],o;for(i=Math.ceil(i),o=0;o<e.length;o++)o===r&&(t.push(e[o]),n++,r=s[n*i])}function Ue(e,t,s,i,n){const r=z(i,0),o=Math.min(z(n,e.length),e.length);let a=0,l,c,h;for(s=Math.ceil(s),n&&(l=n-i,s=l/Math.floor(l/s)),h=r;h<0;)a++,h=Math.round(r+a*s);for(c=Math.max(r,0);c<o;c++)c===h&&(t.push(e[c]),a++,h=Math.round(r+a*s))}function zc(e){const t=e.length;let s,i;if(t<2)return!1;for(i=e[0],s=1;s<t;++s)if(e[s]-e[s-1]!==i)return!1;return i}const Bc=e=>e==="left"?"right":e==="right"?"left":e,tn=(e,t,s)=>t==="top"||t==="left"?e[t]+s:e[t]-s,en=(e,t)=>Math.min(t||e,e);function sn(e,t){const s=[],i=e.length/t,n=e.length;let r=0;for(;r<n;r+=i)s.push(e[Math.floor(r)]);return s}function Nc(e,t,s){const i=e.ticks.length,n=Math.min(t,i-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(n),c;if(!(s&&(i===1?c=Math.max(l-r,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(n-1))/2,l+=n<t?c:-c,l<r-a||l>o+a)))return l}function Wc(e,t){j(e,s=>{const i=s.gc,n=i.length/2;let r;if(n>t){for(r=0;r<n;++r)delete s.data[i[r]];i.splice(0,n)}})}function ge(e){return e.drawTicks?e.tickLength:0}function nn(e,t){if(!e.display)return 0;const s=Z(e.font,t),i=ht(e.padding);return(G(e.text)?e.text.length:1)*s.lineHeight+i.height}function $c(e,t){return ce(e,{scale:t,type:"scale"})}function Hc(e,t,s){return ce(e,{tick:s,index:t,type:"tick"})}function Vc(e,t,s){let i=si(e);return(s&&t!=="right"||!s&&t==="right")&&(i=Bc(i)),i}function Yc(e,t,s,i){const{top:n,left:r,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:h}=l;let u=0,d,f,p;const g=o-n,b=a-r;if(e.isHorizontal()){if(f=Q(i,r,a),F(s)){const x=Object.keys(s)[0],y=s[x];p=h[x].getPixelForValue(y)+g-t}else s==="center"?p=(c.bottom+c.top)/2+g-t:p=tn(e,s,t);d=a-r}else{if(F(s)){const x=Object.keys(s)[0],y=s[x];f=h[x].getPixelForValue(y)-b+t}else s==="center"?f=(c.left+c.right)/2-b+t:f=tn(e,s,t);p=Q(i,o,n),u=s==="left"?-K:K}return{titleX:f,titleY:p,maxWidth:d,rotation:u}}class ms extends It{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,s){return t}getUserBounds(){let{_userMin:t,_userMax:s,_suggestedMin:i,_suggestedMax:n}=this;return t=ft(t,Number.POSITIVE_INFINITY),s=ft(s,Number.NEGATIVE_INFINITY),i=ft(i,Number.POSITIVE_INFINITY),n=ft(n,Number.NEGATIVE_INFINITY),{min:ft(t,i),max:ft(s,n),minDefined:Mt(t),maxDefined:Mt(s)}}getMinMax(t){let{min:s,max:i,minDefined:n,maxDefined:r}=this.getUserBounds(),o;if(n&&r)return{min:s,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),n||(s=Math.min(s,o.min)),r||(i=Math.max(i,o.max));return s=r&&s>i?i:s,i=n&&s>i?s:i,{min:ft(s,ft(i,s)),max:ft(i,ft(s,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){$(this.options.beforeUpdate,[this])}update(t,s,i){const{beginAtZero:n,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=s,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Ml(this,r,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?sn(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Rc(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,s,i;this.isHorizontal()?(s=this.left,i=this.right):(s=this.top,i=this.bottom,t=!t),this._startPixel=s,this._endPixel=i,this._reversePixels=t,this._length=i-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){$(this.options.afterUpdate,[this])}beforeSetDimensions(){$(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){$(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),$(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){$(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const s=this.options.ticks;let i,n,r;for(i=0,n=t.length;i<n;i++)r=t[i],r.label=$(s.callback,[r.value,i,t],this)}afterTickToLabelConversion(){$(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){$(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,s=t.ticks,i=en(this.ticks.length,t.ticks.maxTicksLimit),n=s.minRotation||0,r=s.maxRotation;let o=n,a,l,c;if(!this._isVisible()||!s.display||n>=r||i<=1||!this.isHorizontal()){this.labelRotation=n;return}const h=this._getLabelSizes(),u=h.widest.width,d=h.highest.height,f=lt(this.chart.width-u,0,this.maxWidth);a=t.offset?this.maxWidth/i:f/(i-1),u+6>a&&(a=f/(i-(t.offset?.5:1)),l=this.maxHeight-ge(t.grid)-s.padding-nn(t.title,this.chart.options.font),c=Math.sqrt(u*u+d*d),o=Qa(Math.min(Math.asin(lt((h.highest.height+6)/a,-1,1)),Math.asin(lt(l/c,-1,1))-Math.asin(lt(d/c,-1,1)))),o=Math.max(n,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){$(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){$(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:s,options:{ticks:i,title:n,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=nn(n,s.options.font);if(a?(t.width=this.maxWidth,t.height=ge(r)+l):(t.height=this.maxHeight,t.width=ge(r)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:u,highest:d}=this._getLabelSizes(),f=i.padding*2,p=Ht(this.labelRotation),g=Math.cos(p),b=Math.sin(p);if(a){const x=i.mirror?0:b*u.width+g*d.height;t.height=Math.min(this.maxHeight,t.height+x+f)}else{const x=i.mirror?0:g*u.width+b*d.height;t.width=Math.min(this.maxWidth,t.width+x+f)}this._calculatePadding(c,h,b,g)}}this._handleMargins(),a?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,s,i,n){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=n*t.width,f=i*s.height):(d=i*t.height,f=n*s.width):r==="start"?f=s.width:r==="end"?d=t.width:r!=="inner"&&(d=t.width/2,f=s.width/2),this.paddingLeft=Math.max((d-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((f-u+o)*this.width/(this.width-u),0)}else{let h=s.height/2,u=t.height/2;r==="start"?(h=0,u=t.height):r==="end"&&(h=s.height,u=0),this.paddingTop=h+o,this.paddingBottom=u+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){$(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:s}=this.options;return s==="top"||s==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let s,i;for(s=0,i=t.length;s<i;s++)J(t[s].label)&&(t.splice(s,1),i--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const s=this.options.ticks.sampleSize;let i=this.ticks;s<i.length&&(i=sn(i,s)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,s,i){const{ctx:n,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(s/en(s,i));let c=0,h=0,u,d,f,p,g,b,x,y,_,v,S;for(u=0;u<s;u+=l){if(p=t[u].label,g=this._resolveTickFontOptions(u),n.font=b=g.string,x=r[b]=r[b]||{data:{},gc:[]},y=g.lineHeight,_=v=0,!J(p)&&!G(p))_=Fi(n,x.data,x.gc,_,p),v=y;else if(G(p))for(d=0,f=p.length;d<f;++d)S=p[d],!J(S)&&!G(S)&&(_=Fi(n,x.data,x.gc,_,S),v+=y);o.push(_),a.push(v),c=Math.max(_,c),h=Math.max(v,h)}Wc(r,s);const M=o.indexOf(c),w=a.indexOf(h),O=P=>({width:o[P]||0,height:a[P]||0});return{first:O(0),last:O(s-1),widest:O(M),highest:O(w),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,s){return NaN}getValueForPixel(t){}getPixelForTick(t){const s=this.ticks;return t<0||t>s.length-1?null:this.getPixelForValue(s[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const s=this._startPixel+t*this._length;return Ja(this._alignToPixels?Bt(this.chart,s,0):s)}getDecimalForPixel(t){const s=(t-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:s}=this;return t<0&&s<0?s:t>0&&s>0?t:0}getContext(t){const s=this.ticks||[];if(t>=0&&t<s.length){const i=s[t];return i.$context||(i.$context=Hc(this.getContext(),t,i))}return this.$context||(this.$context=$c(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,s=Ht(this.labelRotation),i=Math.abs(Math.cos(s)),n=Math.abs(Math.sin(s)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*n?a/i:l/n:l*n<a*i?l/i:a/n}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const s=this.axis,i=this.chart,n=this.options,{grid:r,position:o,border:a}=n,l=r.offset,c=this.isHorizontal(),u=this.ticks.length+(l?1:0),d=ge(r),f=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,b=g/2,x=function(R){return Bt(i,R,g)};let y,_,v,S,M,w,O,P,T,k,A,L;if(o==="top")y=x(this.bottom),w=this.bottom-d,P=y-b,k=x(t.top)+b,L=t.bottom;else if(o==="bottom")y=x(this.top),k=t.top,L=x(t.bottom)-b,w=y+b,P=this.top+d;else if(o==="left")y=x(this.right),M=this.right-d,O=y-b,T=x(t.left)+b,A=t.right;else if(o==="right")y=x(this.left),T=t.left,A=x(t.right)-b,M=y+b,O=this.left+d;else if(s==="x"){if(o==="center")y=x((t.top+t.bottom)/2+.5);else if(F(o)){const R=Object.keys(o)[0],V=o[R];y=x(this.chart.scales[R].getPixelForValue(V))}k=t.top,L=t.bottom,w=y+b,P=w+d}else if(s==="y"){if(o==="center")y=x((t.left+t.right)/2);else if(F(o)){const R=Object.keys(o)[0],V=o[R];y=x(this.chart.scales[R].getPixelForValue(V))}M=y-b,O=M-d,T=t.left,A=t.right}const N=z(n.ticks.maxTicksLimit,u),C=Math.max(1,Math.ceil(u/N));for(_=0;_<u;_+=C){const R=this.getContext(_),V=r.setContext(R),st=a.setContext(R),W=V.lineWidth,At=V.color,Ot=st.dash||[],Kt=st.dashOffset,he=V.tickWidth,Ft=V.tickColor,ue=V.tickBorderDash||[],Lt=V.tickBorderDashOffset;v=Nc(this,_,l),v!==void 0&&(S=Bt(i,v,W),c?M=O=T=A=S:w=P=k=L=S,f.push({tx1:M,ty1:w,tx2:O,ty2:P,x1:T,y1:k,x2:A,y2:L,width:W,color:At,borderDash:Ot,borderDashOffset:Kt,tickWidth:he,tickColor:Ft,tickBorderDash:ue,tickBorderDashOffset:Lt}))}return this._ticksLength=u,this._borderValue=y,f}_computeLabelItems(t){const s=this.axis,i=this.options,{position:n,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:u}=r,d=ge(i.grid),f=d+h,p=u?-h:f,g=-Ht(this.labelRotation),b=[];let x,y,_,v,S,M,w,O,P,T,k,A,L="middle";if(n==="top")M=this.bottom-p,w=this._getXAxisLabelAlignment();else if(n==="bottom")M=this.top+p,w=this._getXAxisLabelAlignment();else if(n==="left"){const C=this._getYAxisLabelAlignment(d);w=C.textAlign,S=C.x}else if(n==="right"){const C=this._getYAxisLabelAlignment(d);w=C.textAlign,S=C.x}else if(s==="x"){if(n==="center")M=(t.top+t.bottom)/2+f;else if(F(n)){const C=Object.keys(n)[0],R=n[C];M=this.chart.scales[C].getPixelForValue(R)+f}w=this._getXAxisLabelAlignment()}else if(s==="y"){if(n==="center")S=(t.left+t.right)/2-f;else if(F(n)){const C=Object.keys(n)[0],R=n[C];S=this.chart.scales[C].getPixelForValue(R)}w=this._getYAxisLabelAlignment(d).textAlign}s==="y"&&(l==="start"?L="top":l==="end"&&(L="bottom"));const N=this._getLabelSizes();for(x=0,y=a.length;x<y;++x){_=a[x],v=_.label;const C=r.setContext(this.getContext(x));O=this.getPixelForTick(x)+r.labelOffset,P=this._resolveTickFontOptions(x),T=P.lineHeight,k=G(v)?v.length:1;const R=k/2,V=C.color,st=C.textStrokeColor,W=C.textStrokeWidth;let At=w;o?(S=O,w==="inner"&&(x===y-1?At=this.options.reverse?"left":"right":x===0?At=this.options.reverse?"right":"left":At="center"),n==="top"?c==="near"||g!==0?A=-k*T+T/2:c==="center"?A=-N.highest.height/2-R*T+T:A=-N.highest.height+T/2:c==="near"||g!==0?A=T/2:c==="center"?A=N.highest.height/2-R*T:A=N.highest.height-k*T,u&&(A*=-1),g!==0&&!C.showLabelBackdrop&&(S+=T/2*Math.sin(g))):(M=O,A=(1-k)*T/2);let Ot;if(C.showLabelBackdrop){const Kt=ht(C.backdropPadding),he=N.heights[x],Ft=N.widths[x];let ue=A-Kt.top,Lt=0-Kt.left;switch(L){case"middle":ue-=he/2;break;case"bottom":ue-=he;break}switch(w){case"center":Lt-=Ft/2;break;case"right":Lt-=Ft;break;case"inner":x===y-1?Lt-=Ft:x>0&&(Lt-=Ft/2);break}Ot={left:Lt,top:ue,width:Ft+Kt.width,height:he+Kt.height,color:C.backdropColor}}b.push({label:v,font:P,textOffset:A,options:{rotation:g,color:V,strokeColor:st,strokeWidth:W,textAlign:At,textBaseline:L,translation:[S,M],backdrop:Ot}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:s}=this.options;if(-Ht(this.labelRotation))return t==="top"?"left":"right";let n="center";return s.align==="start"?n="left":s.align==="end"?n="right":s.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:s,ticks:{crossAlign:i,mirror:n,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,h;return s==="left"?n?(h=this.right+r,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):s==="right"?n?(h=this.left+r,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:s},left:i,top:n,width:r,height:o}=this;s&&(t.save(),t.fillStyle=s,t.fillRect(i,n,r,o),t.restore())}getLineWidthForValue(t){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const n=this.ticks.findIndex(r=>r.value===t);return n>=0?s.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const s=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(s.display)for(r=0,o=n.length;r<o;++r){const l=n[r];s.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),s.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:s,options:{border:i,grid:n}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,u,d;this.isHorizontal()?(c=Bt(t,this.left,o)-o/2,h=Bt(t,this.right,a)+a/2,u=d=l):(u=Bt(t,this.top,o)-o/2,d=Bt(t,this.bottom,a)+a/2,c=h=l),s.save(),s.lineWidth=r.width,s.strokeStyle=r.color,s.beginPath(),s.moveTo(c,u),s.lineTo(h,d),s.stroke(),s.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,n=this._computeLabelArea();n&&ii(i,n);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,h=o.textOffset;Ie(i,c,0,h,l,a)}n&&ni(i)}drawTitle(){const{ctx:t,options:{position:s,title:i,reverse:n}}=this;if(!i.display)return;const r=Z(i.font),o=ht(i.padding),a=i.align;let l=r.lineHeight/2;s==="bottom"||s==="center"||F(s)?(l+=o.bottom,G(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:u,rotation:d}=Yc(this,l,s,a);Ie(t,i.text,0,0,r,{color:i.color,maxWidth:u,rotation:d,textAlign:Vc(a,s,n),textBaseline:"middle",translation:[c,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,s=t.ticks&&t.ticks.z||0,i=z(t.grid&&t.grid.z,-1),n=z(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==ms.prototype.draw?[{z:s,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:s,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const s=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let r,o;for(r=0,o=s.length;r<o;++r){const a=s[r];a[i]===this.id&&(!t||a.type===t)&&n.push(a)}return n}_resolveTickFontOptions(t){const s=this.options.ticks.setContext(this.getContext(t));return Z(s.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Xe{constructor(t,s,i){this.type=t,this.scope=s,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const s=Object.getPrototypeOf(t);let i;qc(s)&&(i=this.register(s));const n=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in n||(n[r]=t,Uc(t,o,i),this.override&&U.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const s=this.items,i=t.id,n=this.scope;i in s&&delete s[i],n&&i in U[n]&&(delete U[n][i],this.override&&delete Ut[i])}}function Uc(e,t,s){const i=Pe(Object.create(null),[s?U.get(s):{},U.get(t),e.defaults]);U.set(t,i),e.defaultRoutes&&Xc(t,e.defaultRoutes),e.descriptors&&U.describe(t,e.descriptors)}function Xc(e,t){Object.keys(t).forEach(s=>{const i=s.split("."),n=i.pop(),r=[e].concat(i).join("."),o=t[s].split("."),a=o.pop(),l=o.join(".");U.route(r,n,l,a)})}function qc(e){return"id"in e&&"defaults"in e}class Kc{constructor(){this.controllers=new Xe(Te,"datasets",!0),this.elements=new Xe(It,"elements"),this.plugins=new Xe(Object,"plugins"),this.scales=new Xe(ms,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,s,i){[...s].forEach(n=>{const r=i||this._getRegistryForType(n);i||r.isForType(n)||r===this.plugins&&n.id?this._exec(t,r,n):j(n,o=>{const a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,s,i){const n=ti(t);$(i["before"+n],[],i),s[t](i),$(i["after"+n],[],i)}_getRegistryForType(t){for(let s=0;s<this._typedRegistries.length;s++){const i=this._typedRegistries[s];if(i.isForType(t))return i}return this.plugins}_get(t,s,i){const n=s.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return n}}var gt=new Kc;class Gc{constructor(){this._init=[]}notify(t,s,i,n){s==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=n?this._descriptors(t).filter(n):this._descriptors(t),o=this._notify(r,t,s,i);return s==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,s,i,n){n=n||{};for(const r of t){const o=r.plugin,a=o[i],l=[s,n,r.options];if($(a,l,o)===!1&&n.cancelable)return!1}return!0}invalidate(){J(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),s}_createDescriptors(t,s){const i=t&&t.config,n=z(i.options&&i.options.plugins,{}),r=Qc(i);return n===!1&&!s?[]:Jc(t,r,n,s)}_notifyStateChanges(t){const s=this._oldCache||[],i=this._cache,n=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(n(s,i),t,"stop"),this._notify(n(i,s),t,"start")}}function Qc(e){const t={},s=[],i=Object.keys(gt.plugins.items);for(let r=0;r<i.length;r++)s.push(gt.getPlugin(i[r]));const n=e.plugins||[];for(let r=0;r<n.length;r++){const o=n[r];s.indexOf(o)===-1&&(s.push(o),t[o.id]=!0)}return{plugins:s,localIds:t}}function Zc(e,t){return!t&&e===!1?null:e===!0?{}:e}function Jc(e,{plugins:t,localIds:s},i,n){const r=[],o=e.getContext();for(const a of t){const l=a.id,c=Zc(i[l],n);c!==null&&r.push({plugin:a,options:th(e.config,{plugin:a,local:s[l]},c,o)})}return r}function th(e,{plugin:t,local:s},i,n){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(i,r);return s&&t.defaults&&o.push(t.defaults),e.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function zs(e,t){const s=U.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||s.indexAxis||"x"}function eh(e,t){let s=e;return e==="_index_"?s=t:e==="_value_"&&(s=t==="x"?"y":"x"),s}function sh(e,t){return e===t?"_index_":"_value_"}function rn(e){if(e==="x"||e==="y"||e==="r")return e}function ih(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Bs(e,...t){if(rn(e))return e;for(const s of t){const i=s.axis||ih(s.position)||e.length>1&&rn(e[0].toLowerCase());if(i)return i}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function on(e,t,s){if(s[t+"AxisID"]===e)return{axis:t}}function nh(e,t){if(t.data&&t.data.datasets){const s=t.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(s.length)return on(e,"x",s[0])||on(e,"y",s[0])}return{}}function rh(e,t){const s=Ut[e.type]||{scales:{}},i=t.scales||{},n=zs(e.type,t),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!F(a))return console.error("Invalid scale configuration for scale: ".concat(o));if(a._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(o));const l=Bs(o,a,nh(o,e),U.scales[a.type]),c=sh(l,n),h=s.scales||{};r[o]=ke(Object.create(null),[{axis:l},a,h[l],h[c]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||zs(a,t),h=(Ut[a]||{}).scales||{};Object.keys(h).forEach(u=>{const d=eh(u,l),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),ke(r[f],[{axis:d},i[f],h[u]])})}),Object.keys(r).forEach(o=>{const a=r[o];ke(a,[U.scales[a.type],U.scale])}),r}function br(e){const t=e.options||(e.options={});t.plugins=z(t.plugins,{}),t.scales=rh(e,t)}function xr(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function oh(e){return e=e||{},e.data=xr(e.data),br(e),e}const an=new Map,yr=new Set;function qe(e,t){let s=an.get(e);return s||(s=t(),an.set(e,s),yr.add(s)),s}const me=(e,t,s)=>{const i=Re(t,s);i!==void 0&&e.add(i)};class ah{constructor(t){this._config=oh(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=xr(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),br(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return qe(t,()=>[["datasets.".concat(t),""]])}datasetAnimationScopeKeys(t,s){return qe("".concat(t,".transition.").concat(s),()=>[["datasets.".concat(t,".transitions.").concat(s),"transitions.".concat(s)],["datasets.".concat(t),""]])}datasetElementScopeKeys(t,s){return qe("".concat(t,"-").concat(s),()=>[["datasets.".concat(t,".elements.").concat(s),"datasets.".concat(t),"elements.".concat(s),""]])}pluginScopeKeys(t){const s=t.id,i=this.type;return qe("".concat(i,"-plugin-").concat(s),()=>[["plugins.".concat(s),...t.additionalOptionScopes||[]]])}_cachedScopes(t,s){const i=this._scopeCache;let n=i.get(t);return(!n||s)&&(n=new Map,i.set(t,n)),n}getOptionScopes(t,s,i){const{options:n,type:r}=this,o=this._cachedScopes(t,i),a=o.get(s);if(a)return a;const l=new Set;s.forEach(h=>{t&&(l.add(t),h.forEach(u=>me(l,t,u))),h.forEach(u=>me(l,n,u)),h.forEach(u=>me(l,Ut[r]||{},u)),h.forEach(u=>me(l,U,u)),h.forEach(u=>me(l,Ls,u))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),yr.has(s)&&o.set(s,c),c}chartOptionScopes(){const{options:t,type:s}=this;return[t,Ut[s]||{},U.datasets[s]||{},{type:s},U,Ls]}resolveNamedOptions(t,s,i,n=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=ln(this._resolverCache,t,n);let l=o;if(ch(o,s)){r.$shared=!1,i=Rt(i)?i():i;const c=this.createResolver(t,i,a);l=ne(o,i,c)}for(const c of s)r[c]=l[c];return r}createResolver(t,s,i=[""],n){const{resolver:r}=ln(this._resolverCache,t,i);return F(s)?ne(r,s,void 0,n):r}}function ln(e,t,s){let i=e.get(t);i||(i=new Map,e.set(t,i));const n=s.join();let r=i.get(n);return r||(r={resolver:oi(t,s),subPrefixes:s.filter(a=>!a.toLowerCase().includes("hover"))},i.set(n,r)),r}const lh=e=>F(e)&&Object.getOwnPropertyNames(e).some(t=>Rt(e[t]));function ch(e,t){const{isScriptable:s,isIndexable:i}=nr(e);for(const n of t){const r=s(n),o=i(n),a=(o||r)&&e[n];if(r&&(Rt(a)||lh(a))||o&&G(a))return!0}return!1}var hh="4.4.9";const uh=["top","bottom","left","right","chartArea"];function cn(e,t){return e==="top"||e==="bottom"||uh.indexOf(e)===-1&&t==="x"}function hn(e,t){return function(s,i){return s[e]===i[e]?s[t]-i[t]:s[e]-i[e]}}function un(e){const t=e.chart,s=t.options.animation;t.notifyPlugins("afterRender"),$(s&&s.onComplete,[e],t)}function dh(e){const t=e.chart,s=t.options.animation;$(s&&s.onProgress,[e],t)}function _r(e){return ci()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Je={},dn=e=>{const t=_r(e);return Object.values(Je).filter(s=>s.canvas===t).pop()};function fh(e,t,s){const i=Object.keys(e);for(const n of i){const r=+n;if(r>=t){const o=e[n];delete e[n],(s>0||r>t)&&(e[r+s]=o)}}}function ph(e,t,s,i){return!s||e.type==="mouseout"?null:i?t:e}var Tt;let bs=(Tt=class{static register(...t){gt.add(...t),fn()}static unregister(...t){gt.remove(...t),fn()}constructor(t,s){const i=this.config=new ah(s),n=_r(t),r=dn(n);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Pc(n)),this.platform.updateConfig(i);const a=this.platform.acquireContext(n,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=Wa(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Gc,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=nl(u=>this.update(u),o.resizeDelay||0),this._dataChanges=[],Je[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}xt.listen(this,"complete",un),xt.listen(this,"progress",dh),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:s},width:i,height:n,_aspectRatio:r}=this;return J(t)?s&&r?r:n?i/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return gt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ni(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Li(this.canvas,this.ctx),this}stop(){return xt.stop(this),this}resize(t,s){xt.running(this)?this._resizeBeforeDraw={width:t,height:s}:this._resize(t,s)}_resize(t,s){const i=this.options,n=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,t,s,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Ni(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),$(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};j(s,(i,n)=>{i.id=n})}buildOrUpdateScales(){const t=this.options,s=t.scales,i=this.scales,n=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];s&&(r=r.concat(Object.keys(s).map(o=>{const a=s[o],l=Bs(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),j(r,o=>{const a=o.options,l=a.id,c=Bs(l,a),h=z(a.type,o.dtype);(a.position===void 0||cn(a.position,c)!==cn(o.dposition))&&(a.position=o.dposition),n[l]=!0;let u=null;if(l in i&&i[l].type===h)u=i[l];else{const d=gt.getScale(h);u=new d({id:l,type:h,ctx:this.ctx,chart:this}),i[u.id]=u}u.init(a,t)}),j(n,(o,a)=>{o||delete i[a]}),j(i,o=>{ct.configure(this,o,o.options),ct.addBox(this,o)})}_updateMetasets(){const t=this._metasets,s=this.data.datasets.length,i=t.length;if(t.sort((n,r)=>n.index-r.index),i>s){for(let n=s;n<i;++n)this._destroyDatasetMeta(n);t.splice(s,i-s)}this._sortedMetasets=t.slice(0).sort(hn("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:s}}=this;t.length>s.length&&delete this._stacks,t.forEach((i,n)=>{s.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],s=this.data.datasets;let i,n;for(this._removeUnreferencedMetasets(),i=0,n=s.length;i<n;i++){const r=s[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||zs(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=gt.getController(a),{datasetElementType:c,dataElementType:h}=U.datasets[a];Object.assign(l,{dataElementType:gt.getElement(h),datasetElementType:c&&gt.getElement(c)}),o.controller=new l(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){j(this.data.datasets,(t,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const s=this.config;s.update();const i=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:u}=this.getDatasetMeta(c),d=!n&&r.indexOf(u)===-1;u.buildOrUpdateElements(d),o=Math.max(+u.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),n||j(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(hn("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){j(this.scales,t=>{ct.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,s=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Ai(s,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,s=this._getUniformDataChanges()||[];for(const{method:i,start:n,count:r}of s){const o=i==="_removeElements"?-r:r;fh(t,n,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const s=this.data.datasets.length,i=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),n=i(0);for(let r=1;r<s;r++)if(!Ai(n,i(r)))return;return Array.from(n).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ct.update(this,this.width,this.height,t);const s=this.chartArea,i=s.width<=0||s.height<=0;this._layers=[],j(this.boxes,n=>{i&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,r)=>{n._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let s=0,i=this.data.datasets.length;s<i;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,i=this.data.datasets.length;s<i;++s)this._updateDataset(s,Rt(t)?t({datasetIndex:s}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,s){const i=this.getDatasetMeta(t),n={meta:i,index:t,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(i.controller._update(s),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(xt.has(this)?this.attached&&!xt.running(this)&&xt.start(this):(this.draw(),un({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(t=0;t<s.length&&s[t].z<=0;++t)s[t].draw(this.chartArea);for(this._drawDatasets();t<s.length;++t)s[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const s=this._sortedMetasets,i=[];let n,r;for(n=0,r=s.length;n<r;++n){const o=s[n];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let s=t.length-1;s>=0;--s)this._drawDataset(t[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const s=this.ctx,i={meta:t,index:t.index,cancelable:!0},n=Vl(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(n&&ii(s,n),t.controller.draw(),n&&ni(s),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return ir(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,s,i,n){const r=uc.modes[s];return typeof r=="function"?r(this,t,i,n):[]}getDatasetMeta(t){const s=this.data.datasets[t],i=this._metasets;let n=i.filter(r=>r&&r._dataset===s).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:t,_dataset:s,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=ce(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const s=this.data.datasets[t];if(!s)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!s.hidden}setDatasetVisibility(t,s){const i=this.getDatasetMeta(t);i.hidden=!s}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,s,i){const n=i?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,n);ss(s)?(r.data[s].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===t?n:void 0))}hide(t,s){this._updateVisibility(t,s,!1)}show(t,s){this._updateVisibility(t,s,!0)}_destroyDatasetMeta(t){const s=this._metasets[t];s&&s.controller&&s.controller._destroy(),delete this._metasets[t]}_stop(){let t,s;for(this.stop(),xt.remove(this),t=0,s=this.data.datasets.length;t<s;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:s}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Li(t,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete Je[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,s=this.platform,i=(r,o)=>{s.addEventListener(this,r,o),t[r]=o},n=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};j(this.options.events,r=>i(r,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,s=this.platform,i=(l,c)=>{s.addEventListener(this,l,c),t[l]=c},n=(l,c)=>{t[l]&&(s.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{n("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,n("resize",r),this._stop(),this._resize(0,0),i("attach",a)},s.isAttached(this.canvas)?a():o()}unbindEvents(){j(this._listeners,(t,s)=>{this.platform.removeEventListener(this,s,t)}),this._listeners={},j(this._responsiveListeners,(t,s)=>{this.platform.removeEventListener(this,s,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,s,i){const n=i?"set":"remove";let r,o,a,l;for(s==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+n+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const s=this._active||[],i=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!ts(i,s)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,s))}notifyPlugins(t,s,i){return this._plugins.notify(this,t,s,i)}isPluginEnabled(t){return this._plugins._cache.filter(s=>s.plugin.id===t).length===1}_updateHoverStyles(t,s,i){const n=this.options.hover,r=(l,c)=>l.filter(h=>!c.some(u=>h.datasetIndex===u.datasetIndex&&h.index===u.index)),o=r(s,t),a=i?t:r(t,s);o.length&&this.updateHoverStyle(o,n.mode,!1),a.length&&n.mode&&this.updateHoverStyle(a,n.mode,!0)}_eventHandler(t,s){const i={event:t,replay:s,cancelable:!0,inChartArea:this.isPointInArea(t)},n=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,n)===!1)return;const r=this._handleEvent(t,s,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(r||i.changed)&&this.render(),this}_handleEvent(t,s,i){const{_active:n=[],options:r}=this,o=s,a=this._getActiveElements(t,n,i,o),l=Xa(t),c=ph(t,this._lastEvent,i,l);i&&(this._lastEvent=null,$(r.onHover,[t,a,this],this),l&&$(r.onClick,[t,a,this],this));const h=!ts(a,n);return(h||s)&&(this._active=a,this._updateHoverStyles(a,n,s)),this._lastEvent=c,h}_getActiveElements(t,s,i,n){if(t.type==="mouseout")return[];if(!i)return s;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,n)}},E(Tt,"defaults",U),E(Tt,"instances",Je),E(Tt,"overrides",Ut),E(Tt,"registry",gt),E(Tt,"version",hh),E(Tt,"getChart",dn),Tt);function fn(){return j(bs.instances,e=>e._plugins.invalidate())}function gh(e,t,s){const{startAngle:i,pixelMargin:n,x:r,y:o,outerRadius:a,innerRadius:l}=t;let c=n/a;e.beginPath(),e.arc(r,o,a,i-c,s+c),l>n?(c=n/l,e.arc(r,o,l,s+c,i-c,!0)):e.arc(r,o,n,s+K,i-K),e.closePath(),e.clip()}function mh(e){return ri(e,["outerStart","outerEnd","innerStart","innerEnd"])}function bh(e,t,s,i){const n=mh(e.options.borderRadius),r=(s-t)/2,o=Math.min(r,i*t/2),a=l=>{const c=(s-Math.min(r,l))*i/2;return lt(l,0,Math.min(r,c))};return{outerStart:a(n.outerStart),outerEnd:a(n.outerEnd),innerStart:lt(n.innerStart,0,o),innerEnd:lt(n.innerEnd,0,o)}}function Qt(e,t,s,i){return{x:s+e*Math.cos(t),y:i+e*Math.sin(t)}}function ls(e,t,s,i,n,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=t,u=Math.max(t.outerRadius+i+s-c,0),d=h>0?h+i+s+c:0;let f=0;const p=n-l;if(i){const C=h>0?h-i:0,R=u>0?u-i:0,V=(C+R)/2,st=V!==0?p*V/(V+i):p;f=(p-st)/2}const g=Math.max(.001,p*u-s/q)/u,b=(p-g)/2,x=l+b+f,y=n-b-f,{outerStart:_,outerEnd:v,innerStart:S,innerEnd:M}=bh(t,d,u,y-x),w=u-_,O=u-v,P=x+_/w,T=y-v/O,k=d+S,A=d+M,L=x+S/k,N=y-M/A;if(e.beginPath(),r){const C=(P+T)/2;if(e.arc(o,a,u,P,C),e.arc(o,a,u,C,T),v>0){const W=Qt(O,T,o,a);e.arc(W.x,W.y,v,T,y+K)}const R=Qt(A,y,o,a);if(e.lineTo(R.x,R.y),M>0){const W=Qt(A,N,o,a);e.arc(W.x,W.y,M,y+K,N+Math.PI)}const V=(y-M/d+(x+S/d))/2;if(e.arc(o,a,d,y-M/d,V,!0),e.arc(o,a,d,V,x+S/d,!0),S>0){const W=Qt(k,L,o,a);e.arc(W.x,W.y,S,L+Math.PI,x-K)}const st=Qt(w,x,o,a);if(e.lineTo(st.x,st.y),_>0){const W=Qt(w,P,o,a);e.arc(W.x,W.y,_,x-K,P)}}else{e.moveTo(o,a);const C=Math.cos(P)*u+o,R=Math.sin(P)*u+a;e.lineTo(C,R);const V=Math.cos(T)*u+o,st=Math.sin(T)*u+a;e.lineTo(V,st)}e.closePath()}function xh(e,t,s,i,n){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){ls(e,t,s,i,l,n);for(let c=0;c<r;++c)e.fill();isNaN(a)||(l=o+(a%X||X))}return ls(e,t,s,i,l,n),e.fill(),l}function yh(e,t,s,i,n){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:h,borderDash:u,borderDashOffset:d}=l,f=l.borderAlign==="inner";if(!c)return;e.setLineDash(u||[]),e.lineDashOffset=d,f?(e.lineWidth=c*2,e.lineJoin=h||"round"):(e.lineWidth=c,e.lineJoin=h||"bevel");let p=t.endAngle;if(r){ls(e,t,s,i,p,n);for(let g=0;g<r;++g)e.stroke();isNaN(a)||(p=o+(a%X||X))}f&&gh(e,t,p),r||(ls(e,t,s,i,p,n),e.stroke())}class we extends It{constructor(s){super();E(this,"circumference");E(this,"endAngle");E(this,"fullCircles");E(this,"innerRadius");E(this,"outerRadius");E(this,"pixelMargin");E(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,s&&Object.assign(this,s)}inRange(s,i,n){const r=this.getProps(["x","y"],n),{angle:o,distance:a}=Kn(r,{x:s,y:i}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),f=(this.options.spacing+this.options.borderWidth)/2,p=z(d,c-l),g=rs(o,l,c)&&l!==c,b=p>=X||g,x=ye(a,h+f,u+f);return b&&x}getCenterPoint(s){const{x:i,y:n,startAngle:r,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],s),{offset:c,spacing:h}=this.options,u=(r+o)/2,d=(a+l+h+c)/2;return{x:i+Math.cos(u)*d,y:n+Math.sin(u)*d}}tooltipPosition(s){return this.getCenterPoint(s)}draw(s){const{options:i,circumference:n}=this,r=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=n>X?Math.floor(n/X):0,n===0||this.innerRadius<0||this.outerRadius<0)return;s.save();const l=(this.startAngle+this.endAngle)/2;s.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min(q,n||0)),h=r*c;s.fillStyle=i.backgroundColor,s.strokeStyle=i.borderColor,xh(s,this,h,o,a),yh(s,this,h,o,a),s.restore()}}E(we,"id","arc"),E(we,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),E(we,"defaultRoutes",{backgroundColor:"backgroundColor"}),E(we,"descriptors",{_scriptable:!0,_indexable:s=>s!=="borderDash"});const pn=(e,t)=>{let{boxHeight:s=t,boxWidth:i=t}=e;return e.usePointStyle&&(s=Math.min(s,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:s,itemHeight:Math.max(t,s)}},_h=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class gn extends It{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,s,i){this.maxWidth=t,this.maxHeight=s,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let s=$(t.generateLabels,[this.chart],this)||[];t.filter&&(s=s.filter(i=>t.filter(i,this.chart.data))),t.sort&&(s=s.sort((i,n)=>t.sort(i,n,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:t,ctx:s}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,n=Z(i.font),r=n.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=pn(i,r);let c,h;s.font=n.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,n,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,s,i,n){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=n+a;let u=t;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-h;return this.legendItems.forEach((p,g)=>{const b=i+s/2+r.measureText(p.text).width;(g===0||c[c.length-1]+b+2*a>o)&&(u+=h,c[c.length-(g>0?0:1)]=0,f+=h,d++),l[g]={left:0,top:f,row:d,width:b,height:n},c[c.length-1]+=b+a}),u}_fitCols(t,s,i,n){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-t;let u=a,d=0,f=0,p=0,g=0;return this.legendItems.forEach((b,x)=>{const{itemWidth:y,itemHeight:_}=vh(i,s,r,b,n);x>0&&f+_+2*a>h&&(u+=d+a,c.push({width:d,height:f}),p+=d+a,g++,d=f=0),l[x]={left:p,top:f,col:g,width:y,height:_},d=Math.max(d,y),f+=_+a}),u+=d,c.push({width:d,height:f}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:i,labels:{padding:n},rtl:r}}=this,o=Jt(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Q(i,this.left+n,this.right-this.lineWidths[a]);for(const c of s)a!==c.row&&(a=c.row,l=Q(i,this.left+n,this.right-this.lineWidths[a])),c.top+=this.top+t+n,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+n}else{let a=0,l=Q(i,this.top+t+n,this.bottom-this.columnSizes[a].height);for(const c of s)c.col!==a&&(a=c.col,l=Q(i,this.top+t+n,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+n,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;ii(t,this),this._draw(),ni(t)}}_draw(){const{options:t,columnSizes:s,lineWidths:i,ctx:n}=this,{align:r,labels:o}=t,a=U.color,l=Jt(t.rtl,this.left,this.width),c=Z(o.font),{padding:h}=o,u=c.size,d=u/2;let f;this.drawTitle(),n.textAlign=l.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=c.string;const{boxWidth:p,boxHeight:g,itemHeight:b}=pn(o,u),x=function(M,w,O){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;n.save();const P=z(O.lineWidth,1);if(n.fillStyle=z(O.fillStyle,a),n.lineCap=z(O.lineCap,"butt"),n.lineDashOffset=z(O.lineDashOffset,0),n.lineJoin=z(O.lineJoin,"miter"),n.lineWidth=P,n.strokeStyle=z(O.strokeStyle,a),n.setLineDash(z(O.lineDash,[])),o.usePointStyle){const T={radius:g*Math.SQRT2/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:P},k=l.xPlus(M,p/2),A=w+d;sr(n,T,k,A,o.pointStyleWidth&&p)}else{const T=w+Math.max((u-g)/2,0),k=l.leftForLtr(M,p),A=Ce(O.borderRadius);n.beginPath(),Object.values(A).some(L=>L!==0)?js(n,{x:k,y:T,w:p,h:g,radius:A}):n.rect(k,T,p,g),n.fill(),P!==0&&n.stroke()}n.restore()},y=function(M,w,O){Ie(n,O.text,M,w+b/2,c,{strikethrough:O.hidden,textAlign:l.textAlign(O.textAlign)})},_=this.isHorizontal(),v=this._computeTitleHeight();_?f={x:Q(r,this.left+h,this.right-i[0]),y:this.top+h+v,line:0}:f={x:this.left+h,y:Q(r,this.top+v+h,this.bottom-s[0].height),line:0},lr(this.ctx,t.textDirection);const S=b+h;this.legendItems.forEach((M,w)=>{n.strokeStyle=M.fontColor,n.fillStyle=M.fontColor;const O=n.measureText(M.text).width,P=l.textAlign(M.textAlign||(M.textAlign=o.textAlign)),T=p+d+O;let k=f.x,A=f.y;l.setWidth(this.width),_?w>0&&k+T+h>this.right&&(A=f.y+=S,f.line++,k=f.x=Q(r,this.left+h,this.right-i[f.line])):w>0&&A+S>this.bottom&&(k=f.x=k+s[f.line].width+h,f.line++,A=f.y=Q(r,this.top+v+h,this.bottom-s[f.line].height));const L=l.x(k);if(x(L,A,M),k=rl(P,k+p+d,_?k+T:this.right,t.rtl),y(l.x(k),A,M),_)f.x+=T+h;else if(typeof M.text!="string"){const N=c.lineHeight;f.y+=vr(M,N)+h}else f.y+=S}),cr(this.ctx,t.textDirection)}drawTitle(){const t=this.options,s=t.title,i=Z(s.font),n=ht(s.padding);if(!s.display)return;const r=Jt(t.rtl,this.left,this.width),o=this.ctx,a=s.position,l=i.size/2,c=n.top+l;let h,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),h=this.top+c,u=Q(t.align,u,this.right-d);else{const p=this.columnSizes.reduce((g,b)=>Math.max(g,b.height),0);h=c+Q(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const f=Q(a,u,u+d);o.textAlign=r.textAlign(si(a)),o.textBaseline="middle",o.strokeStyle=s.color,o.fillStyle=s.color,o.font=i.string,Ie(o,s.text,f,h,i)}_computeTitleHeight(){const t=this.options.title,s=Z(t.font),i=ht(t.padding);return t.display?s.lineHeight+i.height:0}_getLegendItemAt(t,s){let i,n,r;if(ye(t,this.left,this.right)&&ye(s,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(n=r[i],ye(t,n.left,n.left+n.width)&&ye(s,n.top,n.top+n.height))return this.legendItems[i]}return null}handleEvent(t){const s=this.options;if(!Mh(t.type,s))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const n=this._hoveredItem,r=_h(n,i);n&&!r&&$(s.onLeave,[t,n,this],this),this._hoveredItem=i,i&&!r&&$(s.onHover,[t,i,this],this)}else i&&$(s.onClick,[t,i,this],this)}}function vh(e,t,s,i,n){const r=wh(i,e,t,s),o=Sh(n,i,t.lineHeight);return{itemWidth:r,itemHeight:o}}function wh(e,t,s,i){let n=e.text;return n&&typeof n!="string"&&(n=n.reduce((r,o)=>r.length>o.length?r:o)),t+s.size/2+i.measureText(n).width}function Sh(e,t,s){let i=e;return typeof t.text!="string"&&(i=vr(t,s)),i}function vr(e,t){const s=e.text?e.text.length:0;return t*s}function Mh(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var kh={id:"legend",_element:gn,start(e,t,s){const i=e.legend=new gn({ctx:e.ctx,options:s,chart:e});ct.configure(e,i,s),ct.addBox(e,i)},stop(e){ct.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,s){const i=e.legend;ct.configure(e,i,s),i.options=s},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,s){const i=t.datasetIndex,n=s.chart;n.isDatasetVisible(i)?(n.hide(i),t.hidden=!0):(n.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:s,pointStyle:i,textAlign:n,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(s?0:void 0),h=ht(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:n||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class wr extends It{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,s){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=s;const n=G(i.text)?i.text.length:1;this._padding=ht(i.padding);const r=n*Z(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:s,left:i,bottom:n,right:r,options:o}=this,a=o.align;let l=0,c,h,u;return this.isHorizontal()?(h=Q(a,i,r),u=s+t,c=r-i):(o.position==="left"?(h=i+t,u=Q(a,n,s),l=q*-.5):(h=r-t,u=Q(a,s,n),l=q*.5),c=n-s),{titleX:h,titleY:u,maxWidth:c,rotation:l}}draw(){const t=this.ctx,s=this.options;if(!s.display)return;const i=Z(s.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);Ie(t,s.text,0,0,i,{color:s.color,maxWidth:l,rotation:c,textAlign:si(s.align),textBaseline:"middle",translation:[o,a]})}}function Ah(e,t){const s=new wr({ctx:e.ctx,options:t,chart:e});ct.configure(e,s,t),ct.addBox(e,s),e.titleBlock=s}var Oh={id:"title",_element:wr,start(e,t,s){Ah(e,s)},stop(e){const t=e.titleBlock;ct.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,s){const i=e.titleBlock;ct.configure(e,i,s),i.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Se={average(e){if(!e.length)return!1;let t,s,i=new Set,n=0,r=0;for(t=0,s=e.length;t<s;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),n+=l.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:n/r}},nearest(e,t){if(!e.length)return!1;let s=t.x,i=t.y,n=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=Za(t,c);h<n&&(n=h,a=l)}}if(a){const l=a.tooltipPosition();s=l.x,i=l.y}return{x:s,y:i}}};function pt(e,t){return t&&(G(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function yt(e){return(typeof e=="string"||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Ch(e,t){const{element:s,datasetIndex:i,index:n}=t,r=e.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(n);return{chart:e,label:o,parsed:r.getParsed(n),raw:e.data.datasets[i].data[n],formattedValue:a,dataset:r.getDataset(),dataIndex:n,datasetIndex:i,element:s}}function mn(e,t){const s=e.chart.ctx,{body:i,footer:n,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=Z(t.bodyFont),c=Z(t.titleFont),h=Z(t.footerFont),u=r.length,d=n.length,f=i.length,p=ht(t.padding);let g=p.height,b=0,x=i.reduce((v,S)=>v+S.before.length+S.lines.length+S.after.length,0);if(x+=e.beforeBody.length+e.afterBody.length,u&&(g+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),x){const v=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*v+(x-f)*l.lineHeight+(x-1)*t.bodySpacing}d&&(g+=t.footerMarginTop+d*h.lineHeight+(d-1)*t.footerSpacing);let y=0;const _=function(v){b=Math.max(b,s.measureText(v).width+y)};return s.save(),s.font=c.string,j(e.title,_),s.font=l.string,j(e.beforeBody.concat(e.afterBody),_),y=t.displayColors?o+2+t.boxPadding:0,j(i,v=>{j(v.before,_),j(v.lines,_),j(v.after,_)}),y=0,s.font=h.string,j(e.footer,_),s.restore(),b+=p.width,{width:b,height:g}}function Th(e,t){const{y:s,height:i}=t;return s<i/2?"top":s>e.height-i/2?"bottom":"center"}function Eh(e,t,s,i){const{x:n,width:r}=i,o=s.caretSize+s.caretPadding;if(e==="left"&&n+r+o>t.width||e==="right"&&n-r-o<0)return!0}function Dh(e,t,s,i){const{x:n,width:r}=s,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return i==="center"?c=n<=(a+l)/2?"left":"right":n<=r/2?c="left":n>=o-r/2&&(c="right"),Eh(c,e,t,s)&&(c="center"),c}function bn(e,t,s){const i=s.yAlign||t.yAlign||Th(e,s);return{xAlign:s.xAlign||t.xAlign||Dh(e,t,s,i),yAlign:i}}function Ph(e,t){let{x:s,width:i}=e;return t==="right"?s-=i:t==="center"&&(s-=i/2),s}function Rh(e,t,s){let{y:i,height:n}=e;return t==="top"?i+=s:t==="bottom"?i-=n+s:i-=n/2,i}function xn(e,t,s,i){const{caretSize:n,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=s,c=n+r,{topLeft:h,topRight:u,bottomLeft:d,bottomRight:f}=Ce(o);let p=Ph(t,a);const g=Rh(t,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(h,d)+n:a==="right"&&(p+=Math.max(u,f)+n),{x:lt(p,0,i.width-t.width),y:lt(g,0,i.height-t.height)}}function Ke(e,t,s){const i=ht(s.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-i.right:e.x+i.left}function yn(e){return pt([],yt(e))}function Ih(e,t,s){return ce(e,{tooltip:t,tooltipItems:s,type:"tooltip"})}function _n(e,t){const s=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return s?e.override(s):e}const Sr={beforeTitle:bt,title(e){if(e.length>0){const t=e[0],s=t.chart.data.labels,i=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return s[t.dataIndex]}return""},afterTitle:bt,beforeBody:bt,beforeLabel:bt,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const s=e.formattedValue;return J(s)||(t+=s),t},labelColor(e){const s=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const s=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:bt,afterBody:bt,beforeFooter:bt,footer:bt,afterFooter:bt};function it(e,t,s,i){const n=e[t].call(s,i);return typeof n>"u"?Sr[t].call(s,i):n}class Ns extends It{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const s=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&s.options.animation&&i.animations,r=new hr(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=Ih(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,s){const{callbacks:i}=s,n=it(i,"beforeTitle",this,t),r=it(i,"title",this,t),o=it(i,"afterTitle",this,t);let a=[];return a=pt(a,yt(n)),a=pt(a,yt(r)),a=pt(a,yt(o)),a}getBeforeBody(t,s){return yn(it(s.callbacks,"beforeBody",this,t))}getBody(t,s){const{callbacks:i}=s,n=[];return j(t,r=>{const o={before:[],lines:[],after:[]},a=_n(i,r);pt(o.before,yt(it(a,"beforeLabel",this,r))),pt(o.lines,it(a,"label",this,r)),pt(o.after,yt(it(a,"afterLabel",this,r))),n.push(o)}),n}getAfterBody(t,s){return yn(it(s.callbacks,"afterBody",this,t))}getFooter(t,s){const{callbacks:i}=s,n=it(i,"beforeFooter",this,t),r=it(i,"footer",this,t),o=it(i,"afterFooter",this,t);let a=[];return a=pt(a,yt(n)),a=pt(a,yt(r)),a=pt(a,yt(o)),a}_createItems(t){const s=this._active,i=this.chart.data,n=[],r=[],o=[];let a=[],l,c;for(l=0,c=s.length;l<c;++l)a.push(Ch(this.chart,s[l]));return t.filter&&(a=a.filter((h,u,d)=>t.filter(h,u,d,i))),t.itemSort&&(a=a.sort((h,u)=>t.itemSort(h,u,i))),j(a,h=>{const u=_n(t.callbacks,h);n.push(it(u,"labelColor",this,h)),r.push(it(u,"labelPointStyle",this,h)),o.push(it(u,"labelTextColor",this,h))}),this.labelColors=n,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,s){const i=this.options.setContext(this.getContext()),n=this._active;let r,o=[];if(!n.length)this.opacity!==0&&(r={opacity:0});else{const a=Se[i.position].call(this,n,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=mn(this,i),c=Object.assign({},a,l),h=bn(this.chart,i,c),u=xn(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:u.x,y:u.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(t,s,i,n){const r=this.getCaretPosition(t,i,n);s.lineTo(r.x1,r.y1),s.lineTo(r.x2,r.y2),s.lineTo(r.x3,r.y3)}getCaretPosition(t,s,i){const{xAlign:n,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:u}=Ce(a),{x:d,y:f}=t,{width:p,height:g}=s;let b,x,y,_,v,S;return r==="center"?(v=f+g/2,n==="left"?(b=d,x=b-o,_=v+o,S=v-o):(b=d+p,x=b+o,_=v-o,S=v+o),y=b):(n==="left"?x=d+Math.max(l,h)+o:n==="right"?x=d+p-Math.max(c,u)-o:x=this.caretX,r==="top"?(_=f,v=_-o,b=x-o,y=x+o):(_=f+g,v=_+o,b=x+o,y=x-o),S=_),{x1:b,x2:x,x3:y,y1:_,y2:v,y3:S}}drawTitle(t,s,i){const n=this.title,r=n.length;let o,a,l;if(r){const c=Jt(i.rtl,this.x,this.width);for(t.x=Ke(this,i.titleAlign,i),s.textAlign=c.textAlign(i.titleAlign),s.textBaseline="middle",o=Z(i.titleFont),a=i.titleSpacing,s.fillStyle=i.titleColor,s.font=o.string,l=0;l<r;++l)s.fillText(n[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,s,i,n,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,h=Z(r.bodyFont),u=Ke(this,"left",r),d=n.x(u),f=l<h.lineHeight?(h.lineHeight-l)/2:0,p=s.y+f;if(r.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=n.leftForLtr(d,c)+c/2,x=p+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,ji(t,g,b,x),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,ji(t,g,b,x)}else{t.lineWidth=F(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const g=n.leftForLtr(d,c),b=n.leftForLtr(n.xPlus(d,1),c-2),x=Ce(o.borderRadius);Object.values(x).some(y=>y!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,js(t,{x:g,y:p,w:c,h:l,radius:x}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),js(t,{x:b,y:p+1,w:c-2,h:l-2,radius:x}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(g,p,c,l),t.strokeRect(g,p,c,l),t.fillStyle=o.backgroundColor,t.fillRect(b,p+1,c-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,s,i){const{body:n}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,u=Z(i.bodyFont);let d=u.lineHeight,f=0;const p=Jt(i.rtl,this.x,this.width),g=function(O){s.fillText(O,p.x(t.x+f),t.y+d/2),t.y+=d+r},b=p.textAlign(o);let x,y,_,v,S,M,w;for(s.textAlign=o,s.textBaseline="middle",s.font=u.string,t.x=Ke(this,b,i),s.fillStyle=i.bodyColor,j(this.beforeBody,g),f=a&&b!=="right"?o==="center"?c/2+h:c+2+h:0,v=0,M=n.length;v<M;++v){for(x=n[v],y=this.labelTextColors[v],s.fillStyle=y,j(x.before,g),_=x.lines,a&&_.length&&(this._drawColorBox(s,t,v,p,i),d=Math.max(u.lineHeight,l)),S=0,w=_.length;S<w;++S)g(_[S]),d=u.lineHeight;j(x.after,g)}f=0,d=u.lineHeight,j(this.afterBody,g),t.y-=r}drawFooter(t,s,i){const n=this.footer,r=n.length;let o,a;if(r){const l=Jt(i.rtl,this.x,this.width);for(t.x=Ke(this,i.footerAlign,i),t.y+=i.footerMarginTop,s.textAlign=l.textAlign(i.footerAlign),s.textBaseline="middle",o=Z(i.footerFont),s.fillStyle=i.footerColor,s.font=o.string,a=0;a<r;++a)s.fillText(n[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,s,i,n){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:h}=i,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:p}=Ce(n.cornerRadius);s.fillStyle=n.backgroundColor,s.strokeStyle=n.borderColor,s.lineWidth=n.borderWidth,s.beginPath(),s.moveTo(a+u,l),o==="top"&&this.drawCaret(t,s,i,n),s.lineTo(a+c-d,l),s.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&r==="right"&&this.drawCaret(t,s,i,n),s.lineTo(a+c,l+h-p),s.quadraticCurveTo(a+c,l+h,a+c-p,l+h),o==="bottom"&&this.drawCaret(t,s,i,n),s.lineTo(a+f,l+h),s.quadraticCurveTo(a,l+h,a,l+h-f),o==="center"&&r==="left"&&this.drawCaret(t,s,i,n),s.lineTo(a,l+u),s.quadraticCurveTo(a,l,a+u,l),s.closePath(),s.fill(),n.borderWidth>0&&s.stroke()}_updateAnimationTarget(t){const s=this.chart,i=this.$animations,n=i&&i.x,r=i&&i.y;if(n||r){const o=Se[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=mn(this,t),l=Object.assign({},o,this._size),c=bn(s,t,l),h=xn(t,l,c,s);(n._to!==h.x||r._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const s=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(s);const n={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=ht(s.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(r,t,n,s),lr(t,s.textDirection),r.y+=o.top,this.drawTitle(r,t,s),this.drawBody(r,t,s),this.drawFooter(r,t,s),cr(t,s.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,s){const i=this._active,n=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!ts(i,n),o=this._positionChanged(n,s);(r||o)&&(this._active=n,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,s,i=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,r=this._active||[],o=this._getActiveElements(t,r,s,i),a=this._positionChanged(o,t),l=s||!ts(o,r)||a;return l&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,s))),l}_getActiveElements(t,s,i,n){const r=this.options;if(t.type==="mouseout")return[];if(!n)return s.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(t,s){const{caretX:i,caretY:n,options:r}=this,o=Se[r.position].call(this,t,s);return o!==!1&&(i!==o.x||n!==o.y)}}E(Ns,"positioners",Se);var Fh={id:"tooltip",_element:Ns,positioners:Se,afterInit(e,t,s){s&&(e.tooltip=new Ns({chart:e,options:s}))},beforeUpdate(e,t,s){e.tooltip&&e.tooltip.initialize(s)},reset(e,t,s){e.tooltip&&e.tooltip.initialize(s)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const s={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",s)}},afterEvent(e,t){if(e.tooltip){const s=t.replay;e.tooltip.handleEvent(t.event,s,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Sr},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const xs={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},nt=Object.keys(xs);function vn(e,t){return e-t}function wn(e,t){if(J(t))return null;const s=e._adapter,{parser:i,round:n,isoWeekday:r}=e._parseOpts;let o=t;return typeof i=="function"&&(o=i(o)),Mt(o)||(o=typeof i=="string"?s.parse(o,i):s.parse(o)),o===null?null:(n&&(o=n==="week"&&(ns(r)||r===!0)?s.startOf(o,"isoWeek",r):s.startOf(o,n)),+o)}function Sn(e,t,s,i){const n=nt.length;for(let r=nt.indexOf(e);r<n-1;++r){const o=xs[nt[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((s-t)/(a*o.size))<=i)return nt[r]}return nt[n-1]}function Lh(e,t,s,i,n){for(let r=nt.length-1;r>=nt.indexOf(s);r--){const o=nt[r];if(xs[o].common&&e._adapter.diff(n,i,o)>=t-1)return o}return nt[s?nt.indexOf(s):0]}function jh(e){for(let t=nt.indexOf(e)+1,s=nt.length;t<s;++t)if(xs[nt[t]].common)return nt[t]}function Mn(e,t,s){if(!s)e[t]=!0;else if(s.length){const{lo:i,hi:n}=ei(s,t),r=s[i]>=t?s[i]:s[n];e[r]=!0}}function zh(e,t,s,i){const n=e._adapter,r=+n.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+n.add(a,1,i))l=s[a],l>=0&&(t[l].major=!0);return t}function kn(e,t,s){const i=[],n={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],n[a]=o,i.push({value:a,major:!1});return r===0||!s?i:zh(e,i,n,s)}class cs extends ms{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,s={}){const i=t.time||(t.time={}),n=this._adapter=new oc._date(t.adapters.date);n.init(s),ke(i.displayFormats,n.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=s.normalized}parse(t,s){return t===void 0?null:wn(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,s=this._adapter,i=t.time.unit||"day";let{min:n,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(n=Math.min(n,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),n=Mt(n)&&!isNaN(n)?n:+s.startOf(Date.now(),i),r=Mt(r)&&!isNaN(r)?r:+s.endOf(Date.now(),i)+1,this.min=Math.min(n,r-1),this.max=Math.max(n+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(s=t[0],i=t[t.length-1]),{min:s,max:i}}buildTicks(){const t=this.options,s=t.time,i=t.ticks,n=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const r=this.min,o=this.max,a=el(n,r,o);return this._unit=s.unit||(i.autoSkip?Sn(s.minUnit,this.min,this.max,this._getLabelCapacity(r)):Lh(this,a.length,s.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:jh(this._unit),this.initOffsets(n),t.reverse&&a.reverse(),kn(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let s=0,i=0,n,r;this.options.offset&&t.length&&(n=this.getDecimalForValue(t[0]),t.length===1?s=1-n:s=(this.getDecimalForValue(t[1])-n)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?i=r:i=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;s=lt(s,0,o),i=lt(i,0,o),this._offsets={start:s,end:i,factor:1/(s+1+i)}}_generate(){const t=this._adapter,s=this.min,i=this.max,n=this.options,r=n.time,o=r.unit||Sn(r.minUnit,s,i,this._getLabelCapacity(s)),a=z(n.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=ns(l)||l===!0,h={};let u=s,d,f;if(c&&(u=+t.startOf(u,"isoWeek",l)),u=+t.startOf(u,c?"day":o),t.diff(i,s,o)>1e5*a)throw new Error(s+" and "+i+" are too far apart with stepSize of "+a+" "+o);const p=n.ticks.source==="data"&&this.getDataTimestamps();for(d=u,f=0;d<i;d=+t.add(d,a,o),f++)Mn(h,d,p);return(d===i||n.bounds==="ticks"||f===1)&&Mn(h,d,p),Object.keys(h).sort(vn).map(g=>+g)}getLabelForValue(t){const s=this._adapter,i=this.options.time;return i.tooltipFormat?s.format(t,i.tooltipFormat):s.format(t,i.displayFormats.datetime)}format(t,s){const n=this.options.time.displayFormats,r=this._unit,o=s||n[r];return this._adapter.format(t,o)}_tickFormatFunction(t,s,i,n){const r=this.options,o=r.ticks.callback;if(o)return $(o,[t,s,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],u=c&&a[c],d=i[s],f=c&&u&&d&&d.major;return this._adapter.format(t,n||(f?u:h))}generateTickLabels(t){let s,i,n;for(s=0,i=t.length;s<i;++s)n=t[s],n.label=this._tickFormatFunction(n.value,s,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const s=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((s.start+i)*s.factor)}getValueForPixel(t){const s=this._offsets,i=this.getDecimalForPixel(t)/s.factor-s.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const s=this.options.ticks,i=this.ctx.measureText(t).width,n=Ht(this.isHorizontal()?s.maxRotation:s.minRotation),r=Math.cos(n),o=Math.sin(n),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(t){const s=this.options.time,i=s.displayFormats,n=i[s.unit]||i.millisecond,r=this._tickFormatFunction(t,0,kn(this,[t],this._majorUnit),n),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],s,i;if(t.length)return t;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(s=0,i=n.length;s<i;++s)t=t.concat(n[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let s,i;if(t.length)return t;const n=this.getLabels();for(s=0,i=n.length;s<i;++s)t.push(wn(this,n[s]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return il(t.sort(vn))}}E(cs,"id","time"),E(cs,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ge(e,t,s){let i=0,n=e.length-1,r,o,a,l;s?(t>=e[i].pos&&t<=e[n].pos&&({lo:i,hi:n}=Fs(e,"pos",t)),{pos:r,time:a}=e[i],{pos:o,time:l}=e[n]):(t>=e[i].time&&t<=e[n].time&&({lo:i,hi:n}=Fs(e,"time",t)),{time:r,pos:a}=e[i],{time:o,pos:l}=e[n]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class An extends cs{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(t);this._minPos=Ge(s,this.min),this._tableRange=Ge(s,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:s,max:i}=this,n=[],r=[];let o,a,l,c,h;for(o=0,a=t.length;o<a;++o)c=t[o],c>=s&&c<=i&&n.push(c);if(n.length<2)return[{time:s,pos:0},{time:i,pos:1}];for(o=0,a=n.length;o<a;++o)h=n[o+1],l=n[o-1],c=n[o],Math.round((h+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,s=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(s)||i.length===1)&&i.push(s),i.sort((n,r)=>n-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const s=this.getDataTimestamps(),i=this.getLabelTimestamps();return s.length&&i.length?t=this.normalize(s.concat(i)):t=s.length?s:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Ge(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const s=this._offsets,i=this.getDecimalForPixel(t)/s.factor-s.end;return Ge(this._table,i*this._tableRange+this._minPos,!0)}}E(An,"id","timeseries"),E(An,"defaults",cs.defaults);const Mr="label";function On(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Bh(e,t){const s=e.options;s&&t&&Object.assign(s,t)}function kr(e,t){e.labels=t}function Ar(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Mr;const i=[];e.datasets=t.map(n=>{const r=e.datasets.find(o=>o[s]===n[s]);return!r||!n.data||i.includes(r)?{...n}:(i.push(r),Object.assign(r,n),r)})}function Nh(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Mr;const s={labels:[],datasets:[]};return kr(s,e.labels),Ar(s,e.datasets,t),s}function Wh(e,t){const{height:s=150,width:i=300,redraw:n=!1,datasetIdKey:r,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:u,...d}=e,f=D.useRef(null),p=D.useRef(null),g=()=>{f.current&&(p.current=new bs(f.current,{type:o,data:Nh(a,r),options:l&&{...l},plugins:c}),On(t,p.current))},b=()=>{On(t,null),p.current&&(p.current.destroy(),p.current=null)};return D.useEffect(()=>{!n&&p.current&&l&&Bh(p.current,l)},[n,l]),D.useEffect(()=>{!n&&p.current&&kr(p.current.config.data,a.labels)},[n,a.labels]),D.useEffect(()=>{!n&&p.current&&a.datasets&&Ar(p.current.config.data,a.datasets,r)},[n,a.datasets]),D.useEffect(()=>{p.current&&(n?(b(),setTimeout(g)):p.current.update(u))},[n,l,a.labels,a.datasets,u]),D.useEffect(()=>{p.current&&(b(),setTimeout(g))},[o]),D.useEffect(()=>(g(),()=>b()),[]),Ws.createElement("canvas",{ref:f,role:"img",height:s,width:i,...d},h)}const $h=D.forwardRef(Wh);function Hh(e,t){return bs.register(t),D.forwardRef((s,i)=>Ws.createElement($h,{...s,ref:i,type:e}))}const Vh=Hh("doughnut",_e);class Yh{constructor(t,s,i){E(this,"parseData",()=>{var i;const t=[],s=[];for(const n of(i=this.columns)!=null?i:[]){if(this.parser&&Hs(n.field)){const o=this.parser.evaluate(n.field,this.data);t.push(o),s.push(n.legendLabel);continue}const r=vt(n.field,this.data);t.push(r),s.push(n.legendLabel)}return{dataValues:t,labelValues:s}});this.columns=t,this.data=s,this.parser=i}}bs.register(we,Fh,kh,Oh);const Uh=({data:e,formatterParams:t,parser:s})=>{const n=Lr().pathname.includes("print"),{dataValues:r,labelValues:o}=new Yh(t==null?void 0:t.fields,e,s).parseData(),a={labels:o!=null?o:[],datasets:[{data:r,backgroundColor:["rgba(54, 162, 235, 0.8)","rgba(255, 99, 132, 0.8)","rgba(255, 206, 86, 0.8)","rgba(75, 192, 192, 0.8)","rgba(207, 207, 207, 0.8)","rgba(153, 102, 255, 0.8)","rgba(255, 159, 64, 0.8)","rgba(0, 128, 128,0.8)","rgba(255, 0, 255,0.8)","rgba(139, 69, 19,0.8)","rgba(191, 255, 0,0.8)"],borderColor:["rgba(54, 162, 235, 1)","rgba(255, 99, 132, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(207, 207, 207, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(0, 128, 128,1)","rgba(255, 0, 255,1)","rgba(139, 69, 19,1)","rgba(191, 255, 0,1)"],borderWidth:2}]},l={animation:n?!1:{duration:1e3},layout:{padding:10},scales:{},plugins:{legend:{display:!0,position:"right",labels:{filter:(c,h)=>{var f;const u=c.index;return u===void 0?!1:((f=h.datasets[0])==null?void 0:f.data[u])!==0}},title:{display:!!(t!=null&&t.legendTitle),text:t==null?void 0:t.legendTitle}},tooltip:{enabled:!n,usePointStyle:!1}}};return m.jsx("div",{className:"pie-chart",style:{width:"100%",height:"100%"},children:m.jsx(Vh,{data:a,options:l})})},Ds=e=>{if(!e)throw new Error("Range property is missing");if(!e.includes(":"))throw new Error("Invalid format: missing colon separator");const[t,s]=e.split(":");if(!t||!s)throw new Error("Invalid format: missing start or end part");const i=t.split(",").map(Number),n=s.split(",").map(Number);if(i.length!==2||n.length!==2||i.some(isNaN)||n.some(isNaN))throw new Error("Invalid format: each part must contain two numbers");return{x1:i[0],y1:i[1],x2:n[0]+1,y2:n[1]+1}},Xh=({item:e,panels:t,showEdgebands:s=!0})=>{const n="visible",r=e.length,o=e.width,a=e.x,l=e.y,c=e.type?e.type:"",h=t.find(u=>u.name===e.name);return m.jsxs(m.Fragment,{children:[m.jsx("rect",{x:"".concat(a),y:"".concat(l),width:"".concat(r),height:"".concat(o),className:"cutting-pattern-StockSvg Hover-1 ".concat(n," ").concat(c)}),c!=="item"&&m.jsxs(m.Fragment,{children:[m.jsx("defs",{children:m.jsx("pattern",{id:"diagonalHatch",patternUnits:"userSpaceOnUse",width:"4",height:"20",patternTransform:"rotate(45 2 2)",children:m.jsx("path",{className:"cutting-pattern-hatching",d:"M -1,2 l 6,0"})})}),m.jsx("rect",{className:"".concat(n),x:"".concat(a),y:"".concat(l),width:"".concat(r),height:"".concat(o),stroke:"#000000",strokeWidth:"0",fill:"url(#diagonalHatch)"})]}),s&&(h==null?void 0:h.edgebands.map(u=>m.jsx(qh,{edgeband:u,x:a,y:l,length:r,width:o},Me())))]})},qh=({edgeband:e,x:t,y:s,length:i,width:n})=>{const r="var(--cutting-pattern-edgeband-color)",c={L:{x1:t+10,y1:s,x2:t+10,y2:s+n},R:{x1:t+i-10,y1:s,x2:t+i-10,y2:s+n},F:{x1:t,y1:s+10,x2:t+i,y2:s+10},B:{x1:t,y1:s+n-10,x2:t+i,y2:s+n-10}}[e.position];return c?m.jsx("line",{...c,stroke:r,strokeWidth:20}):null},Kh=({length:e,width:t,x:s,y:i,mirrorX:n,mirrorY:r})=>{const o=n?-50:-10,a=r?-50:-20,l=s+e/2,c=i+t+a,h=s+e+o,u=i+t/2;return m.jsx(m.Fragment,{children:m.jsxs("g",{className:"dimensions",children:[t>100&&m.jsx(m.Fragment,{children:m.jsx("text",{x:l,y:c,className:"cutting-pattern-text-dimension",textAnchor:"middle",alignmentBaseline:"baseline",transform:"translate(".concat(l,", ").concat(c,") scale(").concat(n?"-1":"1",", ").concat(r?"-1":"1",") translate(").concat(-1*l,", ").concat(-1*c,") "),children:e})}),e>100&&m.jsx(m.Fragment,{children:m.jsx("text",{x:h,y:u,className:"cutting-pattern-text-dimension",textAnchor:"middle",alignmentBaseline:"baseline",transform:"translate(".concat(h,", ").concat(u,") scale(").concat(n?"-1":"1",", ").concat(r?"-1":"1",") translate(").concat(-1*h,", ").concat(-1*u,") rotate(-90, ").concat(h,", ").concat(u,") "),children:t})})]})})},Gh=({name:e,length:t,width:s,x:i,y:n,mirrorX:r,mirrorY:o})=>{const a=i+t/2,l=n+s/2;return m.jsx(m.Fragment,{children:m.jsx("g",{className:"dimensions",children:m.jsx(m.Fragment,{children:m.jsx("text",{x:a,y:l,className:"cutting-pattern-text-dimension",textAnchor:"middle",alignmentBaseline:"baseline",transform:"translate(".concat(a,", ").concat(l,") scale(").concat(r?"-1":"1",", ").concat(o?"-1":"1",") translate(").concat(-1*a,", ").concat(-1*l,") "),children:e})})})})},Qh=(e,t,s)=>s&&Hs(t)?s.evaluate(t,e):vt(t,e),Zh=(e,t,s)=>{const i=s.find(r=>r.name===e);if(!i)return"";const n=new Hn;return Qh(i,t,n)},Jh=({data:e,settings:t})=>{const s=e.length,i=e.width,r={...{panelLabel:"id",showPanelLabel:!0,showWasteLabel:!0,showTrimLabel:!1,showPanelDimensions:!0,showWasteDimensions:!0,showTrimDimensions:!0,showEdgebands:!0,mirrorX:!1,mirrorY:!0,rotate:0},...t},o={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(".concat(e.stock.grain===1?r.rotate:r.rotate+90,"deg)"),width:e.stock.grain===1?"40%":"30%"};return m.jsxs("div",{style:{margin:"0px",width:"100%",height:"100%",position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},children:[m.jsx("svg",{className:"patterns rotations",style:{verticalAlign:"middle",width:"100%",height:"100%"},viewBox:"0 0 ".concat(s," ").concat(i),preserveAspectRatio:"xMidYMid meet",children:m.jsxs("g",{transform:"translate(".concat(s/2,", ").concat(i/2,")\n						rotate(").concat(r.rotate,")\n						scale(").concat(r.mirrorX?-1:1,", ").concat(r.mirrorY?-1:1,")\n						translate(").concat(-s/2,", ").concat(-i/2,")"),children:[m.jsx("rect",{x:"0",y:"0",width:s,height:i,className:"cutting-pattern-board"}),e.items.map(a=>m.jsx(Xh,{item:a,panels:e.panels,showEdgebands:r.showEdgebands},Me())),e.items.filter(a=>!(!r.showPanelDimensions&&a.type==="item"||!r.showWasteDimensions&&a.type==="waste"||!r.showTrimDimensions&&(a.type==="padding"||a.type==="trimming"))).map(a=>m.jsx(Kh,{length:a.length,width:a.width,x:a.x,y:a.y,type:a.type||"",mirrorX:r.mirrorX,mirrorY:r.mirrorY},Me())),e.items.filter(a=>!(!r.showPanelLabel&&a.type==="item"||!r.showWasteLabel&&a.type==="waste"||!r.showTrimLabel&&(a.type==="padding"||a.type==="trimming"))).map(a=>{const l=a.type==="item"?Zh(a.name,r.panelLabel,e.panels):a.name;return m.jsx(Gh,{name:l,length:a.length,width:a.width,x:a.x,y:a.y,type:a.type?a.type:"",mirrorX:r.mirrorX,mirrorY:r.mirrorY},Me())})]})}),e.stock.grain>0&&m.jsx("img",{className:"cutting-pattern-grainArrow",style:{...o},src:"assets/images/double-arrow.svg"})]})},Qe={padding:"var(--cutting-pattern-padding-color)",waste:"var(--cutting-pattern-waste-color)",panel:"var(--cutting-pattern-panel-color)",stock:"var(--cutting-pattern-stock-font-color)"},Cn=({item:e})=>{var t;if(!e)return m.jsx(m.Fragment,{children:"null"});switch(e.type){case"padding":return m.jsx("span",{style:{color:Qe.padding},children:"padding"});case"waste":return m.jsx("span",{style:{color:Qe.waste},children:"waste"});default:return m.jsx("span",{style:{color:e.name?Qe.panel:Qe.stock},children:(t=e.name)!=null?t:"stock"})}},tu=({direction:e})=>m.jsx(ut,{component:"img",src:"assets/images/double-arrow.svg",sx:{width:20,height:20,rotate:e==="V"?"90deg":"0deg"}}),eu=({item:e})=>e?e.type==="item"?m.jsx("span",{style:{paddingLeft:25}}):null:m.jsx(m.Fragment,{children:"null"}),su=({pattern:e})=>{let t=0;return m.jsxs(ut,{children:[m.jsx(et,{variant:"h6",gutterBottom:!0,children:"Cutting Order"}),m.jsx(ut,{sx:{maxHeight:300,width:500,overflow:"auto",paddingRight:1},children:e.cuts.map((s,i)=>!s.stockLeft&&!s.stockRight?null:(t++,m.jsxs(et,{sx:{display:"flex",alignItems:"center",gap:1,whiteSpace:"nowrap",mt:1},children:[m.jsx(eu,{item:s.stockLeft}),t,".",m.jsx(tu,{direction:s.cutDirection}),s.coordinate," => ",m.jsx(Cn,{item:s.stockLeft})," | ",m.jsx(Cn,{item:s.stockRight})]},i)))})]})},iu=({data:e,settings:t,displayOrder:s})=>m.jsxs(m.Fragment,{children:[m.jsx(Jh,{data:e,settings:t}),s&&m.jsx(su,{pattern:e})]}),Ct=({item:e})=>e.prefix?m.jsx("b",{children:e.prefix}):null,nu=({data:e,item:t,disableEdrawings:s=!1})=>{var g,b,x;const i=s?!1:((g=t.formatterParams)==null?void 0:g.edrawings)!=null,{isDarkMode:n}=jr(),r=vt((x=(b=t.formatterParams)==null?void 0:b.edrawings)!=null?x:"",e),o=ru(t.field,e),a=ou(t.field),l=vt(a,e),c=(l==null?void 0:l.objType)==="PANEL",[h,u]=D.useState(()=>{const y=localStorage.getItem("show-edrawings");return y!==null?JSON.parse(y):!0}),[d,f]=D.useState(h),p=()=>{u(y=>(y||f(!0),localStorage.setItem("show-edrawings",JSON.stringify(!y)),!y))};return m.jsxs(ut,{position:"relative",height:"100%",width:"100%",children:[i&&d&&m.jsx("iframe",{className:"no-print",src:r,style:{width:"100%",height:"100%",display:h?"block":"none"},title:"edrawings",sandbox:"allow-scripts allow-same-origin"}),m.jsx(ut,{className:"print-image",sx:{width:"100%",height:"100%",display:i&&h?"none":"block"},children:m.jsx(Fn,{value:o,data:e,isPanelImage:c})}),i&&m.jsx(ut,{position:"absolute",bottom:5,right:5,bgcolor:n?"black":"rgba(255,255,255,0.8)",borderRadius:1,className:"no-print",children:m.jsx(Ln,{control:m.jsx(jn,{checked:h,onChange:p,color:"primary"}),sx:{ml:2,mr:.5},label:"eDrawings",labelPlacement:"start"})}),m.jsx("style",{children:"\n				@media print {\n					iframe.no-print {\n						display: none !important;\n					}\n					.print-image {\n						display: block !important;\n					}\n				}\n				"})]})},ru=(e,t)=>{if(typeof e=="string"){const s=e.startsWith('"')||e.startsWith("'"),i=e.endsWith('"')||e.endsWith("'"),n=e[0]===e[e.length-1];if(s&&i&&n)return e.slice(1,-1)}return vt(e,t)},ou=e=>{const t=e.lastIndexOf(".");return t!==-1?e.substring(0,t):e},au=(e,t)=>{let s=typeof e=="number"?e:parseFloat(e),i="";const n=(t==null?void 0:t.decimal)||".",r=(t==null?void 0:t.thousand)||",",o=(t==null?void 0:t.negativeSign)||"-",a=(t==null?void 0:t.symbol)||"",l=!!(t!=null&&t.symbolAfter),c=typeof(t==null?void 0:t.precision)<"u"?t==null?void 0:t.precision:2;s<0&&(s=Math.abs(s),i=o);let h;h=c!==!1?s.toFixed(c):s,h=String(h).split(".");let u;u=h[0];const d=h.length>1?n+h[1]:"";if(r!==!1){const p=/(\d+)(\d{3})/;for(;p.test(u);)u=u.replace(p,"$1"+r+"$2")}let f;return f=u+d,i?(f="("+f+")",l?f+a:a+f):l?i+f+a:i+a+f},lu=e=>{const{integer:t,numerator:s,denominator:i}=e;return m.jsxs(m.Fragment,{children:[t!==0&&m.jsxs(m.Fragment,{children:[t," "]}),s!==0&&m.jsxs(m.Fragment,{children:[m.jsx("sup",{children:s}),"⁄",m.jsx("sub",{children:i})]})]})},cu=({value:e,item:t,maxFontSize:s,roundToNearest:i})=>{const n=D.useRef(null),[r,o]=D.useState(t.fontSize||s),a=Ur(e,i);return D.useEffect(()=>{const l=()=>{if(n.current){let c=r;for(n.current.style.fontSize="".concat(c,"px");(n.current.scrollWidth>n.current.clientWidth||n.current.scrollHeight>n.current.clientHeight)&&c>1;)c-=.5,n.current.style.fontSize="".concat(c,"px");o(c)}};t.wrapText||l()},[e,t.wrapText,r]),typeof e=="object"?m.jsx(m.Fragment,{}):m.jsx("div",{ref:n,style:{overflow:"hidden",textAlign:"center",fontSize:"".concat(r,"px"),whiteSpace:t.wrapText?"normal":"nowrap",display:"flex",alignItems:"flex-end",justifyContent:"left-end"},children:m.jsxs(et,{sx:{m:0,...t.sx},fontSize:r,children:[t.prefix&&m.jsx("b",{children:t.prefix}),typeof a=="number"&&a,typeof a!="number"&&"integer"in a&&lu(a)]})})},hu=({data:e,grid:t,parser:s,classLayout:i="react-grid-layout",classItem:n="react-grid-item"})=>{var f,p,g,b,x,y,_,v,S;const r=(f=ys.getInstance().dimensionProperties)!=null?f:[],o=(b=(g=(p=ys.getInstance().dataSettings)==null?void 0:p.units)==null?void 0:g.roundToNearest)!=null?b:1,a=(_=(y=(x=ys.getInstance().dataSettings)==null?void 0:x.units)==null?void 0:y.imperialFractions)!=null?_:!1,l=$s(),c=100,h=50,u=Math.max(...t.cells.map(({range:M})=>Ds(M).y2)),d=(M,w,O)=>{var V,st;const{x1:P,y1:T,x2:k,y2:A}=Ds(w.range),L=(A-T)*c,N=(k-P)*h,C=uu(M,w,s),R=(st=(V=w.fontSize)!=null?V:O.fontSize)!=null?st:15;switch(typeof w.formatter=="function"?"function":w.formatter){case"qrcode":return m.jsx(Jr,{contents:C,height:L,width:N});case"image":return m.jsx(nu,{data:M,item:w});case"barcode":return m.jsx(Zr,{value:C});case"edrawings":return m.jsx(ma,{data:M,item:w});case"pdf":{const W=w.field,At=W.substring(0,W.lastIndexOf(".")),Ot=vt(At,M);return Ot!=null&&Ot.exists?m.jsxs(et,{children:[m.jsx(Ct,{item:w}),m.jsx(Qr,{value:C})]}):null}case"link":return m.jsxs(et,{children:[m.jsx(Ct,{item:w}),m.jsx(xa,{value:C})]});case"tickCross":return m.jsxs(et,{children:[m.jsx(Ct,{item:w}),m.jsx(ga,{value:C,formatterParams:w.formatterParams})]});case"fixedText":return m.jsx(vs,{value:w.field,item:w,maxFontSize:R});case"edgingCode":{const W=Gr(M,w.formatterParams);return m.jsxs(et,{children:[m.jsx(Ct,{item:w}),W]})}case"trim":{const W=Kr(C,w.formatterParams);return m.jsxs(et,{children:[m.jsx(Ct,{item:w}),W]})}case"badge":return m.jsxs(et,{children:[m.jsx(Ct,{item:w}),m.jsx(qr,{value:C})]});case"list":return m.jsxs(et,{children:[m.jsx(Ct,{item:w}),Xr(C,w.formatterParams)]});case"function":if(typeof w.formatter=="function"){const W=w.formatter(l);return m.jsx(vs,{value:W,item:w,maxFontSize:R})}return null;case"chart":return m.jsx(Uh,{data:M,formatterParams:w.formatterParams,parser:s});case"pattern":return m.jsx(iu,{data:M,settings:w.formatterParams,displayOrder:!1});case"money":return m.jsxs(et,{children:[m.jsx(Ct,{item:w}),au(C,w.formatterParams)]});default:return typeof C=="number"&&a&&r.includes(w.field)?m.jsx(cu,{value:C,item:w,maxFontSize:R,roundToNearest:o}):m.jsx(vs,{value:C,item:w,maxFontSize:R})}};return m.jsx(zr,{variant:"outlined",className:i,sx:{padding:2,mb:2},children:m.jsx("div",{style:{display:"grid",gap:(v=t.gap)!=null?v:10,gridTemplateColumns:"repeat(12, 1fr)",gridTemplateRows:"repeat(".concat(u-1,", ").concat((S=t.cellHeight)!=null?S:50,"px)")},children:t.cells.map((M,w)=>{const{x1:O,y1:P,x2:T,y2:k}=Ds(M.range);return m.jsx("div",{className:n,style:{gridColumn:"".concat(O," / ").concat(T),gridRow:"".concat(P," / ").concat(k),padding:5},children:d(e,M,t)},w)})})})},uu=(e,t,s)=>Hs(t.field)?s==null?void 0:s.evaluate(t.field):vt(t.field,e),du=()=>{const{settings:e}=Br(),t=$s(),s=e.print.profiles,i=e.print.headers,n=s[0],r=i.find(a=>a.id===n.header.id),o=t.project;return r?m.jsx(ut,{className:"print-header",sx:{display:"none","@media print":{display:"flex",flexDirection:"row",flexWrap:"wrap"}},children:m.jsx(hu,{data:o,grid:r.grid,classLayout:"react-grid-layout-header",classItem:"react-grid-item-header"})}):m.jsx(m.Fragment,{children:"unable to find header"})};window.XLSX=to;const fu={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"50%",bgcolor:"white",boxShadow:24,p:4},xu=({data:e,settings:t,title:s,filter:i,resource:n=""})=>{var P,T;const[r,o]=D.useState(!1),[a,l]=D.useState(""),[c,h]=D.useState(Tn(t==null?void 0:t.splitBy)),[u,d]=D.useState(null),[f,p]=D.useState(e),[g,b]=D.useState(i),[x,y]=D.useState(null),_=D.useMemo(()=>Nr(k=>{l(k)},300),[l]),v=$s(),S=new Hn;for(const[k,A]of Object.entries(v))k.toLocaleLowerCase().includes("manager")||Array.isArray(A)&&S.registerData("root.".concat(k),A);D.useEffect(()=>{if(i){b(i);const A=new eo({dataSource:e}).getPredicate(i);y(A)}return()=>{b(void 0),y(null)}},[e,i]),D.useEffect(()=>{const k=so(e,t),A=io(e,a,x,k);if(p(A),c){const L=no(A,c.field,c.emptyValue,c.value);d(L)}else d(null)},[e,a,x,c,i,t]);const M=()=>o(!0),w=(k,A)=>{A!=="backdropClick"&&o(!1)},O=D.useCallback(k=>{var L,N;const A=(N=(L=t==null?void 0:t.splitBy)==null?void 0:L.find(C=>C.field===k))!=null?N:null;h(A),k===null&&d(null)},[]);return m.jsxs(m.Fragment,{children:[m.jsx(du,{title:s}),s&&m.jsx(et,{variant:"h1",className:"section-title no-print",sx:{marginBottom:2},children:s}),m.jsxs(Wr,{direction:"row",mb:1,className:"no-print",alignItems:"center",children:[m.jsx(ro,{setFilter:_}),m.jsx(In,{onClick:M,"aria-label":"filter data",color:g?"error":"primary",children:m.jsx(oo,{})}),(t==null?void 0:t.splitBy)&&m.jsx(ao,{splitBy:(P=t.splitBy)!=null?P:[],handleToggle:k=>O(k),defaultValue:(T=Tn(t.splitBy))==null?void 0:T.field})]}),m.jsx($r,{open:r,onClose:w,className:"no-print",children:m.jsx(ut,{sx:fu,children:m.jsx(lo,{data:e,rules:g,setOpen:o,setFilteredData:(k,A,L)=>{b(A),y(L)}})})}),!u&&m.jsx(fi,{data:f,settings:t,header:t==null?void 0:t.title,parser:S,search:!1,resource:n,displayResults:!0}),u&&Array.from(u.entries()).map(([,k])=>m.jsxs(Ws.Fragment,{children:[m.jsx(fi,{data:k.items,settings:t,parser:S,header:k.groupLabel?k.groupLabel.toString():"",resource:n,parentKey:k.parentKey,displayResults:!0},k.groupLabel?k.groupLabel.toString():""),m.jsx("br",{})]},Me()))]})},Tn=e=>{var t;return(t=e==null?void 0:e.find(s=>s.default))!=null?t:null};export{Hn as E,hu as G,du as P,xu as T};
